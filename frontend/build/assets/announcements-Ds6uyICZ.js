import{aV as s,aW as w}from"./index-DWRYxHrI.js";const y=async(e,o,r)=>{const m=/(<img[^>]+src=")([^">]+)"/g,c=Array.from(r.matchAll(m)),p=c.map(async t=>{const n=t[2];return n.startsWith("https://")?n.split("/").at(-2):w(n)}),i=await Promise.all(p),l=c.map((t,n)=>{const g=`https://imagedelivery.net/ICo2WI8PXO_BVRlWfwzOww/${i[n]}/Announcements`;return{original:t[0],replacement:`${t[1]}${g}"`}});let a=r;for(const{original:t,replacement:n}of l)a=a.replace(t,n);const u=/<iframe\s+[^>]*>/i.test(a);try{await s.put(e?`/api/announcements/announcement/${e}`:"/api/announcements/announcement",{title:o,body:a,images:i,video:u?1:0})}catch{throw new Error}},A=async e=>{try{await s.delete(`/api/announcements/announcement/${e}`)}catch{throw new Error}},I=async(e,o)=>{try{await s.put(`/api/announcements/announcement/${e}/pin`,{pin:o?0:1})}catch{throw new Error}};export{y as a,A as d,I as p};
