import{a as ot,g as at,s as Le,d as ge,m as De,r as X,u as st,j as _e,c as lt,b as ft,D as St,n as Q,k as Me,J as xt,B as qe,F as Xe,K as Ft,ap as Ct,a2 as Et,T as Ye,E as ct,y as Mt,z as Rt,aq as _t,a3 as Pt,ar as Lt}from"./index-Dwj7peSb.js";import{A as Tt}from"./Add-Bx0OgEs9.js";import{I as kt,u as Dt,a as Ot}from"./ImagePreviews-BFaNRnNz.js";import{F as Bt,A as Ht}from"./AdminComponent-DID4qE_L.js";import{B as Wt,A as zt,j as Nt,L as Qt}from"./ButtonDatePicker-DHlK8yQZ.js";import{F as jt}from"./FileUploadComponent-COEch6tD.js";import{C as Ke}from"./CircularProgress-CcMbAy8M.js";import{I as nt,a as $t}from"./ImageListItem-C7z5NW7v.js";import{u as Gt}from"./index-DzAaGmuo.js";import{S as rt}from"./Stack-CaZpkoUK.js";import"./useThemeProps-BR2LznMY.js";import"./Popper-_TSd6uww.js";import"./ListItem-BoLOz8bM.js";function qt(U){return ot("MuiListSubheader",U)}at("MuiListSubheader",["root","colorPrimary","colorInherit","gutters","inset","sticky"]);const Yt=U=>{const{classes:I,color:R,disableGutters:f,inset:e,disableSticky:t}=U,l={root:["root",R!=="default"&&`color${ge(R)}`,!f&&"gutters",e&&"inset",!t&&"sticky"]};return ft(l,qt,I)},Kt=Le("li",{name:"MuiListSubheader",slot:"Root",overridesResolver:(U,I)=>{const{ownerState:R}=U;return[I.root,R.color!=="default"&&I[`color${ge(R.color)}`],!R.disableGutters&&I.gutters,R.inset&&I.inset,!R.disableSticky&&I.sticky]}})(De(({theme:U})=>({boxSizing:"border-box",lineHeight:"48px",listStyle:"none",color:(U.vars||U).palette.text.secondary,fontFamily:U.typography.fontFamily,fontWeight:U.typography.fontWeightMedium,fontSize:U.typography.pxToRem(14),variants:[{props:{color:"primary"},style:{color:(U.vars||U).palette.primary.main}},{props:{color:"inherit"},style:{color:"inherit"}},{props:({ownerState:I})=>!I.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:I})=>I.inset,style:{paddingLeft:72}},{props:({ownerState:I})=>!I.disableSticky,style:{position:"sticky",top:0,zIndex:1,backgroundColor:(U.vars||U).palette.background.paper}}]}))),Ze=X.forwardRef(function(I,R){const f=st({props:I,name:"MuiListSubheader"}),{className:e,color:t="default",component:l="li",disableGutters:o=!1,disableSticky:p=!1,inset:v=!1,...r}=f,i={...f,color:t,component:l,disableGutters:o,disableSticky:p,inset:v},n=Yt(i);return _e.jsx(Kt,{as:l,className:lt(n.root,e),ref:R,ownerState:i,...r})});Ze&&(Ze.muiSkipListHighlight=!0);function Zt(U){return ot("MuiImageListItemBar",U)}at("MuiImageListItemBar",["root","positionBottom","positionTop","positionBelow","actionPositionLeft","actionPositionRight","titleWrap","titleWrapBottom","titleWrapTop","titleWrapBelow","titleWrapActionPosLeft","titleWrapActionPosRight","title","subtitle","actionIcon","actionIconActionPosLeft","actionIconActionPosRight"]);const Xt=U=>{const{classes:I,position:R,actionIcon:f,actionPosition:e}=U,t={root:["root",`position${ge(R)}`,`actionPosition${ge(e)}`],titleWrap:["titleWrap",`titleWrap${ge(R)}`,f&&`titleWrapActionPos${ge(e)}`],title:["title"],subtitle:["subtitle"],actionIcon:["actionIcon",`actionIconActionPos${ge(e)}`]};return ft(t,Zt,I)},Vt=Le("div",{name:"MuiImageListItemBar",slot:"Root",overridesResolver:(U,I)=>{const{ownerState:R}=U;return[I.root,I[`position${ge(R.position)}`]]}})(De(({theme:U})=>({position:"absolute",left:0,right:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",fontFamily:U.typography.fontFamily,variants:[{props:{position:"bottom"},style:{bottom:0}},{props:{position:"top"},style:{top:0}},{props:{position:"below"},style:{position:"relative",background:"transparent",alignItems:"normal"}}]}))),Jt=Le("div",{name:"MuiImageListItemBar",slot:"TitleWrap",overridesResolver:(U,I)=>{const{ownerState:R}=U;return[I.titleWrap,I[`titleWrap${ge(R.position)}`],R.actionIcon&&I[`titleWrapActionPos${ge(R.actionPosition)}`]]}})(De(({theme:U})=>({flexGrow:1,padding:"12px 16px",color:(U.vars||U).palette.common.white,overflow:"hidden",variants:[{props:{position:"below"},style:{padding:"6px 0 12px",color:"inherit"}},{props:({ownerState:I})=>I.actionIcon&&I.actionPosition==="left",style:{paddingLeft:0}},{props:({ownerState:I})=>I.actionIcon&&I.actionPosition==="right",style:{paddingRight:0}}]}))),en=Le("div",{name:"MuiImageListItemBar",slot:"Title",overridesResolver:(U,I)=>I.title})(De(({theme:U})=>({fontSize:U.typography.pxToRem(16),lineHeight:"24px",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}))),tn=Le("div",{name:"MuiImageListItemBar",slot:"Subtitle",overridesResolver:(U,I)=>I.subtitle})(De(({theme:U})=>({fontSize:U.typography.pxToRem(12),lineHeight:1,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}))),nn=Le("div",{name:"MuiImageListItemBar",slot:"ActionIcon",overridesResolver:(U,I)=>{const{ownerState:R}=U;return[I.actionIcon,I[`actionIconActionPos${ge(R.actionPosition)}`]]}})({variants:[{props:{actionPosition:"left"},style:{order:-1}}]}),rn=X.forwardRef(function(I,R){const f=st({props:I,name:"MuiImageListItemBar"}),{actionIcon:e,actionPosition:t="right",className:l,subtitle:o,title:p,position:v="bottom",...r}=f,i={...f,position:v,actionPosition:t},n=Xt(i);return _e.jsxs(Vt,{ownerState:i,className:lt(n.root,l),ref:R,...r,children:[_e.jsxs(Jt,{ownerState:i,className:n.titleWrap,children:[_e.jsx(en,{className:n.title,children:p}),o?_e.jsx(tn,{className:n.subtitle,children:o}):null]}),e?_e.jsx(nn,{ownerState:i,className:n.actionIcon,children:e}):null]})});function on(U,I){return I.forEach(function(R){R&&typeof R!="string"&&!Array.isArray(R)&&Object.keys(R).forEach(function(f){if(f!=="default"&&!(f in U)){var e=Object.getOwnPropertyDescriptor(R,f);Object.defineProperty(U,f,e.get?e:{enumerable:!0,get:function(){return R[f]}})}})}),Object.freeze(U)}function ut(U,I){return new Promise(function(R,f){let e;return an(U).then(function(t){try{return e=t,R(new Blob([I.slice(0,2),e,I.slice(2)],{type:"image/jpeg"}))}catch(l){return f(l)}},f)})}const an=U=>new Promise((I,R)=>{const f=new FileReader;f.addEventListener("load",({target:{result:e}})=>{const t=new DataView(e);let l=0;if(t.getUint16(l)!==65496)return R("not a valid JPEG");for(l+=2;;){const o=t.getUint16(l);if(o===65498)break;const p=t.getUint16(l+2);if(o===65505&&t.getUint32(l+4)===1165519206){const v=l+10;let r;switch(t.getUint16(v)){case 18761:r=!0;break;case 19789:r=!1;break;default:return R("TIFF header contains invalid endian")}if(t.getUint16(v+2,r)!==42)return R("TIFF header contains invalid version");const i=t.getUint32(v+4,r),n=v+i+2+12*t.getUint16(v+i,r);for(let s=v+i+2;s<n;s+=12)if(t.getUint16(s,r)==274){if(t.getUint16(s+2,r)!==3)return R("Orientation data type is invalid");if(t.getUint32(s+4,r)!==1)return R("Orientation data count is invalid");t.setUint16(s+8,1,r);break}return I(e.slice(l,l+2+p))}l+=2+p}return I(new Blob)}),f.readAsArrayBuffer(U)});var He={},sn={get exports(){return He},set exports(U){He=U}};(function(U){var I,R,f={};sn.exports=f,f.parse=function(e,t){for(var l=f.bin.readUshort,o=f.bin.readUint,p=0,v={},r=new Uint8Array(e),i=r.length-4;o(r,i)!=101010256;)i--;p=i,p+=4;var n=l(r,p+=4);l(r,p+=2);var s=o(r,p+=2),h=o(r,p+=4);p+=4,p=h;for(var S=0;S<n;S++){o(r,p),p+=4,p+=4,p+=4,o(r,p+=4),s=o(r,p+=4);var E=o(r,p+=4),m=l(r,p+=4),O=l(r,p+2),L=l(r,p+4);p+=6;var F=o(r,p+=8);p+=4,p+=m+O+L,f._readLocal(r,F,v,s,E,t)}return v},f._readLocal=function(e,t,l,o,p,v){var r=f.bin.readUshort,i=f.bin.readUint;i(e,t),r(e,t+=4),r(e,t+=2);var n=r(e,t+=2);i(e,t+=2),i(e,t+=4),t+=4;var s=r(e,t+=8),h=r(e,t+=2);t+=2;var S=f.bin.readUTF8(e,t,s);if(t+=s,t+=h,v)l[S]={size:p,csize:o};else{var E=new Uint8Array(e.buffer,t);if(n==0)l[S]=new Uint8Array(E.buffer.slice(t,t+o));else{if(n!=8)throw"unknown compression method: "+n;var m=new Uint8Array(p);f.inflateRaw(E,m),l[S]=m}}},f.inflateRaw=function(e,t){return f.F.inflate(e,t)},f.inflate=function(e,t){return e[0],e[1],f.inflateRaw(new Uint8Array(e.buffer,e.byteOffset+2,e.length-6),t)},f.deflate=function(e,t){t==null&&(t={level:6});var l=0,o=new Uint8Array(50+Math.floor(1.1*e.length));o[l]=120,o[l+1]=156,l+=2,l=f.F.deflateRaw(e,o,l,t.level);var p=f.adler(e,0,e.length);return o[l+0]=p>>>24&255,o[l+1]=p>>>16&255,o[l+2]=p>>>8&255,o[l+3]=p>>>0&255,new Uint8Array(o.buffer,0,l+4)},f.deflateRaw=function(e,t){t==null&&(t={level:6});var l=new Uint8Array(50+Math.floor(1.1*e.length)),o=f.F.deflateRaw(e,l,o,t.level);return new Uint8Array(l.buffer,0,o)},f.encode=function(e,t){t==null&&(t=!1);var l=0,o=f.bin.writeUint,p=f.bin.writeUshort,v={};for(var r in e){var i=!f._noNeed(r)&&!t,n=e[r],s=f.crc.crc(n,0,n.length);v[r]={cpr:i,usize:n.length,crc:s,file:i?f.deflateRaw(n):n}}for(var r in v)l+=v[r].file.length+30+46+2*f.bin.sizeUTF8(r);l+=22;var h=new Uint8Array(l),S=0,E=[];for(var r in v){var m=v[r];E.push(S),S=f._writeHeader(h,S,r,m,0)}var O=0,L=S;for(var r in v)m=v[r],E.push(S),S=f._writeHeader(h,S,r,m,1,E[O++]);var F=S-L;return o(h,S,101010256),S+=4,p(h,S+=4,O),p(h,S+=2,O),o(h,S+=2,F),o(h,S+=4,L),S+=4,S+=2,h.buffer},f._noNeed=function(e){var t=e.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(t)!=-1},f._writeHeader=function(e,t,l,o,p,v){var r=f.bin.writeUint,i=f.bin.writeUshort,n=o.file;return r(e,t,p==0?67324752:33639248),t+=4,p==1&&(t+=2),i(e,t,20),i(e,t+=2,0),i(e,t+=2,o.cpr?8:0),r(e,t+=2,0),r(e,t+=4,o.crc),r(e,t+=4,n.length),r(e,t+=4,o.usize),i(e,t+=4,f.bin.sizeUTF8(l)),i(e,t+=2,0),t+=2,p==1&&(t+=2,t+=2,r(e,t+=6,v),t+=4),t+=f.bin.writeUTF8(e,t,l),p==0&&(e.set(n,t),t+=n.length),t},f.crc={table:function(){for(var e=new Uint32Array(256),t=0;t<256;t++){for(var l=t,o=0;o<8;o++)1&l?l=3988292384^l>>>1:l>>>=1;e[t]=l}return e}(),update:function(e,t,l,o){for(var p=0;p<o;p++)e=f.crc.table[255&(e^t[l+p])]^e>>>8;return e},crc:function(e,t,l){return 4294967295^f.crc.update(4294967295,e,t,l)}},f.adler=function(e,t,l){for(var o=1,p=0,v=t,r=t+l;v<r;){for(var i=Math.min(v+5552,r);v<i;)p+=o+=e[v++];o%=65521,p%=65521}return p<<16|o},f.bin={readUshort:function(e,t){return e[t]|e[t+1]<<8},writeUshort:function(e,t,l){e[t]=255&l,e[t+1]=l>>8&255},readUint:function(e,t){return 16777216*e[t+3]+(e[t+2]<<16|e[t+1]<<8|e[t])},writeUint:function(e,t,l){e[t]=255&l,e[t+1]=l>>8&255,e[t+2]=l>>16&255,e[t+3]=l>>24&255},readASCII:function(e,t,l){for(var o="",p=0;p<l;p++)o+=String.fromCharCode(e[t+p]);return o},writeASCII:function(e,t,l){for(var o=0;o<l.length;o++)e[t+o]=l.charCodeAt(o)},pad:function(e){return e.length<2?"0"+e:e},readUTF8:function(e,t,l){for(var o,p="",v=0;v<l;v++)p+="%"+f.bin.pad(e[t+v].toString(16));try{o=decodeURIComponent(p)}catch{return f.bin.readASCII(e,t,l)}return o},writeUTF8:function(e,t,l){for(var o=l.length,p=0,v=0;v<o;v++){var r=l.charCodeAt(v);if(!(4294967168&r))e[t+p]=r,p++;else if(!(4294965248&r))e[t+p]=192|r>>6,e[t+p+1]=128|r>>0&63,p+=2;else if(!(4294901760&r))e[t+p]=224|r>>12,e[t+p+1]=128|r>>6&63,e[t+p+2]=128|r>>0&63,p+=3;else{if(4292870144&r)throw"e";e[t+p]=240|r>>18,e[t+p+1]=128|r>>12&63,e[t+p+2]=128|r>>6&63,e[t+p+3]=128|r>>0&63,p+=4}}return p},sizeUTF8:function(e){for(var t=e.length,l=0,o=0;o<t;o++){var p=e.charCodeAt(o);if(!(4294967168&p))l++;else if(!(4294965248&p))l+=2;else if(!(4294901760&p))l+=3;else{if(4292870144&p)throw"e";l+=4}}return l}},f.F={},f.F.deflateRaw=function(e,t,l,o){var p=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][o],v=f.F.U,r=f.F._goodIndex;f.F._hash;var i=f.F._putsE,n=0,s=l<<3,h=0,S=e.length;if(o==0){for(;n<S;)i(t,s,n+(A=Math.min(65535,S-n))==S?1:0),s=f.F._copyExact(e,n,A,t,s+8),n+=A;return s>>>3}var E=v.lits,m=v.strt,O=v.prev,L=0,F=0,T=0,g=0,P=0,u=0;for(S>2&&(m[u=f.F._hash(e,0)]=0),n=0;n<S;n++){if(P=u,n+1<S-2){u=f.F._hash(e,n+1);var c=n+1&32767;O[c]=m[u],m[u]=c}if(h<=n){(L>14e3||F>26697)&&S-n>100&&(h<n&&(E[L]=n-h,L+=2,h=n),s=f.F._writeBlock(n==S-1||h==S?1:0,E,L,g,e,T,n-T,t,s),L=F=g=0,T=n);var y=0;n<S-2&&(y=f.F._bestMatch(e,n,O,P,Math.min(p[2],S-n),p[3]));var A=y>>>16,w=65535&y;if(y!=0){w=65535&y;var x=r(A=y>>>16,v.of0);v.lhst[257+x]++;var b=r(w,v.df0);v.dhst[b]++,g+=v.exb[x]+v.dxb[b],E[L]=A<<23|n-h,E[L+1]=w<<16|x<<8|b,L+=2,h=n+A}else v.lhst[e[n]]++;F++}}for(T==n&&e.length!=0||(h<n&&(E[L]=n-h,L+=2,h=n),s=f.F._writeBlock(1,E,L,g,e,T,n-T,t,s),L=0,F=0,L=F=g=0,T=n);7&s;)s++;return s>>>3},f.F._bestMatch=function(e,t,l,o,p,v){var r=32767&t,i=l[r],n=r-i+32768&32767;if(i==r||o!=f.F._hash(e,t-n))return 0;for(var s=0,h=0,S=Math.min(32767,t);n<=S&&--v!=0&&i!=r;){if(s==0||e[t+s]==e[t+s-n]){var E=f.F._howLong(e,t,n);if(E>s){if(h=n,(s=E)>=p)break;n+2<E&&(E=n+2);for(var m=0,O=0;O<E-2;O++){var L=t-n+O+32768&32767,F=L-l[L]+32768&32767;F>m&&(m=F,i=L)}}}n+=(r=i)-(i=l[r])+32768&32767}return s<<16|h},f.F._howLong=function(e,t,l){if(e[t]!=e[t-l]||e[t+1]!=e[t+1-l]||e[t+2]!=e[t+2-l])return 0;var o=t,p=Math.min(e.length,t+258);for(t+=3;t<p&&e[t]==e[t-l];)t++;return t-o},f.F._hash=function(e,t){return(e[t]<<8|e[t+1])+(e[t+2]<<4)&65535},f.saved=0,f.F._writeBlock=function(e,t,l,o,p,v,r,i,n){var s,h,S,E,m,O,L,F,T,g=f.F.U,P=f.F._putsF,u=f.F._putsE;g.lhst[256]++,h=(s=f.F.getTrees())[0],S=s[1],E=s[2],m=s[3],O=s[4],L=s[5],F=s[6],T=s[7];var c=32+(n+3&7?8-(n+3&7):0)+(r<<3),y=o+f.F.contSize(g.fltree,g.lhst)+f.F.contSize(g.fdtree,g.dhst),A=o+f.F.contSize(g.ltree,g.lhst)+f.F.contSize(g.dtree,g.dhst);A+=14+3*L+f.F.contSize(g.itree,g.ihst)+(2*g.ihst[16]+3*g.ihst[17]+7*g.ihst[18]);for(var w=0;w<286;w++)g.lhst[w]=0;for(w=0;w<30;w++)g.dhst[w]=0;for(w=0;w<19;w++)g.ihst[w]=0;var x=c<y&&c<A?0:y<A?1:2;if(P(i,n,e),P(i,n+1,x),n+=3,x==0){for(;7&n;)n++;n=f.F._copyExact(p,v,r,i,n)}else{var b,M;if(x==1&&(b=g.fltree,M=g.fdtree),x==2){f.F.makeCodes(g.ltree,h),f.F.revCodes(g.ltree,h),f.F.makeCodes(g.dtree,S),f.F.revCodes(g.dtree,S),f.F.makeCodes(g.itree,E),f.F.revCodes(g.itree,E),b=g.ltree,M=g.dtree,u(i,n,m-257),u(i,n+=5,O-1),u(i,n+=5,L-4),n+=4;for(var d=0;d<L;d++)u(i,n+3*d,g.itree[1+(g.ordr[d]<<1)]);n+=3*L,n=f.F._codeTiny(F,g.itree,i,n),n=f.F._codeTiny(T,g.itree,i,n)}for(var a=v,k=0;k<l;k+=2){for(var C=t[k],D=C>>>23,z=a+(8388607&C);a<z;)n=f.F._writeLit(p[a++],b,i,n);if(D!=0){var H=t[k+1],W=H>>16,B=H>>8&255,_=255&H;u(i,n=f.F._writeLit(257+B,b,i,n),D-g.of0[B]),n+=g.exb[B],P(i,n=f.F._writeLit(_,M,i,n),W-g.df0[_]),n+=g.dxb[_],a+=D}}n=f.F._writeLit(256,b,i,n)}return n},f.F._copyExact=function(e,t,l,o,p){var v=p>>>3;return o[v]=l,o[v+1]=l>>>8,o[v+2]=255-o[v],o[v+3]=255-o[v+1],v+=4,o.set(new Uint8Array(e.buffer,t,l),v),p+(l+4<<3)},f.F.getTrees=function(){for(var e=f.F.U,t=f.F._hufTree(e.lhst,e.ltree,15),l=f.F._hufTree(e.dhst,e.dtree,15),o=[],p=f.F._lenCodes(e.ltree,o),v=[],r=f.F._lenCodes(e.dtree,v),i=0;i<o.length;i+=2)e.ihst[o[i]]++;for(i=0;i<v.length;i+=2)e.ihst[v[i]]++;for(var n=f.F._hufTree(e.ihst,e.itree,7),s=19;s>4&&e.itree[1+(e.ordr[s-1]<<1)]==0;)s--;return[t,l,n,p,r,s,o,v]},f.F.getSecond=function(e){for(var t=[],l=0;l<e.length;l+=2)t.push(e[l+1]);return t},f.F.nonZero=function(e){for(var t="",l=0;l<e.length;l+=2)e[l+1]!=0&&(t+=(l>>1)+",");return t},f.F.contSize=function(e,t){for(var l=0,o=0;o<t.length;o++)l+=t[o]*e[1+(o<<1)];return l},f.F._codeTiny=function(e,t,l,o){for(var p=0;p<e.length;p+=2){var v=e[p],r=e[p+1];o=f.F._writeLit(v,t,l,o);var i=v==16?2:v==17?3:7;v>15&&(f.F._putsE(l,o,r,i),o+=i)}return o},f.F._lenCodes=function(e,t){for(var l=e.length;l!=2&&e[l-1]==0;)l-=2;for(var o=0;o<l;o+=2){var p=e[o+1],v=o+3<l?e[o+3]:-1,r=o+5<l?e[o+5]:-1,i=o==0?-1:e[o-1];if(p==0&&v==p&&r==p){for(var n=o+5;n+2<l&&e[n+2]==p;)n+=2;(s=Math.min(n+1-o>>>1,138))<11?t.push(17,s-3):t.push(18,s-11),o+=2*s-2}else if(p==i&&v==p&&r==p){for(n=o+5;n+2<l&&e[n+2]==p;)n+=2;var s=Math.min(n+1-o>>>1,6);t.push(16,s-3),o+=2*s-2}else t.push(p,0)}return l>>>1},f.F._hufTree=function(e,t,l){var o=[],p=e.length,v=t.length,r=0;for(r=0;r<v;r+=2)t[r]=0,t[r+1]=0;for(r=0;r<p;r++)e[r]!=0&&o.push({lit:r,f:e[r]});var i=o.length,n=o.slice(0);if(i==0)return 0;if(i==1){var s=o[0].lit;return n=s==0?1:0,t[1+(s<<1)]=1,t[1+(n<<1)]=1,1}o.sort(function(F,T){return F.f-T.f});var h=o[0],S=o[1],E=0,m=1,O=2;for(o[0]={lit:-1,f:h.f+S.f,l:h,r:S,d:0};m!=i-1;)h=E!=m&&(O==i||o[E].f<o[O].f)?o[E++]:o[O++],S=E!=m&&(O==i||o[E].f<o[O].f)?o[E++]:o[O++],o[m++]={lit:-1,f:h.f+S.f,l:h,r:S};var L=f.F.setDepth(o[m-1],0);for(L>l&&(f.F.restrictDepth(n,l,L),L=l),r=0;r<i;r++)t[1+(n[r].lit<<1)]=n[r].d;return L},f.F.setDepth=function(e,t){return e.lit!=-1?(e.d=t,t):Math.max(f.F.setDepth(e.l,t+1),f.F.setDepth(e.r,t+1))},f.F.restrictDepth=function(e,t,l){var o=0,p=1<<l-t,v=0;for(e.sort(function(i,n){return n.d==i.d?i.f-n.f:n.d-i.d}),o=0;o<e.length&&e[o].d>t;o++){var r=e[o].d;e[o].d=t,v+=p-(1<<l-r)}for(v>>>=l-t;v>0;)(r=e[o].d)<t?(e[o].d++,v-=1<<t-r-1):o++;for(;o>=0;o--)e[o].d==t&&v<0&&(e[o].d--,v++);v!=0&&console.log("debt left")},f.F._goodIndex=function(e,t){var l=0;return t[16|l]<=e&&(l|=16),t[8|l]<=e&&(l|=8),t[4|l]<=e&&(l|=4),t[2|l]<=e&&(l|=2),t[1|l]<=e&&(l|=1),l},f.F._writeLit=function(e,t,l,o){return f.F._putsF(l,o,t[e<<1]),o+t[1+(e<<1)]},f.F.inflate=function(e,t){var l=Uint8Array;if(e[0]==3&&e[1]==0)return t||new l(0);var o=f.F,p=o._bitsF,v=o._bitsE,r=o._decodeTiny,i=o.makeCodes,n=o.codes2map,s=o._get17,h=o.U,S=t==null;S&&(t=new l(e.length>>>2<<3));for(var E,m,O=0,L=0,F=0,T=0,g=0,P=0,u=0,c=0,y=0;O==0;)if(O=p(e,y,1),L=p(e,y+1,2),y+=3,L!=0){if(S&&(t=f.F._check(t,c+(1<<17))),L==1&&(E=h.flmap,m=h.fdmap,P=511,u=31),L==2){F=v(e,y,5)+257,T=v(e,y+5,5)+1,g=v(e,y+10,4)+4,y+=14;for(var A=0;A<38;A+=2)h.itree[A]=0,h.itree[A+1]=0;var w=1;for(A=0;A<g;A++){var x=v(e,y+3*A,3);h.itree[1+(h.ordr[A]<<1)]=x,x>w&&(w=x)}y+=3*g,i(h.itree,w),n(h.itree,w,h.imap),E=h.lmap,m=h.dmap,y=r(h.imap,(1<<w)-1,F+T,e,y,h.ttree);var b=o._copyOut(h.ttree,0,F,h.ltree);P=(1<<b)-1;var M=o._copyOut(h.ttree,F,T,h.dtree);u=(1<<M)-1,i(h.ltree,b),n(h.ltree,b,E),i(h.dtree,M),n(h.dtree,M,m)}for(;;){var d=E[s(e,y)&P];y+=15&d;var a=d>>>4;if(!(a>>>8))t[c++]=a;else{if(a==256)break;var k=c+a-254;if(a>264){var C=h.ldef[a-257];k=c+(C>>>3)+v(e,y,7&C),y+=7&C}var D=m[s(e,y)&u];y+=15&D;var z=D>>>4,H=h.ddef[z],W=(H>>>4)+p(e,y,15&H);for(y+=15&H,S&&(t=f.F._check(t,c+(1<<17)));c<k;)t[c]=t[c++-W],t[c]=t[c++-W],t[c]=t[c++-W],t[c]=t[c++-W];c=k}}}else{7&y&&(y+=8-(7&y));var B=4+(y>>>3),_=e[B-4]|e[B-3]<<8;S&&(t=f.F._check(t,c+_)),t.set(new l(e.buffer,e.byteOffset+B,_),c),y=B+_<<3,c+=_}return t.length==c?t:t.slice(0,c)},f.F._check=function(e,t){var l=e.length;if(t<=l)return e;var o=new Uint8Array(Math.max(l<<1,t));return o.set(e,0),o},f.F._decodeTiny=function(e,t,l,o,p,v){for(var r=f.F._bitsE,i=f.F._get17,n=0;n<l;){var s=e[i(o,p)&t];p+=15&s;var h=s>>>4;if(h<=15)v[n]=h,n++;else{var S=0,E=0;h==16?(E=3+r(o,p,2),p+=2,S=v[n-1]):h==17?(E=3+r(o,p,3),p+=3):h==18&&(E=11+r(o,p,7),p+=7);for(var m=n+E;n<m;)v[n]=S,n++}}return p},f.F._copyOut=function(e,t,l,o){for(var p=0,v=0,r=o.length>>>1;v<l;){var i=e[v+t];o[v<<1]=0,o[1+(v<<1)]=i,i>p&&(p=i),v++}for(;v<r;)o[v<<1]=0,o[1+(v<<1)]=0,v++;return p},f.F.makeCodes=function(e,t){for(var l,o,p,v,r=f.F.U,i=e.length,n=r.bl_count,s=0;s<=t;s++)n[s]=0;for(s=1;s<i;s+=2)n[e[s]]++;var h=r.next_code;for(l=0,n[0]=0,o=1;o<=t;o++)l=l+n[o-1]<<1,h[o]=l;for(p=0;p<i;p+=2)(v=e[p+1])!=0&&(e[p]=h[v],h[v]++)},f.F.codes2map=function(e,t,l){for(var o=e.length,p=f.F.U.rev15,v=0;v<o;v+=2)if(e[v+1]!=0)for(var r=v>>1,i=e[v+1],n=r<<4|i,s=t-i,h=e[v]<<s,S=h+(1<<s);h!=S;)l[p[h]>>>15-t]=n,h++},f.F.revCodes=function(e,t){for(var l=f.F.U.rev15,o=15-t,p=0;p<e.length;p+=2){var v=e[p]<<t-e[p+1];e[p]=l[v]>>>o}},f.F._putsE=function(e,t,l){l<<=7&t;var o=t>>>3;e[o]|=l,e[o+1]|=l>>>8},f.F._putsF=function(e,t,l){l<<=7&t;var o=t>>>3;e[o]|=l,e[o+1]|=l>>>8,e[o+2]|=l>>>16},f.F._bitsE=function(e,t,l){return(e[t>>>3]|e[1+(t>>>3)]<<8)>>>(7&t)&(1<<l)-1},f.F._bitsF=function(e,t,l){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)&(1<<l)-1},f.F._get17=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)},f.F._get25=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16|e[3+(t>>>3)]<<24)>>>(7&t)},f.F.U=(I=Uint16Array,R=Uint32Array,{next_code:new I(16),bl_count:new I(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new I(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new R(32),flmap:new I(512),fltree:[],fdmap:new I(32),fdtree:[],lmap:new I(32768),ltree:[],ttree:[],dmap:new I(32768),dtree:[],imap:new I(512),itree:[],rev15:new I(32768),lhst:new R(286),dhst:new R(30),ihst:new R(19),lits:new R(15e3),strt:new I(65536),prev:new I(32768)}),function(){for(var e=f.F.U,t=0;t<32768;t++){var l=t;l=(4278255360&(l=(4042322160&(l=(3435973836&(l=(2863311530&l)>>>1|(1431655765&l)<<1))>>>2|(858993459&l)<<2))>>>4|(252645135&l)<<4))>>>8|(16711935&l)<<8,e.rev15[t]=(l>>>16|l<<16)>>>17}function o(p,v,r){for(;v--!=0;)p.push(0,r)}for(t=0;t<32;t++)e.ldef[t]=e.of0[t]<<3|e.exb[t],e.ddef[t]=e.df0[t]<<4|e.dxb[t];o(e.fltree,144,8),o(e.fltree,112,9),o(e.fltree,24,7),o(e.fltree,8,8),f.F.makeCodes(e.fltree,9),f.F.codes2map(e.fltree,9,e.flmap),f.F.revCodes(e.fltree,9),o(e.fdtree,32,5),f.F.makeCodes(e.fdtree,5),f.F.codes2map(e.fdtree,5,e.fdmap),f.F.revCodes(e.fdtree,5),o(e.itree,19,0),o(e.ltree,286,0),o(e.dtree,30,0),o(e.ttree,320,0)}()})();var ln=on({__proto__:null,default:He},[He]);const pe=function(){var U={nextZero(r,i){for(;r[i]!=0;)i++;return i},readUshort:(r,i)=>r[i]<<8|r[i+1],writeUshort(r,i,n){r[i]=n>>8&255,r[i+1]=255&n},readUint:(r,i)=>16777216*r[i]+(r[i+1]<<16|r[i+2]<<8|r[i+3]),writeUint(r,i,n){r[i]=n>>24&255,r[i+1]=n>>16&255,r[i+2]=n>>8&255,r[i+3]=255&n},readASCII(r,i,n){let s="";for(let h=0;h<n;h++)s+=String.fromCharCode(r[i+h]);return s},writeASCII(r,i,n){for(let s=0;s<n.length;s++)r[i+s]=n.charCodeAt(s)},readBytes(r,i,n){const s=[];for(let h=0;h<n;h++)s.push(r[i+h]);return s},pad:r=>r.length<2?`0${r}`:r,readUTF8(r,i,n){let s,h="";for(let S=0;S<n;S++)h+=`%${U.pad(r[i+S].toString(16))}`;try{s=decodeURIComponent(h)}catch{return U.readASCII(r,i,n)}return s}};function I(r,i,n,s){const h=i*n,S=t(s),E=Math.ceil(i*S/8),m=new Uint8Array(4*h),O=new Uint32Array(m.buffer),{ctype:L}=s,{depth:F}=s,T=U.readUshort;if(L==6){const C=h<<2;if(F==8)for(var g=0;g<C;g+=4)m[g]=r[g],m[g+1]=r[g+1],m[g+2]=r[g+2],m[g+3]=r[g+3];if(F==16)for(g=0;g<C;g++)m[g]=r[g<<1]}else if(L==2){const C=s.tabs.tRNS;if(C==null){if(F==8)for(g=0;g<h;g++){var P=3*g;O[g]=255<<24|r[P+2]<<16|r[P+1]<<8|r[P]}if(F==16)for(g=0;g<h;g++)P=6*g,O[g]=255<<24|r[P+4]<<16|r[P+2]<<8|r[P]}else{var u=C[0];const D=C[1],z=C[2];if(F==8)for(g=0;g<h;g++){var c=g<<2;P=3*g,O[g]=255<<24|r[P+2]<<16|r[P+1]<<8|r[P],r[P]==u&&r[P+1]==D&&r[P+2]==z&&(m[c+3]=0)}if(F==16)for(g=0;g<h;g++)c=g<<2,P=6*g,O[g]=255<<24|r[P+4]<<16|r[P+2]<<8|r[P],T(r,P)==u&&T(r,P+2)==D&&T(r,P+4)==z&&(m[c+3]=0)}}else if(L==3){const C=s.tabs.PLTE,D=s.tabs.tRNS,z=D?D.length:0;if(F==1)for(var y=0;y<n;y++){var A=y*E,w=y*i;for(g=0;g<i;g++){c=w+g<<2;var x=3*(b=r[A+(g>>3)]>>7-((7&g)<<0)&1);m[c]=C[x],m[c+1]=C[x+1],m[c+2]=C[x+2],m[c+3]=b<z?D[b]:255}}if(F==2)for(y=0;y<n;y++)for(A=y*E,w=y*i,g=0;g<i;g++)c=w+g<<2,x=3*(b=r[A+(g>>2)]>>6-((3&g)<<1)&3),m[c]=C[x],m[c+1]=C[x+1],m[c+2]=C[x+2],m[c+3]=b<z?D[b]:255;if(F==4)for(y=0;y<n;y++)for(A=y*E,w=y*i,g=0;g<i;g++)c=w+g<<2,x=3*(b=r[A+(g>>1)]>>4-((1&g)<<2)&15),m[c]=C[x],m[c+1]=C[x+1],m[c+2]=C[x+2],m[c+3]=b<z?D[b]:255;if(F==8)for(g=0;g<h;g++){var b;c=g<<2,x=3*(b=r[g]),m[c]=C[x],m[c+1]=C[x+1],m[c+2]=C[x+2],m[c+3]=b<z?D[b]:255}}else if(L==4){if(F==8)for(g=0;g<h;g++){c=g<<2;var M=r[d=g<<1];m[c]=M,m[c+1]=M,m[c+2]=M,m[c+3]=r[d+1]}if(F==16)for(g=0;g<h;g++){var d;c=g<<2,M=r[d=g<<2],m[c]=M,m[c+1]=M,m[c+2]=M,m[c+3]=r[d+2]}}else if(L==0)for(u=s.tabs.tRNS?s.tabs.tRNS:-1,y=0;y<n;y++){const C=y*E,D=y*i;if(F==1)for(var a=0;a<i;a++){var k=(M=255*(r[C+(a>>>3)]>>>7-(7&a)&1))==255*u?0:255;O[D+a]=k<<24|M<<16|M<<8|M}else if(F==2)for(a=0;a<i;a++)k=(M=85*(r[C+(a>>>2)]>>>6-((3&a)<<1)&3))==85*u?0:255,O[D+a]=k<<24|M<<16|M<<8|M;else if(F==4)for(a=0;a<i;a++)k=(M=17*(r[C+(a>>>1)]>>>4-((1&a)<<2)&15))==17*u?0:255,O[D+a]=k<<24|M<<16|M<<8|M;else if(F==8)for(a=0;a<i;a++)k=(M=r[C+a])==u?0:255,O[D+a]=k<<24|M<<16|M<<8|M;else if(F==16)for(a=0;a<i;a++)M=r[C+(a<<1)],k=T(r,C+(a<<1))==u?0:255,O[D+a]=k<<24|M<<16|M<<8|M}return m}function R(r,i,n,s){const h=t(r),S=Math.ceil(n*h/8),E=new Uint8Array((S+1+r.interlace)*s);return i=r.tabs.CgBI?e(i,E):f(i,E),r.interlace==0?i=l(i,r,0,n,s):r.interlace==1&&(i=function(O,L){const F=L.width,T=L.height,g=t(L),P=g>>3,u=Math.ceil(F*g/8),c=new Uint8Array(T*u);let y=0;const A=[0,0,4,0,2,0,1],w=[0,4,0,2,0,1,0],x=[8,8,8,4,4,2,2],b=[8,8,4,4,2,2,1];let M=0;for(;M<7;){const a=x[M],k=b[M];let C=0,D=0,z=A[M];for(;z<T;)z+=a,D++;let H=w[M];for(;H<F;)H+=k,C++;const W=Math.ceil(C*g/8);l(O,L,y,C,D);let B=0,_=A[M];for(;_<T;){let N=w[M],K=y+B*W<<3;for(;N<F;){var d;if(g==1&&(d=(d=O[K>>3])>>7-(7&K)&1,c[_*u+(N>>3)]|=d<<7-((7&N)<<0)),g==2&&(d=(d=O[K>>3])>>6-(7&K)&3,c[_*u+(N>>2)]|=d<<6-((3&N)<<1)),g==4&&(d=(d=O[K>>3])>>4-(7&K)&15,c[_*u+(N>>1)]|=d<<4-((1&N)<<2)),g>=8){const $=_*u+N*P;for(let j=0;j<P;j++)c[$+j]=O[(K>>3)+j]}K+=g,N+=k}B++,_+=a}C*D!=0&&(y+=D*(1+W)),M+=1}return c}(i,r)),i}function f(r,i){return e(new Uint8Array(r.buffer,2,r.length-6),i)}var e=function(){const r={H:{}};return r.H.N=function(i,n){const s=Uint8Array;let h,S,E=0,m=0,O=0,L=0,F=0,T=0,g=0,P=0,u=0;if(i[0]==3&&i[1]==0)return n||new s(0);const c=r.H,y=c.b,A=c.e,w=c.R,x=c.n,b=c.A,M=c.Z,d=c.m,a=n==null;for(a&&(n=new s(i.length>>>2<<5));E==0;)if(E=y(i,u,1),m=y(i,u+1,2),u+=3,m!=0){if(a&&(n=r.H.W(n,P+(1<<17))),m==1&&(h=d.J,S=d.h,T=511,g=31),m==2){O=A(i,u,5)+257,L=A(i,u+5,5)+1,F=A(i,u+10,4)+4,u+=14;let C=1;for(var k=0;k<38;k+=2)d.Q[k]=0,d.Q[k+1]=0;for(k=0;k<F;k++){const H=A(i,u+3*k,3);d.Q[1+(d.X[k]<<1)]=H,H>C&&(C=H)}u+=3*F,x(d.Q,C),b(d.Q,C,d.u),h=d.w,S=d.d,u=w(d.u,(1<<C)-1,O+L,i,u,d.v);const D=c.V(d.v,0,O,d.C);T=(1<<D)-1;const z=c.V(d.v,O,L,d.D);g=(1<<z)-1,x(d.C,D),b(d.C,D,h),x(d.D,z),b(d.D,z,S)}for(;;){const C=h[M(i,u)&T];u+=15&C;const D=C>>>4;if(!(D>>>8))n[P++]=D;else{if(D==256)break;{let z=P+D-254;if(D>264){const N=d.q[D-257];z=P+(N>>>3)+A(i,u,7&N),u+=7&N}const H=S[M(i,u)&g];u+=15&H;const W=H>>>4,B=d.c[W],_=(B>>>4)+y(i,u,15&B);for(u+=15&B;P<z;)n[P]=n[P++-_],n[P]=n[P++-_],n[P]=n[P++-_],n[P]=n[P++-_];P=z}}}}else{7&u&&(u+=8-(7&u));const C=4+(u>>>3),D=i[C-4]|i[C-3]<<8;a&&(n=r.H.W(n,P+D)),n.set(new s(i.buffer,i.byteOffset+C,D),P),u=C+D<<3,P+=D}return n.length==P?n:n.slice(0,P)},r.H.W=function(i,n){const s=i.length;if(n<=s)return i;const h=new Uint8Array(s<<1);return h.set(i,0),h},r.H.R=function(i,n,s,h,S,E){const m=r.H.e,O=r.H.Z;let L=0;for(;L<s;){const F=i[O(h,S)&n];S+=15&F;const T=F>>>4;if(T<=15)E[L]=T,L++;else{let g=0,P=0;T==16?(P=3+m(h,S,2),S+=2,g=E[L-1]):T==17?(P=3+m(h,S,3),S+=3):T==18&&(P=11+m(h,S,7),S+=7);const u=L+P;for(;L<u;)E[L]=g,L++}}return S},r.H.V=function(i,n,s,h){let S=0,E=0;const m=h.length>>>1;for(;E<s;){const O=i[E+n];h[E<<1]=0,h[1+(E<<1)]=O,O>S&&(S=O),E++}for(;E<m;)h[E<<1]=0,h[1+(E<<1)]=0,E++;return S},r.H.n=function(i,n){const s=r.H.m,h=i.length;let S,E,m,O;const L=s.j;for(var F=0;F<=n;F++)L[F]=0;for(F=1;F<h;F+=2)L[i[F]]++;const T=s.K;for(S=0,L[0]=0,E=1;E<=n;E++)S=S+L[E-1]<<1,T[E]=S;for(m=0;m<h;m+=2)O=i[m+1],O!=0&&(i[m]=T[O],T[O]++)},r.H.A=function(i,n,s){const h=i.length,S=r.H.m.r;for(let E=0;E<h;E+=2)if(i[E+1]!=0){const m=E>>1,O=i[E+1],L=m<<4|O,F=n-O;let T=i[E]<<F;const g=T+(1<<F);for(;T!=g;)s[S[T]>>>15-n]=L,T++}},r.H.l=function(i,n){const s=r.H.m.r,h=15-n;for(let S=0;S<i.length;S+=2){const E=i[S]<<n-i[S+1];i[S]=s[E]>>>h}},r.H.M=function(i,n,s){s<<=7&n;const h=n>>>3;i[h]|=s,i[h+1]|=s>>>8},r.H.I=function(i,n,s){s<<=7&n;const h=n>>>3;i[h]|=s,i[h+1]|=s>>>8,i[h+2]|=s>>>16},r.H.e=function(i,n,s){return(i[n>>>3]|i[1+(n>>>3)]<<8)>>>(7&n)&(1<<s)-1},r.H.b=function(i,n,s){return(i[n>>>3]|i[1+(n>>>3)]<<8|i[2+(n>>>3)]<<16)>>>(7&n)&(1<<s)-1},r.H.Z=function(i,n){return(i[n>>>3]|i[1+(n>>>3)]<<8|i[2+(n>>>3)]<<16)>>>(7&n)},r.H.i=function(i,n){return(i[n>>>3]|i[1+(n>>>3)]<<8|i[2+(n>>>3)]<<16|i[3+(n>>>3)]<<24)>>>(7&n)},r.H.m=function(){const i=Uint16Array,n=Uint32Array;return{K:new i(16),j:new i(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new i(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new n(32),J:new i(512),_:[],h:new i(32),$:[],w:new i(32768),C:[],v:[],d:new i(32768),D:[],u:new i(512),Q:[],r:new i(32768),s:new n(286),Y:new n(30),a:new n(19),t:new n(15e3),k:new i(65536),g:new i(32768)}}(),function(){const i=r.H.m;for(var n=0;n<32768;n++){let h=n;h=(2863311530&h)>>>1|(1431655765&h)<<1,h=(3435973836&h)>>>2|(858993459&h)<<2,h=(4042322160&h)>>>4|(252645135&h)<<4,h=(4278255360&h)>>>8|(16711935&h)<<8,i.r[n]=(h>>>16|h<<16)>>>17}function s(h,S,E){for(;S--!=0;)h.push(0,E)}for(n=0;n<32;n++)i.q[n]=i.S[n]<<3|i.T[n],i.c[n]=i.p[n]<<4|i.z[n];s(i._,144,8),s(i._,112,9),s(i._,24,7),s(i._,8,8),r.H.n(i._,9),r.H.A(i._,9,i.J),r.H.l(i._,9),s(i.$,32,5),r.H.n(i.$,5),r.H.A(i.$,5,i.h),r.H.l(i.$,5),s(i.Q,19,0),s(i.C,286,0),s(i.D,30,0),s(i.v,320,0)}(),r.H.N}();function t(r){return[1,null,3,1,2,null,4][r.ctype]*r.depth}function l(r,i,n,s,h){let S=t(i);const E=Math.ceil(s*S/8);let m,O;S=Math.ceil(S/8);let L=r[n],F=0;if(L>1&&(r[n]=[0,0,1][L-2]),L==3)for(F=S;F<E;F++)r[F+1]=r[F+1]+(r[F+1-S]>>>1)&255;for(let T=0;T<h;T++)if(m=n+T*E,O=m+T+1,L=r[O-1],F=0,L==0)for(;F<E;F++)r[m+F]=r[O+F];else if(L==1){for(;F<S;F++)r[m+F]=r[O+F];for(;F<E;F++)r[m+F]=r[O+F]+r[m+F-S]}else if(L==2)for(;F<E;F++)r[m+F]=r[O+F]+r[m+F-E];else if(L==3){for(;F<S;F++)r[m+F]=r[O+F]+(r[m+F-E]>>>1);for(;F<E;F++)r[m+F]=r[O+F]+(r[m+F-E]+r[m+F-S]>>>1)}else{for(;F<S;F++)r[m+F]=r[O+F]+o(0,r[m+F-E],0);for(;F<E;F++)r[m+F]=r[O+F]+o(r[m+F-S],r[m+F-E],r[m+F-S-E])}return r}function o(r,i,n){const s=r+i-n,h=s-r,S=s-i,E=s-n;return h*h<=S*S&&h*h<=E*E?r:S*S<=E*E?i:n}function p(r,i,n){n.width=U.readUint(r,i),i+=4,n.height=U.readUint(r,i),i+=4,n.depth=r[i],i++,n.ctype=r[i],i++,n.compress=r[i],i++,n.filter=r[i],i++,n.interlace=r[i],i++}function v(r,i,n,s,h,S,E,m,O){const L=Math.min(i,h),F=Math.min(n,S);let T=0,g=0;for(let M=0;M<F;M++)for(let d=0;d<L;d++)if(E>=0&&m>=0?(T=M*i+d<<2,g=(m+M)*h+E+d<<2):(T=(-m+M)*i-E+d<<2,g=M*h+d<<2),O==0)s[g]=r[T],s[g+1]=r[T+1],s[g+2]=r[T+2],s[g+3]=r[T+3];else if(O==1){var P=r[T+3]*.00392156862745098,u=r[T]*P,c=r[T+1]*P,y=r[T+2]*P,A=s[g+3]*(1/255),w=s[g]*A,x=s[g+1]*A,b=s[g+2]*A;const a=1-P,k=P+A*a,C=k==0?0:1/k;s[g+3]=255*k,s[g+0]=(u+w*a)*C,s[g+1]=(c+x*a)*C,s[g+2]=(y+b*a)*C}else if(O==2)P=r[T+3],u=r[T],c=r[T+1],y=r[T+2],A=s[g+3],w=s[g],x=s[g+1],b=s[g+2],P==A&&u==w&&c==x&&y==b?(s[g]=0,s[g+1]=0,s[g+2]=0,s[g+3]=0):(s[g]=u,s[g+1]=c,s[g+2]=y,s[g+3]=P);else if(O==3){if(P=r[T+3],u=r[T],c=r[T+1],y=r[T+2],A=s[g+3],w=s[g],x=s[g+1],b=s[g+2],P==A&&u==w&&c==x&&y==b)continue;if(P<220&&A>20)return!1}return!0}return{decode:function(i){const n=new Uint8Array(i);let s=8;const h=U,S=h.readUshort,E=h.readUint,m={tabs:{},frames:[]},O=new Uint8Array(n.length);let L,F=0,T=0;const g=[137,80,78,71,13,10,26,10];for(var P=0;P<8;P++)if(n[P]!=g[P])throw"The input is not a PNG file!";for(;s<n.length;){const M=h.readUint(n,s);s+=4;const d=h.readASCII(n,s,4);if(s+=4,d=="IHDR")p(n,s,m);else if(d=="iCCP"){for(var u=s;n[u]!=0;)u++;h.readASCII(n,s,u-s),n[u+1];const a=n.slice(u+2,s+M);let k=null;try{k=f(a)}catch{k=e(a)}m.tabs[d]=k}else if(d=="CgBI")m.tabs[d]=n.slice(s,s+4);else if(d=="IDAT"){for(P=0;P<M;P++)O[F+P]=n[s+P];F+=M}else if(d=="acTL")m.tabs[d]={num_frames:E(n,s),num_plays:E(n,s+4)},L=new Uint8Array(n.length);else if(d=="fcTL"){T!=0&&((b=m.frames[m.frames.length-1]).data=R(m,L.slice(0,T),b.rect.width,b.rect.height),T=0);const a={x:E(n,s+12),y:E(n,s+16),width:E(n,s+4),height:E(n,s+8)};let k=S(n,s+22);k=S(n,s+20)/(k==0?100:k);const C={rect:a,delay:Math.round(1e3*k),dispose:n[s+24],blend:n[s+25]};m.frames.push(C)}else if(d=="fdAT"){for(P=0;P<M-4;P++)L[T+P]=n[s+P+4];T+=M-4}else if(d=="pHYs")m.tabs[d]=[h.readUint(n,s),h.readUint(n,s+4),n[s+8]];else if(d=="cHRM")for(m.tabs[d]=[],P=0;P<8;P++)m.tabs[d].push(h.readUint(n,s+4*P));else if(d=="tEXt"||d=="zTXt"){m.tabs[d]==null&&(m.tabs[d]={});var c=h.nextZero(n,s),y=h.readASCII(n,s,c-s),A=s+M-c-1;if(d=="tEXt")x=h.readASCII(n,c+1,A);else{var w=f(n.slice(c+2,c+2+A));x=h.readUTF8(w,0,w.length)}m.tabs[d][y]=x}else if(d=="iTXt"){m.tabs[d]==null&&(m.tabs[d]={}),c=0,u=s,c=h.nextZero(n,u),y=h.readASCII(n,u,c-u);const a=n[u=c+1];var x;n[u+1],u+=2,c=h.nextZero(n,u),h.readASCII(n,u,c-u),u=c+1,c=h.nextZero(n,u),h.readUTF8(n,u,c-u),A=M-((u=c+1)-s),a==0?x=h.readUTF8(n,u,A):(w=f(n.slice(u,u+A)),x=h.readUTF8(w,0,w.length)),m.tabs[d][y]=x}else if(d=="PLTE")m.tabs[d]=h.readBytes(n,s,M);else if(d=="hIST"){const a=m.tabs.PLTE.length/3;for(m.tabs[d]=[],P=0;P<a;P++)m.tabs[d].push(S(n,s+2*P))}else if(d=="tRNS")m.ctype==3?m.tabs[d]=h.readBytes(n,s,M):m.ctype==0?m.tabs[d]=S(n,s):m.ctype==2&&(m.tabs[d]=[S(n,s),S(n,s+2),S(n,s+4)]);else if(d=="gAMA")m.tabs[d]=h.readUint(n,s)/1e5;else if(d=="sRGB")m.tabs[d]=n[s];else if(d=="bKGD")m.ctype==0||m.ctype==4?m.tabs[d]=[S(n,s)]:m.ctype==2||m.ctype==6?m.tabs[d]=[S(n,s),S(n,s+2),S(n,s+4)]:m.ctype==3&&(m.tabs[d]=n[s]);else if(d=="IEND")break;s+=M,h.readUint(n,s),s+=4}var b;return T!=0&&((b=m.frames[m.frames.length-1]).data=R(m,L.slice(0,T),b.rect.width,b.rect.height)),m.data=R(m,O,m.width,m.height),delete m.compress,delete m.interlace,delete m.filter,m},toRGBA8:function(i){const n=i.width,s=i.height;if(i.tabs.acTL==null)return[I(i.data,n,s,i).buffer];const h=[];i.frames[0].data==null&&(i.frames[0].data=i.data);const S=n*s*4,E=new Uint8Array(S),m=new Uint8Array(S),O=new Uint8Array(S);for(let F=0;F<i.frames.length;F++){const T=i.frames[F],g=T.rect.x,P=T.rect.y,u=T.rect.width,c=T.rect.height,y=I(T.data,u,c,i);if(F!=0)for(var L=0;L<S;L++)O[L]=E[L];if(T.blend==0?v(y,u,c,E,n,s,g,P,0):T.blend==1&&v(y,u,c,E,n,s,g,P,1),h.push(E.buffer.slice(0)),T.dispose!=0){if(T.dispose==1)v(m,u,c,E,n,s,g,P,0);else if(T.dispose==2)for(L=0;L<S;L++)E[L]=O[L]}}return h},_paeth:o,_copyTile:v,_bin:U}}();(function(){const{_copyTile:U}=pe,{_bin:I}=pe,R=pe._paeth;var f={table:function(){const u=new Uint32Array(256);for(let c=0;c<256;c++){let y=c;for(let A=0;A<8;A++)1&y?y=3988292384^y>>>1:y>>>=1;u[c]=y}return u}(),update(u,c,y,A){for(let w=0;w<A;w++)u=f.table[255&(u^c[y+w])]^u>>>8;return u},crc:(u,c,y)=>4294967295^f.update(4294967295,u,c,y)};function e(u,c,y,A){c[y]+=u[0]*A>>4,c[y+1]+=u[1]*A>>4,c[y+2]+=u[2]*A>>4,c[y+3]+=u[3]*A>>4}function t(u){return Math.max(0,Math.min(255,u))}function l(u,c){const y=u[0]-c[0],A=u[1]-c[1],w=u[2]-c[2],x=u[3]-c[3];return y*y+A*A+w*w+x*x}function o(u,c,y,A,w,x,b){b==null&&(b=1);const M=A.length,d=[];for(var a=0;a<M;a++){const _=A[a];d.push([_>>>0&255,_>>>8&255,_>>>16&255,_>>>24&255])}for(a=0;a<M;a++){let _=4294967295;for(var k=0,C=0;C<M;C++){var D=l(d[a],d[C]);C!=a&&D<_&&(_=D,k=C)}}const z=new Uint32Array(w.buffer),H=new Int16Array(c*y*4),W=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(a=0;a<W.length;a++)W[a]=255*((W[a]+.5)/16-.5);for(let _=0;_<y;_++)for(let N=0;N<c;N++){var B;a=4*(_*c+N),b!=2?B=[t(u[a]+H[a]),t(u[a+1]+H[a+1]),t(u[a+2]+H[a+2]),t(u[a+3]+H[a+3])]:(D=W[4*(3&_)+(3&N)],B=[t(u[a]+D),t(u[a+1]+D),t(u[a+2]+D),t(u[a+3]+D)]),k=0;let K=16777215;for(C=0;C<M;C++){const G=l(B,d[C]);G<K&&(K=G,k=C)}const $=d[k],j=[B[0]-$[0],B[1]-$[1],B[2]-$[2],B[3]-$[3]];b==1&&(N!=c-1&&e(j,H,a+4,7),_!=y-1&&(N!=0&&e(j,H,a+4*c-4,3),e(j,H,a+4*c,5),N!=c-1&&e(j,H,a+4*c+4,1))),x[a>>2]=k,z[a>>2]=A[k]}}function p(u,c,y,A,w){w==null&&(w={});const{crc:x}=f,b=I.writeUint,M=I.writeUshort,d=I.writeASCII;let a=8;const k=u.frames.length>1;let C,D=!1,z=33+(k?20:0);if(w.sRGB!=null&&(z+=13),w.pHYs!=null&&(z+=21),w.iCCP!=null&&(C=pako.deflate(w.iCCP),z+=21+C.length+4),u.ctype==3){for(var H=u.plte.length,W=0;W<H;W++)u.plte[W]>>>24!=255&&(D=!0);z+=8+3*H+4+(D?8+1*H+4:0)}for(var B=0;B<u.frames.length;B++)k&&(z+=38),z+=($=u.frames[B]).cimg.length+12,B!=0&&(z+=4);z+=12;const _=new Uint8Array(z),N=[137,80,78,71,13,10,26,10];for(W=0;W<8;W++)_[W]=N[W];if(b(_,a,13),a+=4,d(_,a,"IHDR"),a+=4,b(_,a,c),a+=4,b(_,a,y),a+=4,_[a]=u.depth,a++,_[a]=u.ctype,a++,_[a]=0,a++,_[a]=0,a++,_[a]=0,a++,b(_,a,x(_,a-17,17)),a+=4,w.sRGB!=null&&(b(_,a,1),a+=4,d(_,a,"sRGB"),a+=4,_[a]=w.sRGB,a++,b(_,a,x(_,a-5,5)),a+=4),w.iCCP!=null){const j=13+C.length;b(_,a,j),a+=4,d(_,a,"iCCP"),a+=4,d(_,a,"ICC profile"),a+=11,a+=2,_.set(C,a),a+=C.length,b(_,a,x(_,a-(j+4),j+4)),a+=4}if(w.pHYs!=null&&(b(_,a,9),a+=4,d(_,a,"pHYs"),a+=4,b(_,a,w.pHYs[0]),a+=4,b(_,a,w.pHYs[1]),a+=4,_[a]=w.pHYs[2],a++,b(_,a,x(_,a-13,13)),a+=4),k&&(b(_,a,8),a+=4,d(_,a,"acTL"),a+=4,b(_,a,u.frames.length),a+=4,b(_,a,w.loop!=null?w.loop:0),a+=4,b(_,a,x(_,a-12,12)),a+=4),u.ctype==3){for(b(_,a,3*(H=u.plte.length)),a+=4,d(_,a,"PLTE"),a+=4,W=0;W<H;W++){const j=3*W,G=u.plte[W],J=255&G,ne=G>>>8&255,Ue=G>>>16&255;_[a+j+0]=J,_[a+j+1]=ne,_[a+j+2]=Ue}if(a+=3*H,b(_,a,x(_,a-3*H-4,3*H+4)),a+=4,D){for(b(_,a,H),a+=4,d(_,a,"tRNS"),a+=4,W=0;W<H;W++)_[a+W]=u.plte[W]>>>24&255;a+=H,b(_,a,x(_,a-H-4,H+4)),a+=4}}let K=0;for(B=0;B<u.frames.length;B++){var $=u.frames[B];k&&(b(_,a,26),a+=4,d(_,a,"fcTL"),a+=4,b(_,a,K++),a+=4,b(_,a,$.rect.width),a+=4,b(_,a,$.rect.height),a+=4,b(_,a,$.rect.x),a+=4,b(_,a,$.rect.y),a+=4,M(_,a,A[B]),a+=2,M(_,a,1e3),a+=2,_[a]=$.dispose,a++,_[a]=$.blend,a++,b(_,a,x(_,a-30,30)),a+=4);const j=$.cimg;b(_,a,(H=j.length)+(B==0?0:4)),a+=4;const G=a;d(_,a,B==0?"IDAT":"fdAT"),a+=4,B!=0&&(b(_,a,K++),a+=4),_.set(j,a),a+=H,b(_,a,x(_,G,a-G)),a+=4}return b(_,a,0),a+=4,d(_,a,"IEND"),a+=4,b(_,a,x(_,a-4,4)),a+=4,_.buffer}function v(u,c,y){for(let A=0;A<u.frames.length;A++){const w=u.frames[A];w.rect.width;const x=w.rect.height,b=new Uint8Array(x*w.bpl+x);w.cimg=s(w.img,x,w.bpp,w.bpl,b,c,y)}}function r(u,c,y,A,w){const x=w[0],b=w[1],M=w[2],d=w[3],a=w[4],k=w[5];let C=6,D=8,z=255;for(var H=0;H<u.length;H++){const ie=new Uint8Array(u[H]);for(var W=ie.length,B=0;B<W;B+=4)z&=ie[B+3]}const _=z!=255,N=function(Z,q,re,se,ee,ce){const te=[];for(var Y=0;Y<Z.length;Y++){const le=new Uint8Array(Z[Y]),he=new Uint32Array(le.buffer);var ue;let de=0,ye=0,ve=q,xe=re,je=se?1:0;if(Y!=0){const It=ce||se||Y==1||te[Y-2].dispose!=0?1:2;let $e=0,et=1e9;for(let Te=0;Te<It;Te++){var we=new Uint8Array(Z[Y-1-Te]);const Ut=new Uint32Array(Z[Y-1-Te]);let Ae=q,Ie=re,Re=-1,ke=-1;for(let Fe=0;Fe<re;Fe++)for(let Ce=0;Ce<q;Ce++)he[oe=Fe*q+Ce]!=Ut[oe]&&(Ce<Ae&&(Ae=Ce),Ce>Re&&(Re=Ce),Fe<Ie&&(Ie=Fe),Fe>ke&&(ke=Fe));Re==-1&&(Ae=Ie=Re=ke=0),ee&&((1&Ae)==1&&Ae--,(1&Ie)==1&&Ie--);const tt=(Re-Ae+1)*(ke-Ie+1);tt<et&&(et=tt,$e=Te,de=Ae,ye=Ie,ve=Re-Ae+1,xe=ke-Ie+1)}we=new Uint8Array(Z[Y-1-$e]),$e==1&&(te[Y-1].dispose=2),ue=new Uint8Array(ve*xe*4),U(we,q,re,ue,ve,xe,-de,-ye,0),je=U(le,q,re,ue,ve,xe,-de,-ye,3)?1:0,je==1?n(le,q,re,ue,{x:de,y:ye,width:ve,height:xe}):U(le,q,re,ue,ve,xe,-de,-ye,0)}else ue=le.slice(0);te.push({rect:{x:de,y:ye,width:ve,height:xe},img:ue,blend:je,dispose:0})}if(se)for(Y=0;Y<te.length;Y++){if((Se=te[Y]).blend==1)continue;const le=Se.rect,he=te[Y-1].rect,de=Math.min(le.x,he.x),ye=Math.min(le.y,he.y),ve={x:de,y:ye,width:Math.max(le.x+le.width,he.x+he.width)-de,height:Math.max(le.y+le.height,he.y+he.height)-ye};te[Y-1].dispose=1,Y-1!=0&&i(Z,q,re,te,Y-1,ve,ee),i(Z,q,re,te,Y,ve,ee)}let Oe=0;if(Z.length!=1)for(var oe=0;oe<te.length;oe++){var Se;Oe+=(Se=te[oe]).rect.width*Se.rect.height}return te}(u,c,y,x,b,M),K={},$=[],j=[];if(A!=0){const ie=[];for(B=0;B<N.length;B++)ie.push(N[B].img.buffer);const Z=function(ee){let ce=0;for(var te=0;te<ee.length;te++)ce+=ee[te].byteLength;const Y=new Uint8Array(ce);let ue=0;for(te=0;te<ee.length;te++){const we=new Uint8Array(ee[te]),Oe=we.length;for(let oe=0;oe<Oe;oe+=4){let Se=we[oe],le=we[oe+1],he=we[oe+2];const de=we[oe+3];de==0&&(Se=le=he=0),Y[ue+oe]=Se,Y[ue+oe+1]=le,Y[ue+oe+2]=he,Y[ue+oe+3]=de}ue+=Oe}return Y.buffer}(ie),q=S(Z,A);for(B=0;B<q.plte.length;B++)$.push(q.plte[B].est.rgba);let re=0;for(B=0;B<N.length;B++){const se=(J=N[B]).img.length;var G=new Uint8Array(q.inds.buffer,re>>2,se>>2);j.push(G);const ee=new Uint8Array(q.abuf,re,se);k&&o(J.img,J.rect.width,J.rect.height,$,ee,G),J.img.set(ee),re+=se}}else for(H=0;H<N.length;H++){var J=N[H];const ie=new Uint32Array(J.img.buffer);var ne=J.rect.width;for(W=ie.length,G=new Uint8Array(W),j.push(G),B=0;B<W;B++){const Z=ie[B];if(B!=0&&Z==ie[B-1])G[B]=G[B-1];else if(B>ne&&Z==ie[B-ne])G[B]=G[B-ne];else{let q=K[Z];if(q==null&&(K[Z]=q=$.length,$.push(Z),$.length>=300))break;G[B]=q}}}const Ue=$.length;for(Ue<=256&&a==0&&(D=Ue<=2?1:Ue<=4?2:Ue<=16?4:8,D=Math.max(D,d)),H=0;H<N.length;H++){(J=N[H]).rect.x,J.rect.y,ne=J.rect.width;const ie=J.rect.height;let Z=J.img;new Uint32Array(Z.buffer);let q=4*ne,re=4;if(Ue<=256&&a==0){q=Math.ceil(D*ne/8);var me=new Uint8Array(q*ie);const se=j[H];for(let ee=0;ee<ie;ee++){B=ee*q;const ce=ee*ne;if(D==8)for(var V=0;V<ne;V++)me[B+V]=se[ce+V];else if(D==4)for(V=0;V<ne;V++)me[B+(V>>1)]|=se[ce+V]<<4-4*(1&V);else if(D==2)for(V=0;V<ne;V++)me[B+(V>>2)]|=se[ce+V]<<6-2*(3&V);else if(D==1)for(V=0;V<ne;V++)me[B+(V>>3)]|=se[ce+V]<<7-1*(7&V)}Z=me,C=3,re=1}else if(_==0&&N.length==1){me=new Uint8Array(ne*ie*3);const se=ne*ie;for(B=0;B<se;B++){const ee=3*B,ce=4*B;me[ee]=Z[ce],me[ee+1]=Z[ce+1],me[ee+2]=Z[ce+2]}Z=me,C=2,re=3,q=3*ne}J.img=Z,J.bpl=q,J.bpp=re}return{ctype:C,depth:D,plte:$,frames:N}}function i(u,c,y,A,w,x,b){const M=Uint8Array,d=Uint32Array,a=new M(u[w-1]),k=new d(u[w-1]),C=w+1<u.length?new M(u[w+1]):null,D=new M(u[w]),z=new d(D.buffer);let H=c,W=y,B=-1,_=-1;for(let K=0;K<x.height;K++)for(let $=0;$<x.width;$++){const j=x.x+$,G=x.y+K,J=G*c+j,ne=z[J];ne==0||A[w-1].dispose==0&&k[J]==ne&&(C==null||C[4*J+3]!=0)||(j<H&&(H=j),j>B&&(B=j),G<W&&(W=G),G>_&&(_=G))}B==-1&&(H=W=B=_=0),b&&((1&H)==1&&H--,(1&W)==1&&W--),x={x:H,y:W,width:B-H+1,height:_-W+1};const N=A[w];N.rect=x,N.blend=1,N.img=new Uint8Array(x.width*x.height*4),A[w-1].dispose==0?(U(a,c,y,N.img,x.width,x.height,-x.x,-x.y,0),n(D,c,y,N.img,x)):U(D,c,y,N.img,x.width,x.height,-x.x,-x.y,0)}function n(u,c,y,A,w){U(u,c,y,A,w.width,w.height,-w.x,-w.y,2)}function s(u,c,y,A,w,x,b){const M=[];let d,a=[0,1,2,3,4];x!=-1?a=[x]:(c*A>5e5||y==1)&&(a=[0]),b&&(d={level:0});const k=ln;for(var C=0;C<a.length;C++){for(let H=0;H<c;H++)h(w,u,H,A,y,a[C]);M.push(k.deflate(w,d))}let D,z=1e9;for(C=0;C<M.length;C++)M[C].length<z&&(D=C,z=M[C].length);return M[D]}function h(u,c,y,A,w,x){const b=y*A;let M=b+y;if(u[M]=x,M++,x==0)if(A<500)for(var d=0;d<A;d++)u[M+d]=c[b+d];else u.set(new Uint8Array(c.buffer,b,A),M);else if(x==1){for(d=0;d<w;d++)u[M+d]=c[b+d];for(d=w;d<A;d++)u[M+d]=c[b+d]-c[b+d-w]+256&255}else if(y==0){for(d=0;d<w;d++)u[M+d]=c[b+d];if(x==2)for(d=w;d<A;d++)u[M+d]=c[b+d];if(x==3)for(d=w;d<A;d++)u[M+d]=c[b+d]-(c[b+d-w]>>1)+256&255;if(x==4)for(d=w;d<A;d++)u[M+d]=c[b+d]-R(c[b+d-w],0,0)+256&255}else{if(x==2)for(d=0;d<A;d++)u[M+d]=c[b+d]+256-c[b+d-A]&255;if(x==3){for(d=0;d<w;d++)u[M+d]=c[b+d]+256-(c[b+d-A]>>1)&255;for(d=w;d<A;d++)u[M+d]=c[b+d]+256-(c[b+d-A]+c[b+d-w]>>1)&255}if(x==4){for(d=0;d<w;d++)u[M+d]=c[b+d]+256-R(0,c[b+d-A],0)&255;for(d=w;d<A;d++)u[M+d]=c[b+d]+256-R(c[b+d-w],c[b+d-A],c[b+d-w-A])&255}}}function S(u,c){const y=new Uint8Array(u),A=y.slice(0),w=new Uint32Array(A.buffer),x=E(A,c),b=x[0],M=x[1],d=y.length,a=new Uint8Array(d>>2);let k;if(y.length<2e7)for(var C=0;C<d;C+=4)k=m(b,D=y[C]*(1/255),z=y[C+1]*(1/255),H=y[C+2]*(1/255),W=y[C+3]*(1/255)),a[C>>2]=k.ind,w[C>>2]=k.est.rgba;else for(C=0;C<d;C+=4){var D=y[C]*.00392156862745098,z=y[C+1]*(1/255),H=y[C+2]*(1/255),W=y[C+3]*(1/255);for(k=b;k.left;)k=O(k.est,D,z,H,W)<=0?k.left:k.right;a[C>>2]=k.ind,w[C>>2]=k.est.rgba}return{abuf:A.buffer,inds:a,plte:M}}function E(u,c,y){y==null&&(y=1e-4);const A=new Uint32Array(u.buffer),w={i0:0,i1:u.length,bst:null,est:null,tdst:0,left:null,right:null};w.bst=T(u,w.i0,w.i1),w.est=g(w.bst);const x=[w];for(;x.length<c;){let M=0,d=0;for(var b=0;b<x.length;b++)x[b].est.L>M&&(M=x[b].est.L,d=b);if(M<y)break;const a=x[d],k=L(u,A,a.i0,a.i1,a.est.e,a.est.eMq255);if(a.i0>=k||a.i1<=k){a.est.L=0;continue}const C={i0:a.i0,i1:k,bst:null,est:null,tdst:0,left:null,right:null};C.bst=T(u,C.i0,C.i1),C.est=g(C.bst);const D={i0:k,i1:a.i1,bst:null,est:null,tdst:0,left:null,right:null};for(D.bst={R:[],m:[],N:a.bst.N-C.bst.N},b=0;b<16;b++)D.bst.R[b]=a.bst.R[b]-C.bst.R[b];for(b=0;b<4;b++)D.bst.m[b]=a.bst.m[b]-C.bst.m[b];D.est=g(D.bst),a.left=C,a.right=D,x[d]=C,x.push(D)}for(x.sort((M,d)=>d.bst.N-M.bst.N),b=0;b<x.length;b++)x[b].ind=b;return[w,x]}function m(u,c,y,A,w){if(u.left==null)return u.tdst=function(C,D,z,H,W){const B=D-C[0],_=z-C[1],N=H-C[2],K=W-C[3];return B*B+_*_+N*N+K*K}(u.est.q,c,y,A,w),u;const x=O(u.est,c,y,A,w);let b=u.left,M=u.right;x>0&&(b=u.right,M=u.left);const d=m(b,c,y,A,w);if(d.tdst<=x*x)return d;const a=m(M,c,y,A,w);return a.tdst<d.tdst?a:d}function O(u,c,y,A,w){const{e:x}=u;return x[0]*c+x[1]*y+x[2]*A+x[3]*w-u.eMq}function L(u,c,y,A,w,x){for(A-=4;y<A;){for(;F(u,y,w)<=x;)y+=4;for(;F(u,A,w)>x;)A-=4;if(y>=A)break;const b=c[y>>2];c[y>>2]=c[A>>2],c[A>>2]=b,y+=4,A-=4}for(;F(u,y,w)>x;)y-=4;return y+4}function F(u,c,y){return u[c]*y[0]+u[c+1]*y[1]+u[c+2]*y[2]+u[c+3]*y[3]}function T(u,c,y){const A=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],w=[0,0,0,0],x=y-c>>2;for(let b=c;b<y;b+=4){const M=u[b]*.00392156862745098,d=u[b+1]*(1/255),a=u[b+2]*(1/255),k=u[b+3]*(1/255);w[0]+=M,w[1]+=d,w[2]+=a,w[3]+=k,A[0]+=M*M,A[1]+=M*d,A[2]+=M*a,A[3]+=M*k,A[5]+=d*d,A[6]+=d*a,A[7]+=d*k,A[10]+=a*a,A[11]+=a*k,A[15]+=k*k}return A[4]=A[1],A[8]=A[2],A[9]=A[6],A[12]=A[3],A[13]=A[7],A[14]=A[11],{R:A,m:w,N:x}}function g(u){const{R:c}=u,{m:y}=u,{N:A}=u,w=y[0],x=y[1],b=y[2],M=y[3],d=A==0?0:1/A,a=[c[0]-w*w*d,c[1]-w*x*d,c[2]-w*b*d,c[3]-w*M*d,c[4]-x*w*d,c[5]-x*x*d,c[6]-x*b*d,c[7]-x*M*d,c[8]-b*w*d,c[9]-b*x*d,c[10]-b*b*d,c[11]-b*M*d,c[12]-M*w*d,c[13]-M*x*d,c[14]-M*b*d,c[15]-M*M*d],k=a,C=P;let D=[Math.random(),Math.random(),Math.random(),Math.random()],z=0,H=0;if(A!=0)for(let B=0;B<16&&(D=C.multVec(k,D),H=Math.sqrt(C.dot(D,D)),D=C.sml(1/H,D),!(B!=0&&Math.abs(H-z)<1e-9));B++)z=H;const W=[w*d,x*d,b*d,M*d];return{Cov:a,q:W,e:D,L:z,eMq255:C.dot(C.sml(255,W),D),eMq:C.dot(D,W),rgba:(Math.round(255*W[3])<<24|Math.round(255*W[2])<<16|Math.round(255*W[1])<<8|Math.round(255*W[0])<<0)>>>0}}var P={multVec:(u,c)=>[u[0]*c[0]+u[1]*c[1]+u[2]*c[2]+u[3]*c[3],u[4]*c[0]+u[5]*c[1]+u[6]*c[2]+u[7]*c[3],u[8]*c[0]+u[9]*c[1]+u[10]*c[2]+u[11]*c[3],u[12]*c[0]+u[13]*c[1]+u[14]*c[2]+u[15]*c[3]],dot:(u,c)=>u[0]*c[0]+u[1]*c[1]+u[2]*c[2]+u[3]*c[3],sml:(u,c)=>[u*c[0],u*c[1],u*c[2],u*c[3]]};pe.encode=function(c,y,A,w,x,b,M){w==null&&(w=0),M==null&&(M=!1);const d=r(c,y,A,w,[!1,!1,!1,0,M,!1]);return v(d,-1),p(d,y,A,x,b)},pe.encodeLL=function(c,y,A,w,x,b,M,d){const a={ctype:0+(w==1?0:2)+(x==0?0:4),depth:b,frames:[]},k=(w+x)*b,C=k*y;for(let D=0;D<c.length;D++)a.frames.push({rect:{x:0,y:0,width:y,height:A},img:new Uint8Array(c[D]),blend:0,dispose:1,bpp:Math.ceil(k/8),bpl:Math.ceil(C/8)});return v(a,0,!0),p(a,y,A,M,d)},pe.encode.compress=r,pe.encode.dither=o,pe.quantize=S,pe.quantize.getKDtree=E,pe.quantize.getNearest=m})();const dt={toArrayBuffer(U,I){const R=U.width,f=U.height,e=R<<2,t=U.getContext("2d").getImageData(0,0,R,f),l=new Uint32Array(t.data.buffer),o=(32*R+31)/32<<2,p=o*f,v=122+p,r=new ArrayBuffer(v),i=new DataView(r),n=1<<20;let s,h,S,E,m=n,O=0,L=0,F=0;function T(u){i.setUint16(L,u,!0),L+=2}function g(u){i.setUint32(L,u,!0),L+=4}function P(u){L+=u}T(19778),g(v),P(4),g(122),g(108),g(R),g(-f>>>0),T(1),T(32),g(3),g(p),g(2835),g(2835),P(8),g(16711680),g(65280),g(255),g(4278190080),g(1466527264),function u(){for(;O<f&&m>0;){for(E=122+O*o,s=0;s<e;)m--,h=l[F++],S=h>>>24,i.setUint32(E+s,h<<8|S),s+=4;O++}F<l.length?(m=n,setTimeout(u,dt._dly)):I(r)}()},toBlob(U,I){this.toArrayBuffer(U,R=>{I(new Blob([R],{type:"image/bmp"}))})},_dly:9};var fe={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},fn={[fe.CHROME]:16384,[fe.FIREFOX]:11180,[fe.DESKTOP_SAFARI]:16384,[fe.IE]:8192,[fe.IOS]:4096,[fe.ETC]:8192};const Ve=typeof window<"u",ht=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,We=Ve&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),cn=(Ve||ht)&&(We&&We.getOriginalSymbol(window,"File")||typeof File<"u"&&File),pt=(Ve||ht)&&(We&&We.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function Je(U,I,R=Date.now()){return new Promise(f=>{const e=U.split(","),t=e[0].match(/:(.*?);/)[1],l=globalThis.atob(e[1]);let o=l.length;const p=new Uint8Array(o);for(;o--;)p[o]=l.charCodeAt(o);const v=new Blob([p],{type:t});v.name=I,v.lastModified=R,f(v)})}function gt(U){return new Promise((I,R)=>{const f=new pt;f.onload=()=>I(f.result),f.onerror=e=>R(e),f.readAsDataURL(U)})}function mt(U){return new Promise((I,R)=>{const f=new Image;f.onload=()=>I(f),f.onerror=e=>R(e),f.src=U})}function Ee(){if(Ee.cachedResult!==void 0)return Ee.cachedResult;let U=fe.ETC;const{userAgent:I}=navigator;return/Chrom(e|ium)/i.test(I)?U=fe.CHROME:/iP(ad|od|hone)/i.test(I)&&/WebKit/i.test(I)?U=fe.IOS:/Safari/i.test(I)?U=fe.DESKTOP_SAFARI:/Firefox/i.test(I)?U=fe.FIREFOX:(/MSIE/i.test(I)||document.documentMode)&&(U=fe.IE),Ee.cachedResult=U,Ee.cachedResult}function vt(U,I){const R=Ee(),f=fn[R];let e=U,t=I,l=e*t;const o=e>t?t/e:e/t;for(;l>f*f;){const p=(f+e)/2,v=(f+t)/2;p<v?(t=v,e=v*o):(t=p*o,e=p),l=e*t}return{width:e,height:t}}function Qe(U,I){let R,f;try{if(R=new OffscreenCanvas(U,I),f=R.getContext("2d"),f===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{R=document.createElement("canvas"),f=R.getContext("2d")}return R.width=U,R.height=I,[R,f]}function bt(U,I){const{width:R,height:f}=vt(U.width,U.height),[e,t]=Qe(R,f);return I&&/jpe?g/.test(I)&&(t.fillStyle="white",t.fillRect(0,0,e.width,e.height)),t.drawImage(U,0,0,e.width,e.height),e}function Be(){return Be.cachedResult!==void 0||(Be.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),Be.cachedResult}function ze(U,I={}){return new Promise(function(R,f){let e,t;var l=function(){try{return t=bt(e,I.fileType||U.type),R([e,t])}catch(p){return f(p)}},o=function(p){try{var v=function(r){try{throw r}catch(i){return f(i)}};try{let r;return gt(U).then(function(i){try{return r=i,mt(r).then(function(n){try{return e=n,function(){try{return l()}catch(s){return f(s)}}()}catch(s){return v(s)}},v)}catch(n){return v(n)}},v)}catch(r){v(r)}}catch(r){return f(r)}};try{if(Be()||[fe.DESKTOP_SAFARI,fe.MOBILE_SAFARI].includes(Ee()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(U).then(function(p){try{return e=p,l()}catch{return o()}},o)}catch{o()}})}function Ne(U,I,R,f,e=1){return new Promise(function(t,l){let o;if(I==="image/png"){let v,r,i;return v=U.getContext("2d"),{data:r}=v.getImageData(0,0,U.width,U.height),i=pe.encode([r.buffer],U.width,U.height,4096*e),o=new Blob([i],{type:I}),o.name=R,o.lastModified=f,p.call(this)}{let v=function(){return p.call(this)};if(I==="image/bmp")return new Promise(r=>dt.toBlob(U,r)).then((function(r){try{return o=r,o.name=R,o.lastModified=f,v.call(this)}catch(i){return l(i)}}).bind(this),l);{let r=function(){return v.call(this)};if(typeof OffscreenCanvas=="function"&&U instanceof OffscreenCanvas)return U.convertToBlob({type:I,quality:e}).then((function(i){try{return o=i,o.name=R,o.lastModified=f,r.call(this)}catch(n){return l(n)}}).bind(this),l);{let i;return i=U.toDataURL(I,e),Je(i,R,f).then((function(n){try{return o=n,r.call(this)}catch(s){return l(s)}}).bind(this),l)}}}function p(){return t(o)}})}function be(U){U.width=0,U.height=0}function Pe(){return new Promise(function(U,I){let R,f,e,t;return Pe.cachedResult!==void 0?U(Pe.cachedResult):Je("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(l){try{return R=l,ze(R).then(function(o){try{return f=o[1],Ne(f,R.type,R.name,R.lastModified).then(function(p){try{return e=p,be(f),ze(e).then(function(v){try{return t=v[0],Pe.cachedResult=t.width===1&&t.height===2,U(Pe.cachedResult)}catch(r){return I(r)}},I)}catch(v){return I(v)}},I)}catch(p){return I(p)}},I)}catch(o){return I(o)}},I)})}function yt(U){return new Promise((I,R)=>{const f=new pt;f.onload=e=>{const t=new DataView(e.target.result);if(t.getUint16(0,!1)!=65496)return I(-2);const l=t.byteLength;let o=2;for(;o<l;){if(t.getUint16(o+2,!1)<=8)return I(-1);const p=t.getUint16(o,!1);if(o+=2,p==65505){if(t.getUint32(o+=2,!1)!=1165519206)return I(-1);const v=t.getUint16(o+=6,!1)==18761;o+=t.getUint32(o+4,v);const r=t.getUint16(o,v);o+=2;for(let i=0;i<r;i++)if(t.getUint16(o+12*i,v)==274)return I(t.getUint16(o+12*i+8,v))}else{if((65280&p)!=65280)break;o+=t.getUint16(o,!1)}}return I(-1)},f.onerror=e=>R(e),f.readAsArrayBuffer(U)})}function wt(U,I){const{width:R}=U,{height:f}=U,{maxWidthOrHeight:e}=I;let t,l=U;return isFinite(e)&&(R>e||f>e)&&([l,t]=Qe(R,f),R>f?(l.width=e,l.height=f/R*e):(l.width=R/f*e,l.height=e),t.drawImage(U,0,0,l.width,l.height),be(U)),l}function At(U,I){const{width:R}=U,{height:f}=U,[e,t]=Qe(R,f);switch(I>4&&I<9?(e.width=f,e.height=R):(e.width=R,e.height=f),I){case 2:t.transform(-1,0,0,1,R,0);break;case 3:t.transform(-1,0,0,-1,R,f);break;case 4:t.transform(1,0,0,-1,0,f);break;case 5:t.transform(0,1,1,0,0,0);break;case 6:t.transform(0,1,-1,0,f,0);break;case 7:t.transform(0,-1,-1,0,f,R);break;case 8:t.transform(0,-1,1,0,0,R)}return t.drawImage(U,0,0,R,f),be(U),e}function it(U,I,R=0){return new Promise(function(f,e){let t,l,o,p,v,r,i,n,s,h,S,E,m,O,L,F,T,g,P,u;function c(A=5){if(I.signal&&I.signal.aborted)throw I.signal.reason;t+=A,I.onProgress(Math.min(t,100))}function y(A){if(I.signal&&I.signal.aborted)throw I.signal.reason;t=Math.min(Math.max(A,t),100),I.onProgress(t)}return t=R,l=I.maxIteration||10,o=1024*I.maxSizeMB*1024,c(),ze(U,I).then((function(A){try{return[,p]=A,c(),v=wt(p,I),c(),new Promise(function(w,x){var b;if(!(b=I.exifOrientation))return yt(U).then((function(d){try{return b=d,M.call(this)}catch(a){return x(a)}}).bind(this),x);function M(){return w(b)}return M.call(this)}).then((function(w){try{return r=w,c(),Pe().then((function(x){try{return i=x?v:At(v,r),c(),n=I.initialQuality||1,s=I.fileType||U.type,Ne(i,s,U.name,U.lastModified,n).then((function(b){try{{let d=function(){if(l--&&(L>o||L>m)){let k,C;return k=u?.95*P.width:P.width,C=u?.95*P.height:P.height,[T,g]=Qe(k,C),g.drawImage(P,0,0,k,C),n*=s==="image/png"?.85:.95,Ne(T,s,U.name,U.lastModified,n).then(function(D){try{return F=D,be(P),P=T,L=F.size,y(Math.min(99,Math.floor((O-L)/(O-o)*100))),d}catch(z){return e(z)}},e)}return[1]},a=function(){return be(P),be(T),be(v),be(i),be(p),y(100),f(F)};if(h=b,c(),S=h.size>o,E=h.size>U.size,!S&&!E)return y(100),f(h);var M;return m=U.size,O=h.size,L=O,P=i,u=!I.alwaysKeepResolution&&S,(M=(function(k){for(;k;){if(k.then)return void k.then(M,e);try{if(k.pop){if(k.length)return k.pop()?a.call(this):k;k=d}else k=k.call(this)}catch(C){return e(C)}}}).bind(this))(d)}}catch(d){return e(d)}}).bind(this),e)}catch(b){return e(b)}}).bind(this),e)}catch(x){return e(x)}}).bind(this),e)}catch(w){return e(w)}}).bind(this),e)})}const un=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let Ge;function dn(U,I){return new Promise((R,f)=>{Ge||(Ge=function(l){const o=[];return o.push(l),URL.createObjectURL(new Blob(o))}(un));const e=new Worker(Ge);e.addEventListener("message",function(l){if(I.signal&&I.signal.aborted)e.terminate();else if(l.data.progress===void 0){if(l.data.error)return f(new Error(l.data.error)),void e.terminate();R(l.data.file),e.terminate()}else I.onProgress(l.data.progress)}),e.addEventListener("error",f),I.signal&&I.signal.addEventListener("abort",()=>{f(I.signal.reason),e.terminate()}),e.postMessage({file:U,imageCompressionLibUrl:I.libURL,options:{...I,onProgress:void 0,signal:void 0}})})}function ae(U,I){return new Promise(function(R,f){let e,t,l,o,p,v;if(e={...I},l=0,{onProgress:o}=e,e.maxSizeMB=e.maxSizeMB||Number.POSITIVE_INFINITY,p=typeof e.useWebWorker!="boolean"||e.useWebWorker,delete e.useWebWorker,e.onProgress=s=>{l=s,typeof o=="function"&&o(l)},!(U instanceof Blob||U instanceof cn))return f(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(U.type))return f(new Error("The file given is not an image"));if(v=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!p||typeof Worker!="function"||v)return it(U,e).then((function(s){try{return t=s,n.call(this)}catch(h){return f(h)}}).bind(this),f);var r=(function(){try{return n.call(this)}catch(s){return f(s)}}).bind(this),i=function(s){try{return it(U,e).then(function(h){try{return t=h,r()}catch(S){return f(S)}},f)}catch(h){return f(h)}};try{return e.libURL=e.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",dn(U,e).then(function(s){try{return t=s,r()}catch{return i()}},i)}catch{i()}function n(){try{t.name=U.name,t.lastModified=U.lastModified}catch{}try{e.preserveExif&&U.type==="image/jpeg"&&(!e.fileType||e.fileType&&e.fileType===U.type)&&(t=ut(U,t))}catch{}return R(t)}})}ae.getDataUrlFromFile=gt,ae.getFilefromDataUrl=Je,ae.loadImage=mt,ae.drawImageInCanvas=bt,ae.drawFileInCanvas=ze,ae.canvasToFile=Ne,ae.getExifOrientation=yt,ae.handleMaxWidthOrHeight=wt,ae.followExifOrientation=At,ae.cleanupCanvasMemory=be,ae.isAutoOrientationInBrowser=Pe,ae.approximateBelowMaximumCanvasSizeOfBrowser=vt,ae.copyExifWithoutOrientation=ut,ae.getBrowserName=Ee,ae.version="2.0.2";const hn=({isOpen:U,onClose:I})=>{const{openSnackbar:R}=St(),f=()=>{m(),I()},e=new Date,[t,l]=X.useState(""),[o,p]=X.useState(e),[v,r]=X.useState([]),[i,n]=X.useState(0),[s,h]=X.useState([]),S=F=>{r(T=>[...T,...F]),F.forEach(T=>{h(g=>Dt(g,{$push:[URL.createObjectURL(T)]}))})},E=async()=>{const F=new FormData;F.append("title",t),F.append("date",o.toISOString()),v.forEach(async T=>{try{const g=T.size>=10485760?await ae(T,{maxSizeMB:10,useWebWorker:!0}):T;F.append("images",g)}catch(g){console.error("Image compression failed:",g)}}),F.append("cover",i);try{L(!0),await Ct(F),R("success","Uploaded Succesfully!"),f()}catch(T){console.log(T),R("error","Error Occured. Please contact to the administrator.")}finally{L(!1)}},m=()=>{s.forEach(F=>URL.revokeObjectURL(F)),r([]),h([])},[O,L]=X.useState(!1);return Q(Ft,{isOpen:U,onClose:f,height:"85vh",maxWidth:"1300px",loading:O,children:O?Q(Ke,{}):Me(Xe,{children:[Me("div",{style:{display:"flex",width:"95%"},children:[Q(Wt,{value:o,minDate:new Date("2022/04/03"),maxDate:e,onChange:p}),Q(xt,{id:"filled-basic",label:"Album Title",variant:"outlined",sx:{flexGrow:1,ml:4},onChange:F=>l(F.target.value)})]}),Q(kt,{imagesPreview:s,setImagesPreview:h,setFilesToUpload:r,cover:i,setCoverImage:n}),Q("div",{style:{width:"100%",height:"12.75svh"},children:Q(jt,{accept:{"image/*":[]},handleChangeFile:S,multiple:!0})}),Me("div",{style:{display:"flex",marginTop:"1.5em",width:"100%"},children:[Q(qe,{variant:"outlined",disabled:t.trim()===""||v.length<=0,onClick:E,fullWidth:!0,children:"Submit"}),Q(qe,{variant:"outlined",onClick:m,disabled:v.length<=0,fullWidth:!0,children:"Clear All"})]})]})})},pn=({posts:U,cols:I})=>{const R={};let f=null;for(let e of U){const t=new Date(e.Timestamp).getFullYear();t!==f&&(f=t,R[t]=[]),R[t].push(e)}return Object.keys(R).reverse().map(e=>Me(Xe,{children:[Q(nt,{cols:I,children:Q(Ze,{component:"div",children:e})},e),R[e].map(t=>Me(nt,{component:Et,to:t.ID,sx:{textDecoration:"none"},children:[Q("img",{src:`https://imagedelivery.net/ICo2WI8PXO_BVRlWfwzOww/${t.Cover}/thumbnail`,alt:"thumbnail",loading:"lazy"}),Q(rn,{title:Q(Ye,{color:"black",children:t.Title}),subtitle:Q(Ye,{fontSize:"small",color:"black",children:ct(t.Timestamp,"MMdd")}),position:"below"})]},t.ID))]}))},gn=X.memo(pn),mn=U=>{const{setIsDatePickerOpen:I,id:R,disabled:f,value:e,sx:t,InputProps:{ref:l}={},inputProps:{"aria-label":o}={}}=U;return Q(qe,{variant:"outlined",size:"large",id:R,disabled:f,ref:l,"aria-label":o,sx:{color:"white",borderColor:"white",...t},onClick:()=>I==null?void 0:I(p=>!p),children:e?ct(e,"yyyy"):"All Year"})},vn=U=>{const[I,R]=X.useState(!1),{disableDate:f,...e}=U;return Q(Qt,{dateAdapter:zt,children:Q(Nt,{views:["year"],slots:{field:mn},slotProps:{field:{setIsDatePickerOpen:R},popper:{placement:"bottom"},actionBar:{actions:["clear"]}},...e,open:I,onClose:()=>R(!1)})})},bn=12,yn={backgroundImage:'url("/img/News/Albums/Albums.webp")',backgroundPosition:"32% 22%"},Ln=()=>{const U=Gt("(min-width:1200px)");let[I,R]=Mt();const{openModal:f}=Rt(),[e,t]=X.useState(!1),[l,o]=X.useState(I.has("year")?new Date(I.get("year"),0,1):null),[p,v]=X.useState([]),[r,i]=X.useState(!1),[n,s]=X.useState(null);X.useEffect(()=>{v([]),i(!1),console.log(l),R(l?{year:l.getFullYear()}:E=>E.delete("year"))},[l,R]),X.useEffect(()=>{n!==null&&h()},[I.get("year")]);const h=async()=>{if(!e){t(!0);try{const E=await _t(p,l==null?void 0:l.getFullYear());E.data.length>0?v(m=>[...m,...E.data]):i(!0)}finally{t(!1)}}};X.useEffect(()=>{p.length%bn!==0&&i(!0)},[p]),X.useEffect(()=>(window.onpopstate=()=>{s(!0),console.log("test restore"),v(JSON.parse(sessionStorage.getItem("albums")))},s(!1),()=>{window.onpopstate=()=>{}}),[]),X.useEffect(()=>{n!==null&&!n&&h()},[n]),X.useEffect(()=>()=>{sessionStorage.setItem("albums",JSON.stringify(p))});const S=X.useRef();return X.useEffect(()=>{S.current&&!r&&p.length>=12&&setTimeout(()=>{try{const E=S.current.clientHeight,m=window.innerHeight-500;console.log("test content",E),console.log("test screen",m),E>100&&E<m&&h()}catch{}},500)},[p]),Me(Xe,{children:[Q("div",{className:"title-wrapper",style:yn,children:Me("div",{className:"title",children:[Q(Ye,{variant:"h4",fontWeight:830,sx:{letterSpacing:"0.4em",pl:"0.4em",color:"white"},children:"교회사진"}),Q(vn,{sx:{mt:2},value:l,minDate:new Date("2022/04/03"),maxDate:new Date,onChange:o})]})}),Q("div",{className:"container-wrapper",children:Q(Pt,{className:"container",sx:{px:{xs:"0 !important",md:"1.5em !important"},py:"0 !important"},children:p.length<=0?Q(rt,{alignItems:"center",sx:{py:8},children:e?Q(Ke,{}):"사진이 존재하지 않습니다"}):Q(Ot,{dataLength:p.length,next:h,hasMore:!r,loader:Q(rt,{alignItems:"center",children:Q(Ke,{})}),scrollThreshold:1,style:{overflowY:"hidden"},children:Q($t,{ref:S,cols:U?4:3,gap:3,children:Q(gn,{posts:p,cols:U?4:3})})})})}),Q(Ht,{children:Q(Bt,{variant:"primary",style:{position:"fixed",right:"2vw",bottom:"3vh"},onClick:()=>f(hn,{}),children:Q(Tt,{})})}),r&&Q(Lt,{})]})};export{Ln as default};
