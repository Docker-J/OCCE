import{h as w,j as a,F as j,T as f,a0 as z,l as Y,r as F,A as W,C as O}from"./index-BT22ZiaM.js";import{n as R,d as A,c as B,t as S,m as b,a as I,f as m}from"./format-C9vNfFN1.js";import{g as M,i as H}from"./getDate-DAKJtapI.js";import{S as T}from"./Stack-Bu9_rq7n.js";import{a as $}from"./addDays-_A4UCdTH.js";import{i as Z}from"./isSunday-Clxqs9nd.js";function k(t,e,n){const[s,r]=R(n==null?void 0:n.in,t,e),i=C(s,r),l=Math.abs(A(s,r));s.setDate(s.getDate()-i*l);const o=+(C(s,r)===-i),d=i*(l-o);return d===0?0:d}function C(t,e){const n=t.getFullYear()-e.getFullYear()||t.getMonth()-e.getMonth()||t.getDate()-e.getDate()||t.getHours()-e.getHours()||t.getMinutes()-e.getMinutes()||t.getSeconds()-e.getSeconds()||t.getMilliseconds()-e.getMilliseconds();return n<0?-1:n>0?1:n}function p(t,e){const n=()=>B(e==null?void 0:e.in,NaN),r=_(t);let i;if(r.date){const c=K(r.date,2);i=q(c.restDateString,c.year)}if(!i||isNaN(+i))return n();const l=+i;let o=0,d;if(r.time&&(o=J(r.time),isNaN(o)))return n();if(r.timezone){if(d=X(r.timezone),isNaN(d))return n()}else{const c=new Date(l+o),u=S(0,e==null?void 0:e.in);return u.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),u.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),u}return S(l+o+d,e==null?void 0:e.in)}const x={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},E=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,L=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,P=/^([+-])(\d{2})(?::?(\d{2}))?$/;function _(t){const e={},n=t.split(x.dateTimeDelimiter);let s;if(n.length>2)return e;if(/:/.test(n[0])?s=n[0]:(e.date=n[0],s=n[1],x.timeZoneDelimiter.test(e.date)&&(e.date=t.split(x.timeZoneDelimiter)[0],s=t.substr(e.date.length,t.length))),s){const r=x.timezone.exec(s);r?(e.time=s.replace(r[1],""),e.timezone=r[1]):e.time=s}return e}function K(t,e){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),s=t.match(n);if(!s)return{year:NaN,restDateString:""};const r=s[1]?parseInt(s[1]):null,i=s[2]?parseInt(s[2]):null;return{year:i===null?r:i*100,restDateString:t.slice((s[1]||s[2]).length)}}function q(t,e){if(e===null)return new Date(NaN);const n=t.match(E);if(!n)return new Date(NaN);const s=!!n[4],r=g(n[1]),i=g(n[2])-1,l=g(n[3]),o=g(n[4]),d=g(n[5])-1;if(s)return ee(e,o,d)?v(e,o,d):new Date(NaN);{const c=new Date(0);return!Q(e,i,l)||!V(e,r)?new Date(NaN):(c.setUTCFullYear(e,i,Math.max(r,l)),c)}}function g(t){return t?parseInt(t):1}function J(t){const e=t.match(L);if(!e)return NaN;const n=D(e[1]),s=D(e[2]),r=D(e[3]);return te(n,s,r)?n*b+s*I+r*1e3:NaN}function D(t){return t&&parseFloat(t.replace(",","."))||0}function X(t){if(t==="Z")return 0;const e=t.match(P);if(!e)return 0;const n=e[1]==="+"?-1:1,s=parseInt(e[2]),r=e[3]&&parseInt(e[3])||0;return ne(s,r)?n*(s*b+r*I):NaN}function v(t,e,n){const s=new Date(0);s.setUTCFullYear(t,0,4);const r=s.getUTCDay()||7,i=(e-1)*7+n+1-r;return s.setUTCDate(s.getUTCDate()+i),s}const G=[31,null,31,30,31,30,31,31,30,31,30,31];function U(t){return t%400===0||t%4===0&&t%100!==0}function Q(t,e,n){return e>=0&&e<=11&&n>=1&&n<=(G[e]||(U(t)?29:28))}function V(t,e){return e>=1&&e<=(U(t)?366:365)}function ee(t,e,n){return e>=1&&e<=53&&n>=0&&n<=6}function te(t,e,n){return t===24?e===0&&n===0:n>=0&&n<60&&e>=0&&e<60&&t>=0&&t<25}function ne(t,e){return e>=0&&e<=59}const se=w([a.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"},"0"),a.jsx("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")]),re=w(a.jsx("path",{d:"M12 12c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2m6-1.8C18 6.57 15.35 4 12 4s-6 2.57-6 6.2c0 2.34 1.95 5.44 6 9.14 4.05-3.7 6-6.8 6-9.14M12 2c4.2 0 8 3.22 8 8.2 0 3.32-2.67 7.25-8 11.8-5.33-4.55-8-8.48-8-11.8C4 5.22 7.8 2 12 2"}));function ae(t,e,n){return H(t,e)||M($(t,1))===M(e)&&n==="00:00 AM"}const ie=({date:t,event:e,sx:n})=>{const s=e.allday,r=p(s?e.start.date:e.start.dateTime),i=p(s?e.end.date:e.end.dateTime),l=m(r,"dd"),o=m(r,"hh:mm a"),d=m(i,"dd"),c=m(i,"hh:mm a"),u=ae(r,i,c);return a.jsxs(j,{sx:{backgroundColor:s?"#f57c00":"#e8eaed",borderColor:s?"#f57c00":"#afafaf",p:1.5,borderRadius:1,...n},children:[s?a.jsxs(f,{fontWeight:700,color:"primary",children:[e.summary,!u&&` (Day ${k(t,r)+1}/${e.alldaylength})`]}):a.jsx(f,{fontSize:"1.1em",fontWeight:700,children:e.summary}),!s&&!u&&a.jsx(f,{variant:"h5",children:`${l} - ${M(d)}`}),a.jsx(f,{children:e.description}),!s&&a.jsxs(T,{direction:"row",spacing:.5,alignItems:"flex-start",children:[a.jsx(se,{fontSize:"small"}),a.jsxs(f,{variant:"body2",children:[o,!s&&(u?` - ${c}`:` - ${d} ${c} `)," "]})]}),(e==null?void 0:e.location)&&a.jsxs(T,{direction:"row",spacing:.5,alignItems:"flex-start",children:[a.jsx(re,{color:"orange",fontSize:"small"}),a.jsx(f,{component:"a",target:"_blank",href:`https://www.google.com/maps/search/?api=1&query=${e.location}`,variant:"body2",color:"black",sx:{textDecoration:"none"},children:e.location.split(",")[0]})]})]})},oe=({events:t})=>{function e(n){return n.reduce((r,i)=>{const l=p(i.start.dateTime||i.start.date),o=m(l,"MMMM yyyy"),d=m(l,"d");if(r[o]=r[o]||{},r[o][d]=r[o][d]||[],i.start.date){i.allday=!!i.start.date,console.log(i),r[o][d].unshift(i);const c=p(i.end.date);i.alldaylength=k(c,l);for(let u=1;u<i.alldaylength;u++){const N=$(l,u),h=m(N,"MMMM yyyy"),y=m(N,"dd");r[h]=r[h]||{},r[h][y]=r[h][y]||[],r[h][y].unshift(i)}}else r[o][d].push(i);return r},{})}return Object.entries(e(t)).map(([n,s])=>a.jsxs("div",{children:[a.jsx(f,{variant:"h5",fontWeight:500,sx:{mb:"12px"},children:n}),console.log(s),Object.entries(s).map(([r,i])=>{const l=new Date(`${n} ${r}`),o=Z(l);return a.jsxs(z,{elevation:3,sx:{p:2,mb:2,display:"flex",justifyContent:"center",borderRadius:3},children:[a.jsx("div",{style:{borderLeft:o?"3px solid red":"3px solid #f57c00",height:"32px",marginRight:"6px"}}),a.jsxs(j,{sx:{mr:"18px"},style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[a.jsx(f,{variant:"h5",color:o?"red":"primary",children:r.toString().padStart(2,"0")}),a.jsx(f,{variant:"caption",color:o?"red":"primary",children:m(l,"eee")})]}),a.jsx(j,{width:"100%",display:"flex",flexDirection:"column",justifyContent:"center",children:i.map((d,c)=>a.jsx(ie,{date:l,event:d,sx:{marginBottom:c!==i.length-1&&"12px"}},c))})]},r)}),a.jsx("br",{})]},n))},ce={backgroundImage:'url("/img/News/Schedules/Schedules.jpg")',backgroundPositionX:"0%",backgroundPositionY:"60%"},ge=()=>{const t=Y();return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"title-wrapper",style:ce,children:a.jsx("div",{className:"title",children:a.jsx(f,{variant:"h4",fontWeight:830,textAlign:"center",sx:{letterSpacing:"0.4em",pl:"0.4em",color:"white"},children:"교회일정"})})}),a.jsx("div",{className:"container-wrapper",children:a.jsx("div",{className:"container",style:{display:"flex",justifyContent:"center"},children:a.jsx(F.Suspense,{fallback:a.jsx(O,{}),children:a.jsx(W,{resolve:t.schedules,errorElement:a.jsx("p",{children:"Error loading!"}),children:({data:e})=>a.jsx("div",{style:{width:"100%",maxWidth:"800px",display:"flex",flexDirection:"column",justifyContent:"center"},children:e.length===0?"등록된 일정이 없습니다.":a.jsx(oe,{events:e})})})})})})]})};export{ge as default};
