import{aw as s}from"./index-DRllDXIJ.js";import{u as g}from"./images-3vGw_7ma.js";const A=async(e,o,r)=>{const m=/(<img[^>]+src=")([^">]+)"/g,c=Array.from(r.matchAll(m)),p=c.map(async t=>{const n=t[2];return n.startsWith("https://")?n.split("/").at(-2):g(n)}),i=await Promise.all(p),l=c.map((t,n)=>{const w=`https://imagedelivery.net/ICo2WI8PXO_BVRlWfwzOww/${i[n]}/Announcements`;return{original:t[0],replacement:`${t[1]}${w}"`}});let a=r;for(const{original:t,replacement:n}of l)a=a.replace(t,n);const u=/<iframe\s+[^>]*>/i.test(a);try{await s.put(e?`/api/announcements/announcement/${e}`:"/api/announcements/announcement",{title:o,body:a,images:i,video:u?1:0})}catch{throw new Error}},I=async e=>{try{await s.delete(`/api/announcements/announcement/${e}`)}catch{throw new Error}},$=async(e,o)=>{try{await s.put(`/api/announcements/announcement/${e}/pin`,{pin:o?0:1})}catch{throw new Error}};export{A as a,I as d,$ as p};
