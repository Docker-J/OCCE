import{z as v,r as l,j as e,am as C,C as b,B as u,bt as S}from"./index-DlDitfAQ.js";import{I as U,u as w}from"./ImagePreviews-DC158ZfW.js";import{F as y}from"./FileUploadComponent-DiZ93gRy.js";import"./index-DUqfYETM.js";const L=({isOpen:h,onClose:p})=>{const{openSnackbar:i}=v(),n=()=>{d(),p()},[s,o]=l.useState([]),[c,r]=l.useState([]),g=t=>{o(a=>[...a,...t]),t.forEach(a=>{r(j=>w(j,{$push:[URL.createObjectURL(a)]}))})},x=async()=>{const t=new FormData;s.forEach(a=>{t.append("images",a)});try{m(!0),await S(t),i("success","Uploaded Succesfully!"),n()}catch(a){console.log(a),i("error","Error Occured. Please contact to the administrator.")}finally{m(!1)}},d=()=>{c.forEach(t=>URL.revokeObjectURL(t)),o([]),r([])},[f,m]=l.useState(!1);return e.jsx(C,{isOpen:h,onClose:n,maxHeight:"85vh",maxWidth:"1300px",children:f?e.jsx(b,{}):e.jsxs(e.Fragment,{children:[e.jsx(U,{imagesPreview:c,setImagesPreview:r,setFilesToUpload:o}),e.jsx("div",{style:{width:"100%",height:"12.75svh"},children:e.jsx(y,{accept:{"image/*":[]},handleChangeFile:g,multiple:!0})}),e.jsxs("div",{style:{display:"flex",marginTop:"1.5em",width:"100%"},children:[e.jsx(u,{variant:"outlined",disabled:s.length<=0,onClick:x,fullWidth:!0,children:"Submit"}),e.jsx(u,{variant:"outlined",onClick:d,disabled:s.length<=0,fullWidth:!0,children:"Clear All"})]})]})})};export{L as default};
