import{t as y,r as l,j as e,C as D,B as f}from"./index-BCIXcEIZ.js";import{I as w,u as M}from"./ImagePreviews-BaoURLg-.js";import{u as b}from"./meditationon-BDCDiX5A.js";import{C as T}from"./CustomModal-Drw6ytGx.js";import{F as U}from"./FileUploadComponent-BcnfeS81.js";import{B as E}from"./ButtonDatePicker-Cf4okAKB.js";import{M as P}from"./WeeklyUpdate-BDcOdyBl.js";import{b as F,a as x,n as I,t as k}from"./index-D1xZfsFD.js";import{f as L}from"./format-C9vNfFN1.js";import"./useThemeProps-BpawvwWQ.js";import"./addDays-_A4UCdTH.js";import"./getDate-DAKJtapI.js";import"./parse-BLVyYHJB.js";import"./getDefaultOptions-Lw9z10sO.js";import"./index-4jQv89W5.js";import"./useControlled-Bnut1LFb.js";import"./TextField-B7mjeZgD.js";import"./isMuiElement-B4moRskz.js";import"./Popper-CA6GyroM.js";import"./DialogContent-MlrNr5tL.js";import"./ListItem-rUWjZu1U.js";function O(t,n,s){if(typeof t=="string"&&!t.match(F))return x(t,{...s,timeZone:n});t=x(t,s);const a=I(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()).getTime(),i=k(n,new Date(a));return new Date(a+i)}const rt=({isOpen:t,onClose:n})=>{const{openSnackbar:s}=y(),a=()=>{g(),n()},[i,m]=l.useState([]),[u,c]=l.useState([]),[d,j]=l.useState(new Date),S=r=>{m(o=>[...o,...r]),r.forEach(o=>{c(p=>M(p,{$push:[URL.createObjectURL(o)]}))})},C=async()=>{const r=new FormData;i.forEach(o=>{r.append("images",o)});try{h(!0);const o=L(d,"yyyy-MM-dd"),p=O(`${o} 00:00`,"America/Edmonton");await b(r,p.toISOString()),s("success","Uploaded Succesfully!"),a()}catch(o){console.log(o),s("error","Error Occured. Please contact to the administrator.")}finally{h(!1)}},g=()=>{u.forEach(r=>URL.revokeObjectURL(r)),m([]),c([])},[v,h]=l.useState(!1);return e.jsx(T,{isOpen:t,onClose:a,maxHeight:"85vh",maxWidth:"1300px",children:v?e.jsx(D,{}):e.jsxs(e.Fragment,{children:[e.jsx(w,{imagesPreview:u,setImagesPreview:c,setFilesToUpload:m}),e.jsx("div",{style:{width:"100%",height:"12.75svh"},children:e.jsx(U,{accept:{"image/*":[]},handleChangeFile:S,multiple:!0})}),e.jsx(E,{value:d,minDate:P,onChange:j}),e.jsxs("div",{style:{display:"flex",marginTop:"1.5em",width:"100%"},children:[e.jsx(f,{variant:"outlined",disabled:i.length<=0,onClick:C,fullWidth:!0,children:"Submit"}),e.jsx(f,{variant:"outlined",onClick:g,disabled:i.length<=0,fullWidth:!0,children:"Clear All"})]})]})})};export{rt as default};
