import{g as nt,a as rt,r as V,u as ot,j as z,s as _e,c as it,d as ge,b as at,m as Le,y as At,al as It,C as $e,am as xt,B as Ge,an as Ut,S as St,T as Ye,z as st,Y as Ft,v as Ct,w as Et,ao as Rt,U as Mt,ap as _t}from"./index-BGDHRzLD.js";import{A as Pt}from"./Add-B1Vq3jGj.js";import{I as Tt}from"./index.es-DpJYPgeE.js";import{A as Lt,F as kt}from"./AdminComponent-MuVr043M.js";import{I as jt,u as Dt}from"./ImagePreviews-dYRT4Ji4.js";import{B as Ot,L as Bt,A as Ht,D as Wt,u as zt,b as Nt}from"./ButtonDatePicker-BkiK2epY.js";import{F as Qt}from"./FileUploadComponent-B7pSQiEu.js";import{I as Je,a as $t}from"./ImageListItem-C8HjBv8v.js";import{u as Gt}from"./index-TGwFiycK.js";import{S as et}from"./Stack-BNy0dyaC.js";import"./useThemeProps-BY2g86kq.js";import"./getDate-Bwb09adu.js";import"./index-DMLNK8T5.js";import"./Popper-CH2kMym1.js";import"./DialogContent-ByzGMVRQ.js";import"./ListItem-DNOmLwEE.js";function Yt(I){return nt("MuiListSubheader",I)}rt("MuiListSubheader",["root","colorPrimary","colorInherit","gutters","inset","sticky"]);const qt=I=>{const{classes:x,color:M,disableGutters:f,inset:e,disableSticky:t}=I,l={root:["root",M!=="default"&&`color${ge(M)}`,!f&&"gutters",e&&"inset",!t&&"sticky"]};return at(l,Yt,x)},Zt=_e("li",{name:"MuiListSubheader",slot:"Root",overridesResolver:(I,x)=>{const{ownerState:M}=I;return[x.root,M.color!=="default"&&x[`color${ge(M.color)}`],!M.disableGutters&&x.gutters,M.inset&&x.inset,!M.disableSticky&&x.sticky]}})(Le(({theme:I})=>({boxSizing:"border-box",lineHeight:"48px",listStyle:"none",color:(I.vars||I).palette.text.secondary,fontFamily:I.typography.fontFamily,fontWeight:I.typography.fontWeightMedium,fontSize:I.typography.pxToRem(14),variants:[{props:{color:"primary"},style:{color:(I.vars||I).palette.primary.main}},{props:{color:"inherit"},style:{color:"inherit"}},{props:({ownerState:x})=>!x.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:x})=>x.inset,style:{paddingLeft:72}},{props:({ownerState:x})=>!x.disableSticky,style:{position:"sticky",top:0,zIndex:1,backgroundColor:(I.vars||I).palette.background.paper}}]}))),qe=V.forwardRef(function(x,M){const f=ot({props:x,name:"MuiListSubheader"}),{className:e,color:t="default",component:l="li",disableGutters:a=!1,disableSticky:p=!1,inset:v=!1,...r}=f,o={...f,color:t,component:l,disableGutters:a,disableSticky:p,inset:v},n=qt(o);return z.jsx(Zt,{as:l,className:it(n.root,e),ref:M,ownerState:o,...r})});qe&&(qe.muiSkipListHighlight=!0);function Kt(I){return nt("MuiImageListItemBar",I)}rt("MuiImageListItemBar",["root","positionBottom","positionTop","positionBelow","actionPositionLeft","actionPositionRight","titleWrap","titleWrapBottom","titleWrapTop","titleWrapBelow","titleWrapActionPosLeft","titleWrapActionPosRight","title","subtitle","actionIcon","actionIconActionPosLeft","actionIconActionPosRight"]);const Xt=I=>{const{classes:x,position:M,actionIcon:f,actionPosition:e}=I,t={root:["root",`position${ge(M)}`,`actionPosition${ge(e)}`],titleWrap:["titleWrap",`titleWrap${ge(M)}`,f&&`titleWrapActionPos${ge(e)}`],title:["title"],subtitle:["subtitle"],actionIcon:["actionIcon",`actionIconActionPos${ge(e)}`]};return at(t,Kt,x)},Vt=_e("div",{name:"MuiImageListItemBar",slot:"Root",overridesResolver:(I,x)=>{const{ownerState:M}=I;return[x.root,x[`position${ge(M.position)}`]]}})(Le(({theme:I})=>({position:"absolute",left:0,right:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",fontFamily:I.typography.fontFamily,variants:[{props:{position:"bottom"},style:{bottom:0}},{props:{position:"top"},style:{top:0}},{props:{position:"below"},style:{position:"relative",background:"transparent",alignItems:"normal"}}]}))),Jt=_e("div",{name:"MuiImageListItemBar",slot:"TitleWrap",overridesResolver:(I,x)=>{const{ownerState:M}=I;return[x.titleWrap,x[`titleWrap${ge(M.position)}`],M.actionIcon&&x[`titleWrapActionPos${ge(M.actionPosition)}`]]}})(Le(({theme:I})=>({flexGrow:1,padding:"12px 16px",color:(I.vars||I).palette.common.white,overflow:"hidden",variants:[{props:{position:"below"},style:{padding:"6px 0 12px",color:"inherit"}},{props:({ownerState:x})=>x.actionIcon&&x.actionPosition==="left",style:{paddingLeft:0}},{props:({ownerState:x})=>x.actionIcon&&x.actionPosition==="right",style:{paddingRight:0}}]}))),en=_e("div",{name:"MuiImageListItemBar",slot:"Title",overridesResolver:(I,x)=>x.title})(Le(({theme:I})=>({fontSize:I.typography.pxToRem(16),lineHeight:"24px",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}))),tn=_e("div",{name:"MuiImageListItemBar",slot:"Subtitle",overridesResolver:(I,x)=>x.subtitle})(Le(({theme:I})=>({fontSize:I.typography.pxToRem(12),lineHeight:1,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}))),nn=_e("div",{name:"MuiImageListItemBar",slot:"ActionIcon",overridesResolver:(I,x)=>{const{ownerState:M}=I;return[x.actionIcon,x[`actionIconActionPos${ge(M.actionPosition)}`]]}})({variants:[{props:{actionPosition:"left"},style:{order:-1}}]}),rn=V.forwardRef(function(x,M){const f=ot({props:x,name:"MuiImageListItemBar"}),{actionIcon:e,actionPosition:t="right",className:l,subtitle:a,title:p,position:v="bottom",...r}=f,o={...f,position:v,actionPosition:t},n=Xt(o);return z.jsxs(Vt,{ownerState:o,className:it(n.root,l),ref:M,...r,children:[z.jsxs(Jt,{ownerState:o,className:n.titleWrap,children:[z.jsx(en,{className:n.title,children:p}),a?z.jsx(tn,{className:n.subtitle,children:a}):null]}),e?z.jsx(nn,{ownerState:o,className:n.actionIcon,children:e}):null]})});function on(I,x){return x.forEach(function(M){M&&typeof M!="string"&&!Array.isArray(M)&&Object.keys(M).forEach(function(f){if(f!=="default"&&!(f in I)){var e=Object.getOwnPropertyDescriptor(M,f);Object.defineProperty(I,f,e.get?e:{enumerable:!0,get:function(){return M[f]}})}})}),Object.freeze(I)}function lt(I,x){return new Promise(function(M,f){let e;return an(I).then(function(t){try{return e=t,M(new Blob([x.slice(0,2),e,x.slice(2)],{type:"image/jpeg"}))}catch(l){return f(l)}},f)})}const an=I=>new Promise((x,M)=>{const f=new FileReader;f.addEventListener("load",({target:{result:e}})=>{const t=new DataView(e);let l=0;if(t.getUint16(l)!==65496)return M("not a valid JPEG");for(l+=2;;){const a=t.getUint16(l);if(a===65498)break;const p=t.getUint16(l+2);if(a===65505&&t.getUint32(l+4)===1165519206){const v=l+10;let r;switch(t.getUint16(v)){case 18761:r=!0;break;case 19789:r=!1;break;default:return M("TIFF header contains invalid endian")}if(t.getUint16(v+2,r)!==42)return M("TIFF header contains invalid version");const o=t.getUint32(v+4,r),n=v+o+2+12*t.getUint16(v+o,r);for(let s=v+o+2;s<n;s+=12)if(t.getUint16(s,r)==274){if(t.getUint16(s+2,r)!==3)return M("Orientation data type is invalid");if(t.getUint32(s+4,r)!==1)return M("Orientation data count is invalid");t.setUint16(s+8,1,r);break}return x(e.slice(l,l+2+p))}l+=2+p}return x(new Blob)}),f.readAsArrayBuffer(I)});var De={},sn={get exports(){return De},set exports(I){De=I}};(function(I){var x,M,f={};sn.exports=f,f.parse=function(e,t){for(var l=f.bin.readUshort,a=f.bin.readUint,p=0,v={},r=new Uint8Array(e),o=r.length-4;a(r,o)!=101010256;)o--;p=o,p+=4;var n=l(r,p+=4);l(r,p+=2);var s=a(r,p+=2),h=a(r,p+=4);p+=4,p=h;for(var U=0;U<n;U++){a(r,p),p+=4,p+=4,p+=4,a(r,p+=4),s=a(r,p+=4);var E=a(r,p+=4),m=l(r,p+=4),D=l(r,p+2),T=l(r,p+4);p+=6;var F=a(r,p+=8);p+=4,p+=m+D+T,f._readLocal(r,F,v,s,E,t)}return v},f._readLocal=function(e,t,l,a,p,v){var r=f.bin.readUshort,o=f.bin.readUint;o(e,t),r(e,t+=4),r(e,t+=2);var n=r(e,t+=2);o(e,t+=2),o(e,t+=4),t+=4;var s=r(e,t+=8),h=r(e,t+=2);t+=2;var U=f.bin.readUTF8(e,t,s);if(t+=s,t+=h,v)l[U]={size:p,csize:a};else{var E=new Uint8Array(e.buffer,t);if(n==0)l[U]=new Uint8Array(E.buffer.slice(t,t+a));else{if(n!=8)throw"unknown compression method: "+n;var m=new Uint8Array(p);f.inflateRaw(E,m),l[U]=m}}},f.inflateRaw=function(e,t){return f.F.inflate(e,t)},f.inflate=function(e,t){return e[0],e[1],f.inflateRaw(new Uint8Array(e.buffer,e.byteOffset+2,e.length-6),t)},f.deflate=function(e,t){t==null&&(t={level:6});var l=0,a=new Uint8Array(50+Math.floor(1.1*e.length));a[l]=120,a[l+1]=156,l+=2,l=f.F.deflateRaw(e,a,l,t.level);var p=f.adler(e,0,e.length);return a[l+0]=p>>>24&255,a[l+1]=p>>>16&255,a[l+2]=p>>>8&255,a[l+3]=p>>>0&255,new Uint8Array(a.buffer,0,l+4)},f.deflateRaw=function(e,t){t==null&&(t={level:6});var l=new Uint8Array(50+Math.floor(1.1*e.length)),a=f.F.deflateRaw(e,l,a,t.level);return new Uint8Array(l.buffer,0,a)},f.encode=function(e,t){t==null&&(t=!1);var l=0,a=f.bin.writeUint,p=f.bin.writeUshort,v={};for(var r in e){var o=!f._noNeed(r)&&!t,n=e[r],s=f.crc.crc(n,0,n.length);v[r]={cpr:o,usize:n.length,crc:s,file:o?f.deflateRaw(n):n}}for(var r in v)l+=v[r].file.length+30+46+2*f.bin.sizeUTF8(r);l+=22;var h=new Uint8Array(l),U=0,E=[];for(var r in v){var m=v[r];E.push(U),U=f._writeHeader(h,U,r,m,0)}var D=0,T=U;for(var r in v)m=v[r],E.push(U),U=f._writeHeader(h,U,r,m,1,E[D++]);var F=U-T;return a(h,U,101010256),U+=4,p(h,U+=4,D),p(h,U+=2,D),a(h,U+=2,F),a(h,U+=4,T),U+=4,U+=2,h.buffer},f._noNeed=function(e){var t=e.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(t)!=-1},f._writeHeader=function(e,t,l,a,p,v){var r=f.bin.writeUint,o=f.bin.writeUshort,n=a.file;return r(e,t,p==0?67324752:33639248),t+=4,p==1&&(t+=2),o(e,t,20),o(e,t+=2,0),o(e,t+=2,a.cpr?8:0),r(e,t+=2,0),r(e,t+=4,a.crc),r(e,t+=4,n.length),r(e,t+=4,a.usize),o(e,t+=4,f.bin.sizeUTF8(l)),o(e,t+=2,0),t+=2,p==1&&(t+=2,t+=2,r(e,t+=6,v),t+=4),t+=f.bin.writeUTF8(e,t,l),p==0&&(e.set(n,t),t+=n.length),t},f.crc={table:function(){for(var e=new Uint32Array(256),t=0;t<256;t++){for(var l=t,a=0;a<8;a++)1&l?l=3988292384^l>>>1:l>>>=1;e[t]=l}return e}(),update:function(e,t,l,a){for(var p=0;p<a;p++)e=f.crc.table[255&(e^t[l+p])]^e>>>8;return e},crc:function(e,t,l){return 4294967295^f.crc.update(4294967295,e,t,l)}},f.adler=function(e,t,l){for(var a=1,p=0,v=t,r=t+l;v<r;){for(var o=Math.min(v+5552,r);v<o;)p+=a+=e[v++];a%=65521,p%=65521}return p<<16|a},f.bin={readUshort:function(e,t){return e[t]|e[t+1]<<8},writeUshort:function(e,t,l){e[t]=255&l,e[t+1]=l>>8&255},readUint:function(e,t){return 16777216*e[t+3]+(e[t+2]<<16|e[t+1]<<8|e[t])},writeUint:function(e,t,l){e[t]=255&l,e[t+1]=l>>8&255,e[t+2]=l>>16&255,e[t+3]=l>>24&255},readASCII:function(e,t,l){for(var a="",p=0;p<l;p++)a+=String.fromCharCode(e[t+p]);return a},writeASCII:function(e,t,l){for(var a=0;a<l.length;a++)e[t+a]=l.charCodeAt(a)},pad:function(e){return e.length<2?"0"+e:e},readUTF8:function(e,t,l){for(var a,p="",v=0;v<l;v++)p+="%"+f.bin.pad(e[t+v].toString(16));try{a=decodeURIComponent(p)}catch{return f.bin.readASCII(e,t,l)}return a},writeUTF8:function(e,t,l){for(var a=l.length,p=0,v=0;v<a;v++){var r=l.charCodeAt(v);if((4294967168&r)==0)e[t+p]=r,p++;else if((4294965248&r)==0)e[t+p]=192|r>>6,e[t+p+1]=128|r>>0&63,p+=2;else if((4294901760&r)==0)e[t+p]=224|r>>12,e[t+p+1]=128|r>>6&63,e[t+p+2]=128|r>>0&63,p+=3;else{if((4292870144&r)!=0)throw"e";e[t+p]=240|r>>18,e[t+p+1]=128|r>>12&63,e[t+p+2]=128|r>>6&63,e[t+p+3]=128|r>>0&63,p+=4}}return p},sizeUTF8:function(e){for(var t=e.length,l=0,a=0;a<t;a++){var p=e.charCodeAt(a);if((4294967168&p)==0)l++;else if((4294965248&p)==0)l+=2;else if((4294901760&p)==0)l+=3;else{if((4292870144&p)!=0)throw"e";l+=4}}return l}},f.F={},f.F.deflateRaw=function(e,t,l,a){var p=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][a],v=f.F.U,r=f.F._goodIndex;f.F._hash;var o=f.F._putsE,n=0,s=l<<3,h=0,U=e.length;if(a==0){for(;n<U;)o(t,s,n+(A=Math.min(65535,U-n))==U?1:0),s=f.F._copyExact(e,n,A,t,s+8),n+=A;return s>>>3}var E=v.lits,m=v.strt,D=v.prev,T=0,F=0,L=0,g=0,P=0,u=0;for(U>2&&(m[u=f.F._hash(e,0)]=0),n=0;n<U;n++){if(P=u,n+1<U-2){u=f.F._hash(e,n+1);var c=n+1&32767;D[c]=m[u],m[u]=c}if(h<=n){(T>14e3||F>26697)&&U-n>100&&(h<n&&(E[T]=n-h,T+=2,h=n),s=f.F._writeBlock(n==U-1||h==U?1:0,E,T,g,e,L,n-L,t,s),T=F=g=0,L=n);var y=0;n<U-2&&(y=f.F._bestMatch(e,n,D,P,Math.min(p[2],U-n),p[3]));var A=y>>>16,w=65535&y;if(y!=0){w=65535&y;var S=r(A=y>>>16,v.of0);v.lhst[257+S]++;var b=r(w,v.df0);v.dhst[b]++,g+=v.exb[S]+v.dxb[b],E[T]=A<<23|n-h,E[T+1]=w<<16|S<<8|b,T+=2,h=n+A}else v.lhst[e[n]]++;F++}}for(L==n&&e.length!=0||(h<n&&(E[T]=n-h,T+=2,h=n),s=f.F._writeBlock(1,E,T,g,e,L,n-L,t,s),T=0,F=0,T=F=g=0,L=n);(7&s)!=0;)s++;return s>>>3},f.F._bestMatch=function(e,t,l,a,p,v){var r=32767&t,o=l[r],n=r-o+32768&32767;if(o==r||a!=f.F._hash(e,t-n))return 0;for(var s=0,h=0,U=Math.min(32767,t);n<=U&&--v!=0&&o!=r;){if(s==0||e[t+s]==e[t+s-n]){var E=f.F._howLong(e,t,n);if(E>s){if(h=n,(s=E)>=p)break;n+2<E&&(E=n+2);for(var m=0,D=0;D<E-2;D++){var T=t-n+D+32768&32767,F=T-l[T]+32768&32767;F>m&&(m=F,o=T)}}}n+=(r=o)-(o=l[r])+32768&32767}return s<<16|h},f.F._howLong=function(e,t,l){if(e[t]!=e[t-l]||e[t+1]!=e[t+1-l]||e[t+2]!=e[t+2-l])return 0;var a=t,p=Math.min(e.length,t+258);for(t+=3;t<p&&e[t]==e[t-l];)t++;return t-a},f.F._hash=function(e,t){return(e[t]<<8|e[t+1])+(e[t+2]<<4)&65535},f.saved=0,f.F._writeBlock=function(e,t,l,a,p,v,r,o,n){var s,h,U,E,m,D,T,F,L,g=f.F.U,P=f.F._putsF,u=f.F._putsE;g.lhst[256]++,h=(s=f.F.getTrees())[0],U=s[1],E=s[2],m=s[3],D=s[4],T=s[5],F=s[6],L=s[7];var c=32+((n+3&7)==0?0:8-(n+3&7))+(r<<3),y=a+f.F.contSize(g.fltree,g.lhst)+f.F.contSize(g.fdtree,g.dhst),A=a+f.F.contSize(g.ltree,g.lhst)+f.F.contSize(g.dtree,g.dhst);A+=14+3*T+f.F.contSize(g.itree,g.ihst)+(2*g.ihst[16]+3*g.ihst[17]+7*g.ihst[18]);for(var w=0;w<286;w++)g.lhst[w]=0;for(w=0;w<30;w++)g.dhst[w]=0;for(w=0;w<19;w++)g.ihst[w]=0;var S=c<y&&c<A?0:y<A?1:2;if(P(o,n,e),P(o,n+1,S),n+=3,S==0){for(;(7&n)!=0;)n++;n=f.F._copyExact(p,v,r,o,n)}else{var b,R;if(S==1&&(b=g.fltree,R=g.fdtree),S==2){f.F.makeCodes(g.ltree,h),f.F.revCodes(g.ltree,h),f.F.makeCodes(g.dtree,U),f.F.revCodes(g.dtree,U),f.F.makeCodes(g.itree,E),f.F.revCodes(g.itree,E),b=g.ltree,R=g.dtree,u(o,n,m-257),u(o,n+=5,D-1),u(o,n+=5,T-4),n+=4;for(var d=0;d<T;d++)u(o,n+3*d,g.itree[1+(g.ordr[d]<<1)]);n+=3*T,n=f.F._codeTiny(F,g.itree,o,n),n=f.F._codeTiny(L,g.itree,o,n)}for(var i=v,k=0;k<l;k+=2){for(var C=t[k],j=C>>>23,W=i+(8388607&C);i<W;)n=f.F._writeLit(p[i++],b,o,n);if(j!=0){var B=t[k+1],H=B>>16,O=B>>8&255,_=255&B;u(o,n=f.F._writeLit(257+O,b,o,n),j-g.of0[O]),n+=g.exb[O],P(o,n=f.F._writeLit(_,R,o,n),H-g.df0[_]),n+=g.dxb[_],i+=j}}n=f.F._writeLit(256,b,o,n)}return n},f.F._copyExact=function(e,t,l,a,p){var v=p>>>3;return a[v]=l,a[v+1]=l>>>8,a[v+2]=255-a[v],a[v+3]=255-a[v+1],v+=4,a.set(new Uint8Array(e.buffer,t,l),v),p+(l+4<<3)},f.F.getTrees=function(){for(var e=f.F.U,t=f.F._hufTree(e.lhst,e.ltree,15),l=f.F._hufTree(e.dhst,e.dtree,15),a=[],p=f.F._lenCodes(e.ltree,a),v=[],r=f.F._lenCodes(e.dtree,v),o=0;o<a.length;o+=2)e.ihst[a[o]]++;for(o=0;o<v.length;o+=2)e.ihst[v[o]]++;for(var n=f.F._hufTree(e.ihst,e.itree,7),s=19;s>4&&e.itree[1+(e.ordr[s-1]<<1)]==0;)s--;return[t,l,n,p,r,s,a,v]},f.F.getSecond=function(e){for(var t=[],l=0;l<e.length;l+=2)t.push(e[l+1]);return t},f.F.nonZero=function(e){for(var t="",l=0;l<e.length;l+=2)e[l+1]!=0&&(t+=(l>>1)+",");return t},f.F.contSize=function(e,t){for(var l=0,a=0;a<t.length;a++)l+=t[a]*e[1+(a<<1)];return l},f.F._codeTiny=function(e,t,l,a){for(var p=0;p<e.length;p+=2){var v=e[p],r=e[p+1];a=f.F._writeLit(v,t,l,a);var o=v==16?2:v==17?3:7;v>15&&(f.F._putsE(l,a,r,o),a+=o)}return a},f.F._lenCodes=function(e,t){for(var l=e.length;l!=2&&e[l-1]==0;)l-=2;for(var a=0;a<l;a+=2){var p=e[a+1],v=a+3<l?e[a+3]:-1,r=a+5<l?e[a+5]:-1,o=a==0?-1:e[a-1];if(p==0&&v==p&&r==p){for(var n=a+5;n+2<l&&e[n+2]==p;)n+=2;(s=Math.min(n+1-a>>>1,138))<11?t.push(17,s-3):t.push(18,s-11),a+=2*s-2}else if(p==o&&v==p&&r==p){for(n=a+5;n+2<l&&e[n+2]==p;)n+=2;var s=Math.min(n+1-a>>>1,6);t.push(16,s-3),a+=2*s-2}else t.push(p,0)}return l>>>1},f.F._hufTree=function(e,t,l){var a=[],p=e.length,v=t.length,r=0;for(r=0;r<v;r+=2)t[r]=0,t[r+1]=0;for(r=0;r<p;r++)e[r]!=0&&a.push({lit:r,f:e[r]});var o=a.length,n=a.slice(0);if(o==0)return 0;if(o==1){var s=a[0].lit;return n=s==0?1:0,t[1+(s<<1)]=1,t[1+(n<<1)]=1,1}a.sort(function(F,L){return F.f-L.f});var h=a[0],U=a[1],E=0,m=1,D=2;for(a[0]={lit:-1,f:h.f+U.f,l:h,r:U,d:0};m!=o-1;)h=E!=m&&(D==o||a[E].f<a[D].f)?a[E++]:a[D++],U=E!=m&&(D==o||a[E].f<a[D].f)?a[E++]:a[D++],a[m++]={lit:-1,f:h.f+U.f,l:h,r:U};var T=f.F.setDepth(a[m-1],0);for(T>l&&(f.F.restrictDepth(n,l,T),T=l),r=0;r<o;r++)t[1+(n[r].lit<<1)]=n[r].d;return T},f.F.setDepth=function(e,t){return e.lit!=-1?(e.d=t,t):Math.max(f.F.setDepth(e.l,t+1),f.F.setDepth(e.r,t+1))},f.F.restrictDepth=function(e,t,l){var a=0,p=1<<l-t,v=0;for(e.sort(function(o,n){return n.d==o.d?o.f-n.f:n.d-o.d}),a=0;a<e.length&&e[a].d>t;a++){var r=e[a].d;e[a].d=t,v+=p-(1<<l-r)}for(v>>>=l-t;v>0;)(r=e[a].d)<t?(e[a].d++,v-=1<<t-r-1):a++;for(;a>=0;a--)e[a].d==t&&v<0&&(e[a].d--,v++);v!=0&&console.log("debt left")},f.F._goodIndex=function(e,t){var l=0;return t[16|l]<=e&&(l|=16),t[8|l]<=e&&(l|=8),t[4|l]<=e&&(l|=4),t[2|l]<=e&&(l|=2),t[1|l]<=e&&(l|=1),l},f.F._writeLit=function(e,t,l,a){return f.F._putsF(l,a,t[e<<1]),a+t[1+(e<<1)]},f.F.inflate=function(e,t){var l=Uint8Array;if(e[0]==3&&e[1]==0)return t||new l(0);var a=f.F,p=a._bitsF,v=a._bitsE,r=a._decodeTiny,o=a.makeCodes,n=a.codes2map,s=a._get17,h=a.U,U=t==null;U&&(t=new l(e.length>>>2<<3));for(var E,m,D=0,T=0,F=0,L=0,g=0,P=0,u=0,c=0,y=0;D==0;)if(D=p(e,y,1),T=p(e,y+1,2),y+=3,T!=0){if(U&&(t=f.F._check(t,c+(1<<17))),T==1&&(E=h.flmap,m=h.fdmap,P=511,u=31),T==2){F=v(e,y,5)+257,L=v(e,y+5,5)+1,g=v(e,y+10,4)+4,y+=14;for(var A=0;A<38;A+=2)h.itree[A]=0,h.itree[A+1]=0;var w=1;for(A=0;A<g;A++){var S=v(e,y+3*A,3);h.itree[1+(h.ordr[A]<<1)]=S,S>w&&(w=S)}y+=3*g,o(h.itree,w),n(h.itree,w,h.imap),E=h.lmap,m=h.dmap,y=r(h.imap,(1<<w)-1,F+L,e,y,h.ttree);var b=a._copyOut(h.ttree,0,F,h.ltree);P=(1<<b)-1;var R=a._copyOut(h.ttree,F,L,h.dtree);u=(1<<R)-1,o(h.ltree,b),n(h.ltree,b,E),o(h.dtree,R),n(h.dtree,R,m)}for(;;){var d=E[s(e,y)&P];y+=15&d;var i=d>>>4;if(!(i>>>8))t[c++]=i;else{if(i==256)break;var k=c+i-254;if(i>264){var C=h.ldef[i-257];k=c+(C>>>3)+v(e,y,7&C),y+=7&C}var j=m[s(e,y)&u];y+=15&j;var W=j>>>4,B=h.ddef[W],H=(B>>>4)+p(e,y,15&B);for(y+=15&B,U&&(t=f.F._check(t,c+(1<<17)));c<k;)t[c]=t[c++-H],t[c]=t[c++-H],t[c]=t[c++-H],t[c]=t[c++-H];c=k}}}else{(7&y)!=0&&(y+=8-(7&y));var O=4+(y>>>3),_=e[O-4]|e[O-3]<<8;U&&(t=f.F._check(t,c+_)),t.set(new l(e.buffer,e.byteOffset+O,_),c),y=O+_<<3,c+=_}return t.length==c?t:t.slice(0,c)},f.F._check=function(e,t){var l=e.length;if(t<=l)return e;var a=new Uint8Array(Math.max(l<<1,t));return a.set(e,0),a},f.F._decodeTiny=function(e,t,l,a,p,v){for(var r=f.F._bitsE,o=f.F._get17,n=0;n<l;){var s=e[o(a,p)&t];p+=15&s;var h=s>>>4;if(h<=15)v[n]=h,n++;else{var U=0,E=0;h==16?(E=3+r(a,p,2),p+=2,U=v[n-1]):h==17?(E=3+r(a,p,3),p+=3):h==18&&(E=11+r(a,p,7),p+=7);for(var m=n+E;n<m;)v[n]=U,n++}}return p},f.F._copyOut=function(e,t,l,a){for(var p=0,v=0,r=a.length>>>1;v<l;){var o=e[v+t];a[v<<1]=0,a[1+(v<<1)]=o,o>p&&(p=o),v++}for(;v<r;)a[v<<1]=0,a[1+(v<<1)]=0,v++;return p},f.F.makeCodes=function(e,t){for(var l,a,p,v,r=f.F.U,o=e.length,n=r.bl_count,s=0;s<=t;s++)n[s]=0;for(s=1;s<o;s+=2)n[e[s]]++;var h=r.next_code;for(l=0,n[0]=0,a=1;a<=t;a++)l=l+n[a-1]<<1,h[a]=l;for(p=0;p<o;p+=2)(v=e[p+1])!=0&&(e[p]=h[v],h[v]++)},f.F.codes2map=function(e,t,l){for(var a=e.length,p=f.F.U.rev15,v=0;v<a;v+=2)if(e[v+1]!=0)for(var r=v>>1,o=e[v+1],n=r<<4|o,s=t-o,h=e[v]<<s,U=h+(1<<s);h!=U;)l[p[h]>>>15-t]=n,h++},f.F.revCodes=function(e,t){for(var l=f.F.U.rev15,a=15-t,p=0;p<e.length;p+=2){var v=e[p]<<t-e[p+1];e[p]=l[v]>>>a}},f.F._putsE=function(e,t,l){l<<=7&t;var a=t>>>3;e[a]|=l,e[a+1]|=l>>>8},f.F._putsF=function(e,t,l){l<<=7&t;var a=t>>>3;e[a]|=l,e[a+1]|=l>>>8,e[a+2]|=l>>>16},f.F._bitsE=function(e,t,l){return(e[t>>>3]|e[1+(t>>>3)]<<8)>>>(7&t)&(1<<l)-1},f.F._bitsF=function(e,t,l){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)&(1<<l)-1},f.F._get17=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)},f.F._get25=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16|e[3+(t>>>3)]<<24)>>>(7&t)},f.F.U=(x=Uint16Array,M=Uint32Array,{next_code:new x(16),bl_count:new x(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new x(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new M(32),flmap:new x(512),fltree:[],fdmap:new x(32),fdtree:[],lmap:new x(32768),ltree:[],ttree:[],dmap:new x(32768),dtree:[],imap:new x(512),itree:[],rev15:new x(32768),lhst:new M(286),dhst:new M(30),ihst:new M(19),lits:new M(15e3),strt:new x(65536),prev:new x(32768)}),function(){for(var e=f.F.U,t=0;t<32768;t++){var l=t;l=(4278255360&(l=(4042322160&(l=(3435973836&(l=(2863311530&l)>>>1|(1431655765&l)<<1))>>>2|(858993459&l)<<2))>>>4|(252645135&l)<<4))>>>8|(16711935&l)<<8,e.rev15[t]=(l>>>16|l<<16)>>>17}function a(p,v,r){for(;v--!=0;)p.push(0,r)}for(t=0;t<32;t++)e.ldef[t]=e.of0[t]<<3|e.exb[t],e.ddef[t]=e.df0[t]<<4|e.dxb[t];a(e.fltree,144,8),a(e.fltree,112,9),a(e.fltree,24,7),a(e.fltree,8,8),f.F.makeCodes(e.fltree,9),f.F.codes2map(e.fltree,9,e.flmap),f.F.revCodes(e.fltree,9),a(e.fdtree,32,5),f.F.makeCodes(e.fdtree,5),f.F.codes2map(e.fdtree,5,e.fdmap),f.F.revCodes(e.fdtree,5),a(e.itree,19,0),a(e.ltree,286,0),a(e.dtree,30,0),a(e.ttree,320,0)}()})();var ln=on({__proto__:null,default:De},[De]);const pe=function(){var I={nextZero(r,o){for(;r[o]!=0;)o++;return o},readUshort:(r,o)=>r[o]<<8|r[o+1],writeUshort(r,o,n){r[o]=n>>8&255,r[o+1]=255&n},readUint:(r,o)=>16777216*r[o]+(r[o+1]<<16|r[o+2]<<8|r[o+3]),writeUint(r,o,n){r[o]=n>>24&255,r[o+1]=n>>16&255,r[o+2]=n>>8&255,r[o+3]=255&n},readASCII(r,o,n){let s="";for(let h=0;h<n;h++)s+=String.fromCharCode(r[o+h]);return s},writeASCII(r,o,n){for(let s=0;s<n.length;s++)r[o+s]=n.charCodeAt(s)},readBytes(r,o,n){const s=[];for(let h=0;h<n;h++)s.push(r[o+h]);return s},pad:r=>r.length<2?`0${r}`:r,readUTF8(r,o,n){let s,h="";for(let U=0;U<n;U++)h+=`%${I.pad(r[o+U].toString(16))}`;try{s=decodeURIComponent(h)}catch{return I.readASCII(r,o,n)}return s}};function x(r,o,n,s){const h=o*n,U=t(s),E=Math.ceil(o*U/8),m=new Uint8Array(4*h),D=new Uint32Array(m.buffer),{ctype:T}=s,{depth:F}=s,L=I.readUshort;if(T==6){const C=h<<2;if(F==8)for(var g=0;g<C;g+=4)m[g]=r[g],m[g+1]=r[g+1],m[g+2]=r[g+2],m[g+3]=r[g+3];if(F==16)for(g=0;g<C;g++)m[g]=r[g<<1]}else if(T==2){const C=s.tabs.tRNS;if(C==null){if(F==8)for(g=0;g<h;g++){var P=3*g;D[g]=255<<24|r[P+2]<<16|r[P+1]<<8|r[P]}if(F==16)for(g=0;g<h;g++)P=6*g,D[g]=255<<24|r[P+4]<<16|r[P+2]<<8|r[P]}else{var u=C[0];const j=C[1],W=C[2];if(F==8)for(g=0;g<h;g++){var c=g<<2;P=3*g,D[g]=255<<24|r[P+2]<<16|r[P+1]<<8|r[P],r[P]==u&&r[P+1]==j&&r[P+2]==W&&(m[c+3]=0)}if(F==16)for(g=0;g<h;g++)c=g<<2,P=6*g,D[g]=255<<24|r[P+4]<<16|r[P+2]<<8|r[P],L(r,P)==u&&L(r,P+2)==j&&L(r,P+4)==W&&(m[c+3]=0)}}else if(T==3){const C=s.tabs.PLTE,j=s.tabs.tRNS,W=j?j.length:0;if(F==1)for(var y=0;y<n;y++){var A=y*E,w=y*o;for(g=0;g<o;g++){c=w+g<<2;var S=3*(b=r[A+(g>>3)]>>7-((7&g)<<0)&1);m[c]=C[S],m[c+1]=C[S+1],m[c+2]=C[S+2],m[c+3]=b<W?j[b]:255}}if(F==2)for(y=0;y<n;y++)for(A=y*E,w=y*o,g=0;g<o;g++)c=w+g<<2,S=3*(b=r[A+(g>>2)]>>6-((3&g)<<1)&3),m[c]=C[S],m[c+1]=C[S+1],m[c+2]=C[S+2],m[c+3]=b<W?j[b]:255;if(F==4)for(y=0;y<n;y++)for(A=y*E,w=y*o,g=0;g<o;g++)c=w+g<<2,S=3*(b=r[A+(g>>1)]>>4-((1&g)<<2)&15),m[c]=C[S],m[c+1]=C[S+1],m[c+2]=C[S+2],m[c+3]=b<W?j[b]:255;if(F==8)for(g=0;g<h;g++){var b;c=g<<2,S=3*(b=r[g]),m[c]=C[S],m[c+1]=C[S+1],m[c+2]=C[S+2],m[c+3]=b<W?j[b]:255}}else if(T==4){if(F==8)for(g=0;g<h;g++){c=g<<2;var R=r[d=g<<1];m[c]=R,m[c+1]=R,m[c+2]=R,m[c+3]=r[d+1]}if(F==16)for(g=0;g<h;g++){var d;c=g<<2,R=r[d=g<<2],m[c]=R,m[c+1]=R,m[c+2]=R,m[c+3]=r[d+2]}}else if(T==0)for(u=s.tabs.tRNS?s.tabs.tRNS:-1,y=0;y<n;y++){const C=y*E,j=y*o;if(F==1)for(var i=0;i<o;i++){var k=(R=255*(r[C+(i>>>3)]>>>7-(7&i)&1))==255*u?0:255;D[j+i]=k<<24|R<<16|R<<8|R}else if(F==2)for(i=0;i<o;i++)k=(R=85*(r[C+(i>>>2)]>>>6-((3&i)<<1)&3))==85*u?0:255,D[j+i]=k<<24|R<<16|R<<8|R;else if(F==4)for(i=0;i<o;i++)k=(R=17*(r[C+(i>>>1)]>>>4-((1&i)<<2)&15))==17*u?0:255,D[j+i]=k<<24|R<<16|R<<8|R;else if(F==8)for(i=0;i<o;i++)k=(R=r[C+i])==u?0:255,D[j+i]=k<<24|R<<16|R<<8|R;else if(F==16)for(i=0;i<o;i++)R=r[C+(i<<1)],k=L(r,C+(i<<1))==u?0:255,D[j+i]=k<<24|R<<16|R<<8|R}return m}function M(r,o,n,s){const h=t(r),U=Math.ceil(n*h/8),E=new Uint8Array((U+1+r.interlace)*s);return o=r.tabs.CgBI?e(o,E):f(o,E),r.interlace==0?o=l(o,r,0,n,s):r.interlace==1&&(o=function(D,T){const F=T.width,L=T.height,g=t(T),P=g>>3,u=Math.ceil(F*g/8),c=new Uint8Array(L*u);let y=0;const A=[0,0,4,0,2,0,1],w=[0,4,0,2,0,1,0],S=[8,8,8,4,4,2,2],b=[8,8,4,4,2,2,1];let R=0;for(;R<7;){const i=S[R],k=b[R];let C=0,j=0,W=A[R];for(;W<L;)W+=i,j++;let B=w[R];for(;B<F;)B+=k,C++;const H=Math.ceil(C*g/8);l(D,T,y,C,j);let O=0,_=A[R];for(;_<L;){let N=w[R],Z=y+O*H<<3;for(;N<F;){var d;if(g==1&&(d=(d=D[Z>>3])>>7-(7&Z)&1,c[_*u+(N>>3)]|=d<<7-((7&N)<<0)),g==2&&(d=(d=D[Z>>3])>>6-(7&Z)&3,c[_*u+(N>>2)]|=d<<6-((3&N)<<1)),g==4&&(d=(d=D[Z>>3])>>4-(7&Z)&15,c[_*u+(N>>1)]|=d<<4-((1&N)<<2)),g>=8){const $=_*u+N*P;for(let Q=0;Q<P;Q++)c[$+Q]=D[(Z>>3)+Q]}Z+=g,N+=k}O++,_+=i}C*j!=0&&(y+=j*(1+H)),R+=1}return c}(o,r)),o}function f(r,o){return e(new Uint8Array(r.buffer,2,r.length-6),o)}var e=function(){const r={H:{}};return r.H.N=function(o,n){const s=Uint8Array;let h,U,E=0,m=0,D=0,T=0,F=0,L=0,g=0,P=0,u=0;if(o[0]==3&&o[1]==0)return n||new s(0);const c=r.H,y=c.b,A=c.e,w=c.R,S=c.n,b=c.A,R=c.Z,d=c.m,i=n==null;for(i&&(n=new s(o.length>>>2<<5));E==0;)if(E=y(o,u,1),m=y(o,u+1,2),u+=3,m!=0){if(i&&(n=r.H.W(n,P+(1<<17))),m==1&&(h=d.J,U=d.h,L=511,g=31),m==2){D=A(o,u,5)+257,T=A(o,u+5,5)+1,F=A(o,u+10,4)+4,u+=14;let C=1;for(var k=0;k<38;k+=2)d.Q[k]=0,d.Q[k+1]=0;for(k=0;k<F;k++){const B=A(o,u+3*k,3);d.Q[1+(d.X[k]<<1)]=B,B>C&&(C=B)}u+=3*F,S(d.Q,C),b(d.Q,C,d.u),h=d.w,U=d.d,u=w(d.u,(1<<C)-1,D+T,o,u,d.v);const j=c.V(d.v,0,D,d.C);L=(1<<j)-1;const W=c.V(d.v,D,T,d.D);g=(1<<W)-1,S(d.C,j),b(d.C,j,h),S(d.D,W),b(d.D,W,U)}for(;;){const C=h[R(o,u)&L];u+=15&C;const j=C>>>4;if(!(j>>>8))n[P++]=j;else{if(j==256)break;{let W=P+j-254;if(j>264){const N=d.q[j-257];W=P+(N>>>3)+A(o,u,7&N),u+=7&N}const B=U[R(o,u)&g];u+=15&B;const H=B>>>4,O=d.c[H],_=(O>>>4)+y(o,u,15&O);for(u+=15&O;P<W;)n[P]=n[P++-_],n[P]=n[P++-_],n[P]=n[P++-_],n[P]=n[P++-_];P=W}}}}else{(7&u)!=0&&(u+=8-(7&u));const C=4+(u>>>3),j=o[C-4]|o[C-3]<<8;i&&(n=r.H.W(n,P+j)),n.set(new s(o.buffer,o.byteOffset+C,j),P),u=C+j<<3,P+=j}return n.length==P?n:n.slice(0,P)},r.H.W=function(o,n){const s=o.length;if(n<=s)return o;const h=new Uint8Array(s<<1);return h.set(o,0),h},r.H.R=function(o,n,s,h,U,E){const m=r.H.e,D=r.H.Z;let T=0;for(;T<s;){const F=o[D(h,U)&n];U+=15&F;const L=F>>>4;if(L<=15)E[T]=L,T++;else{let g=0,P=0;L==16?(P=3+m(h,U,2),U+=2,g=E[T-1]):L==17?(P=3+m(h,U,3),U+=3):L==18&&(P=11+m(h,U,7),U+=7);const u=T+P;for(;T<u;)E[T]=g,T++}}return U},r.H.V=function(o,n,s,h){let U=0,E=0;const m=h.length>>>1;for(;E<s;){const D=o[E+n];h[E<<1]=0,h[1+(E<<1)]=D,D>U&&(U=D),E++}for(;E<m;)h[E<<1]=0,h[1+(E<<1)]=0,E++;return U},r.H.n=function(o,n){const s=r.H.m,h=o.length;let U,E,m,D;const T=s.j;for(var F=0;F<=n;F++)T[F]=0;for(F=1;F<h;F+=2)T[o[F]]++;const L=s.K;for(U=0,T[0]=0,E=1;E<=n;E++)U=U+T[E-1]<<1,L[E]=U;for(m=0;m<h;m+=2)D=o[m+1],D!=0&&(o[m]=L[D],L[D]++)},r.H.A=function(o,n,s){const h=o.length,U=r.H.m.r;for(let E=0;E<h;E+=2)if(o[E+1]!=0){const m=E>>1,D=o[E+1],T=m<<4|D,F=n-D;let L=o[E]<<F;const g=L+(1<<F);for(;L!=g;)s[U[L]>>>15-n]=T,L++}},r.H.l=function(o,n){const s=r.H.m.r,h=15-n;for(let U=0;U<o.length;U+=2){const E=o[U]<<n-o[U+1];o[U]=s[E]>>>h}},r.H.M=function(o,n,s){s<<=7&n;const h=n>>>3;o[h]|=s,o[h+1]|=s>>>8},r.H.I=function(o,n,s){s<<=7&n;const h=n>>>3;o[h]|=s,o[h+1]|=s>>>8,o[h+2]|=s>>>16},r.H.e=function(o,n,s){return(o[n>>>3]|o[1+(n>>>3)]<<8)>>>(7&n)&(1<<s)-1},r.H.b=function(o,n,s){return(o[n>>>3]|o[1+(n>>>3)]<<8|o[2+(n>>>3)]<<16)>>>(7&n)&(1<<s)-1},r.H.Z=function(o,n){return(o[n>>>3]|o[1+(n>>>3)]<<8|o[2+(n>>>3)]<<16)>>>(7&n)},r.H.i=function(o,n){return(o[n>>>3]|o[1+(n>>>3)]<<8|o[2+(n>>>3)]<<16|o[3+(n>>>3)]<<24)>>>(7&n)},r.H.m=function(){const o=Uint16Array,n=Uint32Array;return{K:new o(16),j:new o(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new o(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new n(32),J:new o(512),_:[],h:new o(32),$:[],w:new o(32768),C:[],v:[],d:new o(32768),D:[],u:new o(512),Q:[],r:new o(32768),s:new n(286),Y:new n(30),a:new n(19),t:new n(15e3),k:new o(65536),g:new o(32768)}}(),function(){const o=r.H.m;for(var n=0;n<32768;n++){let h=n;h=(2863311530&h)>>>1|(1431655765&h)<<1,h=(3435973836&h)>>>2|(858993459&h)<<2,h=(4042322160&h)>>>4|(252645135&h)<<4,h=(4278255360&h)>>>8|(16711935&h)<<8,o.r[n]=(h>>>16|h<<16)>>>17}function s(h,U,E){for(;U--!=0;)h.push(0,E)}for(n=0;n<32;n++)o.q[n]=o.S[n]<<3|o.T[n],o.c[n]=o.p[n]<<4|o.z[n];s(o._,144,8),s(o._,112,9),s(o._,24,7),s(o._,8,8),r.H.n(o._,9),r.H.A(o._,9,o.J),r.H.l(o._,9),s(o.$,32,5),r.H.n(o.$,5),r.H.A(o.$,5,o.h),r.H.l(o.$,5),s(o.Q,19,0),s(o.C,286,0),s(o.D,30,0),s(o.v,320,0)}(),r.H.N}();function t(r){return[1,null,3,1,2,null,4][r.ctype]*r.depth}function l(r,o,n,s,h){let U=t(o);const E=Math.ceil(s*U/8);let m,D;U=Math.ceil(U/8);let T=r[n],F=0;if(T>1&&(r[n]=[0,0,1][T-2]),T==3)for(F=U;F<E;F++)r[F+1]=r[F+1]+(r[F+1-U]>>>1)&255;for(let L=0;L<h;L++)if(m=n+L*E,D=m+L+1,T=r[D-1],F=0,T==0)for(;F<E;F++)r[m+F]=r[D+F];else if(T==1){for(;F<U;F++)r[m+F]=r[D+F];for(;F<E;F++)r[m+F]=r[D+F]+r[m+F-U]}else if(T==2)for(;F<E;F++)r[m+F]=r[D+F]+r[m+F-E];else if(T==3){for(;F<U;F++)r[m+F]=r[D+F]+(r[m+F-E]>>>1);for(;F<E;F++)r[m+F]=r[D+F]+(r[m+F-E]+r[m+F-U]>>>1)}else{for(;F<U;F++)r[m+F]=r[D+F]+a(0,r[m+F-E],0);for(;F<E;F++)r[m+F]=r[D+F]+a(r[m+F-U],r[m+F-E],r[m+F-U-E])}return r}function a(r,o,n){const s=r+o-n,h=s-r,U=s-o,E=s-n;return h*h<=U*U&&h*h<=E*E?r:U*U<=E*E?o:n}function p(r,o,n){n.width=I.readUint(r,o),o+=4,n.height=I.readUint(r,o),o+=4,n.depth=r[o],o++,n.ctype=r[o],o++,n.compress=r[o],o++,n.filter=r[o],o++,n.interlace=r[o],o++}function v(r,o,n,s,h,U,E,m,D){const T=Math.min(o,h),F=Math.min(n,U);let L=0,g=0;for(let R=0;R<F;R++)for(let d=0;d<T;d++)if(E>=0&&m>=0?(L=R*o+d<<2,g=(m+R)*h+E+d<<2):(L=(-m+R)*o-E+d<<2,g=R*h+d<<2),D==0)s[g]=r[L],s[g+1]=r[L+1],s[g+2]=r[L+2],s[g+3]=r[L+3];else if(D==1){var P=r[L+3]*.00392156862745098,u=r[L]*P,c=r[L+1]*P,y=r[L+2]*P,A=s[g+3]*(1/255),w=s[g]*A,S=s[g+1]*A,b=s[g+2]*A;const i=1-P,k=P+A*i,C=k==0?0:1/k;s[g+3]=255*k,s[g+0]=(u+w*i)*C,s[g+1]=(c+S*i)*C,s[g+2]=(y+b*i)*C}else if(D==2)P=r[L+3],u=r[L],c=r[L+1],y=r[L+2],A=s[g+3],w=s[g],S=s[g+1],b=s[g+2],P==A&&u==w&&c==S&&y==b?(s[g]=0,s[g+1]=0,s[g+2]=0,s[g+3]=0):(s[g]=u,s[g+1]=c,s[g+2]=y,s[g+3]=P);else if(D==3){if(P=r[L+3],u=r[L],c=r[L+1],y=r[L+2],A=s[g+3],w=s[g],S=s[g+1],b=s[g+2],P==A&&u==w&&c==S&&y==b)continue;if(P<220&&A>20)return!1}return!0}return{decode:function(o){const n=new Uint8Array(o);let s=8;const h=I,U=h.readUshort,E=h.readUint,m={tabs:{},frames:[]},D=new Uint8Array(n.length);let T,F=0,L=0;const g=[137,80,78,71,13,10,26,10];for(var P=0;P<8;P++)if(n[P]!=g[P])throw"The input is not a PNG file!";for(;s<n.length;){const R=h.readUint(n,s);s+=4;const d=h.readASCII(n,s,4);if(s+=4,d=="IHDR")p(n,s,m);else if(d=="iCCP"){for(var u=s;n[u]!=0;)u++;h.readASCII(n,s,u-s),n[u+1];const i=n.slice(u+2,s+R);let k=null;try{k=f(i)}catch{k=e(i)}m.tabs[d]=k}else if(d=="CgBI")m.tabs[d]=n.slice(s,s+4);else if(d=="IDAT"){for(P=0;P<R;P++)D[F+P]=n[s+P];F+=R}else if(d=="acTL")m.tabs[d]={num_frames:E(n,s),num_plays:E(n,s+4)},T=new Uint8Array(n.length);else if(d=="fcTL"){L!=0&&((b=m.frames[m.frames.length-1]).data=M(m,T.slice(0,L),b.rect.width,b.rect.height),L=0);const i={x:E(n,s+12),y:E(n,s+16),width:E(n,s+4),height:E(n,s+8)};let k=U(n,s+22);k=U(n,s+20)/(k==0?100:k);const C={rect:i,delay:Math.round(1e3*k),dispose:n[s+24],blend:n[s+25]};m.frames.push(C)}else if(d=="fdAT"){for(P=0;P<R-4;P++)T[L+P]=n[s+P+4];L+=R-4}else if(d=="pHYs")m.tabs[d]=[h.readUint(n,s),h.readUint(n,s+4),n[s+8]];else if(d=="cHRM")for(m.tabs[d]=[],P=0;P<8;P++)m.tabs[d].push(h.readUint(n,s+4*P));else if(d=="tEXt"||d=="zTXt"){m.tabs[d]==null&&(m.tabs[d]={});var c=h.nextZero(n,s),y=h.readASCII(n,s,c-s),A=s+R-c-1;if(d=="tEXt")S=h.readASCII(n,c+1,A);else{var w=f(n.slice(c+2,c+2+A));S=h.readUTF8(w,0,w.length)}m.tabs[d][y]=S}else if(d=="iTXt"){m.tabs[d]==null&&(m.tabs[d]={}),c=0,u=s,c=h.nextZero(n,u),y=h.readASCII(n,u,c-u);const i=n[u=c+1];var S;n[u+1],u+=2,c=h.nextZero(n,u),h.readASCII(n,u,c-u),u=c+1,c=h.nextZero(n,u),h.readUTF8(n,u,c-u),A=R-((u=c+1)-s),i==0?S=h.readUTF8(n,u,A):(w=f(n.slice(u,u+A)),S=h.readUTF8(w,0,w.length)),m.tabs[d][y]=S}else if(d=="PLTE")m.tabs[d]=h.readBytes(n,s,R);else if(d=="hIST"){const i=m.tabs.PLTE.length/3;for(m.tabs[d]=[],P=0;P<i;P++)m.tabs[d].push(U(n,s+2*P))}else if(d=="tRNS")m.ctype==3?m.tabs[d]=h.readBytes(n,s,R):m.ctype==0?m.tabs[d]=U(n,s):m.ctype==2&&(m.tabs[d]=[U(n,s),U(n,s+2),U(n,s+4)]);else if(d=="gAMA")m.tabs[d]=h.readUint(n,s)/1e5;else if(d=="sRGB")m.tabs[d]=n[s];else if(d=="bKGD")m.ctype==0||m.ctype==4?m.tabs[d]=[U(n,s)]:m.ctype==2||m.ctype==6?m.tabs[d]=[U(n,s),U(n,s+2),U(n,s+4)]:m.ctype==3&&(m.tabs[d]=n[s]);else if(d=="IEND")break;s+=R,h.readUint(n,s),s+=4}var b;return L!=0&&((b=m.frames[m.frames.length-1]).data=M(m,T.slice(0,L),b.rect.width,b.rect.height)),m.data=M(m,D,m.width,m.height),delete m.compress,delete m.interlace,delete m.filter,m},toRGBA8:function(o){const n=o.width,s=o.height;if(o.tabs.acTL==null)return[x(o.data,n,s,o).buffer];const h=[];o.frames[0].data==null&&(o.frames[0].data=o.data);const U=n*s*4,E=new Uint8Array(U),m=new Uint8Array(U),D=new Uint8Array(U);for(let F=0;F<o.frames.length;F++){const L=o.frames[F],g=L.rect.x,P=L.rect.y,u=L.rect.width,c=L.rect.height,y=x(L.data,u,c,o);if(F!=0)for(var T=0;T<U;T++)D[T]=E[T];if(L.blend==0?v(y,u,c,E,n,s,g,P,0):L.blend==1&&v(y,u,c,E,n,s,g,P,1),h.push(E.buffer.slice(0)),L.dispose!=0){if(L.dispose==1)v(m,u,c,E,n,s,g,P,0);else if(L.dispose==2)for(T=0;T<U;T++)E[T]=D[T]}}return h},_paeth:a,_copyTile:v,_bin:I}}();(function(){const{_copyTile:I}=pe,{_bin:x}=pe,M=pe._paeth;var f={table:function(){const u=new Uint32Array(256);for(let c=0;c<256;c++){let y=c;for(let A=0;A<8;A++)1&y?y=3988292384^y>>>1:y>>>=1;u[c]=y}return u}(),update(u,c,y,A){for(let w=0;w<A;w++)u=f.table[255&(u^c[y+w])]^u>>>8;return u},crc:(u,c,y)=>4294967295^f.update(4294967295,u,c,y)};function e(u,c,y,A){c[y]+=u[0]*A>>4,c[y+1]+=u[1]*A>>4,c[y+2]+=u[2]*A>>4,c[y+3]+=u[3]*A>>4}function t(u){return Math.max(0,Math.min(255,u))}function l(u,c){const y=u[0]-c[0],A=u[1]-c[1],w=u[2]-c[2],S=u[3]-c[3];return y*y+A*A+w*w+S*S}function a(u,c,y,A,w,S,b){b==null&&(b=1);const R=A.length,d=[];for(var i=0;i<R;i++){const _=A[i];d.push([_>>>0&255,_>>>8&255,_>>>16&255,_>>>24&255])}for(i=0;i<R;i++){let _=4294967295;for(var k=0,C=0;C<R;C++){var j=l(d[i],d[C]);C!=i&&j<_&&(_=j,k=C)}}const W=new Uint32Array(w.buffer),B=new Int16Array(c*y*4),H=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(i=0;i<H.length;i++)H[i]=255*((H[i]+.5)/16-.5);for(let _=0;_<y;_++)for(let N=0;N<c;N++){var O;i=4*(_*c+N),b!=2?O=[t(u[i]+B[i]),t(u[i+1]+B[i+1]),t(u[i+2]+B[i+2]),t(u[i+3]+B[i+3])]:(j=H[4*(3&_)+(3&N)],O=[t(u[i]+j),t(u[i+1]+j),t(u[i+2]+j),t(u[i+3]+j)]),k=0;let Z=16777215;for(C=0;C<R;C++){const G=l(O,d[C]);G<Z&&(Z=G,k=C)}const $=d[k],Q=[O[0]-$[0],O[1]-$[1],O[2]-$[2],O[3]-$[3]];b==1&&(N!=c-1&&e(Q,B,i+4,7),_!=y-1&&(N!=0&&e(Q,B,i+4*c-4,3),e(Q,B,i+4*c,5),N!=c-1&&e(Q,B,i+4*c+4,1))),S[i>>2]=k,W[i>>2]=A[k]}}function p(u,c,y,A,w){w==null&&(w={});const{crc:S}=f,b=x.writeUint,R=x.writeUshort,d=x.writeASCII;let i=8;const k=u.frames.length>1;let C,j=!1,W=33+(k?20:0);if(w.sRGB!=null&&(W+=13),w.pHYs!=null&&(W+=21),w.iCCP!=null&&(C=pako.deflate(w.iCCP),W+=21+C.length+4),u.ctype==3){for(var B=u.plte.length,H=0;H<B;H++)u.plte[H]>>>24!=255&&(j=!0);W+=8+3*B+4+(j?8+1*B+4:0)}for(var O=0;O<u.frames.length;O++)k&&(W+=38),W+=($=u.frames[O]).cimg.length+12,O!=0&&(W+=4);W+=12;const _=new Uint8Array(W),N=[137,80,78,71,13,10,26,10];for(H=0;H<8;H++)_[H]=N[H];if(b(_,i,13),i+=4,d(_,i,"IHDR"),i+=4,b(_,i,c),i+=4,b(_,i,y),i+=4,_[i]=u.depth,i++,_[i]=u.ctype,i++,_[i]=0,i++,_[i]=0,i++,_[i]=0,i++,b(_,i,S(_,i-17,17)),i+=4,w.sRGB!=null&&(b(_,i,1),i+=4,d(_,i,"sRGB"),i+=4,_[i]=w.sRGB,i++,b(_,i,S(_,i-5,5)),i+=4),w.iCCP!=null){const Q=13+C.length;b(_,i,Q),i+=4,d(_,i,"iCCP"),i+=4,d(_,i,"ICC profile"),i+=11,i+=2,_.set(C,i),i+=C.length,b(_,i,S(_,i-(Q+4),Q+4)),i+=4}if(w.pHYs!=null&&(b(_,i,9),i+=4,d(_,i,"pHYs"),i+=4,b(_,i,w.pHYs[0]),i+=4,b(_,i,w.pHYs[1]),i+=4,_[i]=w.pHYs[2],i++,b(_,i,S(_,i-13,13)),i+=4),k&&(b(_,i,8),i+=4,d(_,i,"acTL"),i+=4,b(_,i,u.frames.length),i+=4,b(_,i,w.loop!=null?w.loop:0),i+=4,b(_,i,S(_,i-12,12)),i+=4),u.ctype==3){for(b(_,i,3*(B=u.plte.length)),i+=4,d(_,i,"PLTE"),i+=4,H=0;H<B;H++){const Q=3*H,G=u.plte[H],J=255&G,ne=G>>>8&255,xe=G>>>16&255;_[i+Q+0]=J,_[i+Q+1]=ne,_[i+Q+2]=xe}if(i+=3*B,b(_,i,S(_,i-3*B-4,3*B+4)),i+=4,j){for(b(_,i,B),i+=4,d(_,i,"tRNS"),i+=4,H=0;H<B;H++)_[i+H]=u.plte[H]>>>24&255;i+=B,b(_,i,S(_,i-B-4,B+4)),i+=4}}let Z=0;for(O=0;O<u.frames.length;O++){var $=u.frames[O];k&&(b(_,i,26),i+=4,d(_,i,"fcTL"),i+=4,b(_,i,Z++),i+=4,b(_,i,$.rect.width),i+=4,b(_,i,$.rect.height),i+=4,b(_,i,$.rect.x),i+=4,b(_,i,$.rect.y),i+=4,R(_,i,A[O]),i+=2,R(_,i,1e3),i+=2,_[i]=$.dispose,i++,_[i]=$.blend,i++,b(_,i,S(_,i-30,30)),i+=4);const Q=$.cimg;b(_,i,(B=Q.length)+(O==0?0:4)),i+=4;const G=i;d(_,i,O==0?"IDAT":"fdAT"),i+=4,O!=0&&(b(_,i,Z++),i+=4),_.set(Q,i),i+=B,b(_,i,S(_,G,i-G)),i+=4}return b(_,i,0),i+=4,d(_,i,"IEND"),i+=4,b(_,i,S(_,i-4,4)),i+=4,_.buffer}function v(u,c,y){for(let A=0;A<u.frames.length;A++){const w=u.frames[A];w.rect.width;const S=w.rect.height,b=new Uint8Array(S*w.bpl+S);w.cimg=s(w.img,S,w.bpp,w.bpl,b,c,y)}}function r(u,c,y,A,w){const S=w[0],b=w[1],R=w[2],d=w[3],i=w[4],k=w[5];let C=6,j=8,W=255;for(var B=0;B<u.length;B++){const oe=new Uint8Array(u[B]);for(var H=oe.length,O=0;O<H;O+=4)W&=oe[O+3]}const _=W!=255,N=function(K,Y,re,se,ee,ce){const te=[];for(var q=0;q<K.length;q++){const le=new Uint8Array(K[q]),he=new Uint32Array(le.buffer);var ue;let de=0,ye=0,ve=Y,Se=re,ze=se?1:0;if(q!=0){const yt=ce||se||q==1||te[q-2].dispose!=0?1:2;let Ne=0,Xe=1e9;for(let Pe=0;Pe<yt;Pe++){var we=new Uint8Array(K[q-1-Pe]);const wt=new Uint32Array(K[q-1-Pe]);let Ae=Y,Ie=re,Re=-1,Te=-1;for(let Fe=0;Fe<re;Fe++)for(let Ce=0;Ce<Y;Ce++)he[ie=Fe*Y+Ce]!=wt[ie]&&(Ce<Ae&&(Ae=Ce),Ce>Re&&(Re=Ce),Fe<Ie&&(Ie=Fe),Fe>Te&&(Te=Fe));Re==-1&&(Ae=Ie=Re=Te=0),ee&&((1&Ae)==1&&Ae--,(1&Ie)==1&&Ie--);const Ve=(Re-Ae+1)*(Te-Ie+1);Ve<Xe&&(Xe=Ve,Ne=Pe,de=Ae,ye=Ie,ve=Re-Ae+1,Se=Te-Ie+1)}we=new Uint8Array(K[q-1-Ne]),Ne==1&&(te[q-1].dispose=2),ue=new Uint8Array(ve*Se*4),I(we,Y,re,ue,ve,Se,-de,-ye,0),ze=I(le,Y,re,ue,ve,Se,-de,-ye,3)?1:0,ze==1?n(le,Y,re,ue,{x:de,y:ye,width:ve,height:Se}):I(le,Y,re,ue,ve,Se,-de,-ye,0)}else ue=le.slice(0);te.push({rect:{x:de,y:ye,width:ve,height:Se},img:ue,blend:ze,dispose:0})}if(se)for(q=0;q<te.length;q++){if((Ue=te[q]).blend==1)continue;const le=Ue.rect,he=te[q-1].rect,de=Math.min(le.x,he.x),ye=Math.min(le.y,he.y),ve={x:de,y:ye,width:Math.max(le.x+le.width,he.x+he.width)-de,height:Math.max(le.y+le.height,he.y+he.height)-ye};te[q-1].dispose=1,q-1!=0&&o(K,Y,re,te,q-1,ve,ee),o(K,Y,re,te,q,ve,ee)}let ke=0;if(K.length!=1)for(var ie=0;ie<te.length;ie++){var Ue;ke+=(Ue=te[ie]).rect.width*Ue.rect.height}return te}(u,c,y,S,b,R),Z={},$=[],Q=[];if(A!=0){const oe=[];for(O=0;O<N.length;O++)oe.push(N[O].img.buffer);const K=function(ee){let ce=0;for(var te=0;te<ee.length;te++)ce+=ee[te].byteLength;const q=new Uint8Array(ce);let ue=0;for(te=0;te<ee.length;te++){const we=new Uint8Array(ee[te]),ke=we.length;for(let ie=0;ie<ke;ie+=4){let Ue=we[ie],le=we[ie+1],he=we[ie+2];const de=we[ie+3];de==0&&(Ue=le=he=0),q[ue+ie]=Ue,q[ue+ie+1]=le,q[ue+ie+2]=he,q[ue+ie+3]=de}ue+=ke}return q.buffer}(oe),Y=U(K,A);for(O=0;O<Y.plte.length;O++)$.push(Y.plte[O].est.rgba);let re=0;for(O=0;O<N.length;O++){const se=(J=N[O]).img.length;var G=new Uint8Array(Y.inds.buffer,re>>2,se>>2);Q.push(G);const ee=new Uint8Array(Y.abuf,re,se);k&&a(J.img,J.rect.width,J.rect.height,$,ee,G),J.img.set(ee),re+=se}}else for(B=0;B<N.length;B++){var J=N[B];const oe=new Uint32Array(J.img.buffer);var ne=J.rect.width;for(H=oe.length,G=new Uint8Array(H),Q.push(G),O=0;O<H;O++){const K=oe[O];if(O!=0&&K==oe[O-1])G[O]=G[O-1];else if(O>ne&&K==oe[O-ne])G[O]=G[O-ne];else{let Y=Z[K];if(Y==null&&(Z[K]=Y=$.length,$.push(K),$.length>=300))break;G[O]=Y}}}const xe=$.length;for(xe<=256&&i==0&&(j=xe<=2?1:xe<=4?2:xe<=16?4:8,j=Math.max(j,d)),B=0;B<N.length;B++){(J=N[B]).rect.x,J.rect.y,ne=J.rect.width;const oe=J.rect.height;let K=J.img;new Uint32Array(K.buffer);let Y=4*ne,re=4;if(xe<=256&&i==0){Y=Math.ceil(j*ne/8);var me=new Uint8Array(Y*oe);const se=Q[B];for(let ee=0;ee<oe;ee++){O=ee*Y;const ce=ee*ne;if(j==8)for(var X=0;X<ne;X++)me[O+X]=se[ce+X];else if(j==4)for(X=0;X<ne;X++)me[O+(X>>1)]|=se[ce+X]<<4-4*(1&X);else if(j==2)for(X=0;X<ne;X++)me[O+(X>>2)]|=se[ce+X]<<6-2*(3&X);else if(j==1)for(X=0;X<ne;X++)me[O+(X>>3)]|=se[ce+X]<<7-1*(7&X)}K=me,C=3,re=1}else if(_==0&&N.length==1){me=new Uint8Array(ne*oe*3);const se=ne*oe;for(O=0;O<se;O++){const ee=3*O,ce=4*O;me[ee]=K[ce],me[ee+1]=K[ce+1],me[ee+2]=K[ce+2]}K=me,C=2,re=3,Y=3*ne}J.img=K,J.bpl=Y,J.bpp=re}return{ctype:C,depth:j,plte:$,frames:N}}function o(u,c,y,A,w,S,b){const R=Uint8Array,d=Uint32Array,i=new R(u[w-1]),k=new d(u[w-1]),C=w+1<u.length?new R(u[w+1]):null,j=new R(u[w]),W=new d(j.buffer);let B=c,H=y,O=-1,_=-1;for(let Z=0;Z<S.height;Z++)for(let $=0;$<S.width;$++){const Q=S.x+$,G=S.y+Z,J=G*c+Q,ne=W[J];ne==0||A[w-1].dispose==0&&k[J]==ne&&(C==null||C[4*J+3]!=0)||(Q<B&&(B=Q),Q>O&&(O=Q),G<H&&(H=G),G>_&&(_=G))}O==-1&&(B=H=O=_=0),b&&((1&B)==1&&B--,(1&H)==1&&H--),S={x:B,y:H,width:O-B+1,height:_-H+1};const N=A[w];N.rect=S,N.blend=1,N.img=new Uint8Array(S.width*S.height*4),A[w-1].dispose==0?(I(i,c,y,N.img,S.width,S.height,-S.x,-S.y,0),n(j,c,y,N.img,S)):I(j,c,y,N.img,S.width,S.height,-S.x,-S.y,0)}function n(u,c,y,A,w){I(u,c,y,A,w.width,w.height,-w.x,-w.y,2)}function s(u,c,y,A,w,S,b){const R=[];let d,i=[0,1,2,3,4];S!=-1?i=[S]:(c*A>5e5||y==1)&&(i=[0]),b&&(d={level:0});const k=ln;for(var C=0;C<i.length;C++){for(let B=0;B<c;B++)h(w,u,B,A,y,i[C]);R.push(k.deflate(w,d))}let j,W=1e9;for(C=0;C<R.length;C++)R[C].length<W&&(j=C,W=R[C].length);return R[j]}function h(u,c,y,A,w,S){const b=y*A;let R=b+y;if(u[R]=S,R++,S==0)if(A<500)for(var d=0;d<A;d++)u[R+d]=c[b+d];else u.set(new Uint8Array(c.buffer,b,A),R);else if(S==1){for(d=0;d<w;d++)u[R+d]=c[b+d];for(d=w;d<A;d++)u[R+d]=c[b+d]-c[b+d-w]+256&255}else if(y==0){for(d=0;d<w;d++)u[R+d]=c[b+d];if(S==2)for(d=w;d<A;d++)u[R+d]=c[b+d];if(S==3)for(d=w;d<A;d++)u[R+d]=c[b+d]-(c[b+d-w]>>1)+256&255;if(S==4)for(d=w;d<A;d++)u[R+d]=c[b+d]-M(c[b+d-w],0,0)+256&255}else{if(S==2)for(d=0;d<A;d++)u[R+d]=c[b+d]+256-c[b+d-A]&255;if(S==3){for(d=0;d<w;d++)u[R+d]=c[b+d]+256-(c[b+d-A]>>1)&255;for(d=w;d<A;d++)u[R+d]=c[b+d]+256-(c[b+d-A]+c[b+d-w]>>1)&255}if(S==4){for(d=0;d<w;d++)u[R+d]=c[b+d]+256-M(0,c[b+d-A],0)&255;for(d=w;d<A;d++)u[R+d]=c[b+d]+256-M(c[b+d-w],c[b+d-A],c[b+d-w-A])&255}}}function U(u,c){const y=new Uint8Array(u),A=y.slice(0),w=new Uint32Array(A.buffer),S=E(A,c),b=S[0],R=S[1],d=y.length,i=new Uint8Array(d>>2);let k;if(y.length<2e7)for(var C=0;C<d;C+=4)k=m(b,j=y[C]*(1/255),W=y[C+1]*(1/255),B=y[C+2]*(1/255),H=y[C+3]*(1/255)),i[C>>2]=k.ind,w[C>>2]=k.est.rgba;else for(C=0;C<d;C+=4){var j=y[C]*.00392156862745098,W=y[C+1]*(1/255),B=y[C+2]*(1/255),H=y[C+3]*(1/255);for(k=b;k.left;)k=D(k.est,j,W,B,H)<=0?k.left:k.right;i[C>>2]=k.ind,w[C>>2]=k.est.rgba}return{abuf:A.buffer,inds:i,plte:R}}function E(u,c,y){y==null&&(y=1e-4);const A=new Uint32Array(u.buffer),w={i0:0,i1:u.length,bst:null,est:null,tdst:0,left:null,right:null};w.bst=L(u,w.i0,w.i1),w.est=g(w.bst);const S=[w];for(;S.length<c;){let R=0,d=0;for(var b=0;b<S.length;b++)S[b].est.L>R&&(R=S[b].est.L,d=b);if(R<y)break;const i=S[d],k=T(u,A,i.i0,i.i1,i.est.e,i.est.eMq255);if(i.i0>=k||i.i1<=k){i.est.L=0;continue}const C={i0:i.i0,i1:k,bst:null,est:null,tdst:0,left:null,right:null};C.bst=L(u,C.i0,C.i1),C.est=g(C.bst);const j={i0:k,i1:i.i1,bst:null,est:null,tdst:0,left:null,right:null};for(j.bst={R:[],m:[],N:i.bst.N-C.bst.N},b=0;b<16;b++)j.bst.R[b]=i.bst.R[b]-C.bst.R[b];for(b=0;b<4;b++)j.bst.m[b]=i.bst.m[b]-C.bst.m[b];j.est=g(j.bst),i.left=C,i.right=j,S[d]=C,S.push(j)}for(S.sort((R,d)=>d.bst.N-R.bst.N),b=0;b<S.length;b++)S[b].ind=b;return[w,S]}function m(u,c,y,A,w){if(u.left==null)return u.tdst=function(C,j,W,B,H){const O=j-C[0],_=W-C[1],N=B-C[2],Z=H-C[3];return O*O+_*_+N*N+Z*Z}(u.est.q,c,y,A,w),u;const S=D(u.est,c,y,A,w);let b=u.left,R=u.right;S>0&&(b=u.right,R=u.left);const d=m(b,c,y,A,w);if(d.tdst<=S*S)return d;const i=m(R,c,y,A,w);return i.tdst<d.tdst?i:d}function D(u,c,y,A,w){const{e:S}=u;return S[0]*c+S[1]*y+S[2]*A+S[3]*w-u.eMq}function T(u,c,y,A,w,S){for(A-=4;y<A;){for(;F(u,y,w)<=S;)y+=4;for(;F(u,A,w)>S;)A-=4;if(y>=A)break;const b=c[y>>2];c[y>>2]=c[A>>2],c[A>>2]=b,y+=4,A-=4}for(;F(u,y,w)>S;)y-=4;return y+4}function F(u,c,y){return u[c]*y[0]+u[c+1]*y[1]+u[c+2]*y[2]+u[c+3]*y[3]}function L(u,c,y){const A=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],w=[0,0,0,0],S=y-c>>2;for(let b=c;b<y;b+=4){const R=u[b]*.00392156862745098,d=u[b+1]*(1/255),i=u[b+2]*(1/255),k=u[b+3]*(1/255);w[0]+=R,w[1]+=d,w[2]+=i,w[3]+=k,A[0]+=R*R,A[1]+=R*d,A[2]+=R*i,A[3]+=R*k,A[5]+=d*d,A[6]+=d*i,A[7]+=d*k,A[10]+=i*i,A[11]+=i*k,A[15]+=k*k}return A[4]=A[1],A[8]=A[2],A[9]=A[6],A[12]=A[3],A[13]=A[7],A[14]=A[11],{R:A,m:w,N:S}}function g(u){const{R:c}=u,{m:y}=u,{N:A}=u,w=y[0],S=y[1],b=y[2],R=y[3],d=A==0?0:1/A,i=[c[0]-w*w*d,c[1]-w*S*d,c[2]-w*b*d,c[3]-w*R*d,c[4]-S*w*d,c[5]-S*S*d,c[6]-S*b*d,c[7]-S*R*d,c[8]-b*w*d,c[9]-b*S*d,c[10]-b*b*d,c[11]-b*R*d,c[12]-R*w*d,c[13]-R*S*d,c[14]-R*b*d,c[15]-R*R*d],k=i,C=P;let j=[Math.random(),Math.random(),Math.random(),Math.random()],W=0,B=0;if(A!=0)for(let O=0;O<16&&(j=C.multVec(k,j),B=Math.sqrt(C.dot(j,j)),j=C.sml(1/B,j),!(O!=0&&Math.abs(B-W)<1e-9));O++)W=B;const H=[w*d,S*d,b*d,R*d];return{Cov:i,q:H,e:j,L:W,eMq255:C.dot(C.sml(255,H),j),eMq:C.dot(j,H),rgba:(Math.round(255*H[3])<<24|Math.round(255*H[2])<<16|Math.round(255*H[1])<<8|Math.round(255*H[0])<<0)>>>0}}var P={multVec:(u,c)=>[u[0]*c[0]+u[1]*c[1]+u[2]*c[2]+u[3]*c[3],u[4]*c[0]+u[5]*c[1]+u[6]*c[2]+u[7]*c[3],u[8]*c[0]+u[9]*c[1]+u[10]*c[2]+u[11]*c[3],u[12]*c[0]+u[13]*c[1]+u[14]*c[2]+u[15]*c[3]],dot:(u,c)=>u[0]*c[0]+u[1]*c[1]+u[2]*c[2]+u[3]*c[3],sml:(u,c)=>[u*c[0],u*c[1],u*c[2],u*c[3]]};pe.encode=function(c,y,A,w,S,b,R){w==null&&(w=0),R==null&&(R=!1);const d=r(c,y,A,w,[!1,!1,!1,0,R,!1]);return v(d,-1),p(d,y,A,S,b)},pe.encodeLL=function(c,y,A,w,S,b,R,d){const i={ctype:0+(w==1?0:2)+(S==0?0:4),depth:b,frames:[]},k=(w+S)*b,C=k*y;for(let j=0;j<c.length;j++)i.frames.push({rect:{x:0,y:0,width:y,height:A},img:new Uint8Array(c[j]),blend:0,dispose:1,bpp:Math.ceil(k/8),bpl:Math.ceil(C/8)});return v(i,0,!0),p(i,y,A,R,d)},pe.encode.compress=r,pe.encode.dither=a,pe.quantize=U,pe.quantize.getKDtree=E,pe.quantize.getNearest=m})();const ft={toArrayBuffer(I,x){const M=I.width,f=I.height,e=M<<2,t=I.getContext("2d").getImageData(0,0,M,f),l=new Uint32Array(t.data.buffer),a=(32*M+31)/32<<2,p=a*f,v=122+p,r=new ArrayBuffer(v),o=new DataView(r),n=1<<20;let s,h,U,E,m=n,D=0,T=0,F=0;function L(u){o.setUint16(T,u,!0),T+=2}function g(u){o.setUint32(T,u,!0),T+=4}function P(u){T+=u}L(19778),g(v),P(4),g(122),g(108),g(M),g(-f>>>0),L(1),L(32),g(3),g(p),g(2835),g(2835),P(8),g(16711680),g(65280),g(255),g(4278190080),g(1466527264),function u(){for(;D<f&&m>0;){for(E=122+D*a,s=0;s<e;)m--,h=l[F++],U=h>>>24,o.setUint32(E+s,h<<8|U),s+=4;D++}F<l.length?(m=n,setTimeout(u,ft._dly)):x(r)}()},toBlob(I,x){this.toArrayBuffer(I,M=>{x(new Blob([M],{type:"image/bmp"}))})},_dly:9};var fe={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},fn={[fe.CHROME]:16384,[fe.FIREFOX]:11180,[fe.DESKTOP_SAFARI]:16384,[fe.IE]:8192,[fe.IOS]:4096,[fe.ETC]:8192};const Ze=typeof window<"u",ct=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,Oe=Ze&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),cn=(Ze||ct)&&(Oe&&Oe.getOriginalSymbol(window,"File")||typeof File<"u"&&File),ut=(Ze||ct)&&(Oe&&Oe.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function Ke(I,x,M=Date.now()){return new Promise(f=>{const e=I.split(","),t=e[0].match(/:(.*?);/)[1],l=globalThis.atob(e[1]);let a=l.length;const p=new Uint8Array(a);for(;a--;)p[a]=l.charCodeAt(a);const v=new Blob([p],{type:t});v.name=x,v.lastModified=M,f(v)})}function dt(I){return new Promise((x,M)=>{const f=new ut;f.onload=()=>x(f.result),f.onerror=e=>M(e),f.readAsDataURL(I)})}function ht(I){return new Promise((x,M)=>{const f=new Image;f.onload=()=>x(f),f.onerror=e=>M(e),f.src=I})}function Ee(){if(Ee.cachedResult!==void 0)return Ee.cachedResult;let I=fe.ETC;const{userAgent:x}=navigator;return/Chrom(e|ium)/i.test(x)?I=fe.CHROME:/iP(ad|od|hone)/i.test(x)&&/WebKit/i.test(x)?I=fe.IOS:/Safari/i.test(x)?I=fe.DESKTOP_SAFARI:/Firefox/i.test(x)?I=fe.FIREFOX:(/MSIE/i.test(x)||document.documentMode)&&(I=fe.IE),Ee.cachedResult=I,Ee.cachedResult}function pt(I,x){const M=Ee(),f=fn[M];let e=I,t=x,l=e*t;const a=e>t?t/e:e/t;for(;l>f*f;){const p=(f+e)/2,v=(f+t)/2;p<v?(t=v,e=v*a):(t=p*a,e=p),l=e*t}return{width:e,height:t}}function We(I,x){let M,f;try{if(M=new OffscreenCanvas(I,x),f=M.getContext("2d"),f===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{M=document.createElement("canvas"),f=M.getContext("2d")}return M.width=I,M.height=x,[M,f]}function gt(I,x){const{width:M,height:f}=pt(I.width,I.height),[e,t]=We(M,f);return x&&/jpe?g/.test(x)&&(t.fillStyle="white",t.fillRect(0,0,e.width,e.height)),t.drawImage(I,0,0,e.width,e.height),e}function je(){return je.cachedResult!==void 0||(je.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),je.cachedResult}function Be(I,x={}){return new Promise(function(M,f){let e,t;var l=function(){try{return t=gt(e,x.fileType||I.type),M([e,t])}catch(p){return f(p)}},a=function(p){try{var v=function(r){try{throw r}catch(o){return f(o)}};try{let r;return dt(I).then(function(o){try{return r=o,ht(r).then(function(n){try{return e=n,function(){try{return l()}catch(s){return f(s)}}()}catch(s){return v(s)}},v)}catch(n){return v(n)}},v)}catch(r){v(r)}}catch(r){return f(r)}};try{if(je()||[fe.DESKTOP_SAFARI,fe.MOBILE_SAFARI].includes(Ee()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(I).then(function(p){try{return e=p,l()}catch{return a()}},a)}catch{a()}})}function He(I,x,M,f,e=1){return new Promise(function(t,l){let a;if(x==="image/png"){let v,r,o;return v=I.getContext("2d"),{data:r}=v.getImageData(0,0,I.width,I.height),o=pe.encode([r.buffer],I.width,I.height,4096*e),a=new Blob([o],{type:x}),a.name=M,a.lastModified=f,p.call(this)}{let v=function(){return p.call(this)};if(x==="image/bmp")return new Promise(r=>ft.toBlob(I,r)).then((function(r){try{return a=r,a.name=M,a.lastModified=f,v.call(this)}catch(o){return l(o)}}).bind(this),l);{let r=function(){return v.call(this)};if(typeof OffscreenCanvas=="function"&&I instanceof OffscreenCanvas)return I.convertToBlob({type:x,quality:e}).then((function(o){try{return a=o,a.name=M,a.lastModified=f,r.call(this)}catch(n){return l(n)}}).bind(this),l);{let o;return o=I.toDataURL(x,e),Ke(o,M,f).then((function(n){try{return a=n,r.call(this)}catch(s){return l(s)}}).bind(this),l)}}}function p(){return t(a)}})}function be(I){I.width=0,I.height=0}function Me(){return new Promise(function(I,x){let M,f,e,t;return Me.cachedResult!==void 0?I(Me.cachedResult):Ke("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(l){try{return M=l,Be(M).then(function(a){try{return f=a[1],He(f,M.type,M.name,M.lastModified).then(function(p){try{return e=p,be(f),Be(e).then(function(v){try{return t=v[0],Me.cachedResult=t.width===1&&t.height===2,I(Me.cachedResult)}catch(r){return x(r)}},x)}catch(v){return x(v)}},x)}catch(p){return x(p)}},x)}catch(a){return x(a)}},x)})}function mt(I){return new Promise((x,M)=>{const f=new ut;f.onload=e=>{const t=new DataView(e.target.result);if(t.getUint16(0,!1)!=65496)return x(-2);const l=t.byteLength;let a=2;for(;a<l;){if(t.getUint16(a+2,!1)<=8)return x(-1);const p=t.getUint16(a,!1);if(a+=2,p==65505){if(t.getUint32(a+=2,!1)!=1165519206)return x(-1);const v=t.getUint16(a+=6,!1)==18761;a+=t.getUint32(a+4,v);const r=t.getUint16(a,v);a+=2;for(let o=0;o<r;o++)if(t.getUint16(a+12*o,v)==274)return x(t.getUint16(a+12*o+8,v))}else{if((65280&p)!=65280)break;a+=t.getUint16(a,!1)}}return x(-1)},f.onerror=e=>M(e),f.readAsArrayBuffer(I)})}function vt(I,x){const{width:M}=I,{height:f}=I,{maxWidthOrHeight:e}=x;let t,l=I;return isFinite(e)&&(M>e||f>e)&&([l,t]=We(M,f),M>f?(l.width=e,l.height=f/M*e):(l.width=M/f*e,l.height=e),t.drawImage(I,0,0,l.width,l.height),be(I)),l}function bt(I,x){const{width:M}=I,{height:f}=I,[e,t]=We(M,f);switch(x>4&&x<9?(e.width=f,e.height=M):(e.width=M,e.height=f),x){case 2:t.transform(-1,0,0,1,M,0);break;case 3:t.transform(-1,0,0,-1,M,f);break;case 4:t.transform(1,0,0,-1,0,f);break;case 5:t.transform(0,1,1,0,0,0);break;case 6:t.transform(0,1,-1,0,f,0);break;case 7:t.transform(0,-1,-1,0,f,M);break;case 8:t.transform(0,-1,1,0,0,M)}return t.drawImage(I,0,0,M,f),be(I),e}function tt(I,x,M=0){return new Promise(function(f,e){let t,l,a,p,v,r,o,n,s,h,U,E,m,D,T,F,L,g,P,u;function c(A=5){if(x.signal&&x.signal.aborted)throw x.signal.reason;t+=A,x.onProgress(Math.min(t,100))}function y(A){if(x.signal&&x.signal.aborted)throw x.signal.reason;t=Math.min(Math.max(A,t),100),x.onProgress(t)}return t=M,l=x.maxIteration||10,a=1024*x.maxSizeMB*1024,c(),Be(I,x).then((function(A){try{return[,p]=A,c(),v=vt(p,x),c(),new Promise(function(w,S){var b;if(!(b=x.exifOrientation))return mt(I).then((function(d){try{return b=d,R.call(this)}catch(i){return S(i)}}).bind(this),S);function R(){return w(b)}return R.call(this)}).then((function(w){try{return r=w,c(),Me().then((function(S){try{return o=S?v:bt(v,r),c(),n=x.initialQuality||1,s=x.fileType||I.type,He(o,s,I.name,I.lastModified,n).then((function(b){try{{let d=function(){if(l--&&(T>a||T>m)){let k,C;return k=u?.95*P.width:P.width,C=u?.95*P.height:P.height,[L,g]=We(k,C),g.drawImage(P,0,0,k,C),n*=s==="image/png"?.85:.95,He(L,s,I.name,I.lastModified,n).then(function(j){try{return F=j,be(P),P=L,T=F.size,y(Math.min(99,Math.floor((D-T)/(D-a)*100))),d}catch(W){return e(W)}},e)}return[1]},i=function(){return be(P),be(L),be(v),be(o),be(p),y(100),f(F)};if(h=b,c(),U=h.size>a,E=h.size>I.size,!U&&!E)return y(100),f(h);var R;return m=I.size,D=h.size,T=D,P=o,u=!x.alwaysKeepResolution&&U,(R=(function(k){for(;k;){if(k.then)return void k.then(R,e);try{if(k.pop){if(k.length)return k.pop()?i.call(this):k;k=d}else k=k.call(this)}catch(C){return e(C)}}}).bind(this))(d)}}catch(d){return e(d)}}).bind(this),e)}catch(b){return e(b)}}).bind(this),e)}catch(S){return e(S)}}).bind(this),e)}catch(w){return e(w)}}).bind(this),e)})}const un=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let Qe;function dn(I,x){return new Promise((M,f)=>{Qe||(Qe=function(l){const a=[];return a.push(l),URL.createObjectURL(new Blob(a))}(un));const e=new Worker(Qe);e.addEventListener("message",function(l){if(x.signal&&x.signal.aborted)e.terminate();else if(l.data.progress===void 0){if(l.data.error)return f(new Error(l.data.error)),void e.terminate();M(l.data.file),e.terminate()}else x.onProgress(l.data.progress)}),e.addEventListener("error",f),x.signal&&x.signal.addEventListener("abort",()=>{f(x.signal.reason),e.terminate()}),e.postMessage({file:I,imageCompressionLibUrl:x.libURL,options:{...x,onProgress:void 0,signal:void 0}})})}function ae(I,x){return new Promise(function(M,f){let e,t,l,a,p,v;if(e={...x},l=0,{onProgress:a}=e,e.maxSizeMB=e.maxSizeMB||Number.POSITIVE_INFINITY,p=typeof e.useWebWorker!="boolean"||e.useWebWorker,delete e.useWebWorker,e.onProgress=s=>{l=s,typeof a=="function"&&a(l)},!(I instanceof Blob||I instanceof cn))return f(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(I.type))return f(new Error("The file given is not an image"));if(v=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!p||typeof Worker!="function"||v)return tt(I,e).then((function(s){try{return t=s,n.call(this)}catch(h){return f(h)}}).bind(this),f);var r=(function(){try{return n.call(this)}catch(s){return f(s)}}).bind(this),o=function(s){try{return tt(I,e).then(function(h){try{return t=h,r()}catch(U){return f(U)}},f)}catch(h){return f(h)}};try{return e.libURL=e.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",dn(I,e).then(function(s){try{return t=s,r()}catch{return o()}},o)}catch{o()}function n(){try{t.name=I.name,t.lastModified=I.lastModified}catch{}try{e.preserveExif&&I.type==="image/jpeg"&&(!e.fileType||e.fileType&&e.fileType===I.type)&&(t=lt(I,t))}catch{}return M(t)}})}ae.getDataUrlFromFile=dt,ae.getFilefromDataUrl=Ke,ae.loadImage=ht,ae.drawImageInCanvas=gt,ae.drawFileInCanvas=Be,ae.canvasToFile=He,ae.getExifOrientation=mt,ae.handleMaxWidthOrHeight=vt,ae.followExifOrientation=bt,ae.cleanupCanvasMemory=be,ae.isAutoOrientationInBrowser=Me,ae.approximateBelowMaximumCanvasSizeOfBrowser=pt,ae.copyExifWithoutOrientation=lt,ae.getBrowserName=Ee,ae.version="2.0.2";const hn=({isOpen:I,onClose:x})=>{const{openSnackbar:M}=At(),f=()=>{m(),x()},e=new Date,[t,l]=V.useState(""),[a,p]=V.useState(e),[v,r]=V.useState([]),[o,n]=V.useState(0),[s,h]=V.useState([]),U=F=>{r(L=>[...L,...F]),F.forEach(L=>{h(g=>Dt(g,{$push:[URL.createObjectURL(L)]}))})},E=async()=>{const F=new FormData;F.append("title",t),F.append("date",a.toISOString()),v.forEach(async L=>{try{const g=L.size>=10485760?await ae(L,{maxSizeMB:10,useWebWorker:!0}):L;F.append("images",g)}catch(g){console.error("Image compression failed:",g)}}),F.append("cover",o);try{T(!0),await Ut(F),M("success","Uploaded Succesfully!"),f()}catch(L){console.log(L),M("error","Error Occured. Please contact to the administrator.")}finally{T(!1)}},m=()=>{s.forEach(F=>URL.revokeObjectURL(F)),r([]),h([])},[D,T]=V.useState(!1);return z.jsx(It,{isOpen:I,onClose:f,height:"85vh",maxWidth:"1300px",loading:D,children:D?z.jsx($e,{}):z.jsxs(z.Fragment,{children:[z.jsxs("div",{style:{display:"flex",width:"95%"},children:[z.jsx(Ot,{value:a,minDate:new Date("2022/04/03"),maxDate:e,onChange:p}),z.jsx(xt,{id:"filled-basic",label:"Album Title",variant:"outlined",sx:{flexGrow:1,ml:4},onChange:F=>l(F.target.value)})]}),z.jsx(jt,{imagesPreview:s,setImagesPreview:h,setFilesToUpload:r,cover:o,setCoverImage:n}),z.jsx("div",{style:{width:"100%",height:"12.75svh"},children:z.jsx(Qt,{accept:{"image/*":[]},handleChangeFile:U,multiple:!0})}),z.jsxs("div",{style:{display:"flex",marginTop:"1.5em",width:"100%"},children:[z.jsx(Ge,{variant:"outlined",disabled:t.trim()===""||v.length<=0,onClick:E,fullWidth:!0,children:"Submit"}),z.jsx(Ge,{variant:"outlined",onClick:m,disabled:v.length<=0,fullWidth:!0,children:"Clear All"})]})]})})},pn=({posts:I,cols:x})=>{const M={};let f=null;for(let e of I){const t=new Date(e.Timestamp).getFullYear();t!==f&&(f=t,M[t]=[]),M[t].push(e)}return Object.keys(M).reverse().map(e=>z.jsxs(z.Fragment,{children:[z.jsx(Je,{cols:x,children:z.jsx(qe,{component:"div",children:e})},e),M[e].map(t=>z.jsxs(Je,{component:St,to:t.ID,sx:{textDecoration:"none"},children:[z.jsx("img",{src:`https://imagedelivery.net/ICo2WI8PXO_BVRlWfwzOww/${t.Cover}/thumbnail`,alt:"thumbnail",loading:"lazy"}),z.jsx(rn,{title:z.jsx(Ye,{color:"black",children:t.Title}),subtitle:z.jsx(Ye,{fontSize:"small",color:"black",children:st(t.Timestamp,"MMdd")}),position:"below"})]},t.ID))]}))},gn=V.memo(pn),mn=I=>{const{internalProps:x,forwardedProps:M}=zt(I,"date"),f=Nt(),e=Ft(f.triggerRef,f.rootRef);return z.jsx(Ge,{...M,variant:"outlined",size:"large",ref:e,sx:{color:"white",borderColor:"white",...x.sx},onClick:()=>f.setOpen(t=>!t),children:f.value?st(f.value,"yyyy"):"All Year"})},vn=I=>{const{disableDate:x,...M}=I;return z.jsx(Bt,{dateAdapter:Ht,children:z.jsx(Wt,{views:["year"],yearsOrder:"desc",slots:{field:mn},slotProps:{popper:{placement:"bottom"},actionBar:{actions:["clear"]}},...M})})},bn=12,yn={backgroundImage:'url("/img/News/Albums/Albums.webp")',backgroundPosition:"32% 22%"},jn=()=>{const I=Gt("(min-width:1200px)");let[x,M]=Ct();const{openModal:f}=Et(),[e,t]=V.useState(!1),[l,a]=V.useState(x.has("year")?new Date(x.get("year"),0,1):null),[p,v]=V.useState([]),[r,o]=V.useState(!1),[n,s]=V.useState(null);V.useEffect(()=>{v([]),o(!1),console.log(l),M(l?{year:l.getFullYear()}:E=>E.delete("year"))},[l,M]),V.useEffect(()=>{n!==null&&h()},[x.get("year")]);const h=async()=>{if(!e){t(!0);try{const E=await Rt(p,l==null?void 0:l.getFullYear());E.data.length>0?v(m=>[...m,...E.data]):o(!0)}finally{t(!1)}}};V.useEffect(()=>{p.length%bn!==0&&o(!0)},[p]),V.useEffect(()=>(window.onpopstate=()=>{s(!0),console.log("test restore"),v(JSON.parse(sessionStorage.getItem("albums")))},s(!1),()=>{window.onpopstate=()=>{}}),[]),V.useEffect(()=>{n!==null&&!n&&h()},[n]),V.useEffect(()=>()=>{sessionStorage.setItem("albums",JSON.stringify(p))});const U=V.useRef();return V.useEffect(()=>{U.current&&!r&&p.length>=12&&setTimeout(()=>{try{const E=U.current.clientHeight,m=window.innerHeight-500;console.log("test content",E),console.log("test screen",m),E>100&&E<m&&h()}catch{}},500)},[p]),z.jsxs(z.Fragment,{children:[z.jsx("div",{className:"title-wrapper",style:yn,children:z.jsxs("div",{className:"title",children:[z.jsx(Ye,{variant:"h4",fontWeight:830,sx:{letterSpacing:"0.4em",pl:"0.4em",color:"white"},children:"교회사진"}),z.jsx(vn,{sx:{mt:2},value:l,minDate:new Date("2022/04/03"),maxDate:new Date,onChange:a})]})}),z.jsx("div",{className:"container-wrapper",children:z.jsx(Mt,{className:"container",sx:{px:{xs:"0 !important",md:"1.5em !important"},py:"0 !important"},children:p.length<=0?z.jsx(et,{alignItems:"center",sx:{py:8},children:e?z.jsx($e,{}):"사진이 존재하지 않습니다"}):z.jsx(Tt,{dataLength:p.length,next:h,hasMore:!r,loader:z.jsx(et,{alignItems:"center",children:z.jsx($e,{})}),scrollThreshold:1,style:{overflowY:"hidden"},children:z.jsx($t,{ref:U,cols:I?4:3,gap:3,children:z.jsx(gn,{posts:p,cols:I?4:3})})})})}),z.jsx(Lt,{children:z.jsx(kt,{variant:"primary",style:{position:"fixed",right:"2vw",bottom:"3vh"},onClick:()=>f(hn,{}),children:z.jsx(Pt,{})})}),r&&z.jsx(_t,{})]})};export{jn as default};
