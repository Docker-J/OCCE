import{an as z,ao as Y,P as F,M as T,ap as w,aq as b,k as I,j as a,D as f,a1 as j,T as m,O as $,ar as H,t as O,r as W,A as R,C as A}from"./index-KMhnO0zL.js";import{g as M,i as B}from"./getDate-CQrz_Bqc.js";import{S}from"./Stack-CKzcHVxB.js";import{i as E}from"./isSunday-JzSByLKr.js";function k(t,e,n){const[r,s]=z(n==null?void 0:n.in,t,e),i=C(r,s),l=Math.abs(Y(r,s));r.setDate(r.getDate()-i*l);const o=+(C(r,s)===-i),d=i*(l-o);return d===0?0:d}function C(t,e){const n=t.getFullYear()-e.getFullYear()||t.getMonth()-e.getMonth()||t.getDate()-e.getDate()||t.getHours()-e.getHours()||t.getMinutes()-e.getMinutes()||t.getSeconds()-e.getSeconds()||t.getMilliseconds()-e.getMilliseconds();return n<0?-1:n>0?1:n}function p(t,e){const n=()=>F(e==null?void 0:e.in,NaN),s=_(t);let i;if(s.date){const c=q(s.date,2);i=K(c.restDateString,c.year)}if(!i||isNaN(+i))return n();const l=+i;let o=0,d;if(s.time&&(o=v(s.time),isNaN(o)))return n();if(s.timezone){if(d=J(s.timezone),isNaN(d))return n()}else{const c=new Date(l+o),u=T(0,e==null?void 0:e.in);return u.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),u.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),u}return T(l+o+d,e==null?void 0:e.in)}const x={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},P=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Z=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,L=/^([+-])(\d{2})(?::?(\d{2}))?$/;function _(t){const e={},n=t.split(x.dateTimeDelimiter);let r;if(n.length>2)return e;if(/:/.test(n[0])?r=n[0]:(e.date=n[0],r=n[1],x.timeZoneDelimiter.test(e.date)&&(e.date=t.split(x.timeZoneDelimiter)[0],r=t.substr(e.date.length,t.length))),r){const s=x.timezone.exec(r);s?(e.time=r.replace(s[1],""),e.timezone=s[1]):e.time=r}return e}function q(t,e){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),r=t.match(n);if(!r)return{year:NaN,restDateString:""};const s=r[1]?parseInt(r[1]):null,i=r[2]?parseInt(r[2]):null;return{year:i===null?s:i*100,restDateString:t.slice((r[1]||r[2]).length)}}function K(t,e){if(e===null)return new Date(NaN);const n=t.match(P);if(!n)return new Date(NaN);const r=!!n[4],s=g(n[1]),i=g(n[2])-1,l=g(n[3]),o=g(n[4]),d=g(n[5])-1;if(r)return ee(e,o,d)?X(e,o,d):new Date(NaN);{const c=new Date(0);return!Q(e,i,l)||!V(e,s)?new Date(NaN):(c.setUTCFullYear(e,i,Math.max(s,l)),c)}}function g(t){return t?parseInt(t):1}function v(t){const e=t.match(Z);if(!e)return NaN;const n=D(e[1]),r=D(e[2]),s=D(e[3]);return te(n,r,s)?n*w+r*b+s*1e3:NaN}function D(t){return t&&parseFloat(t.replace(",","."))||0}function J(t){if(t==="Z")return 0;const e=t.match(L);if(!e)return 0;const n=e[1]==="+"?-1:1,r=parseInt(e[2]),s=e[3]&&parseInt(e[3])||0;return ne(r,s)?n*(r*w+s*b):NaN}function X(t,e,n){const r=new Date(0);r.setUTCFullYear(t,0,4);const s=r.getUTCDay()||7,i=(e-1)*7+n+1-s;return r.setUTCDate(r.getUTCDate()+i),r}const G=[31,null,31,30,31,30,31,31,30,31,30,31];function U(t){return t%400===0||t%4===0&&t%100!==0}function Q(t,e,n){return e>=0&&e<=11&&n>=1&&n<=(G[e]||(U(t)?29:28))}function V(t,e){return e>=1&&e<=(U(t)?366:365)}function ee(t,e,n){return e>=1&&e<=53&&n>=0&&n<=6}function te(t,e,n){return t===24?e===0&&n===0:n>=0&&n<60&&e>=0&&e<60&&t>=0&&t<25}function ne(t,e){return e>=0&&e<=59}const se=I([a.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"},"0"),a.jsx("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")]),re=I(a.jsx("path",{d:"M12 12c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2m6-1.8C18 6.57 15.35 4 12 4s-6 2.57-6 6.2c0 2.34 1.95 5.44 6 9.14 4.05-3.7 6-6.8 6-9.14M12 2c4.2 0 8 3.22 8 8.2 0 3.32-2.67 7.25-8 11.8-5.33-4.55-8-8.48-8-11.8C4 5.22 7.8 2 12 2"}));function ae(t,e,n){return B(t,e)||M($(t,1))===M(e)&&n==="00:00 AM"}const ie=({date:t,event:e,sx:n})=>{const r=e.allday,s=p(r?e.start.date:e.start.dateTime),i=p(r?e.end.date:e.end.dateTime),l=f(s,"dd"),o=f(s,"HH:mm a"),d=f(i,"dd"),c=f(i,"HH:mm a"),u=ae(s,i,c);return a.jsxs(j,{sx:{border:"1px solid ",borderColor:r?"#f57c00":"#afafaf",p:1,borderRadius:1,...n},children:[r?a.jsxs(m,{fontWeight:700,color:"primary",children:[e.summary,!u&&` (Day ${k(t,s)+1}/${e.alldaylength})`]}):a.jsx(m,{fontSize:"1.1em",fontWeight:700,children:e.summary}),!r&&!u&&a.jsx(m,{variant:"h5",children:`${l} - ${M(d)}`}),a.jsx(m,{children:e.description}),!r&&a.jsxs(S,{direction:"row",spacing:.5,alignItems:"flex-end",children:[a.jsx(se,{fontSize:"small"}),a.jsxs(m,{variant:"body2",children:[o,!r&&(u?` - ${c}`:` - ${d} ${c} `)," "]})]}),(e==null?void 0:e.location)&&a.jsxs(S,{direction:"row",spacing:.5,alignItems:"flex-end",children:[a.jsx(re,{color:"orange",fontSize:"small"}),a.jsx(m,{component:"a",target:"_blank",href:`https://www.google.com/maps/search/?api=1&query=${e.location}`,variant:"body2",color:"black",sx:{textDecoration:"none"},children:e.location.split(",")[0]})]})]})},oe=({events:t})=>{function e(n){return n.reduce((s,i)=>{const l=p(i.start.dateTime||i.start.date),o=f(l,"MMMM yyyy"),d=f(l,"dd");if(s[o]=s[o]||{},s[o][d]=s[o][d]||[],i.start.date){i.allday=!!i.start.date,console.log(i),s[o][d].unshift(i);const c=p(i.end.date);i.alldaylength=k(c,l);for(let u=1;u<i.alldaylength;u++){const N=$(l,u),h=f(N,"MMMM yyyy"),y=f(N,"dd");s[h]=s[h]||{},s[h][y]=s[h][y]||[],s[h][y].unshift(i)}}else s[o][d].push(i);return s},{})}return Object.entries(e(t)).map(([n,r])=>a.jsxs("div",{children:[a.jsx(m,{variant:"h5",fontWeight:500,sx:{mb:"12px"},children:n}),Object.entries(r).map(([s,i])=>{const l=new Date(`${n} ${s}`),o=E(l);return a.jsxs(H,{elevation:3,sx:{p:2,mb:2,display:"flex",justifyContent:"center",borderRadius:2},children:[a.jsx("div",{style:{borderLeft:o?"3px solid red":"3px solid #f57c00",height:"32px",marginRight:"6px"}}),a.jsxs(j,{sx:{mr:"18px"},style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[a.jsx(m,{variant:"h5",color:o?"red":"primary",children:s}),a.jsx(m,{variant:"caption",color:o?"red":"primary",children:f(l,"eee")})]}),a.jsx(j,{width:"100%",display:"flex",flexDirection:"column",justifyContent:"center",children:i.map((d,c)=>a.jsx(ie,{date:l,event:d,sx:{marginBottom:c!==i.length-1&&"12px"}},c))})]},s)}),a.jsx("br",{})]},n))},ce={backgroundImage:'url("/img/News/Schedules/Schedules.jpg")',backgroundPositionX:"0%",backgroundPositionY:"60%"},fe=()=>{const t=O();return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"title-wrapper",style:ce,children:a.jsx("div",{className:"title",children:a.jsx(m,{variant:"h4",fontWeight:830,textAlign:"center",sx:{letterSpacing:"0.4em",pl:"0.4em",color:"white"},children:"교회일정"})})}),a.jsx("div",{className:"container-wrapper",children:a.jsx("div",{className:"container",style:{display:"flex",justifyContent:"center"},children:a.jsx(W.Suspense,{fallback:a.jsx(A,{}),children:a.jsx(R,{resolve:t.schedules,errorElement:a.jsx("p",{children:"Error loading!"}),children:({data:e})=>a.jsx("div",{style:{width:"100%",maxWidth:"800px",display:"flex",flexDirection:"column",justifyContent:"center"},children:e.items.length===0?"등록된 일정이 없습니다.":a.jsx(oe,{events:e.items})})})})})})]})};export{fe as default};
