import{an as U,ao as k,P as Y,M as T,ap as w,aq as S,k as F,j as i,D as f,a1 as j,T as m,O as b,ar as O,t as W,r as H,A as z,C as R}from"./index-DKCTCQLW.js";import{g as N,i as P}from"./getDate-CWoieRp9.js";import{S as A}from"./Stack-C5z8-Dnu.js";import{i as B}from"./isSunday-9_Gq6lnh.js";function I(t,e,n){const[r,s]=U(n==null?void 0:n.in,t,e),a=C(r,s),l=Math.abs(k(r,s));r.setDate(r.getDate()-a*l);const c=+(C(r,s)===-a),d=a*(l-c);return d===0?0:d}function C(t,e){const n=t.getFullYear()-e.getFullYear()||t.getMonth()-e.getMonth()||t.getDate()-e.getDate()||t.getHours()-e.getHours()||t.getMinutes()-e.getMinutes()||t.getSeconds()-e.getSeconds()||t.getMilliseconds()-e.getMilliseconds();return n<0?-1:n>0?1:n}function p(t,e){const n=()=>Y(e==null?void 0:e.in,NaN),s=_(t);let a;if(s.date){const o=q(s.date,2);a=K(o.restDateString,o.year)}if(!a||isNaN(+a))return n();const l=+a;let c=0,d;if(s.time&&(c=J(s.time),isNaN(c)))return n();if(s.timezone){if(d=X(s.timezone),isNaN(d))return n()}else{const o=new Date(l+c),u=T(0,e==null?void 0:e.in);return u.setFullYear(o.getUTCFullYear(),o.getUTCMonth(),o.getUTCDate()),u.setHours(o.getUTCHours(),o.getUTCMinutes(),o.getUTCSeconds(),o.getUTCMilliseconds()),u}return T(l+c+d,e==null?void 0:e.in)}const x={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},E=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Z=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,L=/^([+-])(\d{2})(?::?(\d{2}))?$/;function _(t){const e={},n=t.split(x.dateTimeDelimiter);let r;if(n.length>2)return e;if(/:/.test(n[0])?r=n[0]:(e.date=n[0],r=n[1],x.timeZoneDelimiter.test(e.date)&&(e.date=t.split(x.timeZoneDelimiter)[0],r=t.substr(e.date.length,t.length))),r){const s=x.timezone.exec(r);s?(e.time=r.replace(s[1],""),e.timezone=s[1]):e.time=r}return e}function q(t,e){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),r=t.match(n);if(!r)return{year:NaN,restDateString:""};const s=r[1]?parseInt(r[1]):null,a=r[2]?parseInt(r[2]):null;return{year:a===null?s:a*100,restDateString:t.slice((r[1]||r[2]).length)}}function K(t,e){if(e===null)return new Date(NaN);const n=t.match(E);if(!n)return new Date(NaN);const r=!!n[4],s=g(n[1]),a=g(n[2])-1,l=g(n[3]),c=g(n[4]),d=g(n[5])-1;if(r)return ee(e,c,d)?v(e,c,d):new Date(NaN);{const o=new Date(0);return!Q(e,a,l)||!V(e,s)?new Date(NaN):(o.setUTCFullYear(e,a,Math.max(s,l)),o)}}function g(t){return t?parseInt(t):1}function J(t){const e=t.match(Z);if(!e)return NaN;const n=D(e[1]),r=D(e[2]),s=D(e[3]);return te(n,r,s)?n*w+r*S+s*1e3:NaN}function D(t){return t&&parseFloat(t.replace(",","."))||0}function X(t){if(t==="Z")return 0;const e=t.match(L);if(!e)return 0;const n=e[1]==="+"?-1:1,r=parseInt(e[2]),s=e[3]&&parseInt(e[3])||0;return ne(r,s)?n*(r*w+s*S):NaN}function v(t,e,n){const r=new Date(0);r.setUTCFullYear(t,0,4);const s=r.getUTCDay()||7,a=(e-1)*7+n+1-s;return r.setUTCDate(r.getUTCDate()+a),r}const G=[31,null,31,30,31,30,31,31,30,31,30,31];function $(t){return t%400===0||t%4===0&&t%100!==0}function Q(t,e,n){return e>=0&&e<=11&&n>=1&&n<=(G[e]||($(t)?29:28))}function V(t,e){return e>=1&&e<=($(t)?366:365)}function ee(t,e,n){return e>=1&&e<=53&&n>=0&&n<=6}function te(t,e,n){return t===24?e===0&&n===0:n>=0&&n<60&&e>=0&&e<60&&t>=0&&t<25}function ne(t,e){return e>=0&&e<=59}const se=F(i.jsx("path",{d:"M12 12c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2m6-1.8C18 6.57 15.35 4 12 4s-6 2.57-6 6.2c0 2.34 1.95 5.44 6 9.14 4.05-3.7 6-6.8 6-9.14M12 2c4.2 0 8 3.22 8 8.2 0 3.32-2.67 7.25-8 11.8-5.33-4.55-8-8.48-8-11.8C4 5.22 7.8 2 12 2"}),"PlaceOutlined");function re(t,e,n){return P(t,e)||N(b(t,1))===N(e)&&n==="00:00 AM"}const ae=({date:t,event:e,sx:n})=>{const r=e.allday,s=p(r?e.start.date:e.start.dateTime),a=p(r?e.end.date:e.end.dateTime),l=f(s,"dd"),c=f(s,"HH:mm a"),d=f(a,"dd"),o=f(a,"HH:mm a"),u=re(s,a,o);return i.jsx(i.Fragment,{children:i.jsxs(j,{sx:{border:"1px solid ",borderColor:r?"#f57c00":"#afafaf",p:1,borderRadius:1,...n},children:[r?i.jsxs(m,{fontWeight:700,color:"primary",children:[e.summary,!u&&` (Day ${I(t,s)+1}/${e.alldaylength})`]}):i.jsx(m,{fontWeight:700,children:e.summary}),!r&&!u&&i.jsx(m,{variant:"h5",children:`${l} - ${N(d)}`}),i.jsx(m,{children:e.description}),!r&&i.jsxs(m,{children:[c,!r&&(u?` - ${o}`:` - ${d} ${o} `)]}),(e==null?void 0:e.location)&&i.jsxs(A,{direction:"row",spacing:.5,children:[i.jsx(se,{}),i.jsx(m,{component:"a",target:"_blank",href:`https://www.google.com/maps/search/?api=1&query=${e.location}`,variant:"body2",children:e.location.split(",")[0]})]})]})})},ie=({events:t})=>{function e(n){return n.reduce((s,a)=>{const l=p(a.start.dateTime||a.start.date),c=f(l,"MMMM yyyy"),d=f(l,"dd");if(s[c]=s[c]||{},s[c][d]=s[c][d]||[],a.start.date){a.allday=!!a.start.date,console.log(a),s[c][d].unshift(a);const o=p(a.end.date);a.alldaylength=I(o,l);for(let u=1;u<a.alldaylength;u++){const M=b(l,u),h=f(M,"MMMM yyyy"),y=f(M,"dd");s[h]=s[h]||{},s[h][y]=s[h][y]||[],s[h][y].unshift(a)}}else s[c][d].push(a);return s},{})}return Object.entries(e(t)).map(([n,r])=>i.jsxs("div",{children:[i.jsx(m,{variant:"h5",fontWeight:500,sx:{mb:"12px"},children:n}),Object.entries(r).map(([s,a])=>{const l=new Date(`${n} ${s}`),c=B(l);return i.jsxs(O,{elevation:4,sx:{p:2,mb:2,display:"flex",justifyContent:"center"},children:[i.jsx("div",{style:{borderLeft:c?"3px solid red":"3px solid #f57c00",height:"32px",marginRight:"6px"}}),i.jsxs(j,{sx:{mr:"18px"},style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[i.jsx(m,{variant:"h5",color:c?"red":"primary",children:s}),i.jsx(m,{variant:"caption",color:c?"red":"primary",children:f(l,"eee")})]}),i.jsx(j,{width:"100%",display:"flex",flexDirection:"column",justifyContent:"center",children:a.map((d,o)=>i.jsx(ae,{date:l,event:d,sx:{marginBottom:o!==a.length-1&&"12px"}},o))})]},s)}),i.jsx("br",{})]},n))},ce={backgroundImage:'url("/img/News/Schedules/Schedules.jpg")',backgroundPositionX:"0%",backgroundPositionY:"60%"},me=()=>{const t=W();return i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"title-wrapper",style:ce,children:i.jsx("div",{className:"title",children:i.jsx(m,{variant:"h4",fontWeight:830,textAlign:"center",sx:{letterSpacing:"0.4em",pl:"0.4em",color:"white"},children:"교회일정"})})}),i.jsx("div",{className:"container-wrapper",children:i.jsx("div",{className:"container",style:{display:"flex",justifyContent:"center"},children:i.jsx(H.Suspense,{fallback:i.jsx("div",{style:{display:"flex",justifyContent:"center"},children:i.jsx(R,{})}),children:i.jsx(z,{resolve:t.schedules,errorElement:i.jsx("p",{children:"Error loading!"}),children:({data:e})=>i.jsx("div",{style:{width:"100%",maxWidth:"800px",display:"flex",flexDirection:"column",justifyContent:"center"},children:e.items.length===0?"등록된 일정이 없습니다.":i.jsx(ie,{events:e.items})})})})})})]})};export{me as default};
