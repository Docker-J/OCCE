"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[522],{9448:(e,t,o)=>{o.d(t,{A:()=>n});var i=o(3003);const n=e=>(0,i.d4)((e=>e.authToken.admin))&&e.children},9596:(e,t,o)=>{o.d(t,{A:()=>p});var i=o(5043),n=o(2518),a=o(8390),r=o(1121),s=o(8627),l=o(7537),c=o(579);const d=e=>{const{setIsDatePickerOpen:t,id:o,disabled:i,value:a,InputProps:{ref:r}={},inputProps:{"aria-label":s}={}}=e;return(0,c.jsx)(n.A,{variant:"outlined",size:"large",id:o,disabled:i,ref:r,"aria-label":s,onClick:()=>null===t||void 0===t?void 0:t((e=>!e)),children:(0,l.GP)(a,"yyyy/MM/dd")})},p=e=>{const[t,o]=(0,i.useState)(!1),{disableDate:n,...l}=e;return(0,c.jsx)(a.$,{dateAdapter:s.h,children:(0,c.jsx)(r.l,{slots:{field:d},slotProps:{field:{setIsDatePickerOpen:o},popper:{placement:"bottom"}},...l,open:t,onClose:()=>o(!1),shouldDisableDate:e=>n&&n(e),disableHighlightToday:!0})})}},2773:(e,t,o)=>{o.d(t,{A:()=>c});var i=o(1045),n=o(155),a=o(5043),r=o(2734),s=o(5964),l=o(579);const c=e=>{let{id:t,image:o,index:c,cover:d,setCoverImage:p,movePhoto:u,removeImage:h}=e;const m=(0,a.useRef)(null),[{isDragging:g},x]=(0,r.i)({type:"previewcard",item:()=>({id:t,index:c}),collect:e=>({isDragging:e.isDragging()})}),f=g?.7:1,[{handlerId:b},v]=(0,s.H)({accept:"previewcard",collect:e=>({handlerId:e.getHandlerId()}),hover(e,t){var o;if(!m.current)return;const i=e.index,n=c;if(i===n)return;const a=null===(o=m.current)||void 0===o?void 0:o.getBoundingClientRect(),r=(a.left-a.right)/2,s=t.getClientOffset().x-a.left;i<n&&s<r||i>n&&s<r||(u(i,n),p(n),e.index=n)}});return x(v(m)),(0,l.jsxs)("div",{ref:m,style:{position:"relative",borderRadius:2,border:d?"5px solid #4bb543":"1px solid #eaeaea",marginBottom:8,marginRight:c%3!==2?"calc(2%/2)":0,width:"calc(97%/3)",aspectRatio:"1/1",boxSizing:"border-box",cursor:"move",opacity:f,overflow:"hidden"},onClick:()=>p(c),children:[(0,l.jsx)("img",{src:o,alt:"preview",style:{width:"auto",height:"100%",objectFit:"cover"}}),(0,l.jsx)(i.A,{sx:{position:"absolute",zIndex:99,top:4,right:4,backgroundColor:"#f57c00",cursor:"pointer",width:30,height:30},onClick:()=>h(c),children:(0,l.jsx)(n.A,{sx:{color:"white"}})})]})}},1522:(e,t,o)=>{o.r(t),o.d(t,{default:()=>ue});var i=o(5043),n=o(344),a=o(5865),r=o(8911),s=o(1637),l=o(4161),c=o(4010),d=o(2505),p=o(4997),u=o(6453),h=o(9448),m=o(2326),g=(o(1843),o(6213));var x=o(3368),f=o(6446),b=o(2037),v=o(2518),A=o(9337),y=o(6805),w=o.n(y),j=o(4783),I=o(4223),S=o(9918),k=o(8081),P=o(2773),C=o(9596),R=o(579);const D={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"90vw",height:"80vh",maxWidth:"1300px",bgcolor:"#ffffff",boxShadow:24,borderRadius:"0.5em",p:1,py:5,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},L=e=>{let{isOpen:t,onClose:o}=e;const{openSnackbar:n}=(0,k.A)(),r=()=>{O(),o()},l=new Date,[c,d]=(0,i.useState)(""),[p,u]=(0,i.useState)(l),[h,m]=(0,i.useState)([]),[y,L]=(0,i.useState)(0),[W,B]=(0,i.useState)([]),N=e=>{URL.revokeObjectURL(W[e]),m((t=>w()(t,{$splice:[[e,1]]}))),B((t=>w()(t,{$splice:[[e,1]]})))},O=()=>{W.forEach((e=>URL.revokeObjectURL(e))),m([]),B([])},M=(0,i.useCallback)(((e,t)=>{m((o=>w()(o,{$splice:[[e,1],[t,0,o[e]]]}))),B((o=>w()(o,{$splice:[[e,1],[t,0,o[e]]]})))}),[]),{getRootProps:T,getInputProps:z}=(0,A.VB)({accept:{"image/*":[]},onDrop:e=>{var t;t=e,m((e=>[...e,...t])),t.forEach((e=>{B((t=>w()(t,{$push:[URL.createObjectURL(e)]})))}))},noDragEventsBubbling:!0}),E=(0,i.useCallback)(((e,t)=>(0,R.jsx)(P.A,{index:t,image:e,cover:t===y,setCoverImage:L,movePhoto:M,removeImage:N},t)),[y]),[F,G]=(0,i.useState)(!1);return(0,R.jsx)(x.A,{open:t,onClose:r,children:(0,R.jsx)(f.A,{sx:D,children:F?(0,R.jsx)(s.A,{}):(0,R.jsxs)(R.Fragment,{children:[(0,R.jsxs)("div",{style:{display:"flex",width:"95%"},children:[(0,R.jsx)(C.A,{value:p,minDate:new Date("2022/04/03"),maxDate:l,onChange:u}),(0,R.jsx)(b.A,{id:"filled-basic",label:"Album Title",variant:"outlined",sx:{flexGrow:1,ml:4},onChange:e=>d(e.target.value)})]}),(0,R.jsx)(I.Q,{backend:S.t2,children:(0,R.jsx)("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",alignContent:"flex-start",justifyContent:"space-between",width:"95%",height:"65%",overflowX:"auto"},children:W.map(((e,t)=>E(e,t)))})}),(0,R.jsxs)("div",{style:{width:"95%",height:"20%",border:"1pt dotted #f57c00",borderRadius:"1em",overflowY:"auto"},...T(),children:[(0,R.jsx)("input",{...z()}),(0,R.jsx)(f.A,{sx:{position:"relative",height:"100%",widht:"100%"},children:(0,R.jsxs)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},children:[(0,R.jsx)(j.A,{fontSize:"large",color:"primary"}),(0,R.jsx)(a.A,{children:"Click or Drag Photos to here"})]})})]}),(0,R.jsxs)("div",{style:{display:"flex",marginTop:"2em"},children:[(0,R.jsx)(v.A,{variant:"outlined",disabled:""===c.trim()||h.length<=0,onClick:async()=>{const e=new FormData;e.append("title",c),e.append("date",p.toISOString()),h.forEach((t=>{e.append("images",t)})),e.append("cover",y);try{G(!0),await(async e=>{try{await g.A.post("/api/albums",e,{headers:{"Content-Type":"multipart/form-data"}})}catch{throw new Error}})(e),n("success","Uploaded Succesfully!"),r()}catch(t){console.log(t),n("error","Error Occured. Please contact to the administrator.")}finally{G(!1)}},children:"Submit"}),(0,R.jsx)(v.A,{variant:"outlined",onClick:O,disabled:h.length<=0,children:"Clear All"}),(0,R.jsx)(v.A,{variant:"outlined",onClick:r,children:"Close"})]})]})})})};var W=o(8669),B=o(8587),N=o(8168),O=o(8387),M=o(8606),T=o(4535),z=o(2876),E=o(6803),F=o(7056),G=o(2400);function H(e){return(0,G.Ay)("MuiListSubheader",e)}(0,F.A)("MuiListSubheader",["root","colorPrimary","colorInherit","gutters","inset","sticky"]);const U=["className","color","component","disableGutters","disableSticky","inset"],$=(0,T.Ay)("li",{name:"MuiListSubheader",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,"default"!==o.color&&t["color".concat((0,E.A)(o.color))],!o.disableGutters&&t.gutters,o.inset&&t.inset,!o.disableSticky&&t.sticky]}})((e=>{let{theme:t,ownerState:o}=e;return(0,N.A)({boxSizing:"border-box",lineHeight:"48px",listStyle:"none",color:(t.vars||t).palette.text.secondary,fontFamily:t.typography.fontFamily,fontWeight:t.typography.fontWeightMedium,fontSize:t.typography.pxToRem(14)},"primary"===o.color&&{color:(t.vars||t).palette.primary.main},"inherit"===o.color&&{color:"inherit"},!o.disableGutters&&{paddingLeft:16,paddingRight:16},o.inset&&{paddingLeft:72},!o.disableSticky&&{position:"sticky",top:0,zIndex:1,backgroundColor:(t.vars||t).palette.background.paper})})),Y=i.forwardRef((function(e,t){const o=(0,z.A)({props:e,name:"MuiListSubheader"}),{className:i,color:n="default",component:a="li",disableGutters:r=!1,disableSticky:s=!1,inset:l=!1}=o,c=(0,B.A)(o,U),d=(0,N.A)({},o,{color:n,component:a,disableGutters:r,disableSticky:s,inset:l}),p=(e=>{const{classes:t,color:o,disableGutters:i,inset:n,disableSticky:a}=e,r={root:["root","default"!==o&&"color".concat((0,E.A)(o)),!i&&"gutters",n&&"inset",!a&&"sticky"]};return(0,M.A)(r,H,t)})(d);return(0,R.jsx)($,(0,N.A)({as:a,className:(0,O.A)(p.root,i),ref:t,ownerState:d},c))}));Y.muiSkipListHighlight=!0;const V=Y;function J(e){return(0,G.Ay)("MuiImageListItemBar",e)}(0,F.A)("MuiImageListItemBar",["root","positionBottom","positionTop","positionBelow","titleWrap","titleWrapBottom","titleWrapTop","titleWrapBelow","titleWrapActionPosLeft","titleWrapActionPosRight","title","subtitle","actionIcon","actionIconActionPosLeft","actionIconActionPosRight"]);const X=["actionIcon","actionPosition","className","subtitle","title","position"],_=(0,T.Ay)("div",{name:"MuiImageListItemBar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,t["position".concat((0,E.A)(o.position))]]}})((e=>{let{theme:t,ownerState:o}=e;return(0,N.A)({position:"absolute",left:0,right:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",fontFamily:t.typography.fontFamily},"bottom"===o.position&&{bottom:0},"top"===o.position&&{top:0},"below"===o.position&&{position:"relative",background:"transparent",alignItems:"normal"})})),Q=(0,T.Ay)("div",{name:"MuiImageListItemBar",slot:"TitleWrap",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.titleWrap,t["titleWrap".concat((0,E.A)(o.position))],o.actionIcon&&t["titleWrapActionPos".concat((0,E.A)(o.actionPosition))]]}})((e=>{let{theme:t,ownerState:o}=e;return(0,N.A)({flexGrow:1,padding:"12px 16px",color:(t.vars||t).palette.common.white,overflow:"hidden"},"below"===o.position&&{padding:"6px 0 12px",color:"inherit"},o.actionIcon&&"left"===o.actionPosition&&{paddingLeft:0},o.actionIcon&&"right"===o.actionPosition&&{paddingRight:0})})),Z=(0,T.Ay)("div",{name:"MuiImageListItemBar",slot:"Title",overridesResolver:(e,t)=>t.title})((e=>{let{theme:t}=e;return{fontSize:t.typography.pxToRem(16),lineHeight:"24px",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}})),q=(0,T.Ay)("div",{name:"MuiImageListItemBar",slot:"Subtitle",overridesResolver:(e,t)=>t.subtitle})((e=>{let{theme:t}=e;return{fontSize:t.typography.pxToRem(12),lineHeight:1,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}})),K=(0,T.Ay)("div",{name:"MuiImageListItemBar",slot:"ActionIcon",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.actionIcon,t["actionIconActionPos".concat((0,E.A)(o.actionPosition))]]}})((e=>{let{ownerState:t}=e;return(0,N.A)({},"left"===t.actionPosition&&{order:-1})})),ee=i.forwardRef((function(e,t){const o=(0,z.A)({props:e,name:"MuiImageListItemBar"}),{actionIcon:i,actionPosition:n="right",className:a,subtitle:r,title:s,position:l="bottom"}=o,c=(0,B.A)(o,X),d=(0,N.A)({},o,{position:l,actionPosition:n}),p=(e=>{const{classes:t,position:o,actionIcon:i,actionPosition:n}=e,a={root:["root","position".concat((0,E.A)(o))],titleWrap:["titleWrap","titleWrap".concat((0,E.A)(o)),i&&"titleWrapActionPos".concat((0,E.A)(n))],title:["title"],subtitle:["subtitle"],actionIcon:["actionIcon","actionIconActionPos".concat((0,E.A)(n))]};return(0,M.A)(a,J,t)})(d);return(0,R.jsxs)(_,(0,N.A)({ownerState:d,className:(0,O.A)(p.root,a),ref:t},c,{children:[(0,R.jsxs)(Q,{ownerState:d,className:p.titleWrap,children:[(0,R.jsx)(Z,{className:p.title,children:s}),r?(0,R.jsx)(q,{className:p.subtitle,children:r}):null]}),i?(0,R.jsx)(K,{ownerState:d,className:p.actionIcon,children:i}):null]}))}));var te=o(5475);const oe=e=>{let{posts:t,cols:o}=e,i={};for(let n=0;n<t.length;n++){let e=new Date(t[n].Timestamp).getFullYear();i[e]||(i[e]=[]),i[e].push(t[n])}return Object.keys(i).map((e=>(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(W.A,{cols:o,children:(0,R.jsx)(V,{component:"div",children:e})},"Subheader"),i[e].map((e=>(0,R.jsxs)(W.A,{component:te.N_,to:e.ID,sx:{textDecoration:"none"},children:[(0,R.jsx)("img",{src:"https://imagedelivery.net/ICo2WI8PXO_BVRlWfwzOww/".concat(e.Cover,"/thumbnail"),alt:"thumbnail",loading:"lazy"}),(0,R.jsx)(ee,{title:(0,R.jsx)(a.A,{color:"black",children:e.Title}),subtitle:(0,R.jsx)(a.A,{fontSize:"small",color:"black",children:"0711"}),position:"below"})]},e.ID)))]})))},ie=(0,i.memo)(oe);var ne=o(8390),ae=o(1121),re=o(8627),se=o(7537);const le=e=>{const{setIsDatePickerOpen:t,id:o,disabled:i,value:n,sx:a,InputProps:{ref:r}={},inputProps:{"aria-label":s}={}}=e;return(0,R.jsx)(v.A,{variant:"outlined",size:"large",id:o,disabled:i,ref:r,"aria-label":s,sx:{color:"white",borderColor:"white",...a},onClick:()=>null===t||void 0===t?void 0:t((e=>!e)),children:n?(0,se.GP)(n,"yyyy"):"All Year"})},ce=e=>{const[t,o]=(0,i.useState)(!1),{disableDate:n,...a}=e;return(0,R.jsx)(ne.$,{dateAdapter:re.h,children:(0,R.jsx)(ae.l,{views:["year"],slots:{field:le},slotProps:{field:{setIsDatePickerOpen:o},popper:{placement:"bottom"},actionBar:{actions:["clear"]}},...a,open:t,onClose:()=>o(!1)})})};var de=o(3216);const pe={backgroundImage:'linear-gradient(rgba(0, 0, 0, 0.40), rgba(0, 0, 0, 0.40)), url("/img/News/Albums/Albums.jpg")'},ue=()=>{const e=(0,n.A)("(min-width:1200px)"),t=(0,de.Zp)(),{openModal:o}=(0,u.A)(),[x,f]=(0,i.useState)(null),[b,v]=(0,i.useState)([]),[A,y]=(0,i.useState)(!1),[w,j]=(0,i.useState)(!0);(0,i.useEffect)((()=>{t(x?"?year=".concat(x.getFullYear()):"")}),[x]);const I=async()=>{const e=await(async(e,t)=>{try{return await g.A.get("/api/albums/".concat(0===e.length?"":"?lastVisible=".concat(e.at(-1).ID,"&timeStamp=").concat(e.at(-1).Timestamp)))}catch{throw new Error}})(b);e.data.length>0?v((t=>[...t,...e.data])):y(!0)};(0,i.useEffect)((()=>{b.length%12!==0&&y(!0)}),[b]),(0,i.useEffect)((()=>(window.onpopstate=()=>{j(!0),console.log("test restore"),v(JSON.parse(sessionStorage.getItem("albums")))},j(!1),()=>{window.onpopstate=()=>{}})),[]),(0,i.useEffect)((()=>{null===w||w||I()}),[w]),(0,i.useEffect)((()=>()=>{sessionStorage.setItem("albums",JSON.stringify(b))}));const S=(0,i.useRef)();return(0,i.useEffect)((()=>{S.current&&!A&&b.length>=12&&setTimeout((()=>{try{const e=S.current.clientHeight,t=window.innerHeight-500;console.log("test content",e),console.log("test screen",t),e>100&&e<t&&I()}catch(e){}}),500)}),[b]),(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)("div",{className:"title-wrapper",style:pe,children:(0,R.jsxs)("div",{className:"title",children:[(0,R.jsx)(a.A,{variant:"h4",fontWeight:830,sx:{letterSpacing:"0.4em",pl:"0.4em",color:"white"},children:"\uad50\ud68c\uc0ac\uc9c4"}),(0,R.jsx)(ce,{sx:{mt:2},value:x,minDate:new Date("2022/04/03"),maxDate:new Date,onChange:f})]})}),(0,R.jsx)("div",{className:"container-wrapper",children:(0,R.jsx)("div",{className:"container",children:b.length<=0?(0,R.jsx)(r.A,{alignItems:"center",children:(0,R.jsx)(s.A,{})}):(0,R.jsx)(p.A,{dataLength:b.length,next:I,hasMore:!A,loader:(0,R.jsx)(r.A,{alignItems:"center",children:(0,R.jsx)(s.A,{})}),scrollThreshold:1,style:{overflowY:"hidden"},children:(0,R.jsx)(l.A,{ref:S,cols:e?4:3,gap:2.5,children:(0,R.jsx)(ie,{posts:b,cols:e?4:3})})})})}),(0,R.jsx)(h.A,{children:(0,R.jsx)(c.A,{variant:"primary",style:{position:"fixed",right:"2vw",bottom:"3vh"},onClick:()=>o(L,{}),children:(0,R.jsx)(d.A,{})})}),A&&(0,R.jsx)(m.A,{})]})}},1843:()=>{}}]);
//# sourceMappingURL=522.d931eed0.chunk.js.map