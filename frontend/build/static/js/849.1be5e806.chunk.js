"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[849],{4472:(e,t,o)=>{o.d(t,{c:()=>p});var i=o(9060),n=o(2160),a=o(92),r=o(8504),s=o(5462),l=o(256),c=o(2496);const d=e=>{const{setIsDatePickerOpen:t,id:o,disabled:i,value:a,InputProps:{ref:r}={},inputProps:{"aria-label":s}={}}=e;return(0,c.jsx)(n.c,{variant:"outlined",size:"large",id:o,disabled:i,ref:r,"aria-label":s,onClick:()=>null===t||void 0===t?void 0:t((e=>!e)),children:(0,l.E9)(a,"yyyy/MM/dd")})},p=e=>{const[t,o]=(0,i.useState)(!1),{disableDate:n,...l}=e;return(0,c.jsx)(a.c,{dateAdapter:s.G,children:(0,c.jsx)(r.I,{slots:{field:d},slotProps:{field:{setIsDatePickerOpen:o},popper:{placement:"bottom"}},...l,open:t,onClose:()=>o(!1),shouldDisableDate:e=>n&&n(e),disableHighlightToday:!0})})}},5604:(e,t,o)=>{o.d(t,{c:()=>c});var i=o(7960),n=o(7132),a=o(9060),r=o(4864),s=o(1595),l=o(2496);const c=e=>{let{id:t,image:o,index:c,cover:d,setCoverImage:p,movePhoto:u,removeImage:h}=e;const m=(0,a.useRef)(null),[{isDragging:g},x]=(0,r.I)({type:"previewcard",item:()=>({id:t,index:c}),collect:e=>({isDragging:e.isDragging()})}),b=g?.7:1,[{handlerId:f},v]=(0,s.W)({accept:"previewcard",collect:e=>({handlerId:e.getHandlerId()}),hover(e,t){var o;if(!m.current)return;const i=e.index,n=c;if(i===n)return;const a=null===(o=m.current)||void 0===o?void 0:o.getBoundingClientRect(),r=(a.left-a.right)/2,s=t.getClientOffset().x-a.left;i<n&&s<r||i>n&&s<r||(u(i,n),p(n),e.index=n)}});return x(v(m)),(0,l.jsxs)("div",{ref:m,style:{position:"relative",borderRadius:2,border:d?"5px solid #4bb543":"1px solid #eaeaea",marginBottom:8,marginRight:c%3!==2?"calc(2%/2)":0,width:"calc(97%/3)",aspectRatio:"1/1",boxSizing:"border-box",cursor:"move",opacity:b,overflow:"hidden"},onClick:()=>p(c),children:[(0,l.jsx)("img",{src:o,alt:"preview",style:{width:"auto",height:"100%",objectFit:"cover"}}),(0,l.jsx)(i.c,{sx:{position:"absolute",zIndex:99,top:4,right:4,backgroundColor:"#f57c00",cursor:"pointer",width:30,height:30},onClick:()=>h(c),children:(0,l.jsx)(n.c,{sx:{color:"white"}})})]})}},1849:(e,t,o)=>{o.r(t),o.d(t,{default:()=>pe});var i=o(9060),n=o(1640),a=o(6880),r=o(8960),s=o(1088),l=o(1192),c=o(2904),d=o(8420),p=o(9672),u=o(2532),h=o(1060),m=(o(3243),o(8372));var g=o(2456),x=o(7256),b=o(2184),f=o(2160),v=o(771),w=o(1552),y=o.n(w),j=o(3556),I=o(5816),S=o(4192),k=o(7856),C=o(5604),P=o(4472),R=o(2496);const D={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"90vw",height:"80vh",maxWidth:"1300px",bgcolor:"#ffffff",boxShadow:24,borderRadius:"0.5em",p:1,py:5,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},L=e=>{let{isOpen:t,onClose:o}=e;const{openSnackbar:n}=(0,k.c)(),r=()=>{M(),o()},l=new Date,[c,d]=(0,i.useState)(""),[p,u]=(0,i.useState)(l),[h,w]=(0,i.useState)([]),[L,W]=(0,i.useState)(0),[A,O]=(0,i.useState)([]),B=e=>{URL.revokeObjectURL(A[e]),w((t=>y()(t,{$splice:[[e,1]]}))),O((t=>y()(t,{$splice:[[e,1]]})))},M=()=>{A.forEach((e=>URL.revokeObjectURL(e))),w([]),O([])},N=(0,i.useCallback)(((e,t)=>{w((o=>y()(o,{$splice:[[e,1],[t,0,o[e]]]}))),O((o=>y()(o,{$splice:[[e,1],[t,0,o[e]]]})))}),[]),{getRootProps:T,getInputProps:E}=(0,v.IX)({accept:{"image/*":[]},onDrop:e=>{var t;t=e,w((e=>[...e,...t])),t.forEach((e=>{O((t=>y()(t,{$push:[URL.createObjectURL(e)]})))}))},noDragEventsBubbling:!0}),z=(0,i.useCallback)(((e,t)=>(0,R.jsx)(C.c,{index:t,image:e,cover:t===L,setCoverImage:W,movePhoto:N,removeImage:B},t)),[L]),[F,G]=(0,i.useState)(!1);return(0,R.jsx)(g.c,{open:t,onClose:r,children:(0,R.jsx)(x.c,{sx:D,children:F?(0,R.jsx)(s.c,{}):(0,R.jsxs)(R.Fragment,{children:[(0,R.jsxs)("div",{style:{display:"flex",width:"95%"},children:[(0,R.jsx)(P.c,{value:p,minDate:new Date("2022/04/03"),maxDate:l,onChange:u}),(0,R.jsx)(b.c,{id:"filled-basic",label:"Album Title",variant:"outlined",sx:{flexGrow:1,ml:4},onChange:e=>d(e.target.value)})]}),(0,R.jsx)(I.q,{backend:S.i6,children:(0,R.jsx)("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",alignContent:"flex-start",justifyContent:"space-between",width:"95%",height:"65%",overflowX:"auto"},children:A.map(((e,t)=>z(e,t)))})}),(0,R.jsxs)("div",{style:{width:"95%",height:"20%",border:"1pt dotted #f57c00",borderRadius:"1em",overflowY:"auto"},...T(),children:[(0,R.jsx)("input",{...E()}),(0,R.jsx)(x.c,{sx:{position:"relative",height:"100%",widht:"100%"},children:(0,R.jsxs)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},children:[(0,R.jsx)(j.c,{fontSize:"large",color:"primary"}),(0,R.jsx)(a.c,{children:"Click or Drag Photos to here"})]})})]}),(0,R.jsxs)("div",{style:{display:"flex",marginTop:"2em"},children:[(0,R.jsx)(f.c,{variant:"outlined",disabled:""===c.trim()||h.length<=0,onClick:async()=>{const e=new FormData;e.append("title",c),e.append("date",p.toISOString()),h.forEach((t=>{e.append("images",t)})),e.append("cover",L);try{G(!0),await(async e=>{try{await m.c.post("/api/albums/uploadAlbum",e,{headers:{"Content-Type":"multipart/form-data"}})}catch{throw new Error}})(e),n("success","Uploaded Succesfully!"),r()}catch(t){console.log(t),n("error","Error Occured. Please contact to the administrator.")}finally{G(!1)}},children:"Submit"}),(0,R.jsx)(f.c,{variant:"outlined",onClick:M,disabled:h.length<=0,children:"Clear All"}),(0,R.jsx)(f.c,{variant:"outlined",onClick:r,children:"Close"})]})]})})})};var W=o(6200),A=o(5656),O=o(5072),B=o(9736),M=o(1412),N=o(2556),T=o(3456),E=o(5832),z=o(99),F=o(3448);function G(e){return(0,F.cp)("MuiListSubheader",e)}(0,z.c)("MuiListSubheader",["root","colorPrimary","colorInherit","gutters","inset","sticky"]);const H=["className","color","component","disableGutters","disableSticky","inset"],U=(0,N.cp)("li",{name:"MuiListSubheader",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,"default"!==o.color&&t["color".concat((0,E.c)(o.color))],!o.disableGutters&&t.gutters,o.inset&&t.inset,!o.disableSticky&&t.sticky]}})((e=>{let{theme:t,ownerState:o}=e;return(0,O.c)({boxSizing:"border-box",lineHeight:"48px",listStyle:"none",color:(t.vars||t).palette.text.secondary,fontFamily:t.typography.fontFamily,fontWeight:t.typography.fontWeightMedium,fontSize:t.typography.pxToRem(14)},"primary"===o.color&&{color:(t.vars||t).palette.primary.main},"inherit"===o.color&&{color:"inherit"},!o.disableGutters&&{paddingLeft:16,paddingRight:16},o.inset&&{paddingLeft:72},!o.disableSticky&&{position:"sticky",top:0,zIndex:1,backgroundColor:(t.vars||t).palette.background.paper})})),Y=i.forwardRef((function(e,t){const o=(0,T.c)({props:e,name:"MuiListSubheader"}),{className:i,color:n="default",component:a="li",disableGutters:r=!1,disableSticky:s=!1,inset:l=!1}=o,c=(0,A.c)(o,H),d=(0,O.c)({},o,{color:n,component:a,disableGutters:r,disableSticky:s,inset:l}),p=(e=>{const{classes:t,color:o,disableGutters:i,inset:n,disableSticky:a}=e,r={root:["root","default"!==o&&"color".concat((0,E.c)(o)),!i&&"gutters",n&&"inset",!a&&"sticky"]};return(0,M.c)(r,G,t)})(d);return(0,R.jsx)(U,(0,O.c)({as:a,className:(0,B.c)(p.root,i),ref:t,ownerState:d},c))}));Y.muiSkipListHighlight=!0;const $=Y;function X(e){return(0,F.cp)("MuiImageListItemBar",e)}(0,z.c)("MuiImageListItemBar",["root","positionBottom","positionTop","positionBelow","titleWrap","titleWrapBottom","titleWrapTop","titleWrapBelow","titleWrapActionPosLeft","titleWrapActionPosRight","title","subtitle","actionIcon","actionIconActionPosLeft","actionIconActionPosRight"]);const J=["actionIcon","actionPosition","className","subtitle","title","position"],V=(0,N.cp)("div",{name:"MuiImageListItemBar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,t["position".concat((0,E.c)(o.position))]]}})((e=>{let{theme:t,ownerState:o}=e;return(0,O.c)({position:"absolute",left:0,right:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",fontFamily:t.typography.fontFamily},"bottom"===o.position&&{bottom:0},"top"===o.position&&{top:0},"below"===o.position&&{position:"relative",background:"transparent",alignItems:"normal"})})),q=(0,N.cp)("div",{name:"MuiImageListItemBar",slot:"TitleWrap",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.titleWrap,t["titleWrap".concat((0,E.c)(o.position))],o.actionIcon&&t["titleWrapActionPos".concat((0,E.c)(o.actionPosition))]]}})((e=>{let{theme:t,ownerState:o}=e;return(0,O.c)({flexGrow:1,padding:"12px 16px",color:(t.vars||t).palette.common.white,overflow:"hidden"},"below"===o.position&&{padding:"6px 0 12px",color:"inherit"},o.actionIcon&&"left"===o.actionPosition&&{paddingLeft:0},o.actionIcon&&"right"===o.actionPosition&&{paddingRight:0})})),_=(0,N.cp)("div",{name:"MuiImageListItemBar",slot:"Title",overridesResolver:(e,t)=>t.title})((e=>{let{theme:t}=e;return{fontSize:t.typography.pxToRem(16),lineHeight:"24px",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}})),K=(0,N.cp)("div",{name:"MuiImageListItemBar",slot:"Subtitle",overridesResolver:(e,t)=>t.subtitle})((e=>{let{theme:t}=e;return{fontSize:t.typography.pxToRem(12),lineHeight:1,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}})),Q=(0,N.cp)("div",{name:"MuiImageListItemBar",slot:"ActionIcon",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.actionIcon,t["actionIconActionPos".concat((0,E.c)(o.actionPosition))]]}})((e=>{let{ownerState:t}=e;return(0,O.c)({},"left"===t.actionPosition&&{order:-1})})),Z=i.forwardRef((function(e,t){const o=(0,T.c)({props:e,name:"MuiImageListItemBar"}),{actionIcon:i,actionPosition:n="right",className:a,subtitle:r,title:s,position:l="bottom"}=o,c=(0,A.c)(o,J),d=(0,O.c)({},o,{position:l,actionPosition:n}),p=(e=>{const{classes:t,position:o,actionIcon:i,actionPosition:n}=e,a={root:["root","position".concat((0,E.c)(o))],titleWrap:["titleWrap","titleWrap".concat((0,E.c)(o)),i&&"titleWrapActionPos".concat((0,E.c)(n))],title:["title"],subtitle:["subtitle"],actionIcon:["actionIcon","actionIconActionPos".concat((0,E.c)(n))]};return(0,M.c)(a,X,t)})(d);return(0,R.jsxs)(V,(0,O.c)({ownerState:d,className:(0,B.c)(p.root,a),ref:t},c,{children:[(0,R.jsxs)(q,{ownerState:d,className:p.titleWrap,children:[(0,R.jsx)(_,{className:p.title,children:s}),r?(0,R.jsx)(K,{className:p.subtitle,children:r}):null]}),i?(0,R.jsx)(Q,{ownerState:d,className:p.actionIcon,children:i}):null]}))}));var ee=o(12);const te=e=>{let{posts:t,cols:o}=e,i={};for(let n=0;n<t.length;n++){let e=new Date(t[n].Timestamp).getFullYear();i[e]||(i[e]=[]),i[e].push(t[n])}return Object.keys(i).map((e=>(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(W.c,{cols:o,children:(0,R.jsx)($,{component:"div",children:e})},"Subheader"),i[e].map((e=>(0,R.jsxs)(W.c,{component:ee.cH,to:e.ID,sx:{textDecoration:"none"},children:[(0,R.jsx)("img",{src:"https://imagedelivery.net/ICo2WI8PXO_BVRlWfwzOww/".concat(e.Cover,"/thumbnail"),alt:"thumbnail",loading:"lazy"}),(0,R.jsx)(Z,{title:(0,R.jsx)(a.c,{color:"black",children:e.Title}),subtitle:(0,R.jsx)(a.c,{fontSize:"small",color:"black",children:"0711"}),position:"below"})]},e.ID)))]})))},oe=(0,i.memo)(te);var ie=o(92),ne=o(8504),ae=o(5462),re=o(256);const se=e=>{const{setIsDatePickerOpen:t,id:o,disabled:i,value:n,sx:a,InputProps:{ref:r}={},inputProps:{"aria-label":s}={}}=e;return(0,R.jsx)(f.c,{variant:"outlined",size:"large",id:o,disabled:i,ref:r,"aria-label":s,sx:{color:"white",borderColor:"white",...a},onClick:()=>null===t||void 0===t?void 0:t((e=>!e)),children:n?(0,re.E9)(n,"yyyy"):"All Year"})},le=e=>{const[t,o]=(0,i.useState)(!1),{disableDate:n,...a}=e;return(0,R.jsx)(ie.c,{dateAdapter:ae.G,children:(0,R.jsx)(ne.I,{views:["year"],slots:{field:se},slotProps:{field:{setIsDatePickerOpen:o},popper:{placement:"bottom"},actionBar:{actions:["clear"]}},...a,open:t,onClose:()=>o(!1)})})};var ce=o(1560);const de={backgroundImage:'linear-gradient(rgba(0, 0, 0, 0.40), rgba(0, 0, 0, 0.40)), url("/img/News/Albums/Albums.jpg")'},pe=()=>{const e=(0,n.c)("(min-width:1200px)"),t=(0,ce.i6)(),{openModal:o}=(0,u.c)(),[g,x]=(0,i.useState)(null),[b,f]=(0,i.useState)([]),[v,w]=(0,i.useState)(!1),[y,j]=(0,i.useState)(!0);(0,i.useEffect)((()=>{t(g?"?year=".concat(g.getFullYear()):"")}),[g]);const I=async()=>{const e=await(async(e,t)=>{try{return await m.c.get("/api/albums/getAlbums".concat(0===e.length?"":"?lastVisible=".concat(e.at(-1).ID,"&timeStamp=").concat(e.at(-1).Timestamp)))}catch{throw new Error}})(b);e.data.length>0?f((t=>[...t,...e.data])):w(!0)};(0,i.useEffect)((()=>{b.length%12!==0&&w(!0)}),[b]),(0,i.useEffect)((()=>(window.onpopstate=()=>{j(!0),console.log("test restore"),f(JSON.parse(sessionStorage.getItem("albums")))},j(!1),()=>{window.onpopstate=()=>{}})),[]),(0,i.useEffect)((()=>{null===y||y||I()}),[y]),(0,i.useEffect)((()=>()=>{sessionStorage.setItem("albums",JSON.stringify(b))}));const S=(0,i.useRef)();return(0,i.useEffect)((()=>{S.current&&!v&&b.length>=12&&setTimeout((()=>{try{const e=S.current.clientHeight,t=window.innerHeight-500;console.log("test content",e),console.log("test screen",t),e>100&&e<t&&I()}catch(e){}}),500)}),[b]),(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)("div",{className:"title-wrapper",style:de,children:(0,R.jsxs)("div",{className:"title",children:[(0,R.jsx)(a.c,{variant:"h4",fontWeight:830,sx:{letterSpacing:"0.4em",pl:"0.4em",color:"white"},children:"\uad50\ud68c\uc0ac\uc9c4"}),(0,R.jsx)(le,{sx:{mt:2},value:g,minDate:new Date("2022/04/03"),maxDate:new Date,onChange:x})]})}),(0,R.jsx)("div",{className:"container-wrapper",children:(0,R.jsx)("div",{className:"container",children:b.length<=0?(0,R.jsx)(r.c,{alignItems:"center",children:(0,R.jsx)(s.c,{})}):(0,R.jsx)(p.c,{dataLength:b.length,next:I,hasMore:!v,loader:(0,R.jsx)(r.c,{alignItems:"center",children:(0,R.jsx)(s.c,{})}),scrollThreshold:1,style:{overflowY:"hidden"},children:(0,R.jsx)(l.c,{ref:S,cols:e?4:3,gap:2.5,children:(0,R.jsx)(oe,{posts:b,cols:e?4:3})})})})}),(0,R.jsx)(c.c,{variant:"primary",style:{position:"fixed",right:"2vw",bottom:"3vh"},onClick:()=>o(L,{}),children:(0,R.jsx)(d.c,{})}),v&&(0,R.jsx)(h.c,{})]})}},3243:()=>{}}]);
//# sourceMappingURL=849.1be5e806.chunk.js.map