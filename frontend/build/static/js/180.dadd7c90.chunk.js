"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[180],{2612:(e,t,i)=>{i.d(t,{c:()=>s});var n=i(624);const s=e=>(0,n.w1)((e=>e.authToken.admin))&&e.children},4180:(e,t,i)=>{i.r(t),i.d(t,{default:()=>B});var n=i(9060),s=i(1640),o=i(6880),r=i(8960),a=i(1088),l=i(1192),c=i(2904),d=i(8420),h=i(8372),g=i(6200),p=i(12),u=i(2496);const x=e=>{let{posts:t}=e;return t.map((e=>(0,u.jsx)(g.c,{component:p.cH,to:e.ID,children:(0,u.jsx)("img",{src:"https://imagedelivery.net/ICo2WI8PXO_BVRlWfwzOww/".concat(e.Cover,"/thumbnail"),alt:"thumbnail",loading:"lazy"})},e.ID)))},m=(0,n.memo)(x);var f=i(2456),v=i(7256),j=i(2160),b=i(771),w=i(1552),y=i.n(w),C=i(3556),k=i(5816),I=i(4192),S=i(5548),R=i(7132),O=i(4864),D=i(1595);const E=e=>{let{id:t,image:i,index:s,movePhoto:o,removeImage:r}=e;const a=(0,n.useRef)(null),[{isDragging:l},c]=(0,O.I)({type:"previewcard",item:()=>({id:t,index:s}),collect:e=>({isDragging:e.isDragging()})}),d=l?.7:1,[{handlerId:h},g]=(0,D.W)({accept:"previewcard",collect:e=>({handlerId:e.getHandlerId()}),hover(e,t){var i;if(!a.current)return;const n=e.index,r=s;if(n===r)return;const l=null===(i=a.current)||void 0===i?void 0:i.getBoundingClientRect(),c=(l.left-l.right)/2,d=t.getClientOffset().x-l.left;n<r&&d<c||n>r&&d<c||(o(n,r),e.index=r)}});return c(g(a)),(0,u.jsxs)("div",{ref:a,style:{position:"relative",display:"inline-flex",borderRadius:2,border:"1px solid #eaeaea",marginBottom:8,marginRight:8,width:"calc(90%/3)",aspectRatio:"1/1",boxSizing:"border-box",cursor:"move",opacity:d,overflow:"hidden"},children:[(0,u.jsx)("img",{src:i,alt:"preview",style:{display:"block",width:"auto",height:"100%"}}),(0,u.jsx)(S.c,{sx:{position:"absolute",display:"block",zIndex:99,top:0,right:0,backgroundColor:"orange"},onClick:()=>r(s),children:(0,u.jsx)(R.c,{sx:{color:"black"}})})]})};var N=i(7856);const P={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"90vw",height:"80vh",maxWidth:"1300px",bgcolor:"#ffffff",boxShadow:24,borderRadius:"0.5em",p:1,py:5,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},L=e=>{let{isOpen:t,onClose:i}=e;const{openSnackbar:s}=(0,N.c)(),r=()=>{x(),i()},[l,c]=(0,n.useState)([]),[d,g]=(0,n.useState)([]),p=e=>{URL.revokeObjectURL(d[e]),c((t=>y()(t,{$splice:[[e,1]]}))),g((t=>y()(t,{$splice:[[e,1]]})))},x=()=>{d.forEach((e=>URL.revokeObjectURL(e))),c([]),g([])},m=(0,n.useCallback)(((e,t)=>{c((i=>y()(i,{$splice:[[e,1],[t,0,i[e]]]}))),g((i=>y()(i,{$splice:[[e,1],[t,0,i[e]]]})))}),[]),{getRootProps:w,getInputProps:S}=(0,b.IX)({accept:{"image/*":[]},onDrop:e=>{var t;t=e,c((e=>[...e,...t])),t.forEach((e=>{g((t=>y()(t,{$push:[URL.createObjectURL(e)]})))}))},noDragEventsBubbling:!0}),R=(0,n.useCallback)(((e,t)=>(0,u.jsx)(E,{index:t,image:e,movePhoto:m,removeImage:p},t)),[]),[O,D]=(0,n.useState)(!1);return(0,u.jsx)(f.c,{open:t,onClose:r,children:(0,u.jsx)(v.c,{sx:P,bgcolor:"white",children:O?(0,u.jsx)(a.c,{}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(k.q,{backend:I.i6,children:(0,u.jsx)("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",alignContent:"flex-start",justifyContent:"space-between",margin:"10pt",width:"95%",height:"75%",overflowX:"auto"},children:d.map(((e,t)=>R(e,t)))})}),(0,u.jsxs)("div",{style:{width:"95%",height:"20%",border:"1pt dotted #f57c00",borderRadius:"1em",overflowY:"auto"},...w(),children:[(0,u.jsx)("input",{...S()}),(0,u.jsx)(v.c,{sx:{position:"relative",height:"100%",widht:"100%"},children:(0,u.jsxs)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},children:[(0,u.jsx)(C.c,{fontSize:"large",color:"primary"}),(0,u.jsx)(o.c,{children:"Click or Drag Files to here"})]})})]}),(0,u.jsxs)("div",{style:{display:"flex",marginTop:"2em"},children:[(0,u.jsx)(j.c,{variant:"outlined",disabled:l.length<=0,onClick:async()=>{const e=new FormData;l.forEach((t=>{e.append("images",t)}));try{D(!0);await h.c.post("/api/meditationON/uploadImage",e,{headers:{"Content-Type":"multipart/form-data"}});s("success","Uploaded Succesfully!"),r()}catch(t){console.log(t),s("error","Error Occured. Please contact to the administrator.")}finally{D(!1)}},children:"Submit"}),(0,u.jsx)(j.c,{variant:"outlined",onClick:x,disabled:l.length<=0,children:"Clear All"}),(0,u.jsx)(j.c,{variant:"outlined",onClick:r,children:"Close"})]})]})})})};var U=i(9672),T=(i(3243),i(2612)),W=i(1060),z=i(2532);const $={backgroundImage:'linear-gradient(rgba(0, 0, 0, 0.45), rgba(0, 0, 0, 0.45)), url("/img/Online/MeditationON.webp")'},B=()=>{const e=(0,s.c)("(min-width:1200px)"),{openModal:t}=(0,z.c)(),[i,g]=(0,n.useState)([]),[p,x]=(0,n.useState)(!1),[f,v]=(0,n.useState)(null),j=async()=>{console.log("test getPosts");const e=await h.c.get("/api/MeditationON/getPosts".concat(0===i.length?"":"?lastVisible=".concat(i.at(-1).ID,"&timeStamp=").concat(i.at(-1).Timestamp)));e.data.length>0?g((t=>[...t,...e.data])):x(!0)};(0,n.useEffect)((()=>{i.length%12!==0&&x(!0)}),[i]),(0,n.useEffect)((()=>(window.onpopstate=()=>{v(!0),console.log("test restore"),g(JSON.parse(sessionStorage.getItem("posts")))},v(!1),()=>{window.onpopstate=()=>{}})),[]),(0,n.useEffect)((()=>{null===f||f||j()}),[f]),(0,n.useEffect)((()=>()=>{sessionStorage.setItem("posts",JSON.stringify(i))}));const b=(0,n.useRef)();return(0,n.useEffect)((()=>{b.current&&!p&&i.length>=12&&setTimeout((()=>{try{const e=b.current.clientHeight,t=window.innerHeight-500;console.log("test content",e),console.log("test screen",t),e>100&&e<t&&j()}catch(e){}}),500)}),[i]),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"title-wrapper",style:$,children:(0,u.jsx)("div",{className:"title",children:(0,u.jsx)(o.c,{variant:"h4",fontWeight:830,sx:{letterSpacing:"0.4em",pl:"0.4em",color:"white"},children:"\ubb35\uc0c1 ON"})})}),(0,u.jsx)("div",{className:"container-wrapper",children:(0,u.jsx)("div",{className:"container",style:{padding:"0em 0.2em"},children:i.length<=0?(0,u.jsx)(r.c,{alignItems:"center",children:(0,u.jsx)(a.c,{})}):(0,u.jsx)(U.c,{dataLength:i.length,next:j,hasMore:!p,loader:(0,u.jsx)(r.c,{alignItems:"center",children:(0,u.jsx)(a.c,{})}),scrollThreshold:1,style:{overflowY:"hidden"},children:(0,u.jsx)(l.c,{ref:b,cols:e?4:3,gap:2.5,children:(0,u.jsx)(m,{posts:i})})})})}),(0,u.jsx)(T.c,{children:(0,u.jsx)(c.c,{variant:"primary",style:{position:"fixed",right:"2vw",bottom:"3vh"},onClick:()=>t(L,{}),children:(0,u.jsx)(d.c,{})})}),p&&(0,u.jsx)(W.c,{})]})}},3243:()=>{}}]);
//# sourceMappingURL=180.dadd7c90.chunk.js.map