(self.webpackChunkblog=self.webpackChunkblog||[]).push([[171],{7788:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var i=n(4420);const l=e=>(0,i.v9)((e=>e.authToken.admin))&&e.children},1346:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>F});var i=n(2791),l=n(5294),s=n(890),a=n(3400),o=n(3239),d=n(9877),r=n(3543),c=n(9658),u=n(2017),h=n(3385),p=n(9013),x=n(173),m=n(4518),g=n(1652),j=n(9555),f=n(7351),y=n(6386),v=n(8360),w=n(184);const Z=e=>{const{setIsDatePickerOpen:t,id:n,disabled:i,value:l,InputProps:{ref:s}={},inputProps:{"aria-label":a}={}}=e;return(0,w.jsx)(m.Z,{variant:"outlined",size:"large",id:n,disabled:i,ref:s,"aria-label":a,onClick:()=>null===t||void 0===t?void 0:t((e=>!e)),children:(0,y.Z)(l,"yyyy/MM/dd")})},b=e=>{const[t,n]=(0,i.useState)(!1);return(0,w.jsx)(g._,{dateAdapter:f.H,children:(0,w.jsx)(j.M,{slots:{field:Z},slotProps:{field:{setIsDatePickerOpen:n},popper:{placement:"bottom"}},...e,open:t,onClose:()=>n(!1),shouldDisableDate:e=>!(0,v.Z)(e),disableHighlightToday:!0})})};var k=n(7928),C=n(1789),D=n(9898),S=n(6695);n(7549);C.default.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(C.default.version,"/pdf.worker.min.js");const M=function(e){let{file:t,documentDimension:n}=e;const[l,s]=(0,i.useState)(null),[a,d]=(0,i.useState)(1),[r,c]=(0,i.useState)(1);function u(e){d((t=>t+e))}return(0,i.useEffect)((()=>{d(1)}),[t]),(0,w.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,w.jsxs)(k.Z,{id:"scaleButton",sx:{my:"1em"},children:[(0,w.jsx)(m.Z,{onClick:()=>{c((e=>e+.2))},variant:"outlined",children:"+"}),(0,w.jsx)(m.Z,{onClick:()=>{1!==r&&c((e=>e-.2))},variant:"outlined",disabled:r<=1,children:"-"})]}),(0,w.jsx)(D.Z,{file:t,onLoadSuccess:function(e){let{numPages:t}=e;s(t)},loading:(0,w.jsx)("div",{style:{height:n.height,width:n.width},children:(0,w.jsx)(o.Z,{})}),children:(0,w.jsx)(S.Z,{renderTextLayer:!1,className:"page",scale:r,height:n.height,width:n.width,pageNumber:a,loading:(0,w.jsx)("div",{style:{height:n.height,width:n.width},children:(0,w.jsx)(o.Z,{})})})}),(0,w.jsxs)("p",{style:{color:"black"},children:["Page ",a||(l?1:"--")," of ",l||"--"]}),(0,w.jsxs)(k.Z,{id:"pageButton",children:[(0,w.jsx)(m.Z,{variant:"outlined",disabled:a<=1,onClick:function(){u(-1)},children:"Previous"}),(0,w.jsx)(m.Z,{variant:"outlined",disabled:a>=l,onClick:function(){u(1)},children:"Next"})]})]})};var E=n(8447),P=n(697),W=n(7831),B=n(8141);const N={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"80vw",height:"90vh",maxWidth:"1300px",bgcolor:"#ffffff",boxShadow:24,borderRadius:"0.5em",p:1,py:3,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},U=e=>{const[t,n]=(0,i.useState)(),[l,a]=(0,i.useState)(null),o=(0,i.useRef)(null),[d,r]=(0,i.useState)(0);(0,i.useEffect)((()=>{o.current&&r(o.current.clientHeight)}),[l]),console.log(d);const c=()=>{a(null),e.setModalState(!1)};(0,i.useEffect)((()=>{(()=>{const e=new Date;e.setDate(e.getDate()+(-1-e.getDay()+7)%7+1),n(e)})()}),[]);const{getRootProps:u,getInputProps:h}=(0,W.uI)({accept:{"application/pdf":[]},onDrop:e=>{var t;t=e,console.log(t),a(t[0])},multiple:!1});return(0,w.jsx)(E.Z,{open:e.open,onClose:c,children:(0,w.jsxs)(P.Z,{sx:N,bgcolor:"white",children:[(0,w.jsx)("h2",{children:"Choose Date"}),(0,w.jsx)(b,{value:t,minDate:new Date("2022/04/03"),onChange:n}),(0,w.jsxs)("div",{ref:o,style:{height:"60%"},children:[(0,w.jsx)("p",{children:l?l.name:null}),(0,w.jsx)(D.Z,{file:l,children:(0,w.jsx)(S.Z,{renderTextLayer:!1,className:"page",height:d-80,pageNumber:1})})]}),(0,w.jsxs)("div",{style:{width:"95%",height:"15%",border:"1pt dotted #f57c00",borderRadius:"1em",overflowY:"auto",marginBottom:"1em"},...u(),children:[(0,w.jsx)("input",{...h()}),(0,w.jsx)(P.Z,{sx:{position:"relative",height:"100%",widht:"100%"},children:(0,w.jsxs)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},children:[(0,w.jsx)(B.Z,{fontSize:"large",color:"primary"}),(0,w.jsx)(s.Z,{children:"Click or Drag File to here"})]})})]}),(0,w.jsxs)("p",{children:[(0,w.jsx)(m.Z,{variant:"outlined",onClick:()=>e.onModalUpload(l,t),children:"Upload"}),(0,w.jsx)(m.Z,{variant:"outlined",onClick:c,children:"Close"})]})]})})};var H=n(7689),I=n(7788),q=n(3546),L=n(958),T=n(7277);n(6527);const z={backgroundImage:'linear-gradient(rgba(0, 0, 0, 0.30), rgba(0, 0, 0, 0.30)), url("/img/WeeklyUpdate.jpg")'},F=()=>{const e=(0,H.s0)();let t=(0,H.xW)();const{maxDate:n,queryDate:m}=(0,H.f_)(),g=new Date("2022/04/03"),[j,f]=(0,i.useState)(null),[v,Z]=(0,i.useState)(m),[k,C]=(0,i.useState)(!1),[D,S]=(0,i.useState)(!1),[E,P]=(0,i.useState)(!1),W=(e,t)=>{"clickaway"!==t&&S(!1)},B=(0,i.useCallback)((async()=>{P(!0);try{const e=await l.Z.get("/api/WeeklyUpdate/GetBulletin",{params:{date:(0,y.Z)(v,"yyyyMMdd")}}),t=new Uint8Array(Object.values(e.data)),n=new Blob([t.buffer],{type:"application/pdf"});f(n),P(!1)}catch(e){console.log(e)}}),[v]);(0,i.useEffect)((()=>{null!=v&&(B(),e("/weeklyupdate/"+(0,y.Z)(v,"yyyyMMdd")))}),[v,B,e]);const N=x.tq?document.documentElement.clientWidth:window.innerWidth,F=x.tq?document.documentElement.clientHeight:window.innerHeight,[O,R]=(0,i.useState)({width:F/N>=1.6?N-30:null,height:F/N<1.6?F:null}),A=()=>{const e=x.tq?document.documentElement.clientWidth:window.innerWidth,t=x.tq?document.documentElement.clientHeight:window.innerHeight;R({width:t/e>=1.6?e-30:null,height:t/e<1.6?t:null})};return(0,i.useEffect)((()=>(window.addEventListener("resize",A),()=>{window.removeEventListener("resize",A)})),[O]),(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("div",{className:"title-wrapper",style:z,children:(0,w.jsx)("div",{className:"title",children:(0,w.jsx)(s.Z,{variant:"h4",fontWeight:830,sx:{letterSpacing:"0.4em",pl:"0.4em",color:"white"},children:"\uc8fc\ubcf4"})})}),(0,w.jsx)("div",{className:"container-wrapper",children:(0,w.jsxs)("div",{className:"container",children:[(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(a.Z,{id:"previousBulletin",onClick:()=>{Z((e=>(0,q.Z)(e,{days:7})))},disabled:0===(0,T.Z)(v,g)||E,children:(0,w.jsx)(u.Z,{})}),(0,w.jsx)(b,{value:v,minDate:g,maxDate:n,onChange:Z}),(0,w.jsx)(a.Z,{id:"nextBulletin",onClick:()=>{Z((e=>(0,L.Z)(e,{days:7})))},disabled:0===(0,T.Z)(v,n)||E,children:(0,w.jsx)(h.Z,{})})]}),E?(0,w.jsx)("div",{style:{height:"100vh"},children:(0,w.jsx)(o.Z,{sx:{mt:2}})}):(0,w.jsx)(M,{file:j,documentDimension:O})]})}),(0,w.jsxs)(I.Z,{children:[(0,w.jsxs)(d.Z,{id:"uploadBulletinButton",variant:"extended",onClick:()=>C(!0),children:[(0,w.jsx)(p.Z,{sx:{mr:1}}),"Upload"]}),(0,w.jsx)(U,{open:k,onModalUpload:async(e,n)=>{try{const i=new FormData;i.append("images",e),i.append("date",(0,y.Z)(v,"yyyyMMdd"));const s=await l.Z.put("/api/WeeklyUpdate/PostBulletin/",i,{headers:{"Content-Type":"multipart/form-data"}});console.log(s.data),Z(n),t.revalidate(),C(!1),S(!0)}catch(i){console.log(i)}},setModalState:C}),(0,w.jsx)(r.Z,{open:D,autoHideDuration:8e3,onClose:W,children:(0,w.jsx)(c.Z,{severity:"success",onClose:W,children:"Uploaded Succesfully!"})})]})]})}},6527:()=>{},3414:()=>{},172:()=>{},2001:()=>{},3779:()=>{},6558:()=>{},2258:()=>{}}]);
//# sourceMappingURL=171.c8672de9.chunk.js.map