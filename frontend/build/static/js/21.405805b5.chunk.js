/*! For license information please see 21.405805b5.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[21],{1287:function(e,t,n){n.d(t,{x$:function(){return tl},ll:function(){return rl},Rr:function(){return ol}});var o=n(7762),r=n(4942),i=n(9439),a=n(3433),l=n(1413),u=n(3366);function c(e,t){if(null==e)return{};var n,o,r=(0,u.Z)(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=n(184),d=n(2791);function f(e){if("string"===typeof e||"number"===typeof e)return""+e;var t="";if(Array.isArray(e))for(var n,o=0;o<e.length;o++)""!==(n=f(e[o]))&&(t+=(t&&" ")+n);else for(var r in e)e[r]&&(t+=(t&&" ")+r);return t}var h=n(327).useSyncExternalStoreWithSelector;function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.getState,n=arguments.length>2?arguments[2]:void 0,o=h(e.subscribe,e.getState,e.getServerState||e.getState,t,n);return(0,d.useDebugValue)(o),o}var g=function(e){var t,n=new Set,o=function(e,o){var r="function"===typeof e?e(t):e;if(!Object.is(r,t)){var i=t;t=(null!=o?o:"object"!==typeof r)?r:Object.assign({},t,r),n.forEach((function(e){return e(t,i)}))}},r=function(){return t},i={setState:o,getState:r,subscribe:function(e){return n.add(e),function(){return n.delete(e)}},destroy:function(){console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}};return t=e(o,r,i),i},p=function(e){return e?g(e):g};function y(e,t){if(Object.is(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;var n,r=(0,o.Z)(e);try{for(r.s();!(n=r.n()).done;){var a=(0,i.Z)(n.value,2),l=a[0],u=a[1];if(!Object.is(u,t.get(l)))return!1}}catch(v){r.e(v)}finally{r.f()}return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;var c,s=(0,o.Z)(e);try{for(s.s();!(c=s.n()).done;){var d=c.value;if(!t.has(d))return!1}}catch(v){s.e(v)}finally{s.f()}return!0}var f=Object.keys(e);if(f.length!==Object.keys(t).length)return!1;for(var h=0;h<f.length;h++)if(!Object.prototype.hasOwnProperty.call(t,f[h])||!Object.is(e[f[h]],t[f[h]]))return!1;return!0}var m={value:function(){}};function b(){for(var e,t=0,n=arguments.length,o={};t<n;++t){if(!(e=arguments[t]+"")||e in o||/[\s.]/.test(e))throw new Error("illegal type: "+e);o[e]=[]}return new x(o)}function x(e){this._=e}function w(e,t){for(var n,o=0,r=e.length;o<r;++o)if((n=e[o]).name===t)return n.value}function S(e,t,n){for(var o=0,r=e.length;o<r;++o)if(e[o].name===t){e[o]=m,e=e.slice(0,o).concat(e.slice(o+1));break}return null!=n&&e.push({name:t,value:n}),e}x.prototype=b.prototype={constructor:x,on:function(e,t){var n,o,r=this._,i=(o=r,(e+"").trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");if(n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),e&&!o.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:t}}))),a=-1,l=i.length;if(!(arguments.length<2)){if(null!=t&&"function"!==typeof t)throw new Error("invalid callback: "+t);for(;++a<l;)if(n=(e=i[a]).type)r[n]=S(r[n],e.name,t);else if(null==t)for(n in r)r[n]=S(r[n],e.name,null);return this}for(;++a<l;)if((n=(e=i[a]).type)&&(n=w(r[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new x(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,o,r=new Array(n),i=0;i<n;++i)r[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=0,n=(o=this._[e]).length;i<n;++i)o[i].value.apply(t,r)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)}};var E=b;function _(){}function C(e){return null==e?_:function(){return this.querySelector(e)}}function N(){return[]}function M(e){return null==e?N:function(){return this.querySelectorAll(e)}}function k(e){return function(){return null==(t=e.apply(this,arguments))?[]:Array.isArray(t)?t:Array.from(t);var t}}function P(e){return function(){return this.matches(e)}}function O(e){return function(t){return t.matches(e)}}var A=Array.prototype.find;function Z(){return this.firstElementChild}var D=Array.prototype.filter;function I(){return Array.from(this.children)}function z(e){return new Array(e.length)}function L(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function T(e,t,n,o,r,i){for(var a,l=0,u=t.length,c=i.length;l<c;++l)(a=t[l])?(a.__data__=i[l],o[l]=a):n[l]=new L(e,i[l]);for(;l<u;++l)(a=t[l])&&(r[l]=a)}function B(e,t,n,o,r,i,a){var l,u,c,s=new Map,d=t.length,f=i.length,h=new Array(d);for(l=0;l<d;++l)(u=t[l])&&(h[l]=c=a.call(u,u.__data__,l,t)+"",s.has(c)?r[l]=u:s.set(c,u));for(l=0;l<f;++l)c=a.call(e,i[l],l,i)+"",(u=s.get(c))?(o[l]=u,u.__data__=i[l],s.delete(c)):n[l]=new L(e,i[l]);for(l=0;l<d;++l)(u=t[l])&&s.get(h[l])===u&&(r[l]=u)}function R(e){return e.__data__}function j(e){return"object"===typeof e&&"length"in e?e:Array.from(e)}function Y(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}L.prototype={constructor:L,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var X="http://www.w3.org/1999/xhtml",H={svg:"http://www.w3.org/2000/svg",xhtml:X,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function V(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),H.hasOwnProperty(t)?{space:H[t],local:e}:e}function K(e){return function(){this.removeAttribute(e)}}function U(e){return function(){this.removeAttributeNS(e.space,e.local)}}function F(e,t){return function(){this.setAttribute(e,t)}}function W(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function G(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function q(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function $(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Q(e){return function(){this.style.removeProperty(e)}}function J(e,t,n){return function(){this.style.setProperty(e,t,n)}}function ee(e,t,n){return function(){var o=t.apply(this,arguments);null==o?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function te(e,t){return e.style.getPropertyValue(t)||$(e).getComputedStyle(e,null).getPropertyValue(t)}function ne(e){return function(){delete this[e]}}function oe(e,t){return function(){this[e]=t}}function re(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function ie(e){return e.trim().split(/^|\s+/)}function ae(e){return e.classList||new le(e)}function le(e){this._node=e,this._names=ie(e.getAttribute("class")||"")}function ue(e,t){for(var n=ae(e),o=-1,r=t.length;++o<r;)n.add(t[o])}function ce(e,t){for(var n=ae(e),o=-1,r=t.length;++o<r;)n.remove(t[o])}function se(e){return function(){ue(this,e)}}function de(e){return function(){ce(this,e)}}function fe(e,t){return function(){(t.apply(this,arguments)?ue:ce)(this,e)}}function he(){this.textContent=""}function ve(e){return function(){this.textContent=e}}function ge(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function pe(){this.innerHTML=""}function ye(e){return function(){this.innerHTML=e}}function me(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function be(){this.nextSibling&&this.parentNode.appendChild(this)}function xe(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function we(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===X&&t.documentElement.namespaceURI===X?t.createElement(e):t.createElementNS(n,e)}}function Se(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Ee(e){var t=V(e);return(t.local?Se:we)(t)}function _e(){return null}function Ce(){var e=this.parentNode;e&&e.removeChild(this)}function Ne(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Me(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ke(e){return function(){var t=this.__on;if(t){for(var n,o=0,r=-1,i=t.length;o<i;++o)n=t[o],e.type&&n.type!==e.type||n.name!==e.name?t[++r]=n:this.removeEventListener(n.type,n.listener,n.options);++r?t.length=r:delete this.__on}}}function Pe(e,t,n){return function(){var o,r=this.__on,i=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(r)for(var a=0,l=r.length;a<l;++a)if((o=r[a]).type===e.type&&o.name===e.name)return this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=i,o.options=n),void(o.value=t);this.addEventListener(e.type,i,n),o={type:e.type,name:e.name,value:t,listener:i,options:n},r?r.push(o):this.__on=[o]}}function Oe(e,t,n){var o=$(e),r=o.CustomEvent;"function"===typeof r?r=new r(t,n):(r=o.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function Ae(e,t){return function(){return Oe(this,e,t)}}function Ze(e,t){return function(){return Oe(this,e,t.apply(this,arguments))}}le.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var De=n(4165),Ie=(0,De.Z)().mark(ze);function ze(){var e,t,n,o,r,i,a;return(0,De.Z)().wrap((function(l){for(;;)switch(l.prev=l.next){case 0:e=this._groups,t=0,n=e.length;case 1:if(!(t<n)){l.next=13;break}o=e[t],r=0,i=o.length;case 3:if(!(r<i)){l.next=10;break}if(!(a=o[r])){l.next=7;break}return l.next=7,a;case 7:++r,l.next=3;break;case 10:++t,l.next=1;break;case 13:case"end":return l.stop()}}),Ie,this)}var Le=[null];function Te(e,t){this._groups=e,this._parents=t}function Be(){return new Te([[document.documentElement]],Le)}Te.prototype=Be.prototype=(0,r.Z)({constructor:Te,select:function(e){"function"!==typeof e&&(e=C(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i,a,l=t[r],u=l.length,c=o[r]=new Array(u),s=0;s<u;++s)(i=l[s])&&(a=e.call(i,i.__data__,s,l))&&("__data__"in i&&(a.__data__=i.__data__),c[s]=a);return new Te(o,this._parents)},selectAll:function(e){e="function"===typeof e?k(e):M(e);for(var t=this._groups,n=t.length,o=[],r=[],i=0;i<n;++i)for(var a,l=t[i],u=l.length,c=0;c<u;++c)(a=l[c])&&(o.push(e.call(a,a.__data__,c,l)),r.push(a));return new Te(o,r)},selectChild:function(e){return this.select(null==e?Z:function(e){return function(){return A.call(this.children,e)}}("function"===typeof e?e:O(e)))},selectChildren:function(e){return this.selectAll(null==e?I:function(e){return function(){return D.call(this.children,e)}}("function"===typeof e?e:O(e)))},filter:function(e){"function"!==typeof e&&(e=P(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i,a=t[r],l=a.length,u=o[r]=[],c=0;c<l;++c)(i=a[c])&&e.call(i,i.__data__,c,a)&&u.push(i);return new Te(o,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,R);var n,o=t?B:T,r=this._parents,i=this._groups;"function"!==typeof e&&(n=e,e=function(){return n});for(var a=i.length,l=new Array(a),u=new Array(a),c=new Array(a),s=0;s<a;++s){var d=r[s],f=i[s],h=f.length,v=j(e.call(d,d&&d.__data__,s,r)),g=v.length,p=u[s]=new Array(g),y=l[s]=new Array(g);o(d,f,p,y,c[s]=new Array(h),v,t);for(var m,b,x=0,w=0;x<g;++x)if(m=p[x]){for(x>=w&&(w=x+1);!(b=y[w])&&++w<g;);m._next=b||null}}return(l=new Te(l,r))._enter=u,l._exit=c,l},enter:function(){return new Te(this._enter||this._groups.map(z),this._parents)},exit:function(){return new Te(this._exit||this._groups.map(z),this._parents)},join:function(e,t,n){var o=this.enter(),r=this,i=this.exit();return"function"===typeof e?(o=e(o))&&(o=o.selection()):o=o.append(e+""),null!=t&&(r=t(r))&&(r=r.selection()),null==n?i.remove():n(i),o&&r?o.merge(r).order():r},merge:function(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,r=n.length,i=o.length,a=Math.min(r,i),l=new Array(r),u=0;u<a;++u)for(var c,s=n[u],d=o[u],f=s.length,h=l[u]=new Array(f),v=0;v<f;++v)(c=s[v]||d[v])&&(h[v]=c);for(;u<r;++u)l[u]=n[u];return new Te(l,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o,r=e[t],i=r.length-1,a=r[i];--i>=0;)(o=r[i])&&(a&&4^o.compareDocumentPosition(a)&&a.parentNode.insertBefore(o,a),a=o);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=Y);for(var n=this._groups,o=n.length,r=new Array(o),i=0;i<o;++i){for(var a,l=n[i],u=l.length,c=r[i]=new Array(u),s=0;s<u;++s)(a=l[s])&&(c[s]=a);c.sort(t)}return new Te(r,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,i=o.length;r<i;++r){var a=o[r];if(a)return a}return null},size:function(){var e,t=0,n=(0,o.Z)(this);try{for(n.s();!(e=n.n()).done;){e.value;++t}}catch(r){n.e(r)}finally{n.f()}return t},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var r,i=t[n],a=0,l=i.length;a<l;++a)(r=i[a])&&e.call(r,r.__data__,a,i);return this},attr:function(e,t){var n=V(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((null==t?n.local?U:K:"function"===typeof t?n.local?q:G:n.local?W:F)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?Q:"function"===typeof t?ee:J)(e,t,null==n?"":n)):te(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?ne:"function"===typeof t?re:oe)(e,t)):this.node()[e]},classed:function(e,t){var n=ie(e+"");if(arguments.length<2){for(var o=ae(this.node()),r=-1,i=n.length;++r<i;)if(!o.contains(n[r]))return!1;return!0}return this.each(("function"===typeof t?fe:t?se:de)(n,t))},text:function(e){return arguments.length?this.each(null==e?he:("function"===typeof e?ge:ve)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?pe:("function"===typeof e?me:ye)(e)):this.node().innerHTML},raise:function(){return this.each(be)},lower:function(){return this.each(xe)},append:function(e){var t="function"===typeof e?e:Ee(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"===typeof e?e:Ee(e),o=null==t?_e:"function"===typeof t?t:C(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)}))},remove:function(){return this.each(Ce)},clone:function(e){return this.select(e?Me:Ne)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var o,r,i=function(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}(e+""),a=i.length;if(!(arguments.length<2)){for(l=t?Pe:ke,o=0;o<a;++o)this.each(l(i[o],t,n));return this}var l=this.node().__on;if(l)for(var u,c=0,s=l.length;c<s;++c)for(o=0,u=l[c];o<a;++o)if((r=i[o]).type===u.type&&r.name===u.name)return u.value},dispatch:function(e,t){return this.each(("function"===typeof t?Ze:Ae)(e,t))}},Symbol.iterator,ze);var Re=Be;function je(e){return"string"===typeof e?new Te([[document.querySelector(e)]],[document.documentElement]):new Te([[e]],Le)}function Ye(e,t){if(e=function(e){for(var t;t=e.sourceEvent;)e=t;return e}(e),void 0===t&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,[(o=o.matrixTransform(t.getScreenCTM().inverse())).x,o.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}var Xe={passive:!1},He={capture:!0,passive:!1};function Ve(e){e.stopImmediatePropagation()}function Ke(e){e.preventDefault(),e.stopImmediatePropagation()}function Ue(e){var t=e.document.documentElement,n=je(e).on("dragstart.drag",Ke,He);"onselectstart"in t?n.on("selectstart.drag",Ke,He):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Fe(e,t){var n=e.document.documentElement,o=je(e).on("dragstart.drag",null);t&&(o.on("click.drag",Ke,He),setTimeout((function(){o.on("click.drag",null)}),0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var We=function(e){return function(){return e}};function Ge(e,t){var n=t.sourceEvent,o=t.subject,r=t.target,i=t.identifier,a=t.active,l=t.x,u=t.y,c=t.dx,s=t.dy,d=t.dispatch;Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},subject:{value:o,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:l,enumerable:!0,configurable:!0},y:{value:u,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:s,enumerable:!0,configurable:!0},_:{value:d}})}function qe(e){return!e.ctrlKey&&!e.button}function $e(){return this.parentNode}function Qe(e,t){return null==t?{x:e.x,y:e.y}:t}function Je(){return navigator.maxTouchPoints||"ontouchstart"in this}Ge.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function et(e){return((e=Math.exp(e))+1/e)/2}var tt,nt,ot=function e(t,n,o){function r(e,r){var i,a,l=e[0],u=e[1],c=e[2],s=r[0],d=r[1],f=r[2],h=s-l,v=d-u,g=h*h+v*v;if(g<1e-12)a=Math.log(f/c)/t,i=function(e){return[l+e*h,u+e*v,c*Math.exp(t*e*a)]};else{var p=Math.sqrt(g),y=(f*f-c*c+o*g)/(2*c*n*p),m=(f*f-c*c-o*g)/(2*f*n*p),b=Math.log(Math.sqrt(y*y+1)-y),x=Math.log(Math.sqrt(m*m+1)-m);a=(x-b)/t,i=function(e){var o,r=e*a,i=et(b),s=c/(n*p)*(i*(o=t*r+b,((o=Math.exp(2*o))-1)/(o+1))-function(e){return((e=Math.exp(e))-1/e)/2}(b));return[l+s*h,u+s*v,c*i/et(t*r+b)]}}return i.duration=1e3*a*t/Math.SQRT2,i}return r.rho=function(t){var n=Math.max(.001,+t),o=n*n;return e(n,o,o*o)},r}(Math.SQRT2,2,4),rt=0,it=0,at=0,lt=1e3,ut=0,ct=0,st=0,dt="object"===typeof performance&&performance.now?performance:Date,ft="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function ht(){return ct||(ft(vt),ct=dt.now()+st)}function vt(){ct=0}function gt(){this._call=this._time=this._next=null}function pt(e,t,n){var o=new gt;return o.restart(e,t,n),o}function yt(){ct=(ut=dt.now())+st,rt=it=0;try{!function(){ht(),++rt;for(var e,t=tt;t;)(e=ct-t._time)>=0&&t._call.call(void 0,e),t=t._next;--rt}()}finally{rt=0,function(){var e,t,n=tt,o=1/0;for(;n;)n._call?(o>n._time&&(o=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:tt=t);nt=e,bt(o)}(),ct=0}}function mt(){var e=dt.now(),t=e-ut;t>lt&&(st-=t,ut=e)}function bt(e){rt||(it&&(it=clearTimeout(it)),e-ct>24?(e<1/0&&(it=setTimeout(yt,e-dt.now()-st)),at&&(at=clearInterval(at))):(at||(ut=dt.now(),at=setInterval(mt,lt)),rt=1,ft(yt)))}function xt(e,t,n){var o=new gt;return t=null==t?0:+t,o.restart((function(n){o.stop(),e(n+t)}),t,n),o}gt.prototype=pt.prototype={constructor:gt,restart:function(e,t,n){if("function"!==typeof e)throw new TypeError("callback is not a function");n=(null==n?ht():+n)+(null==t?0:+t),this._next||nt===this||(nt?nt._next=this:tt=this,nt=this),this._call=e,this._time=n,bt()},stop:function(){this._call&&(this._call=null,this._time=1/0,bt())}};var wt=E("start","end","cancel","interrupt"),St=[],Et=0,_t=1,Ct=2,Nt=3,Mt=4,kt=5,Pt=6;function Ot(e,t,n,o,r,i){var a=e.__transition;if(a){if(n in a)return}else e.__transition={};!function(e,t,n){var o,r=e.__transition;function i(e){n.state=_t,n.timer.restart(a,n.delay,n.time),n.delay<=e&&a(e-n.delay)}function a(i){var c,s,d,f;if(n.state!==_t)return u();for(c in r)if((f=r[c]).name===n.name){if(f.state===Nt)return xt(a);f.state===Mt?(f.state=Pt,f.timer.stop(),f.on.call("interrupt",e,e.__data__,f.index,f.group),delete r[c]):+c<t&&(f.state=Pt,f.timer.stop(),f.on.call("cancel",e,e.__data__,f.index,f.group),delete r[c])}if(xt((function(){n.state===Nt&&(n.state=Mt,n.timer.restart(l,n.delay,n.time),l(i))})),n.state=Ct,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Ct){for(n.state=Nt,o=new Array(d=n.tween.length),c=0,s=-1;c<d;++c)(f=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(o[++s]=f);o.length=s+1}}function l(t){for(var r=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(u),n.state=kt,1),i=-1,a=o.length;++i<a;)o[i].call(e,r);n.state===kt&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){for(var o in n.state=Pt,n.timer.stop(),delete r[t],r)return;delete e.__transition}r[t]=n,n.timer=pt(i,0,n.time)}(e,n,{name:t,index:o,group:r,on:wt,tween:St,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:Et})}function At(e,t){var n=Dt(e,t);if(n.state>Et)throw new Error("too late; already scheduled");return n}function Zt(e,t){var n=Dt(e,t);if(n.state>Nt)throw new Error("too late; already running");return n}function Dt(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function It(e,t){var n,o,r,i=e.__transition,a=!0;if(i){for(r in t=null==t?null:t+"",i)(n=i[r]).name===t?(o=n.state>Ct&&n.state<kt,n.state=Pt,n.timer.stop(),n.on.call(o?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete i[r]):a=!1;a&&delete e.__transition}}function zt(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Lt,Tt=180/Math.PI,Bt={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Rt(e,t,n,o,r,i){var a,l,u;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(u=e*n+t*o)&&(n-=e*u,o-=t*u),(l=Math.sqrt(n*n+o*o))&&(n/=l,o/=l,u/=l),e*o<t*n&&(e=-e,t=-t,u=-u,a=-a),{translateX:r,translateY:i,rotate:Math.atan2(t,e)*Tt,skewX:Math.atan(u)*Tt,scaleX:a,scaleY:l}}function jt(e,t,n,o){function r(e){return e.length?e.pop()+" ":""}return function(i,a){var l=[],u=[];return i=e(i),a=e(a),function(e,o,r,i,a,l){if(e!==r||o!==i){var u=a.push("translate(",null,t,null,n);l.push({i:u-4,x:zt(e,r)},{i:u-2,x:zt(o,i)})}else(r||i)&&a.push("translate("+r+t+i+n)}(i.translateX,i.translateY,a.translateX,a.translateY,l,u),function(e,t,n,i){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),i.push({i:n.push(r(n)+"rotate(",null,o)-2,x:zt(e,t)})):t&&n.push(r(n)+"rotate("+t+o)}(i.rotate,a.rotate,l,u),function(e,t,n,i){e!==t?i.push({i:n.push(r(n)+"skewX(",null,o)-2,x:zt(e,t)}):t&&n.push(r(n)+"skewX("+t+o)}(i.skewX,a.skewX,l,u),function(e,t,n,o,i,a){if(e!==n||t!==o){var l=i.push(r(i)+"scale(",null,",",null,")");a.push({i:l-4,x:zt(e,n)},{i:l-2,x:zt(t,o)})}else 1===n&&1===o||i.push(r(i)+"scale("+n+","+o+")")}(i.scaleX,i.scaleY,a.scaleX,a.scaleY,l,u),i=a=null,function(e){for(var t,n=-1,o=u.length;++n<o;)l[(t=u[n]).i]=t.x(e);return l.join("")}}}var Yt=jt((function(e){var t=new("function"===typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Bt:Rt(t.a,t.b,t.c,t.d,t.e,t.f)}),"px, ","px)","deg)"),Xt=jt((function(e){return null==e?Bt:(Lt||(Lt=document.createElementNS("http://www.w3.org/2000/svg","g")),Lt.setAttribute("transform",e),(e=Lt.transform.baseVal.consolidate())?Rt((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):Bt)}),", ",")",")");function Ht(e,t){var n,o;return function(){var r=Zt(this,e),i=r.tween;if(i!==n)for(var a=0,l=(o=n=i).length;a<l;++a)if(o[a].name===t){(o=o.slice()).splice(a,1);break}r.tween=o}}function Vt(e,t,n){var o,r;if("function"!==typeof n)throw new Error;return function(){var i=Zt(this,e),a=i.tween;if(a!==o){r=(o=a).slice();for(var l={name:t,value:n},u=0,c=r.length;u<c;++u)if(r[u].name===t){r[u]=l;break}u===c&&r.push(l)}i.tween=r}}function Kt(e,t,n){var o=e._id;return e.each((function(){var e=Zt(this,o);(e.value||(e.value={}))[t]=n.apply(this,arguments)})),function(e){return Dt(e,o).value[t]}}function Ut(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Ft(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function Wt(){}var Gt=.7,qt=1/Gt,$t="\\s*([+-]?\\d+)\\s*",Qt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Jt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",en=/^#([0-9a-f]{3,8})$/,tn=new RegExp("^rgb\\(".concat($t,",").concat($t,",").concat($t,"\\)$")),nn=new RegExp("^rgb\\(".concat(Jt,",").concat(Jt,",").concat(Jt,"\\)$")),on=new RegExp("^rgba\\(".concat($t,",").concat($t,",").concat($t,",").concat(Qt,"\\)$")),rn=new RegExp("^rgba\\(".concat(Jt,",").concat(Jt,",").concat(Jt,",").concat(Qt,"\\)$")),an=new RegExp("^hsl\\(".concat(Qt,",").concat(Jt,",").concat(Jt,"\\)$")),ln=new RegExp("^hsla\\(".concat(Qt,",").concat(Jt,",").concat(Jt,",").concat(Qt,"\\)$")),un={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function cn(){return this.rgb().formatHex()}function sn(){return this.rgb().formatRgb()}function dn(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=en.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?fn(t):3===n?new gn(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?hn(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?hn(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=tn.exec(e))?new gn(t[1],t[2],t[3],1):(t=nn.exec(e))?new gn(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=on.exec(e))?hn(t[1],t[2],t[3],t[4]):(t=rn.exec(e))?hn(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=an.exec(e))?wn(t[1],t[2]/100,t[3]/100,1):(t=ln.exec(e))?wn(t[1],t[2]/100,t[3]/100,t[4]):un.hasOwnProperty(e)?fn(un[e]):"transparent"===e?new gn(NaN,NaN,NaN,0):null}function fn(e){return new gn(e>>16&255,e>>8&255,255&e,1)}function hn(e,t,n,o){return o<=0&&(e=t=n=NaN),new gn(e,t,n,o)}function vn(e,t,n,o){return 1===arguments.length?((r=e)instanceof Wt||(r=dn(r)),r?new gn((r=r.rgb()).r,r.g,r.b,r.opacity):new gn):new gn(e,t,n,null==o?1:o);var r}function gn(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}function pn(){return"#".concat(xn(this.r)).concat(xn(this.g)).concat(xn(this.b))}function yn(){var e=mn(this.opacity);return"".concat(1===e?"rgb(":"rgba(").concat(bn(this.r),", ").concat(bn(this.g),", ").concat(bn(this.b)).concat(1===e?")":", ".concat(e,")"))}function mn(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function bn(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function xn(e){return((e=bn(e))<16?"0":"")+e.toString(16)}function wn(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new En(e,t,n,o)}function Sn(e){if(e instanceof En)return new En(e.h,e.s,e.l,e.opacity);if(e instanceof Wt||(e=dn(e)),!e)return new En;if(e instanceof En)return e;var t=(e=e.rgb()).r/255,n=e.g/255,o=e.b/255,r=Math.min(t,n,o),i=Math.max(t,n,o),a=NaN,l=i-r,u=(i+r)/2;return l?(a=t===i?(n-o)/l+6*(n<o):n===i?(o-t)/l+2:(t-n)/l+4,l/=u<.5?i+r:2-i-r,a*=60):l=u>0&&u<1?0:a,new En(a,l,u,e.opacity)}function En(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}function _n(e){return(e=(e||0)%360)<0?e+360:e}function Cn(e){return Math.max(0,Math.min(1,e||0))}function Nn(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function Mn(e,t,n,o,r){var i=e*e,a=i*e;return((1-3*e+3*i-a)*t+(4-6*i+3*a)*n+(1+3*e+3*i-3*a)*o+a*r)/6}Ut(Wt,dn,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:cn,formatHex:cn,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Sn(this).formatHsl()},formatRgb:sn,toString:sn}),Ut(gn,vn,Ft(Wt,{brighter:function(e){return e=null==e?qt:Math.pow(qt,e),new gn(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?Gt:Math.pow(Gt,e),new gn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},clamp:function(){return new gn(bn(this.r),bn(this.g),bn(this.b),mn(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:pn,formatHex:pn,formatHex8:function(){return"#".concat(xn(this.r)).concat(xn(this.g)).concat(xn(this.b)).concat(xn(255*(isNaN(this.opacity)?1:this.opacity)))},formatRgb:yn,toString:yn})),Ut(En,(function(e,t,n,o){return 1===arguments.length?Sn(e):new En(e,t,n,null==o?1:o)}),Ft(Wt,{brighter:function(e){return e=null==e?qt:Math.pow(qt,e),new En(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?Gt:Math.pow(Gt,e),new En(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,r=2*n-o;return new gn(Nn(e>=240?e-240:e+120,r,o),Nn(e,r,o),Nn(e<120?e+240:e-120,r,o),this.opacity)},clamp:function(){return new En(_n(this.h),Cn(this.s),Cn(this.l),mn(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=mn(this.opacity);return"".concat(1===e?"hsl(":"hsla(").concat(_n(this.h),", ").concat(100*Cn(this.s),"%, ").concat(100*Cn(this.l),"%").concat(1===e?")":", ".concat(e,")"))}}));var kn=function(e){return function(){return e}};function Pn(e,t){return function(n){return e+n*t}}function On(e){return 1===(e=+e)?An:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}(t,n,e):kn(isNaN(t)?n:t)}}function An(e,t){var n=t-e;return n?Pn(e,n):kn(isNaN(e)?t:e)}var Zn=function e(t){var n=On(t);function o(e,t){var o=n((e=vn(e)).r,(t=vn(t)).r),r=n(e.g,t.g),i=n(e.b,t.b),a=An(e.opacity,t.opacity);return function(t){return e.r=o(t),e.g=r(t),e.b=i(t),e.opacity=a(t),e+""}}return o.gamma=e,o}(1);function Dn(e){return function(t){var n,o,r=t.length,i=new Array(r),a=new Array(r),l=new Array(r);for(n=0;n<r;++n)o=vn(t[n]),i[n]=o.r||0,a[n]=o.g||0,l[n]=o.b||0;return i=e(i),a=e(a),l=e(l),o.opacity=1,function(e){return o.r=i(e),o.g=a(e),o.b=l(e),o+""}}}Dn((function(e){var t=e.length-1;return function(n){var o=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),r=e[o],i=e[o+1],a=o>0?e[o-1]:2*r-i,l=o<t-1?e[o+2]:2*i-r;return Mn((n-o/t)*t,a,r,i,l)}})),Dn((function(e){var t=e.length;return function(n){var o=Math.floor(((n%=1)<0?++n:n)*t),r=e[(o+t-1)%t],i=e[o%t],a=e[(o+1)%t],l=e[(o+2)%t];return Mn((n-o/t)*t,r,i,a,l)}}));var In=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,zn=new RegExp(In.source,"g");function Ln(e,t){var n,o,r,i=In.lastIndex=zn.lastIndex=0,a=-1,l=[],u=[];for(e+="",t+="";(n=In.exec(e))&&(o=zn.exec(t));)(r=o.index)>i&&(r=t.slice(i,r),l[a]?l[a]+=r:l[++a]=r),(n=n[0])===(o=o[0])?l[a]?l[a]+=o:l[++a]=o:(l[++a]=null,u.push({i:a,x:zt(n,o)})),i=zn.lastIndex;return i<t.length&&(r=t.slice(i),l[a]?l[a]+=r:l[++a]=r),l.length<2?u[0]?function(e){return function(t){return e(t)+""}}(u[0].x):function(e){return function(){return e}}(t):(t=u.length,function(e){for(var n,o=0;o<t;++o)l[(n=u[o]).i]=n.x(e);return l.join("")})}function Tn(e,t){var n;return("number"===typeof t?zt:t instanceof dn?Zn:(n=dn(t))?(t=n,Zn):Ln)(e,t)}function Bn(e){return function(){this.removeAttribute(e)}}function Rn(e){return function(){this.removeAttributeNS(e.space,e.local)}}function jn(e,t,n){var o,r,i=n+"";return function(){var a=this.getAttribute(e);return a===i?null:a===o?r:r=t(o=a,n)}}function Yn(e,t,n){var o,r,i=n+"";return function(){var a=this.getAttributeNS(e.space,e.local);return a===i?null:a===o?r:r=t(o=a,n)}}function Xn(e,t,n){var o,r,i;return function(){var a,l,u=n(this);if(null!=u)return(a=this.getAttribute(e))===(l=u+"")?null:a===o&&l===r?i:(r=l,i=t(o=a,u));this.removeAttribute(e)}}function Hn(e,t,n){var o,r,i;return function(){var a,l,u=n(this);if(null!=u)return(a=this.getAttributeNS(e.space,e.local))===(l=u+"")?null:a===o&&l===r?i:(r=l,i=t(o=a,u));this.removeAttributeNS(e.space,e.local)}}function Vn(e,t){var n,o;function r(){var r=t.apply(this,arguments);return r!==o&&(n=(o=r)&&function(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}(e,r)),n}return r._value=t,r}function Kn(e,t){var n,o;function r(){var r=t.apply(this,arguments);return r!==o&&(n=(o=r)&&function(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}(e,r)),n}return r._value=t,r}function Un(e,t){return function(){At(this,e).delay=+t.apply(this,arguments)}}function Fn(e,t){return t=+t,function(){At(this,e).delay=t}}function Wn(e,t){return function(){Zt(this,e).duration=+t.apply(this,arguments)}}function Gn(e,t){return t=+t,function(){Zt(this,e).duration=t}}var qn=Re.prototype.constructor;function $n(e){return function(){this.style.removeProperty(e)}}var Qn=0;function Jn(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function eo(){return++Qn}var to=Re.prototype;Jn.prototype=function(e){return Re().transition(e)}.prototype=(0,r.Z)({constructor:Jn,select:function(e){var t=this._name,n=this._id;"function"!==typeof e&&(e=C(e));for(var o=this._groups,r=o.length,i=new Array(r),a=0;a<r;++a)for(var l,u,c=o[a],s=c.length,d=i[a]=new Array(s),f=0;f<s;++f)(l=c[f])&&(u=e.call(l,l.__data__,f,c))&&("__data__"in l&&(u.__data__=l.__data__),d[f]=u,Ot(d[f],t,n,f,d,Dt(l,n)));return new Jn(i,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!==typeof e&&(e=M(e));for(var o=this._groups,r=o.length,i=[],a=[],l=0;l<r;++l)for(var u,c=o[l],s=c.length,d=0;d<s;++d)if(u=c[d]){for(var f,h=e.call(u,u.__data__,d,c),v=Dt(u,n),g=0,p=h.length;g<p;++g)(f=h[g])&&Ot(f,t,n,g,h,v);i.push(h),a.push(u)}return new Jn(i,a,t,n)},selectChild:to.selectChild,selectChildren:to.selectChildren,filter:function(e){"function"!==typeof e&&(e=P(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i,a=t[r],l=a.length,u=o[r]=[],c=0;c<l;++c)(i=a[c])&&e.call(i,i.__data__,c,a)&&u.push(i);return new Jn(o,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,r=n.length,i=Math.min(o,r),a=new Array(o),l=0;l<i;++l)for(var u,c=t[l],s=n[l],d=c.length,f=a[l]=new Array(d),h=0;h<d;++h)(u=c[h]||s[h])&&(f[h]=u);for(;l<o;++l)a[l]=t[l];return new Jn(a,this._parents,this._name,this._id)},selection:function(){return new qn(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=eo(),o=this._groups,r=o.length,i=0;i<r;++i)for(var a,l=o[i],u=l.length,c=0;c<u;++c)if(a=l[c]){var s=Dt(a,t);Ot(a,e,n,c,l,{time:s.time+s.delay+s.duration,delay:0,duration:s.duration,ease:s.ease})}return new Jn(o,this._parents,e,n)},call:to.call,nodes:to.nodes,node:to.node,size:to.size,empty:to.empty,each:to.each,on:function(e,t){var n=this._id;return arguments.length<2?Dt(this.node(),n).on.on(e):this.each(function(e,t,n){var o,r,i=function(e){return(e+"").trim().split(/^|\s+/).every((function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e}))}(t)?At:Zt;return function(){var a=i(this,e),l=a.on;l!==o&&(r=(o=l).copy()).on(t,n),a.on=r}}(n,e,t))},attr:function(e,t){var n=V(e),o="transform"===n?Xt:Tn;return this.attrTween(e,"function"===typeof t?(n.local?Hn:Xn)(n,o,Kt(this,"attr."+e,t)):null==t?(n.local?Rn:Bn)(n):(n.local?Yn:jn)(n,o,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!==typeof t)throw new Error;var o=V(e);return this.tween(n,(o.local?Vn:Kn)(o,t))},style:function(e,t,n){var o="transform"===(e+="")?Yt:Tn;return null==t?this.styleTween(e,function(e,t){var n,o,r;return function(){var i=te(this,e),a=(this.style.removeProperty(e),te(this,e));return i===a?null:i===n&&a===o?r:r=t(n=i,o=a)}}(e,o)).on("end.style."+e,$n(e)):"function"===typeof t?this.styleTween(e,function(e,t,n){var o,r,i;return function(){var a=te(this,e),l=n(this),u=l+"";return null==l&&(this.style.removeProperty(e),u=l=te(this,e)),a===u?null:a===o&&u===r?i:(r=u,i=t(o=a,l))}}(e,o,Kt(this,"style."+e,t))).each(function(e,t){var n,o,r,i,a="style."+t,l="end."+a;return function(){var u=Zt(this,e),c=u.on,s=null==u.value[a]?i||(i=$n(t)):void 0;c===n&&r===s||(o=(n=c).copy()).on(l,r=s),u.on=o}}(this._id,e)):this.styleTween(e,function(e,t,n){var o,r,i=n+"";return function(){var a=te(this,e);return a===i?null:a===o?r:r=t(o=a,n)}}(e,o,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(null==t)return this.tween(o,null);if("function"!==typeof t)throw new Error;return this.tween(o,function(e,t,n){var o,r;function i(){var i=t.apply(this,arguments);return i!==r&&(o=(r=i)&&function(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}(e,i,n)),o}return i._value=t,i}(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"===typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(Kt(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!==typeof e)throw new Error;return this.tween(t,function(e){var t,n;function o(){var o=e.apply(this,arguments);return o!==n&&(t=(n=o)&&function(e){return function(t){this.textContent=e.call(this,t)}}(o)),t}return o._value=e,o}(e))},remove:function(){return this.on("end.remove",function(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}(this._id))},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o,r=Dt(this.node(),n).tween,i=0,a=r.length;i<a;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((null==t?Ht:Vt)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"===typeof e?Un:Fn)(t,e)):Dt(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"===typeof e?Wn:Gn)(t,e)):Dt(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!==typeof t)throw new Error;return function(){Zt(this,e).ease=t}}(t,e)):Dt(this.node(),t).ease},easeVarying:function(e){if("function"!==typeof e)throw new Error;return this.each(function(e,t){return function(){var n=t.apply(this,arguments);if("function"!==typeof n)throw new Error;Zt(this,e).ease=n}}(this._id,e))},end:function(){var e,t,n=this,o=n._id,r=n.size();return new Promise((function(i,a){var l={value:a},u={value:function(){0===--r&&i()}};n.each((function(){var n=Zt(this,o),r=n.on;r!==e&&((t=(e=r).copy())._.cancel.push(l),t._.interrupt.push(l),t._.end.push(u)),n.on=t})),0===r&&i()}))}},Symbol.iterator,to[Symbol.iterator]);var no={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function oo(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error("transition ".concat(t," not found"));return n}Re.prototype.interrupt=function(e){return this.each((function(){It(this,e)}))},Re.prototype.transition=function(e){var t,n;e instanceof Jn?(t=e._id,e=e._name):(t=eo(),(n=no).time=ht(),e=null==e?null:e+"");for(var o=this._groups,r=o.length,i=0;i<r;++i)for(var a,l=o[i],u=l.length,c=0;c<u;++c)(a=l[c])&&Ot(a,e,t,c,l,n||oo(a,t));return new Jn(o,this._parents,e,t)};var ro=function(e){return function(){return e}};function io(e,t){var n=t.sourceEvent,o=t.target,r=t.transform,i=t.dispatch;Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function ao(e,t,n){this.k=e,this.x=t,this.y=n}ao.prototype={constructor:ao,scale:function(e){return 1===e?this:new ao(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new ao(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var lo=new ao(1,0,0);function uo(e){e.stopImmediatePropagation()}function co(e){e.preventDefault(),e.stopImmediatePropagation()}function so(e){return(!e.ctrlKey||"wheel"===e.type)&&!e.button}function fo(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function ho(){return this.__zoom||lo}function vo(e){return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function go(){return navigator.maxTouchPoints||"ontouchstart"in this}function po(e,t,n){var o=e.invertX(t[0][0])-n[0][0],r=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],a=e.invertY(t[1][1])-n[1][1];return e.translate(r>o?(o+r)/2:Math.min(0,o)||Math.max(0,r),a>i?(i+a)/2:Math.min(0,i)||Math.max(0,a))}ao.prototype;n(4164);var yo,mo,bo,xo=["position","children","className","style"],wo=["x","y","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","children","className"],So=["type","position","isValidConnection","isConnectable","isConnectableStart","isConnectableEnd","id","onConnect","children","className","onMouseDown","onTouchStart"],Eo=["nodes","edges","defaultNodes","defaultEdges","className","nodeTypes","edgeTypes","onNodeClick","onEdgeClick","onInit","onMove","onMoveStart","onMoveEnd","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","onNodeMouseEnter","onNodeMouseMove","onNodeMouseLeave","onNodeContextMenu","onNodeDoubleClick","onNodeDragStart","onNodeDrag","onNodeDragStop","onNodesDelete","onEdgesDelete","onSelectionChange","onSelectionDragStart","onSelectionDrag","onSelectionDragStop","onSelectionContextMenu","onSelectionStart","onSelectionEnd","connectionMode","connectionLineType","connectionLineStyle","connectionLineComponent","connectionLineContainerStyle","deleteKeyCode","selectionKeyCode","selectionOnDrag","selectionMode","panActivationKeyCode","multiSelectionKeyCode","zoomActivationKeyCode","snapToGrid","snapGrid","onlyRenderVisibleElements","selectNodesOnDrag","nodesDraggable","nodesConnectable","nodesFocusable","nodeOrigin","edgesFocusable","edgesUpdatable","elementsSelectable","defaultViewport","minZoom","maxZoom","translateExtent","preventScrolling","nodeExtent","defaultMarkerColor","zoomOnScroll","zoomOnPinch","panOnScroll","panOnScrollSpeed","panOnScrollMode","zoomOnDoubleClick","panOnDrag","onPaneClick","onPaneMouseEnter","onPaneMouseMove","onPaneMouseLeave","onPaneScroll","onPaneContextMenu","children","onEdgeUpdate","onEdgeContextMenu","onEdgeDoubleClick","onEdgeMouseEnter","onEdgeMouseMove","onEdgeMouseLeave","onEdgeUpdateStart","onEdgeUpdateEnd","edgeUpdaterRadius","onNodesChange","onEdgesChange","noDragClassName","noWheelClassName","noPanClassName","fitView","fitViewOptions","connectOnClick","attributionPosition","proOptions","defaultEdgeOptions","elevateNodesOnSelect","elevateEdgesOnSelect","disableKeyboardA11y","autoPanOnConnect","autoPanOnNodeDrag","connectionRadius","isValidConnection","onError","style","id"],_o=(0,d.createContext)(null),Co=_o.Provider,No={error001:function(){return"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001"},error002:function(){return"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them."},error003:function(e){return'Node type "'.concat(e,'" not found. Using fallback type "default".')},error004:function(){return"The React Flow parent container needs a width and a height to render the graph."},error005:function(){return"Only child nodes can use a parent extent."},error006:function(){return"Can't create edge. An edge needs a source and a target."},error007:function(e){return"The old edge with id=".concat(e," does not exist.")},error009:function(e){return'Marker type "'.concat(e,"\" doesn't exist.")},error008:function(e,t){return"Couldn't create edge for ".concat(e?"target":"source",' handle id: "').concat(e?t.targetHandle:t.sourceHandle,'", edge id: ').concat(t.id,".")},error010:function(){return"Handle: No node id found. Make sure to only use a Handle inside a custom Node."},error011:function(e){return'Edge type "'.concat(e,'" not found. Using fallback type "default".')}},Mo=No.error001();function ko(e,t){var n=(0,d.useContext)(_o);if(null===n)throw new Error(Mo);return v(n,e,t)}var Po=function(){var e=(0,d.useContext)(_o);if(null===e)throw new Error(Mo);return(0,d.useMemo)((function(){return{getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}}),[e])},Oo=function(e){return e.userSelectionActive?"none":"all"};function Ao(e){var t=e.position,n=e.children,o=e.className,r=e.style,i=c(e,xo),u=ko(Oo),d="".concat(t).split("-");return(0,s.jsx)("div",(0,l.Z)((0,l.Z)({className:f(["react-flow__panel",o].concat((0,a.Z)(d))),style:(0,l.Z)((0,l.Z)({},r),{},{pointerEvents:u})},i),{},{children:n}))}function Zo(e){var t=e.proOptions,n=e.position,o=void 0===n?"bottom-right":n;return null!==t&&void 0!==t&&t.hideAttribution?null:(0,s.jsx)(Ao,{position:o,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:(0,s.jsx)("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}var Do=(0,d.memo)((function(e){var t=e.x,n=e.y,o=e.label,r=e.labelStyle,a=void 0===r?{}:r,u=e.labelShowBg,h=void 0===u||u,v=e.labelBgStyle,g=void 0===v?{}:v,p=e.labelBgPadding,y=void 0===p?[2,4]:p,m=e.labelBgBorderRadius,b=void 0===m?2:m,x=e.children,w=e.className,S=c(e,wo),E=(0,d.useRef)(null),_=(0,d.useState)({x:0,y:0,width:0,height:0}),C=(0,i.Z)(_,2),N=C[0],M=C[1],k=f(["react-flow__edge-textwrapper",w]);return(0,d.useEffect)((function(){if(E.current){var e=E.current.getBBox();M({x:e.x,y:e.y,width:e.width,height:e.height})}}),[o]),"undefined"!==typeof o&&o?(0,s.jsxs)("g",(0,l.Z)((0,l.Z)({transform:"translate(".concat(t-N.width/2," ").concat(n-N.height/2,")"),className:k,visibility:N.width?"visible":"hidden"},S),{},{children:[h&&(0,s.jsx)("rect",{width:N.width+2*y[0],x:-y[0],y:-y[1],height:N.height+2*y[1],className:"react-flow__edge-textbg",style:g,rx:b,ry:b}),(0,s.jsx)("text",{className:"react-flow__edge-text",y:N.height/2,dy:"0.3em",ref:E,style:a,children:o}),x]})):null})),Io=function(e){return{width:e.offsetWidth,height:e.offsetHeight}},zo=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(e,t),n)},Lo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0},t=arguments.length>1?arguments[1]:void 0;return{x:zo(e.x,t[0][0],t[1][0]),y:zo(e.y,t[0][1],t[1][1])}},To=function(e,t,n){return e<t?zo(Math.abs(e-t),1,50)/50:e>n?-zo(Math.abs(e-n),1,50)/50:0},Bo=function(e,t){return[20*To(e.x,35,t.width-35),20*To(e.y,35,t.height-35)]},Ro=function(e){var t,n;return(null===(t=e.getRootNode)||void 0===t?void 0:t.call(e))||(null===(n=window)||void 0===n?void 0:n.document)},jo=function(e,t){return{x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}},Yo=function(e){var t=e.x,n=e.y;return{x:t,y:n,x2:t+e.width,y2:n+e.height}},Xo=function(e){var t=e.x,n=e.y;return{x:t,y:n,width:e.x2-t,height:e.y2-n}},Ho=function(e){return(0,l.Z)((0,l.Z)({},e.positionAbsolute||{x:0,y:0}),{},{width:e.width||0,height:e.height||0})},Vo=function(e,t){var n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),o=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*o)},Ko=function(e){return Uo(e.width)&&Uo(e.height)&&Uo(e.x)&&Uo(e.y)},Uo=function(e){return!isNaN(e)&&isFinite(e)},Fo=Symbol.for("internals"),Wo=["Enter"," ","Escape"],Go=function(e,t){0};function qo(e){var t,n,o=function(e){return"nativeEvent"in e}(e)?e.nativeEvent:e,r=(null===(t=o.composedPath)||void 0===t||null===(n=t.call(o))||void 0===n?void 0:n[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(null===r||void 0===r?void 0:r.nodeName)||(null===r||void 0===r?void 0:r.hasAttribute("contenteditable"))||!(null===r||void 0===r||!r.closest(".nokey"))}var $o=function(e){return"clientX"in e},Qo=function(e,t){var n,o,r,i,a=$o(e),l=a?e.clientX:null===(n=e.touches)||void 0===n?void 0:n[0].clientX,u=a?e.clientY:null===(o=e.touches)||void 0===o?void 0:o[0].clientY;return{x:l-(null!==(r=null===t||void 0===t?void 0:t.left)&&void 0!==r?r:0),y:u-(null!==(i=null===t||void 0===t?void 0:t.top)&&void 0!==i?i:0)}},Jo=function(e){var t=e.id,n=e.path,o=e.labelX,r=e.labelY,i=e.label,a=e.labelStyle,l=e.labelShowBg,u=e.labelBgStyle,c=e.labelBgPadding,d=e.labelBgBorderRadius,f=e.style,h=e.markerEnd,v=e.markerStart,g=e.interactionWidth,p=void 0===g?20:g;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("path",{id:t,style:f,d:n,fill:"none",className:"react-flow__edge-path",markerEnd:h,markerStart:v}),p&&(0,s.jsx)("path",{d:n,fill:"none",strokeOpacity:0,strokeWidth:p,className:"react-flow__edge-interaction"}),i&&Uo(o)&&Uo(r)?(0,s.jsx)(Do,{x:o,y:r,label:i,labelStyle:a,labelShowBg:l,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:d}):null]})};Jo.displayName="BaseEdge";var er,tr,nr,or,rr,ir;function ar(e,t,n){return void 0===n?n:function(o){var r=t().edges.find((function(t){return t.id===e}));r&&n(o,(0,l.Z)({},r))}}function lr(e){var t=e.sourceX,n=e.sourceY,o=e.targetX,r=e.targetY,i=Math.abs(o-t)/2,a=o<t?o+i:o-i,l=Math.abs(r-n)/2;return[a,r<n?r+l:r-l,i,l]}function ur(e){var t=e.sourceX,n=e.sourceY,o=e.targetX,r=e.targetY,i=e.sourceControlX,a=e.sourceControlY,l=.125*t+.375*i+.375*e.targetControlX+.125*o,u=.125*n+.375*a+.375*e.targetControlY+.125*r;return[l,u,Math.abs(l-t),Math.abs(u-n)]}function cr(e){var t=e.pos,n=e.x1,o=e.y1,r=e.x2,i=e.y2;return t===ir.Left||t===ir.Right?[.5*(n+r),o]:[n,.5*(o+i)]}function sr(e){var t=e.sourceX,n=e.sourceY,o=e.sourcePosition,r=void 0===o?ir.Bottom:o,a=e.targetX,l=e.targetY,u=e.targetPosition,c=void 0===u?ir.Top:u,s=cr({pos:r,x1:t,y1:n,x2:a,y2:l}),d=(0,i.Z)(s,2),f=d[0],h=d[1],v=cr({pos:c,x1:a,y1:l,x2:t,y2:n}),g=(0,i.Z)(v,2),p=g[0],y=g[1],m=ur({sourceX:t,sourceY:n,targetX:a,targetY:l,sourceControlX:f,sourceControlY:h,targetControlX:p,targetControlY:y}),b=(0,i.Z)(m,4),x=b[0],w=b[1],S=b[2],E=b[3];return["M".concat(t,",").concat(n," C").concat(f,",").concat(h," ").concat(p,",").concat(y," ").concat(a,",").concat(l),x,w,S,E]}!function(e){e.Strict="strict",e.Loose="loose"}(er||(er={})),function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"}(tr||(tr={})),function(e){e.Partial="partial",e.Full="full"}(nr||(nr={})),function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"}(or||(or={})),function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"}(rr||(rr={})),function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"}(ir||(ir={}));var dr=(0,d.memo)((function(e){var t=e.sourceX,n=e.sourceY,o=e.targetX,r=e.targetY,a=e.sourcePosition,l=void 0===a?ir.Bottom:a,u=e.targetPosition,c=void 0===u?ir.Top:u,d=e.label,f=e.labelStyle,h=e.labelShowBg,v=e.labelBgStyle,g=e.labelBgPadding,p=e.labelBgBorderRadius,y=e.style,m=e.markerEnd,b=e.markerStart,x=e.interactionWidth,w=sr({sourceX:t,sourceY:n,sourcePosition:l,targetX:o,targetY:r,targetPosition:c}),S=(0,i.Z)(w,3),E=S[0],_=S[1],C=S[2];return(0,s.jsx)(Jo,{path:E,labelX:_,labelY:C,label:d,labelStyle:f,labelShowBg:h,labelBgStyle:v,labelBgPadding:g,labelBgBorderRadius:p,style:y,markerEnd:m,markerStart:b,interactionWidth:x})}));dr.displayName="SimpleBezierEdge";var fr=(yo={},(0,r.Z)(yo,ir.Left,{x:-1,y:0}),(0,r.Z)(yo,ir.Right,{x:1,y:0}),(0,r.Z)(yo,ir.Top,{x:0,y:-1}),(0,r.Z)(yo,ir.Bottom,{x:0,y:1}),yo),hr=function(e){var t=e.source,n=e.sourcePosition,o=void 0===n?ir.Bottom:n,r=e.target;return o===ir.Left||o===ir.Right?t.x<r.x?{x:1,y:0}:{x:-1,y:0}:t.y<r.y?{x:0,y:1}:{x:0,y:-1}},vr=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))};function gr(e){var t=e.sourceX,n=e.sourceY,o=e.sourcePosition,r=void 0===o?ir.Bottom:o,l=e.targetX,u=e.targetY,c=e.targetPosition,s=void 0===c?ir.Top:c,d=e.borderRadius,f=void 0===d?5:d,h=e.centerX,v=e.centerY,g=e.offset,p=function(e){var t,n,o=e.source,r=e.sourcePosition,l=void 0===r?ir.Bottom:r,u=e.target,c=e.targetPosition,s=void 0===c?ir.Top:c,d=e.center,f=e.offset,h=fr[l],v=fr[s],g={x:o.x+h.x*f,y:o.y+h.y*f},p={x:u.x+v.x*f,y:u.y+v.y*f},y=hr({source:g,sourcePosition:l,target:p}),m=0!==y.x?"x":"y",b=y[m],x=[],w=lr({sourceX:o.x,sourceY:o.y,targetX:u.x,targetY:u.y}),S=(0,i.Z)(w,4),E=S[0],_=S[1],C=S[2],N=S[3];if(h[m]*v[m]===-1){t=d.x||E,n=d.y||_;var M=[{x:t,y:g.y},{x:t,y:p.y}],k=[{x:g.x,y:n},{x:p.x,y:n}];x=h[m]===b?"x"===m?M:k:"x"===m?k:M}else{var P=[{x:g.x,y:p.y}],O=[{x:p.x,y:g.y}];if(x="x"===m?h.x===b?O:P:h.y===b?P:O,l!==s){var A="x"===m?"y":"x",Z=h[m]===v[A],D=g[A]>p[A],I=g[A]<p[A];(1===h[m]&&(!Z&&D||Z&&I)||1!==h[m]&&(!Z&&I||Z&&D))&&(x="x"===m?P:O)}t=x[0].x,n=x[0].y}return[[o,g].concat((0,a.Z)(x),[p,u]),t,n,C,N]}({source:{x:t,y:n},sourcePosition:r,target:{x:l,y:u},targetPosition:s,center:{x:h,y:v},offset:void 0===g?20:g}),y=(0,i.Z)(p,5),m=y[0],b=y[1],x=y[2],w=y[3],S=y[4],E=m.reduce((function(e,t,n){var o="";return o=n>0&&n<m.length-1?function(e,t,n,o){var r=Math.min(vr(e,t)/2,vr(t,n)/2,o),i=t.x,a=t.y;if(e.x===i&&i===n.x||e.y===a&&a===n.y)return"L".concat(i," ").concat(a);if(e.y===a){var l=e.x<n.x?-1:1,u=e.y<n.y?1:-1;return"L ".concat(i+r*l,",").concat(a,"Q ").concat(i,",").concat(a," ").concat(i,",").concat(a+r*u)}var c=e.x<n.x?1:-1,s=e.y<n.y?-1:1;return"L ".concat(i,",").concat(a+r*s,"Q ").concat(i,",").concat(a," ").concat(i+r*c,",").concat(a)}(m[n-1],t,m[n+1],f):"".concat(0===n?"M":"L").concat(t.x," ").concat(t.y),e+=o}),"");return[E,b,x,w,S]}var pr=(0,d.memo)((function(e){var t=e.sourceX,n=e.sourceY,o=e.targetX,r=e.targetY,a=e.label,l=e.labelStyle,u=e.labelShowBg,c=e.labelBgStyle,d=e.labelBgPadding,f=e.labelBgBorderRadius,h=e.style,v=e.sourcePosition,g=void 0===v?ir.Bottom:v,p=e.targetPosition,y=void 0===p?ir.Top:p,m=e.markerEnd,b=e.markerStart,x=e.pathOptions,w=e.interactionWidth,S=gr({sourceX:t,sourceY:n,sourcePosition:g,targetX:o,targetY:r,targetPosition:y,borderRadius:null===x||void 0===x?void 0:x.borderRadius,offset:null===x||void 0===x?void 0:x.offset}),E=(0,i.Z)(S,3),_=E[0],C=E[1],N=E[2];return(0,s.jsx)(Jo,{path:_,labelX:C,labelY:N,label:a,labelStyle:l,labelShowBg:u,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:m,markerStart:b,interactionWidth:w})}));pr.displayName="SmoothStepEdge";var yr=(0,d.memo)((function(e){var t;return(0,s.jsx)(pr,(0,l.Z)((0,l.Z)({},e),{},{pathOptions:(0,d.useMemo)((function(){var t;return{borderRadius:0,offset:null===(t=e.pathOptions)||void 0===t?void 0:t.offset}}),[null===(t=e.pathOptions)||void 0===t?void 0:t.offset])}))}));yr.displayName="StepEdge";var mr=(0,d.memo)((function(e){var t=e.sourceX,n=e.sourceY,o=e.targetX,r=e.targetY,a=e.label,l=e.labelStyle,u=e.labelShowBg,c=e.labelBgStyle,d=e.labelBgPadding,f=e.labelBgBorderRadius,h=e.style,v=e.markerEnd,g=e.markerStart,p=e.interactionWidth,y=function(e){var t=e.sourceX,n=e.sourceY,o=e.targetX,r=e.targetY,a=lr({sourceX:t,sourceY:n,targetX:o,targetY:r}),l=(0,i.Z)(a,4),u=l[0],c=l[1],s=l[2],d=l[3];return["M ".concat(t,",").concat(n,"L ").concat(o,",").concat(r),u,c,s,d]}({sourceX:t,sourceY:n,targetX:o,targetY:r}),m=(0,i.Z)(y,3),b=m[0],x=m[1],w=m[2];return(0,s.jsx)(Jo,{path:b,labelX:x,labelY:w,label:a,labelStyle:l,labelShowBg:u,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:v,markerStart:g,interactionWidth:p})}));function br(e,t){return e>=0?.5*e:25*t*Math.sqrt(-e)}function xr(e){var t=e.pos,n=e.x1,o=e.y1,r=e.x2,i=e.y2,a=e.c;switch(t){case ir.Left:return[n-br(n-r,a),o];case ir.Right:return[n+br(r-n,a),o];case ir.Top:return[n,o-br(o-i,a)];case ir.Bottom:return[n,o+br(i-o,a)]}}function wr(e){var t=e.sourceX,n=e.sourceY,o=e.sourcePosition,r=void 0===o?ir.Bottom:o,a=e.targetX,l=e.targetY,u=e.targetPosition,c=void 0===u?ir.Top:u,s=e.curvature,d=void 0===s?.25:s,f=xr({pos:r,x1:t,y1:n,x2:a,y2:l,c:d}),h=(0,i.Z)(f,2),v=h[0],g=h[1],p=xr({pos:c,x1:a,y1:l,x2:t,y2:n,c:d}),y=(0,i.Z)(p,2),m=y[0],b=y[1],x=ur({sourceX:t,sourceY:n,targetX:a,targetY:l,sourceControlX:v,sourceControlY:g,targetControlX:m,targetControlY:b}),w=(0,i.Z)(x,4),S=w[0],E=w[1],_=w[2],C=w[3];return["M".concat(t,",").concat(n," C").concat(v,",").concat(g," ").concat(m,",").concat(b," ").concat(a,",").concat(l),S,E,_,C]}mr.displayName="StraightEdge";var Sr=(0,d.memo)((function(e){var t=e.sourceX,n=e.sourceY,o=e.targetX,r=e.targetY,a=e.sourcePosition,l=void 0===a?ir.Bottom:a,u=e.targetPosition,c=void 0===u?ir.Top:u,d=e.label,f=e.labelStyle,h=e.labelShowBg,v=e.labelBgStyle,g=e.labelBgPadding,p=e.labelBgBorderRadius,y=e.style,m=e.markerEnd,b=e.markerStart,x=e.pathOptions,w=e.interactionWidth,S=wr({sourceX:t,sourceY:n,sourcePosition:l,targetX:o,targetY:r,targetPosition:c,curvature:null===x||void 0===x?void 0:x.curvature}),E=(0,i.Z)(S,3),_=E[0],C=E[1],N=E[2];return(0,s.jsx)(Jo,{path:_,labelX:C,labelY:N,label:d,labelStyle:f,labelShowBg:h,labelBgStyle:v,labelBgPadding:g,labelBgBorderRadius:p,style:y,markerEnd:m,markerStart:b,interactionWidth:w})}));Sr.displayName="BezierEdge";var Er=(0,d.createContext)(null),_r=Er.Provider;Er.Consumer;var Cr=function(e){var t=e.source,n=e.sourceHandle,o=e.target,r=e.targetHandle;return"reactflow__edge-".concat(t).concat(n||"","-").concat(o).concat(r||"")},Nr=function(e,t){if("undefined"===typeof e)return"";if("string"===typeof e)return e;var n=t?"".concat(t,"__"):"";return"".concat(n).concat(Object.keys(e).sort().map((function(t){return"".concat(t,"=").concat(e[t])})).join("&"))},Mr=function(e,t,n,o){var r=e.x,a=e.y,l=(0,i.Z)(t,3),u=l[0],c=l[1],s=l[2],d=(0,i.Z)(o,2),f=d[0],h=d[1],v={x:(r-u)/s,y:(a-c)/s};return n?{x:f*Math.round(v.x/f),y:h*Math.round(v.y/h)}:v},kr=function(e,t){var n=e.x,o=e.y,r=(0,i.Z)(t,3),a=r[0],l=r[1],u=r[2];return{x:n*u+a,y:o*u+l}},Pr=function(e){var t,n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0];if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};var r=(null!==(t=e.width)&&void 0!==t?t:0)*o[0],i=(null!==(n=e.height)&&void 0!==n?n:0)*o[1],a={x:e.position.x-r,y:e.position.y-i};return(0,l.Z)((0,l.Z)({},a),{},{positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-r,y:e.positionAbsolute.y-i}:a})},Or=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0];if(0===e.length)return{x:0,y:0,width:0,height:0};var n=e.reduce((function(e,n){var o=Pr(n,t).positionAbsolute,r=o.x,i=o.y;return jo(e,Yo({x:r,y:i,width:n.width||0,height:n.height||0}))}),{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Xo(n)},Ar=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0,1],o=(0,i.Z)(n,3),r=o[0],a=o[1],l=o[2],u=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[0,0],d={x:(t.x-r)/l,y:(t.y-a)/l,width:t.width/l,height:t.height/l},f=[];return e.forEach((function(e){var t=e.width,n=e.height,o=e.selectable,r=void 0===o||o,i=e.hidden;if(c&&!r||void 0!==i&&i)return!1;var a=Pr(e,s).positionAbsolute,l={x:a.x,y:a.y,width:t||0,height:n||0},h=Vo(d,l);("undefined"===typeof t||"undefined"===typeof n||null===t||null===n||u&&h>0||h>=(t||0)*(n||0)||e.dragging)&&f.push(e)})),f},Zr=function(e,t){var n=e.map((function(e){return e.id}));return t.filter((function(e){return n.includes(e.source)||n.includes(e.target)}))},Dr=function(e,t,n,o,r){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.1,a=t/(e.width*(1+i)),l=n/(e.height*(1+i)),u=Math.min(a,l),c=zo(u,o,r);return[t/2-(e.x+e.width/2)*c,n/2-(e.y+e.height/2)*c,c]},Ir=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.transition().duration(t)};function zr(e,t,n,o){return(t[n]||[]).reduce((function(t,r){var i,a,l,u;"".concat(e.id,"-").concat(r.id,"-").concat(n)!==o&&t.push({id:r.id||null,type:n,nodeId:e.id,x:(null!==(i=null===(a=e.positionAbsolute)||void 0===a?void 0:a.x)&&void 0!==i?i:0)+r.x+r.width/2,y:(null!==(l=null===(u=e.positionAbsolute)||void 0===u?void 0:u.y)&&void 0!==l?l:0)+r.y+r.height/2});return t}),[])}var Lr={source:null,target:null,sourceHandle:null,targetHandle:null};function Tr(e,t,n,o,r,i,a,l){var u="target"===i,c=l.querySelector('.react-flow__handle[data-id="'.concat(null===t||void 0===t?void 0:t.nodeId,"-").concat(null===t||void 0===t?void 0:t.id,"-").concat(null===t||void 0===t?void 0:t.type,'"]')),s=Qo(e),d=s.x,f=s.y,h=l.elementFromPoint(d,f),v=null!==h&&void 0!==h&&h.classList.contains("react-flow__handle")?h:c,g={handleDomNode:v,isValid:!1,connection:Lr,endHandle:null};if(v){var p=Br(void 0,v),y=v.getAttribute("data-nodeid"),m=v.getAttribute("data-handleid"),b=v.classList.contains("connectable"),x=v.classList.contains("connectableend"),w={source:u?y:o,sourceHandle:u?m:r,target:u?o:y,targetHandle:u?r:m};g.connection=w,b&&x&&(n===er.Strict?u&&"source"===p||!u&&"target"===p:y!==o||m!==r)&&(g.endHandle={nodeId:y,handleId:m,type:p},g.isValid=a(w))}return g}function Br(e,t){return e||(null!==t&&void 0!==t&&t.classList.contains("target")?"target":null!==t&&void 0!==t&&t.classList.contains("source")?"source":null)}function Rr(e){null===e||void 0===e||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function jr(e,t){var n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function Yr(e){var t,n=e.event,o=e.handleId,r=e.nodeId,l=e.onConnect,u=e.isTarget,c=e.getState,s=e.setState,d=e.isValidConnection,f=e.edgeUpdaterType,h=e.onEdgeUpdateEnd,v=Ro(n.target),g=c(),p=g.connectionMode,y=g.domNode,m=g.autoPanOnConnect,b=g.connectionRadius,x=g.onConnectStart,w=g.panBy,S=g.getNodes,E=g.cancelConnection,_=0,C=Qo(n),N=C.x,M=C.y,k=null===v||void 0===v?void 0:v.elementFromPoint(N,M),P=Br(f,k),O=null===y||void 0===y?void 0:y.getBoundingClientRect();if(O&&P){var A,Z=Qo(n,O),D=!1,I=null,z=!1,L=null,T=function(e){var t=e.nodes,n=e.nodeId,o=e.handleId,r=e.handleType;return t.reduce((function(e,t){if(t[Fo]){var i=t[Fo].handleBounds,l=[],u=[];i&&(l=zr(t,i,"source","".concat(n,"-").concat(o,"-").concat(r)),u=zr(t,i,"target","".concat(n,"-").concat(o,"-").concat(r))),e.push.apply(e,(0,a.Z)(l).concat((0,a.Z)(u)))}return e}),[])}({nodes:S(),nodeId:r,handleId:o,handleType:P}),B=function e(){if(m){var t=Bo(Z,O),n=(0,i.Z)(t,2),o=n[0],r=n[1];w({x:o,y:r}),_=requestAnimationFrame(e)}};s({connectionPosition:Z,connectionStatus:null,connectionNodeId:r,connectionHandleId:o,connectionHandleType:P,connectionStartHandle:{nodeId:r,handleId:o,type:P},connectionEndHandle:null}),null===x||void 0===x||x(n,{nodeId:r,handleId:o,handleType:P}),v.addEventListener("mousemove",R),v.addEventListener("mouseup",j),v.addEventListener("touchmove",R),v.addEventListener("touchend",j)}function R(e){var n=c().transform;Z=Qo(e,O),t=function(e,t,n){var o=[],r=1/0;return n.forEach((function(n){var i=Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2));i<=t&&(i<r?o=[n]:i===r&&o.push(n),r=i)})),o.length?1===o.length?o[0]:o.find((function(e){return"target"===e.type}))||o[0]:null}(Mr(Z,n,!1,[1,1]),b,T),D||(B(),D=!0);var i=Tr(e,t,p,r,o,u?"target":"source",d,v);if(L=i.handleDomNode,I=i.connection,z=i.isValid,s({connectionPosition:t&&z?kr({x:t.x,y:t.y},n):Z,connectionStatus:jr(!!t,z),connectionEndHandle:i.endHandle}),!t&&!z&&!L)return Rr(A);I.source!==I.target&&L&&(Rr(A),A=L,L.classList.add("connecting","react-flow__handle-connecting"),L.classList.toggle("valid",z),L.classList.toggle("react-flow__handle-valid",z))}function j(e){var n,o;(t||L)&&I&&z&&(null===l||void 0===l||l(I)),null===(n=(o=c()).onConnectEnd)||void 0===n||n.call(o,e),f&&(null===h||void 0===h||h(e)),Rr(A),E(),cancelAnimationFrame(_),D=!1,z=!1,I=null,L=null,v.removeEventListener("mousemove",R),v.removeEventListener("mouseup",j),v.removeEventListener("touchmove",R),v.removeEventListener("touchend",j)}}var Xr=function(){return!0},Hr=function(e){return{connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}},Vr=(0,d.forwardRef)((function(e,t){var n,o,r=e.type,i=void 0===r?"source":r,a=e.position,u=void 0===a?ir.Top:a,h=e.isValidConnection,v=e.isConnectable,g=void 0===v||v,p=e.isConnectableStart,m=void 0===p||p,b=e.isConnectableEnd,x=void 0===b||b,w=e.id,S=e.onConnect,E=e.children,_=e.className,C=e.onMouseDown,N=e.onTouchStart,M=c(e,So),k=w||null,P="target"===i,O=Po(),A=(0,d.useContext)(Er),Z=ko(Hr,y),D=Z.connectOnClick,I=Z.noPanClassName,z=ko(function(e,t,n){return function(o){var r=o.connectionStartHandle,i=o.connectionEndHandle,a=o.connectionClickStartHandle;return{connecting:(null===r||void 0===r?void 0:r.nodeId)===e&&(null===r||void 0===r?void 0:r.handleId)===t&&(null===r||void 0===r?void 0:r.type)===n||(null===i||void 0===i?void 0:i.nodeId)===e&&(null===i||void 0===i?void 0:i.handleId)===t&&(null===i||void 0===i?void 0:i.type)===n,clickConnecting:(null===a||void 0===a?void 0:a.nodeId)===e&&(null===a||void 0===a?void 0:a.handleId)===t&&(null===a||void 0===a?void 0:a.type)===n}}}(A,k,i),y),L=z.connecting,T=z.clickConnecting;A||(null===(n=(o=O.getState()).onError)||void 0===n||n.call(o,"010",No.error010()));var B=function(e){var t=O.getState(),n=t.defaultEdgeOptions,o=t.onConnect,r=t.hasDefaultEdges,i=(0,l.Z)((0,l.Z)({},n),e);if(r){var a=O.getState(),u=a.edges;(0,a.setEdges)(function(e,t){return e.source&&e.target?function(e,t){return t.some((function(t){return t.source===e.source&&t.target===e.target&&(t.sourceHandle===e.sourceHandle||!t.sourceHandle&&!e.sourceHandle)&&(t.targetHandle===e.targetHandle||!t.targetHandle&&!e.targetHandle)}))}(n="id"in(o=e)&&"source"in o&&"target"in o?(0,l.Z)({},e):(0,l.Z)((0,l.Z)({},e),{},{id:Cr(e)}),t)?t:t.concat(n):(Go(0,No.error006()),t);var n,o}(i,u))}null===o||void 0===o||o(i),null===S||void 0===S||S(i)},R=function(e){if(A){var t=$o(e);m&&(t&&0===e.button||!t)&&Yr({event:e,handleId:k,nodeId:A,onConnect:B,isTarget:P,getState:O.getState,setState:O.setState,isValidConnection:h||O.getState().isValidConnection||Xr}),t?null===C||void 0===C||C(e):null===N||void 0===N||N(e)}};return(0,s.jsx)("div",(0,l.Z)((0,l.Z)({"data-handleid":k,"data-nodeid":A,"data-handlepos":u,"data-id":"".concat(A,"-").concat(k,"-").concat(i),className:f(["react-flow__handle","react-flow__handle-".concat(u),"nodrag",I,_,{source:!P,target:P,connectable:g,connectablestart:m,connectableend:x,connecting:T,connectionindicator:g&&(m&&!L||x&&L)}]),onMouseDown:R,onTouchStart:R,onClick:D?function(e){var t=O.getState(),n=t.onClickConnectStart,o=t.onClickConnectEnd,r=t.connectionClickStartHandle,a=t.connectionMode,l=t.isValidConnection;if(A&&(r||m)){if(!r)return null===n||void 0===n||n(e,{nodeId:A,handleId:k,handleType:i}),void O.setState({connectionClickStartHandle:{nodeId:A,type:i,handleId:k}});var u=Ro(e.target),c=h||l||Xr,s=Tr(e,{nodeId:A,id:k,type:i},a,r.nodeId,r.handleId||null,r.type,c,u),d=s.connection;s.isValid&&B(d),null===o||void 0===o||o(e),O.setState({connectionClickStartHandle:null})}}:void 0,ref:t},M),{},{children:E}))}));Vr.displayName="Handle";var Kr=(0,d.memo)(Vr),Ur=function(e){var t=e.data,n=e.isConnectable,o=e.targetPosition,r=void 0===o?ir.Top:o,i=e.sourcePosition,a=void 0===i?ir.Bottom:i;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(Kr,{type:"target",position:r,isConnectable:n}),null===t||void 0===t?void 0:t.label,(0,s.jsx)(Kr,{type:"source",position:a,isConnectable:n})]})};Ur.displayName="DefaultNode";var Fr=(0,d.memo)(Ur),Wr=function(e){var t=e.data,n=e.isConnectable,o=e.sourcePosition,r=void 0===o?ir.Bottom:o;return(0,s.jsxs)(s.Fragment,{children:[null===t||void 0===t?void 0:t.label,(0,s.jsx)(Kr,{type:"source",position:r,isConnectable:n})]})};Wr.displayName="InputNode";var Gr=(0,d.memo)(Wr),qr=function(e){var t=e.data,n=e.isConnectable,o=e.targetPosition,r=void 0===o?ir.Top:o;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(Kr,{type:"target",position:r,isConnectable:n}),null===t||void 0===t?void 0:t.label]})};qr.displayName="OutputNode";var $r=(0,d.memo)(qr),Qr=function(){return null};Qr.displayName="GroupNode";var Jr=function(e){return{selectedNodes:e.getNodes().filter((function(e){return e.selected})),selectedEdges:e.edges.filter((function(e){return e.selected}))}},ei=function(e){return e.id};function ti(e,t){return y(e.selectedNodes.map(ei),t.selectedNodes.map(ei))&&y(e.selectedEdges.map(ei),t.selectedEdges.map(ei))}var ni=(0,d.memo)((function(e){var t=e.onSelectionChange,n=Po(),o=ko(Jr,ti),r=o.selectedNodes,i=o.selectedEdges;return(0,d.useEffect)((function(){var e,o,a={nodes:r,edges:i};null===t||void 0===t||t(a),null===(e=(o=n.getState()).onSelectionChange)||void 0===e||e.call(o,a)}),[r,i,t]),null}));ni.displayName="SelectionListener";var oi=function(e){return!!e.onSelectionChange};function ri(e){var t=e.onSelectionChange,n=ko(oi);return t||n?(0,s.jsx)(ni,{onSelectionChange:t}):null}var ii=function(e){return{setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset}};function ai(e,t){(0,d.useEffect)((function(){"undefined"!==typeof e&&t(e)}),[e])}function li(e,t,n){(0,d.useEffect)((function(){"undefined"!==typeof t&&n((0,r.Z)({},e,t))}),[t])}var ui=function(e){var t=e.nodes,n=e.edges,o=e.defaultNodes,r=e.defaultEdges,i=e.onConnect,a=e.onConnectStart,u=e.onConnectEnd,c=e.onClickConnectStart,s=e.onClickConnectEnd,f=e.nodesDraggable,h=e.nodesConnectable,v=e.nodesFocusable,g=e.edgesFocusable,p=e.edgesUpdatable,m=e.elevateNodesOnSelect,b=e.minZoom,x=e.maxZoom,w=e.nodeExtent,S=e.onNodesChange,E=e.onEdgesChange,_=e.elementsSelectable,C=e.connectionMode,N=e.snapGrid,M=e.snapToGrid,k=e.translateExtent,P=e.connectOnClick,O=e.defaultEdgeOptions,A=e.fitView,Z=e.fitViewOptions,D=e.onNodesDelete,I=e.onEdgesDelete,z=e.onNodeDrag,L=e.onNodeDragStart,T=e.onNodeDragStop,B=e.onSelectionDrag,R=e.onSelectionDragStart,j=e.onSelectionDragStop,Y=e.noPanClassName,X=e.nodeOrigin,H=e.rfId,V=e.autoPanOnConnect,K=e.autoPanOnNodeDrag,U=e.onError,F=e.connectionRadius,W=e.isValidConnection,G=ko(ii,y),q=G.setNodes,$=G.setEdges,Q=G.setDefaultNodesAndEdges,J=G.setMinZoom,ee=G.setMaxZoom,te=G.setTranslateExtent,ne=G.setNodeExtent,oe=G.reset,re=Po();return(0,d.useEffect)((function(){var e=null===r||void 0===r?void 0:r.map((function(e){return(0,l.Z)((0,l.Z)({},e),O)}));return Q(o,e),function(){oe()}}),[]),li("defaultEdgeOptions",O,re.setState),li("connectionMode",C,re.setState),li("onConnect",i,re.setState),li("onConnectStart",a,re.setState),li("onConnectEnd",u,re.setState),li("onClickConnectStart",c,re.setState),li("onClickConnectEnd",s,re.setState),li("nodesDraggable",f,re.setState),li("nodesConnectable",h,re.setState),li("nodesFocusable",v,re.setState),li("edgesFocusable",g,re.setState),li("edgesUpdatable",p,re.setState),li("elementsSelectable",_,re.setState),li("elevateNodesOnSelect",m,re.setState),li("snapToGrid",M,re.setState),li("snapGrid",N,re.setState),li("onNodesChange",S,re.setState),li("onEdgesChange",E,re.setState),li("connectOnClick",P,re.setState),li("fitViewOnInit",A,re.setState),li("fitViewOnInitOptions",Z,re.setState),li("onNodesDelete",D,re.setState),li("onEdgesDelete",I,re.setState),li("onNodeDrag",z,re.setState),li("onNodeDragStart",L,re.setState),li("onNodeDragStop",T,re.setState),li("onSelectionDrag",B,re.setState),li("onSelectionDragStart",R,re.setState),li("onSelectionDragStop",j,re.setState),li("noPanClassName",Y,re.setState),li("nodeOrigin",X,re.setState),li("rfId",H,re.setState),li("autoPanOnConnect",V,re.setState),li("autoPanOnNodeDrag",K,re.setState),li("onError",U,re.setState),li("connectionRadius",F,re.setState),li("isValidConnection",W,re.setState),ai(t,q),ai(n,$),ai(b,J),ai(x,ee),ai(k,te),ai(w,ne),null},ci={display:"none"},si={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},di="react-flow__node-desc",fi="react-flow__edge-desc",hi="react-flow__aria-live",vi=function(e){return e.ariaLiveMessage};function gi(e){var t=e.rfId,n=ko(vi);return(0,s.jsx)("div",{id:"".concat(hi,"-").concat(t),"aria-live":"assertive","aria-atomic":"true",style:si,children:n})}function pi(e){var t=e.rfId,n=e.disableKeyboardA11y;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{id:"".concat(di,"-").concat(t),style:ci,children:["Press enter or space to select a node.",!n&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "]}),(0,s.jsx)("div",{id:"".concat(fi,"-").concat(t),style:ci,children:"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."}),!n&&(0,s.jsx)(gi,{rfId:t})]})}var yi=function(e,t,n){return n===ir.Left?e-t:n===ir.Right?e+t:e},mi=function(e,t,n){return n===ir.Top?e-t:n===ir.Bottom?e+t:e},bi="react-flow__edgeupdater",xi=function(e){var t=e.position,n=e.centerX,o=e.centerY,r=e.radius,i=void 0===r?10:r,a=e.onMouseDown,l=e.onMouseEnter,u=e.onMouseOut,c=e.type;return(0,s.jsx)("circle",{onMouseDown:a,onMouseEnter:l,onMouseOut:u,className:f([bi,"".concat(bi,"-").concat(c)]),cx:yi(n,i,t),cy:mi(o,i,t),r:i,stroke:"transparent",fill:"transparent"})},wi=function(){return!0},Si=function(e){var t=function(t){var n=t.id,o=t.className,r=t.type,a=t.data,l=t.onClick,u=t.onEdgeDoubleClick,c=t.selected,h=t.animated,v=t.label,g=t.labelStyle,p=t.labelShowBg,y=t.labelBgStyle,m=t.labelBgPadding,b=t.labelBgBorderRadius,x=t.style,w=t.source,S=t.target,E=t.sourceX,_=t.sourceY,C=t.targetX,N=t.targetY,M=t.sourcePosition,k=t.targetPosition,P=t.elementsSelectable,O=t.hidden,A=t.sourceHandleId,Z=t.targetHandleId,D=t.onContextMenu,I=t.onMouseEnter,z=t.onMouseMove,L=t.onMouseLeave,T=t.edgeUpdaterRadius,B=t.onEdgeUpdate,R=t.onEdgeUpdateStart,j=t.onEdgeUpdateEnd,Y=t.markerEnd,X=t.markerStart,H=t.rfId,V=t.ariaLabel,K=t.isFocusable,U=t.isUpdatable,F=t.pathOptions,W=t.interactionWidth,G=(0,d.useRef)(null),q=(0,d.useState)(!1),$=(0,i.Z)(q,2),Q=$[0],J=$[1],ee=(0,d.useState)(!1),te=(0,i.Z)(ee,2),ne=te[0],oe=te[1],re=Po(),ie=(0,d.useMemo)((function(){return"url(#".concat(Nr(X,H),")")}),[X,H]),ae=(0,d.useMemo)((function(){return"url(#".concat(Nr(Y,H),")")}),[Y,H]);if(O)return null;var le=ar(n,re.getState,u),ue=ar(n,re.getState,D),ce=ar(n,re.getState,I),se=ar(n,re.getState,z),de=ar(n,re.getState,L),fe=function(e,t){if(0===e.button){var o=re.getState(),r=o.edges,i=o.isValidConnection,a=t?S:w,l=(t?Z:A)||null,u=t?"target":"source",c=i||wi,s=t,d=r.find((function(e){return e.id===n}));oe(!0),null===R||void 0===R||R(e,d,u);Yr({event:e,handleId:l,nodeId:a,onConnect:function(e){return null===B||void 0===B?void 0:B(d,e)},isTarget:s,getState:re.getState,setState:re.setState,isValidConnection:c,edgeUpdaterType:u,onEdgeUpdateEnd:function(e){oe(!1),null===j||void 0===j||j(e,d,u)}})}},he=function(){return J(!0)},ve=function(){return J(!1)},ge=!P&&!l;return(0,s.jsxs)("g",{className:f(["react-flow__edge","react-flow__edge-".concat(r),o,{selected:c,animated:h,inactive:ge,updating:Q}]),onClick:function(e){var t=re.getState(),o=t.edges,r=t.addSelectedEdges;if(P&&(re.setState({nodesSelectionActive:!1}),r([n])),l){var i=o.find((function(e){return e.id===n}));l(e,i)}},onDoubleClick:le,onContextMenu:ue,onMouseEnter:ce,onMouseMove:se,onMouseLeave:de,onKeyDown:K?function(e){if(Wo.includes(e.key)&&P){var t,o=re.getState(),r=o.unselectNodesAndEdges,i=o.addSelectedEdges,a=o.edges;if("Escape"===e.key)null===(t=G.current)||void 0===t||t.blur(),r({edges:[a.find((function(e){return e.id===n}))]});else i([n])}}:void 0,tabIndex:K?0:void 0,role:K?"button":void 0,"data-testid":"rf__edge-".concat(n),"aria-label":null===V?void 0:V||"Edge from ".concat(w," to ").concat(S),"aria-describedby":K?"".concat(fi,"-").concat(H):void 0,ref:G,children:[!ne&&(0,s.jsx)(e,{id:n,source:w,target:S,selected:c,animated:h,label:v,labelStyle:g,labelShowBg:p,labelBgStyle:y,labelBgPadding:m,labelBgBorderRadius:b,data:a,style:x,sourceX:E,sourceY:_,targetX:C,targetY:N,sourcePosition:M,targetPosition:k,sourceHandleId:A,targetHandleId:Z,markerStart:ie,markerEnd:ae,pathOptions:F,interactionWidth:W}),U&&(0,s.jsxs)(s.Fragment,{children:[("source"===U||!0===U)&&(0,s.jsx)(xi,{position:M,centerX:E,centerY:_,radius:T,onMouseDown:function(e){return fe(e,!0)},onMouseEnter:he,onMouseOut:ve,type:"source"}),("target"===U||!0===U)&&(0,s.jsx)(xi,{position:k,centerX:C,centerY:N,radius:T,onMouseDown:function(e){return fe(e,!1)},onMouseEnter:he,onMouseOut:ve,type:"target"})]})]})};return t.displayName="EdgeWrapper",(0,d.memo)(t)};function Ei(e){var t={default:Si(e.default||Sr),straight:Si(e.bezier||mr),step:Si(e.step||yr),smoothstep:Si(e.step||pr),simplebezier:Si(e.simplebezier||dr)},n=Object.keys(e).filter((function(e){return!["default","bezier"].includes(e)})).reduce((function(t,n){return t[n]=Si(e[n]||Sr),t}),{});return(0,l.Z)((0,l.Z)({},t),n)}function _i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=((null===n||void 0===n?void 0:n.x)||0)+t.x,r=((null===n||void 0===n?void 0:n.y)||0)+t.y,i=(null===n||void 0===n?void 0:n.width)||t.width,a=(null===n||void 0===n?void 0:n.height)||t.height;switch(e){case ir.Top:return{x:o+i/2,y:r};case ir.Right:return{x:o+i,y:r+a/2};case ir.Bottom:return{x:o+i/2,y:r+a};case ir.Left:return{x:o,y:r+a/2}}}function Ci(e,t){return e?1!==e.length&&t?t&&e.find((function(e){return e.id===t}))||null:e[0]:null}function Ni(e){var t,n,o,r,i,a=(null===e||void 0===e||null===(t=e[Fo])||void 0===t?void 0:t.handleBounds)||null,l=a&&(null===e||void 0===e?void 0:e.width)&&(null===e||void 0===e?void 0:e.height)&&"undefined"!==typeof(null===e||void 0===e||null===(n=e.positionAbsolute)||void 0===n?void 0:n.x)&&"undefined"!==typeof(null===e||void 0===e||null===(o=e.positionAbsolute)||void 0===o?void 0:o.y);return[{x:(null===e||void 0===e||null===(r=e.positionAbsolute)||void 0===r?void 0:r.x)||0,y:(null===e||void 0===e||null===(i=e.positionAbsolute)||void 0===i?void 0:i.y)||0,width:(null===e||void 0===e?void 0:e.width)||0,height:(null===e||void 0===e?void 0:e.height)||0},a,!!l]}function Mi(e,t){if(!e.parentNode)return!1;var n=t.get(e.parentNode);return!!n&&(!!n.selected||Mi(n,t))}function ki(e,t,n){var o=e;do{var r;if(null!==(r=o)&&void 0!==r&&r.matches(t))return!0;if(o===n.current)return!1;o=o.parentElement}while(o);return!1}function Pi(e,t,n,o){return Array.from(e.values()).filter((function(n){return(n.selected||n.id===o)&&(!n.parentNode||!Mi(n,e))&&(n.draggable||t&&"undefined"===typeof n.draggable)})).map((function(e){var t,o,r,i;return{id:e.id,position:e.position||{x:0,y:0},positionAbsolute:e.positionAbsolute||{x:0,y:0},distance:{x:n.x-(null!==(t=null===(o=e.positionAbsolute)||void 0===o?void 0:o.x)&&void 0!==t?t:0),y:n.y-(null!==(r=null===(i=e.positionAbsolute)||void 0===i?void 0:i.y)&&void 0!==r?r:0)},delta:{x:0,y:0},extent:e.extent,parentNode:e.parentNode,width:e.width,height:e.height}}))}function Oi(e,t,n,o){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[0,0],i=arguments.length>5?arguments[5]:void 0,a=e.extent||o;if("parent"===e.extent)if(e.parentNode&&e.width&&e.height){var l=n.get(e.parentNode),u=Pr(l,r).positionAbsolute,c=u.x,s=u.y;a=l&&Uo(c)&&Uo(s)&&Uo(l.width)&&Uo(l.height)?[[c+e.width*r[0],s+e.height*r[1]],[c+l.width-e.width+e.width*r[0],s+l.height-e.height+e.height*r[1]]]:a}else null===i||void 0===i||i("005",No.error005()),a=o;else if(e.extent&&e.parentNode){var d=n.get(e.parentNode),f=Pr(d,r).positionAbsolute,h=f.x,v=f.y;a=[[e.extent[0][0]+h,e.extent[0][1]+v],[e.extent[1][0]+h,e.extent[1][1]+v]]}var g={x:0,y:0};if(e.parentNode){var p=n.get(e.parentNode);g=Pr(p,r).positionAbsolute}var y=a?Lo(t,a):t;return{position:{x:y.x-g.x,y:y.y-g.y},positionAbsolute:y}}function Ai(e){var t=e.nodeId,n=e.dragItems,o=e.nodeInternals,r=n.map((function(e){var t=o.get(e.id);return(0,l.Z)((0,l.Z)({},t),{},{position:e.position,positionAbsolute:e.positionAbsolute})}));return[t?r.find((function(e){return e.id===t})):r[0],r]}var Zi=function(e,t,n,o){var r=t.querySelectorAll(e);if(!r||!r.length)return null;var i=Array.from(r),a=t.getBoundingClientRect(),u=a.width*o[0],c=a.height*o[1];return i.map((function(e){var t=e.getBoundingClientRect();return(0,l.Z)({id:e.getAttribute("data-handleid"),position:e.getAttribute("data-handlepos"),x:(t.left-a.left-u)/n,y:(t.top-a.top-c)/n},Io(e))}))};function Di(e,t,n){return void 0===n?n:function(o){var r=t().nodeInternals.get(e);n(o,(0,l.Z)({},r))}}function Ii(e){var t=e.id,n=e.store,o=e.unselect,r=void 0!==o&&o,i=e.nodeRef,a=n.getState(),l=a.addSelectedNodes,u=a.unselectNodesAndEdges,c=a.multiSelectionActive,s=a.nodeInternals.get(t);n.setState({nodesSelectionActive:!1}),s.selected?(r||s.selected&&c)&&(u({nodes:[s]}),requestAnimationFrame((function(){var e;return null===i||void 0===i||null===(e=i.current)||void 0===e?void 0:e.blur()}))):l([t])}function zi(e){return function(t,n,o){return null===e||void 0===e?void 0:e(t,o)}}function Li(e){var t=e.nodeRef,n=e.disabled,o=void 0!==n&&n,r=e.noDragClassName,a=e.handleSelector,u=e.nodeId,c=e.isSelectable,s=e.selectNodesOnDrag,f=Po(),h=(0,d.useState)(!1),v=(0,i.Z)(h,2),g=v[0],p=v[1],y=(0,d.useRef)([]),m=(0,d.useRef)({x:null,y:null}),b=(0,d.useRef)(0),x=(0,d.useRef)(null),w=(0,d.useRef)({x:0,y:0}),S=(0,d.useRef)(null),_=(0,d.useRef)(!1),C=function(){var e=Po(),t=(0,d.useCallback)((function(t){var n=t.sourceEvent,o=e.getState(),r=o.transform,i=o.snapGrid,a=o.snapToGrid,u=n.touches?n.touches[0].clientX:n.clientX,c=n.touches?n.touches[0].clientY:n.clientY,s={x:(u-r[0])/r[2],y:(c-r[1])/r[2]};return(0,l.Z)({xSnapped:a?i[0]*Math.round(s.x/i[0]):s.x,ySnapped:a?i[1]*Math.round(s.y/i[1]):s.y},s)}),[]);return t}();return(0,d.useEffect)((function(){if(null!==t&&void 0!==t&&t.current){var e=je(t.current),n=function(e){var t=e.x,n=e.y,o=f.getState(),r=o.nodeInternals,a=o.onNodeDrag,l=o.onSelectionDrag,c=o.updateNodePositions,s=o.nodeExtent,d=o.snapGrid,h=o.snapToGrid,v=o.nodeOrigin,g=o.onError;m.current={x:t,y:n};var b=!1;if(y.current=y.current.map((function(e){var o={x:t-e.distance.x,y:n-e.distance.y};h&&(o.x=d[0]*Math.round(o.x/d[0]),o.y=d[1]*Math.round(o.y/d[1]));var i=Oi(e,o,r,s,v,g);return b=b||e.position.x!==i.position.x||e.position.y!==i.position.y,e.position=i.position,e.positionAbsolute=i.positionAbsolute,e})),b){c(y.current,!0,!0),p(!0);var x=u?a:zi(l);if(x&&S.current){var w=Ai({nodeId:u,dragItems:y.current,nodeInternals:r}),E=(0,i.Z)(w,2),_=E[0],C=E[1];x(S.current,_,C)}}},l=function e(){if(x.current){var t=Bo(w.current,x.current),o=(0,i.Z)(t,2),r=o[0],a=o[1];if(0!==r||0!==a){var l,u,c=f.getState(),s=c.transform,d=c.panBy;m.current.x=(null!==(l=m.current.x)&&void 0!==l?l:0)-r/s[2],m.current.y=(null!==(u=m.current.y)&&void 0!==u?u:0)-a/s[2],d({x:r,y:a})&&n(m.current)}b.current=requestAnimationFrame(e)}};if(!o){var d=function(){var e,t,n,o,r=qe,i=$e,a=Qe,l=Je,u={},c=E("start","drag","end"),s=0,d=0;function f(e){e.on("mousedown.drag",h).filter(l).on("touchstart.drag",p).on("touchmove.drag",y,Xe).on("touchend.drag touchcancel.drag",m).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(a,l){if(!o&&r.call(this,a,l)){var u=b(this,i.call(this,a,l),a,l,"mouse");u&&(je(a.view).on("mousemove.drag",v,He).on("mouseup.drag",g,He),Ue(a.view),Ve(a),n=!1,e=a.clientX,t=a.clientY,u("start",a))}}function v(o){if(Ke(o),!n){var r=o.clientX-e,i=o.clientY-t;n=r*r+i*i>d}u.mouse("drag",o)}function g(e){je(e.view).on("mousemove.drag mouseup.drag",null),Fe(e.view,n),Ke(e),u.mouse("end",e)}function p(e,t){if(r.call(this,e,t)){var n,o,a=e.changedTouches,l=i.call(this,e,t),u=a.length;for(n=0;n<u;++n)(o=b(this,l,e,t,a[n].identifier,a[n]))&&(Ve(e),o("start",e,a[n]))}}function y(e){var t,n,o=e.changedTouches,r=o.length;for(t=0;t<r;++t)(n=u[o[t].identifier])&&(Ke(e),n("drag",e,o[t]))}function m(e){var t,n,r=e.changedTouches,i=r.length;for(o&&clearTimeout(o),o=setTimeout((function(){o=null}),500),t=0;t<i;++t)(n=u[r[t].identifier])&&(Ve(e),n("end",e,r[t]))}function b(e,t,n,o,r,i){var l,d,h,v=c.copy(),g=Ye(i||n,t);if(null!=(h=a.call(e,new Ge("beforestart",{sourceEvent:n,target:f,identifier:r,active:s,x:g[0],y:g[1],dx:0,dy:0,dispatch:v}),o)))return l=h.x-g[0]||0,d=h.y-g[1]||0,function n(i,a,c){var p,y=g;switch(i){case"start":u[r]=n,p=s++;break;case"end":delete u[r],--s;case"drag":g=Ye(c||a,t),p=s}v.call(i,e,new Ge(i,{sourceEvent:a,subject:h,target:f,identifier:r,active:p,x:g[0]+l,y:g[1]+d,dx:g[0]-y[0],dy:g[1]-y[1],dispatch:v}),o)}}return f.filter=function(e){return arguments.length?(r="function"===typeof e?e:We(!!e),f):r},f.container=function(e){return arguments.length?(i="function"===typeof e?e:We(e),f):i},f.subject=function(e){return arguments.length?(a="function"===typeof e?e:We(e),f):a},f.touchable=function(e){return arguments.length?(l="function"===typeof e?e:We(!!e),f):l},f.on=function(){var e=c.on.apply(c,arguments);return e===c?f:e},f.clickDistance=function(e){return arguments.length?(d=(e=+e)*e,f):Math.sqrt(d)},f}().on("start",(function(e){var n,o=f.getState(),r=o.nodeInternals,a=o.multiSelectionActive,l=o.domNode,d=o.nodesDraggable,h=o.unselectNodesAndEdges,v=o.onNodeDragStart,g=o.onSelectionDragStart,p=u?v:zi(g);s||a||!u||(null!==(n=r.get(u))&&void 0!==n&&n.selected||h());u&&c&&s&&Ii({id:u,store:f,nodeRef:t});var b=C(e);if(m.current=b,y.current=Pi(r,d,b,u),p&&y.current){var S=Ai({nodeId:u,dragItems:y.current,nodeInternals:r}),E=(0,i.Z)(S,2),_=E[0],N=E[1];p(e.sourceEvent,_,N)}x.current=(null===l||void 0===l?void 0:l.getBoundingClientRect())||null,w.current=Qo(e.sourceEvent,x.current)})).on("drag",(function(e){var t=C(e),o=f.getState().autoPanOnNodeDrag;!_.current&&o&&(_.current=!0,l()),m.current.x===t.xSnapped&&m.current.y===t.ySnapped||!y.current||(S.current=e.sourceEvent,w.current=Qo(e.sourceEvent,x.current),n(t))})).on("end",(function(e){if(p(!1),_.current=!1,cancelAnimationFrame(b.current),y.current){var t=f.getState(),n=t.updateNodePositions,o=t.nodeInternals,r=t.onNodeDragStop,a=t.onSelectionDragStop,l=u?r:zi(a);if(n(y.current,!1,!1),l){var c=Ai({nodeId:u,dragItems:y.current,nodeInternals:o}),s=(0,i.Z)(c,2),d=s[0],h=s[1];l(e.sourceEvent,d,h)}}})).filter((function(e){var n=e.target;return!e.button&&(!r||!ki(n,".".concat(r),t))&&(!a||ki(n,a,t))}));return e.call(d),function(){e.on(".drag",null)}}e.on(".drag",null)}}),[t,o,r,a,c,f,u,s,C]),g}function Ti(){var e=Po();return(0,d.useCallback)((function(t){var n=e.getState(),o=n.nodeInternals,r=n.nodeExtent,i=n.updateNodePositions,a=n.getNodes,l=n.snapToGrid,u=n.snapGrid,c=n.onError,s=n.nodesDraggable,d=a().filter((function(e){return e.selected&&(e.draggable||s&&"undefined"===typeof e.draggable)})),f=l?u[0]:5,h=l?u[1]:5,v=t.isShiftPressed?4:1,g=t.x*f*v,p=t.y*h*v;i(d.map((function(e){if(e.positionAbsolute){var t={x:e.positionAbsolute.x+g,y:e.positionAbsolute.y+p};l&&(t.x=u[0]*Math.round(t.x/u[0]),t.y=u[1]*Math.round(t.y/u[1]));var n=Oi(e,t,o,r,void 0,c),i=n.positionAbsolute,a=n.position;e.position=a,e.positionAbsolute=i}return e})),!0,!1)}),[])}var Bi={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},Ri=function(e){var t=function(t){var n=t.id,o=t.type,i=t.data,a=t.xPos,u=t.yPos,c=t.xPosOrigin,h=t.yPosOrigin,v=t.selected,g=t.onClick,p=t.onMouseEnter,y=t.onMouseMove,m=t.onMouseLeave,b=t.onContextMenu,x=t.onDoubleClick,w=t.style,S=t.className,E=t.isDraggable,_=t.isSelectable,C=t.isConnectable,N=t.isFocusable,M=t.selectNodesOnDrag,k=t.sourcePosition,P=t.targetPosition,O=t.hidden,A=t.resizeObserver,Z=t.dragHandle,D=t.zIndex,I=t.isParent,z=t.noDragClassName,L=t.noPanClassName,T=t.initialized,B=t.disableKeyboardA11y,R=t.ariaLabel,j=t.rfId,Y=Po(),X=(0,d.useRef)(null),H=(0,d.useRef)(k),V=(0,d.useRef)(P),K=(0,d.useRef)(o),U=_||E||g||p||y||m,F=Ti(),W=Di(n,Y.getState,p),G=Di(n,Y.getState,y),q=Di(n,Y.getState,m),$=Di(n,Y.getState,b),Q=Di(n,Y.getState,x);(0,d.useEffect)((function(){if(X.current&&!O){var e=X.current;return null===A||void 0===A||A.observe(e),function(){return null===A||void 0===A?void 0:A.unobserve(e)}}}),[O]),(0,d.useEffect)((function(){var e=K.current!==o,t=H.current!==k,r=V.current!==P;X.current&&(e||t||r)&&(e&&(K.current=o),t&&(H.current=k),r&&(V.current=P),Y.getState().updateNodeDimensions([{id:n,nodeElement:X.current,forceUpdate:!0}]))}),[n,o,k,P]);var J=Li({nodeRef:X,disabled:O||!E,noDragClassName:z,handleSelector:Z,nodeId:n,isSelectable:_,selectNodesOnDrag:M});return O?null:(0,s.jsx)("div",{className:f(["react-flow__node","react-flow__node-".concat(o),(0,r.Z)({},L,E),S,{selected:v,selectable:_,parent:I,dragging:J}]),ref:X,style:(0,l.Z)({zIndex:D,transform:"translate(".concat(c,"px,").concat(h,"px)"),pointerEvents:U?"all":"none",visibility:T?"visible":"hidden"},w),"data-id":n,"data-testid":"rf__node-".concat(n),onMouseEnter:W,onMouseMove:G,onMouseLeave:q,onContextMenu:$,onClick:function(e){if(!_||M&&E||Ii({id:n,store:Y,nodeRef:X}),g){var t=Y.getState().nodeInternals.get(n);g(e,(0,l.Z)({},t))}},onDoubleClick:Q,onKeyDown:N?function(e){if(!qo(e))if(Wo.includes(e.key)&&_){var t="Escape"===e.key;Ii({id:n,store:Y,unselect:t,nodeRef:X})}else!B&&E&&v&&Object.prototype.hasOwnProperty.call(Bi,e.key)&&(Y.setState({ariaLiveMessage:"Moved selected node ".concat(e.key.replace("Arrow","").toLowerCase(),". New position, x: ").concat(~~a,", y: ").concat(~~u)}),F({x:Bi[e.key].x,y:Bi[e.key].y,isShiftPressed:e.shiftKey}))}:void 0,tabIndex:N?0:void 0,role:N?"button":void 0,"aria-describedby":B?void 0:"".concat(di,"-").concat(j),"aria-label":R,children:(0,s.jsx)(_r,{value:n,children:(0,s.jsx)(e,{id:n,data:i,type:o,xPos:a,yPos:u,selected:v,isConnectable:C,sourcePosition:k,targetPosition:P,dragging:J,dragHandle:Z,zIndex:D})})})};return t.displayName="NodeWrapper",(0,d.memo)(t)};function ji(e){var t={input:Ri(e.input||Gr),default:Ri(e.default||Fr),output:Ri(e.output||$r),group:Ri(e.group||Qr)},n=Object.keys(e).filter((function(e){return!["input","default","output","group"].includes(e)})).reduce((function(t,n){return t[n]=Ri(e[n]||Fr),t}),{});return(0,l.Z)((0,l.Z)({},t),n)}var Yi="undefined"!==typeof document?document:null,Xi=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{target:Yi},n=(0,d.useState)(!1),o=(0,i.Z)(n,2),r=o[0],l=o[1],u=(0,d.useRef)(!1),c=(0,d.useRef)(new Set([])),s=(0,d.useMemo)((function(){if(null!==e){var t=(Array.isArray(e)?e:[e]).filter((function(e){return"string"===typeof e})).map((function(e){return e.split("+")})),n=t.reduce((function(e,t){return e.concat.apply(e,(0,a.Z)(t))}),[]);return[t,n]}return[[],[]]}),[e]),f=(0,i.Z)(s,2),h=f[0],v=f[1];return(0,d.useEffect)((function(){if(null!==e){var n,o,r=function(e){if(u.current=e.ctrlKey||e.metaKey||e.shiftKey,!u.current&&qo(e))return!1;var t=Vi(e.code,v);c.current.add(e[t]),Hi(h,c.current,!1)&&(e.preventDefault(),l(!0))},i=function(e){if(!u.current&&qo(e))return!1;var t=Vi(e.code,v);Hi(h,c.current,!0)?(l(!1),c.current.clear()):c.current.delete(e[t]),u.current=!1},a=function(){c.current.clear(),l(!1)};return null===t||void 0===t||null===(n=t.target)||void 0===n||n.addEventListener("keydown",r),null===t||void 0===t||null===(o=t.target)||void 0===o||o.addEventListener("keyup",i),window.addEventListener("blur",a),function(){var e,n;null===t||void 0===t||null===(e=t.target)||void 0===e||e.removeEventListener("keydown",r),null===t||void 0===t||null===(n=t.target)||void 0===n||n.removeEventListener("keyup",i),window.removeEventListener("blur",a)}}}),[e,l]),r};function Hi(e,t,n){return e.filter((function(e){return n||e.length===t.size})).some((function(e){return e.every((function(e){return t.has(e)}))}))}function Vi(e,t){return t.includes(e)?"code":"key"}function Ki(e,t,n,o){var r,i,a,l,u,c,s,d;if(!e.parentNode)return n;var f=t.get(e.parentNode),h=Pr(f,o);return Ki(f,t,{x:(null!==(r=n.x)&&void 0!==r?r:0)+h.x,y:(null!==(i=n.y)&&void 0!==i?i:0)+h.y,z:(null!==(a=null===(l=f[Fo])||void 0===l?void 0:l.z)&&void 0!==a?a:0)>(null!==(u=n.z)&&void 0!==u?u:0)?null!==(c=null===(s=f[Fo])||void 0===s?void 0:s.z)&&void 0!==c?c:0:null!==(d=n.z)&&void 0!==d?d:0},o)}function Ui(e,t,n){e.forEach((function(o){if(o.parentNode&&!e.has(o.parentNode))throw new Error("Parent node ".concat(o.parentNode," not found"));if(o.parentNode||null!==n&&void 0!==n&&n[o.id]){var r,i,a=Ki(o,e,(0,l.Z)((0,l.Z)({},o.position),{},{z:null!==(r=null===(i=o[Fo])||void 0===i?void 0:i.z)&&void 0!==r?r:0}),t),u=a.x,c=a.y,s=a.z;o.positionAbsolute={x:u,y:c},o[Fo].z=s,null!==n&&void 0!==n&&n[o.id]&&(o[Fo].isParent=!0)}}))}function Fi(e,t,n,o){var r=new Map,i={},a=o?1e3:0;return e.forEach((function(e){var n,o=(Uo(e.zIndex)?e.zIndex:0)+(e.selected?a:0),u=t.get(e.id),c=(0,l.Z)((0,l.Z)({width:null===u||void 0===u?void 0:u.width,height:null===u||void 0===u?void 0:u.height},e),{},{positionAbsolute:{x:e.position.x,y:e.position.y}});e.parentNode&&(c.parentNode=e.parentNode,i[e.parentNode]=!0),Object.defineProperty(c,Fo,{enumerable:!1,value:{handleBounds:null===u||void 0===u||null===(n=u[Fo])||void 0===n?void 0:n.handleBounds,z:o}}),r.set(e.id,c)})),Ui(r,n,i),r}function Wi(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e(),o=n.getNodes,r=n.width,a=n.height,l=n.minZoom,u=n.maxZoom,c=n.d3Zoom,s=n.d3Selection,d=n.fitViewOnInitDone,f=n.fitViewOnInit,h=n.nodeOrigin,v=t.initial&&!d&&f;if(c&&s&&(v||!t.initial)){var g=o().filter((function(e){var n,o=t.includeHiddenNodes?e.width&&e.height:!e.hidden;return null!==(n=t.nodes)&&void 0!==n&&n.length?o&&t.nodes.some((function(t){return t.id===e.id})):o})),p=g.every((function(e){return e.width&&e.height}));if(g.length>0&&p){var y,m,b,x=Or(g,h),w=Dr(x,r,a,null!==(y=t.minZoom)&&void 0!==y?y:l,null!==(m=t.maxZoom)&&void 0!==m?m:u,null!==(b=t.padding)&&void 0!==b?b:.1),S=(0,i.Z)(w,3),E=S[0],_=S[1],C=S[2],N=lo.translate(E,_).scale(C);return"number"===typeof t.duration&&t.duration>0?c.transform(Ir(s,t.duration),N):c.transform(s,N),!0}}return!1}function Gi(e,t){return e.forEach((function(e){var n,o=t.get(e.id);o&&t.set(o.id,(0,l.Z)((0,l.Z)({},o),{},(n={},(0,r.Z)(n,Fo,o[Fo]),(0,r.Z)(n,"selected",e.selected),n)))})),new Map(t)}function qi(e,t){return t.map((function(t){var n=e.find((function(e){return e.id===t.id}));return n&&(t.selected=n.selected),t}))}function $i(e){var t=e.changedNodes,n=e.changedEdges,o=e.get,r=e.set,i=o(),a=i.nodeInternals,l=i.edges,u=i.onNodesChange,c=i.onEdgesChange,s=i.hasDefaultNodes,d=i.hasDefaultEdges;null!==t&&void 0!==t&&t.length&&(s&&r({nodeInternals:Gi(t,a)}),null===u||void 0===u||u(t)),null!==n&&void 0!==n&&n.length&&(d&&r({edges:qi(n,l)}),null===c||void 0===c||c(n))}var Qi=function(){},Ji={zoomIn:Qi,zoomOut:Qi,zoomTo:Qi,getZoom:function(){return 1},setViewport:Qi,getViewport:function(){return{x:0,y:0,zoom:1}},fitView:function(){return!1},setCenter:Qi,fitBounds:Qi,project:function(e){return e},viewportInitialized:!1},ea=function(e){return{d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}},ta=function(){var e=Po(),t=ko(ea,y),n=t.d3Zoom,o=t.d3Selection,r=(0,d.useMemo)((function(){return o&&n?{zoomIn:function(e){return n.scaleBy(Ir(o,null===e||void 0===e?void 0:e.duration),1.2)},zoomOut:function(e){return n.scaleBy(Ir(o,null===e||void 0===e?void 0:e.duration),1/1.2)},zoomTo:function(e,t){return n.scaleTo(Ir(o,null===t||void 0===t?void 0:t.duration),e)},getZoom:function(){return e.getState().transform[2]},setViewport:function(t,r){var a,l,u,c=(0,i.Z)(e.getState().transform,3),s=c[0],d=c[1],f=c[2],h=lo.translate(null!==(a=t.x)&&void 0!==a?a:s,null!==(l=t.y)&&void 0!==l?l:d).scale(null!==(u=t.zoom)&&void 0!==u?u:f);n.transform(Ir(o,null===r||void 0===r?void 0:r.duration),h)},getViewport:function(){var t=(0,i.Z)(e.getState().transform,3);return{x:t[0],y:t[1],zoom:t[2]}},fitView:function(t){return Wi(e.getState,t)},setCenter:function(t,r,i){var a=e.getState(),l=a.width,u=a.height,c=a.maxZoom,s="undefined"!==typeof(null===i||void 0===i?void 0:i.zoom)?i.zoom:c,d=l/2-t*s,f=u/2-r*s,h=lo.translate(d,f).scale(s);n.transform(Ir(o,null===i||void 0===i?void 0:i.duration),h)},fitBounds:function(t,r){var a,l=e.getState(),u=l.width,c=l.height,s=l.minZoom,d=l.maxZoom,f=Dr(t,u,c,s,d,null!==(a=null===r||void 0===r?void 0:r.padding)&&void 0!==a?a:.1),h=(0,i.Z)(f,3),v=h[0],g=h[1],p=h[2],y=lo.translate(v,g).scale(p);n.transform(Ir(o,null===r||void 0===r?void 0:r.duration),y)},project:function(t){var n=e.getState(),o=n.transform,r=n.snapToGrid,i=n.snapGrid;return Mr(t,o,r,i)},viewportInitialized:!0}:Ji}),[n,o]);return r};function na(){var e=ta(),t=Po(),n=(0,d.useCallback)((function(){return t.getState().getNodes().map((function(e){return(0,l.Z)({},e)}))}),[]),o=(0,d.useCallback)((function(e){return t.getState().nodeInternals.get(e)}),[]),r=(0,d.useCallback)((function(){var e=t.getState().edges;return(void 0===e?[]:e).map((function(e){return(0,l.Z)({},e)}))}),[]),u=(0,d.useCallback)((function(e){var n=t.getState().edges;return(void 0===n?[]:n).find((function(t){return t.id===e}))}),[]),c=(0,d.useCallback)((function(e){var n=t.getState(),o=n.getNodes,r=n.setNodes,i=n.hasDefaultNodes,a=n.onNodesChange,l=o(),u="function"===typeof e?e(l):e;if(i)r(u);else if(a){var c=0===u.length?l.map((function(e){return{type:"remove",id:e.id}})):u.map((function(e){return{item:e,type:"reset"}}));a(c)}}),[]),s=(0,d.useCallback)((function(e){var n=t.getState(),o=n.edges,r=void 0===o?[]:o,i=n.setEdges,a=n.hasDefaultEdges,l=n.onEdgesChange,u="function"===typeof e?e(r):e;if(a)i(u);else if(l){l(0===u.length?r.map((function(e){return{type:"remove",id:e.id}})):u.map((function(e){return{item:e,type:"reset"}})))}}),[]),f=(0,d.useCallback)((function(e){var n=Array.isArray(e)?e:[e],o=t.getState(),r=o.getNodes,i=o.setNodes,l=o.hasDefaultNodes,u=o.onNodesChange;if(l){var c=r();i([].concat((0,a.Z)(c),(0,a.Z)(n)))}else if(u){var s=n.map((function(e){return{item:e,type:"add"}}));u(s)}}),[]),h=(0,d.useCallback)((function(e){var n=Array.isArray(e)?e:[e],o=t.getState(),r=o.edges,i=void 0===r?[]:r,l=o.setEdges,u=o.hasDefaultEdges,c=o.onEdgesChange;if(u)l([].concat((0,a.Z)(i),(0,a.Z)(n)));else if(c){c(n.map((function(e){return{item:e,type:"add"}})))}}),[]),v=(0,d.useCallback)((function(){var e=t.getState(),n=e.getNodes,o=e.edges,r=void 0===o?[]:o,a=e.transform,u=(0,i.Z)(a,3),c=u[0],s=u[1],d=u[2];return{nodes:n().map((function(e){return(0,l.Z)({},e)})),edges:r.map((function(e){return(0,l.Z)({},e)})),viewport:{x:c,y:s,zoom:d}}}),[]),g=(0,d.useCallback)((function(e){var n=e.nodes,o=e.edges,r=t.getState(),i=r.nodeInternals,l=r.getNodes,u=r.edges,c=r.hasDefaultNodes,s=r.hasDefaultEdges,d=r.onNodesDelete,f=r.onEdgesDelete,h=r.onNodesChange,v=r.onEdgesChange,g=(n||[]).map((function(e){return e.id})),p=(o||[]).map((function(e){return e.id})),y=l().reduce((function(e,t){var n=!g.includes(t.id)&&t.parentNode&&e.find((function(e){return e.id===t.parentNode}));return("boolean"!==typeof t.deletable||t.deletable)&&(g.includes(t.id)||n)&&e.push(t),e}),[]),m=u.filter((function(e){return"boolean"!==typeof e.deletable||e.deletable})),b=m.filter((function(e){return p.includes(e.id)}));if(y||b){var x=Zr(y,m),w=[].concat((0,a.Z)(b),(0,a.Z)(x)),S=w.reduce((function(e,t){return e.includes(t.id)||e.push(t.id),e}),[]);if((s||c)&&(s&&t.setState({edges:u.filter((function(e){return!S.includes(e.id)}))}),c&&(y.forEach((function(e){i.delete(e.id)})),t.setState({nodeInternals:new Map(i)}))),S.length>0&&(null===f||void 0===f||f(w),v&&v(S.map((function(e){return{id:e,type:"remove"}})))),y.length>0)if(null===d||void 0===d||d(y),h)h(y.map((function(e){return{id:e.id,type:"remove"}})))}}),[]),p=(0,d.useCallback)((function(e){var n=Ko(e),o=n?null:t.getState().nodeInternals.get(e.id);return[n?e:Ho(o),o,n]}),[]),y=(0,d.useCallback)((function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=arguments.length>2?arguments[2]:void 0,r=p(e),a=(0,i.Z)(r,3),l=a[0],u=a[1],c=a[2];return l?(o||t.getState().getNodes()).filter((function(t){if(!c&&(t.id===u.id||!t.positionAbsolute))return!1;var o=Ho(t),r=Vo(o,l);return n&&r>0||r>=e.width*e.height})):[]}),[]),m=(0,d.useCallback)((function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=p(e),r=(0,i.Z)(o,1)[0];if(!r)return!1;var a=Vo(r,t);return n&&a>0||a>=e.width*e.height}),[]);return(0,d.useMemo)((function(){return(0,l.Z)((0,l.Z)({},e),{},{getNodes:n,getNode:o,getEdges:r,getEdge:u,setNodes:c,setEdges:s,addNodes:f,addEdges:h,toObject:v,deleteElements:g,getIntersectingNodes:y,isNodeIntersecting:m})}),[e,n,o,r,u,c,s,f,h,v,g,y,m])}var oa={position:"absolute",width:"100%",height:"100%",top:0,left:0},ra=function(e){return{x:e.x,y:e.y,zoom:e.k}},ia=function(e,t){return e.target.closest(".".concat(t))},aa=function(e,t){return 2===t&&Array.isArray(e)&&e.includes(2)},la=function(e){return{d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}},ua=function(e){var t=e.onMove,n=e.onMoveStart,o=e.onMoveEnd,r=e.onPaneContextMenu,i=e.zoomOnScroll,a=void 0===i||i,l=e.zoomOnPinch,u=void 0===l||l,c=e.panOnScroll,f=void 0!==c&&c,h=e.panOnScrollSpeed,v=void 0===h?.5:h,g=e.panOnScrollMode,p=void 0===g?tr.Free:g,m=e.zoomOnDoubleClick,b=void 0===m||m,x=e.elementsSelectable,w=e.panOnDrag,S=void 0===w||w,_=e.defaultViewport,C=e.translateExtent,N=e.minZoom,M=e.maxZoom,k=e.zoomActivationKeyCode,P=e.preventScrolling,O=void 0===P||P,A=e.children,Z=e.noWheelClassName,D=e.noPanClassName,I=(0,d.useRef)(),z=Po(),L=(0,d.useRef)(!1),T=(0,d.useRef)(!1),B=(0,d.useRef)(null),R=(0,d.useRef)({x:0,y:0,zoom:0}),j=ko(la,y),Y=j.d3Zoom,X=j.d3Selection,H=j.d3ZoomHandler,V=j.userSelectionActive,K=Xi(k),U=(0,d.useRef)(0);return function(e){var t=Po();(0,d.useEffect)((function(){var n,o=function(){if(e.current){var n,o,r=Io(e.current);0!==r.height&&0!==r.width||null===(n=(o=t.getState()).onError)||void 0===n||n.call(o,"004",No.error004()),t.setState({width:r.width||500,height:r.height||500})}};return o(),window.addEventListener("resize",o),e.current&&(n=new ResizeObserver((function(){return o()}))).observe(e.current),function(){window.removeEventListener("resize",o),n&&e.current&&n.unobserve(e.current)}}),[])}(B),(0,d.useEffect)((function(){if(B.current){var e=B.current.getBoundingClientRect(),t=function(){var e,t,n,o=so,r=fo,i=po,a=vo,l=go,u=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],s=250,d=ot,f=E("start","zoom","end"),h=500,v=150,g=0,p=10;function y(e){e.property("__zoom",ho).on("wheel.zoom",C,{passive:!1}).on("mousedown.zoom",N).on("dblclick.zoom",M).filter(l).on("touchstart.zoom",k).on("touchmove.zoom",P).on("touchend.zoom touchcancel.zoom",O).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function m(e,t){return(t=Math.max(u[0],Math.min(u[1],t)))===e.k?e:new ao(t,e.x,e.y)}function b(e,t,n){var o=t[0]-n[0]*e.k,r=t[1]-n[1]*e.k;return o===e.x&&r===e.y?e:new ao(e.k,o,r)}function x(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function w(e,t,n,o){e.on("start.zoom",(function(){S(this,arguments).event(o).start()})).on("interrupt.zoom end.zoom",(function(){S(this,arguments).event(o).end()})).tween("zoom",(function(){var e=this,i=arguments,a=S(e,i).event(o),l=r.apply(e,i),u=null==n?x(l):"function"===typeof n?n.apply(e,i):n,c=Math.max(l[1][0]-l[0][0],l[1][1]-l[0][1]),s=e.__zoom,f="function"===typeof t?t.apply(e,i):t,h=d(s.invert(u).concat(c/s.k),f.invert(u).concat(c/f.k));return function(e){if(1===e)e=f;else{var t=h(e),n=c/t[2];e=new ao(n,u[0]-t[0]*n,u[1]-t[1]*n)}a.zoom(null,e)}}))}function S(e,t,n){return!n&&e.__zooming||new _(e,t)}function _(e,t){this.that=e,this.args=t,this.active=0,this.sourceEvent=null,this.extent=r.apply(e,t),this.taps=0}function C(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(o.apply(this,arguments)){var l=S(this,n).event(e),s=this.__zoom,d=Math.max(u[0],Math.min(u[1],s.k*Math.pow(2,a.apply(this,arguments)))),f=Ye(e);if(l.wheel)l.mouse[0][0]===f[0]&&l.mouse[0][1]===f[1]||(l.mouse[1]=s.invert(l.mouse[0]=f)),clearTimeout(l.wheel);else{if(s.k===d)return;l.mouse=[f,s.invert(f)],It(this),l.start()}co(e),l.wheel=setTimeout((function(){l.wheel=null,l.end()}),v),l.zoom("mouse",i(b(m(s,d),l.mouse[0],l.mouse[1]),l.extent,c))}}function N(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];if(!n&&o.apply(this,arguments)){var l=e.currentTarget,u=S(this,r,!0).event(e),s=je(e.view).on("mousemove.zoom",(function(e){if(co(e),!u.moved){var t=e.clientX-f,n=e.clientY-h;u.moved=t*t+n*n>g}u.event(e).zoom("mouse",i(b(u.that.__zoom,u.mouse[0]=Ye(e,l),u.mouse[1]),u.extent,c))}),!0).on("mouseup.zoom",(function(e){s.on("mousemove.zoom mouseup.zoom",null),Fe(e.view,u.moved),co(e),u.event(e).end()}),!0),d=Ye(e,l),f=e.clientX,h=e.clientY;Ue(e.view),uo(e),u.mouse=[d,this.__zoom.invert(d)],It(this),u.start()}}function M(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];if(o.apply(this,arguments)){var l=this.__zoom,u=Ye(e.changedTouches?e.changedTouches[0]:e,this),d=l.invert(u),f=l.k*(e.shiftKey?.5:2),h=i(b(m(l,f),u,d),r.apply(this,n),c);co(e),s>0?je(this).transition().duration(s).call(w,h,u,e):je(this).call(y.transform,h,u,e)}}function k(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];if(o.apply(this,arguments)){var l,u,c,s,d=n.touches,f=d.length,v=S(this,i,n.changedTouches.length===f).event(n);for(uo(n),u=0;u<f;++u)s=[s=Ye(c=d[u],this),this.__zoom.invert(s),c.identifier],v.touch0?v.touch1||v.touch0[2]===s[2]||(v.touch1=s,v.taps=0):(v.touch0=s,l=!0,v.taps=1+!!e);e&&(e=clearTimeout(e)),l&&(v.taps<2&&(t=s[0],e=setTimeout((function(){e=null}),h)),It(this),v.start())}}function P(e){if(this.__zooming){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];var r,a,l,u,s=S(this,n).event(e),d=e.changedTouches,f=d.length;for(co(e),r=0;r<f;++r)l=Ye(a=d[r],this),s.touch0&&s.touch0[2]===a.identifier?s.touch0[0]=l:s.touch1&&s.touch1[2]===a.identifier&&(s.touch1[0]=l);if(a=s.that.__zoom,s.touch1){var h=s.touch0[0],v=s.touch0[1],g=s.touch1[0],p=s.touch1[1],y=(y=g[0]-h[0])*y+(y=g[1]-h[1])*y,x=(x=p[0]-v[0])*x+(x=p[1]-v[1])*x;a=m(a,Math.sqrt(y/x)),l=[(h[0]+g[0])/2,(h[1]+g[1])/2],u=[(v[0]+p[0])/2,(v[1]+p[1])/2]}else{if(!s.touch0)return;l=s.touch0[0],u=s.touch0[1]}s.zoom("touch",i(b(a,l,u),s.extent,c))}}function O(e){for(var o=arguments.length,r=new Array(o>1?o-1:0),i=1;i<o;i++)r[i-1]=arguments[i];if(this.__zooming){var a,l,u=S(this,r).event(e),c=e.changedTouches,s=c.length;for(uo(e),n&&clearTimeout(n),n=setTimeout((function(){n=null}),h),a=0;a<s;++a)l=c[a],u.touch0&&u.touch0[2]===l.identifier?delete u.touch0:u.touch1&&u.touch1[2]===l.identifier&&delete u.touch1;if(u.touch1&&!u.touch0&&(u.touch0=u.touch1,delete u.touch1),u.touch0)u.touch0[1]=this.__zoom.invert(u.touch0[0]);else if(u.end(),2===u.taps&&(l=Ye(l,this),Math.hypot(t[0]-l[0],t[1]-l[1])<p)){var d=je(this).on("dblclick.zoom");d&&d.apply(this,arguments)}}}return y.transform=function(e,t,n,o){var r=e.selection?e.selection():e;r.property("__zoom",ho),e!==r?w(e,t,n,o):r.interrupt().each((function(){S(this,arguments).event(o).start().zoom(null,"function"===typeof t?t.apply(this,arguments):t).end()}))},y.scaleBy=function(e,t,n,o){y.scaleTo(e,(function(){return this.__zoom.k*("function"===typeof t?t.apply(this,arguments):t)}),n,o)},y.scaleTo=function(e,t,n,o){y.transform(e,(function(){var e=r.apply(this,arguments),o=this.__zoom,a=null==n?x(e):"function"===typeof n?n.apply(this,arguments):n,l=o.invert(a),u="function"===typeof t?t.apply(this,arguments):t;return i(b(m(o,u),a,l),e,c)}),n,o)},y.translateBy=function(e,t,n,o){y.transform(e,(function(){return i(this.__zoom.translate("function"===typeof t?t.apply(this,arguments):t,"function"===typeof n?n.apply(this,arguments):n),r.apply(this,arguments),c)}),null,o)},y.translateTo=function(e,t,n,o,a){y.transform(e,(function(){var e=r.apply(this,arguments),a=this.__zoom,l=null==o?x(e):"function"===typeof o?o.apply(this,arguments):o;return i(lo.translate(l[0],l[1]).scale(a.k).translate("function"===typeof t?-t.apply(this,arguments):-t,"function"===typeof n?-n.apply(this,arguments):-n),e,c)}),o,a)},_.prototype={event:function(e){return e&&(this.sourceEvent=e),this},start:function(){return 1===++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0===--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){var t=je(this.that).datum();f.call(e,this.that,new io(e,{sourceEvent:this.sourceEvent,target:y,type:e,transform:this.that.__zoom,dispatch:f}),t)}},y.wheelDelta=function(e){return arguments.length?(a="function"===typeof e?e:ro(+e),y):a},y.filter=function(e){return arguments.length?(o="function"===typeof e?e:ro(!!e),y):o},y.touchable=function(e){return arguments.length?(l="function"===typeof e?e:ro(!!e),y):l},y.extent=function(e){return arguments.length?(r="function"===typeof e?e:ro([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),y):r},y.scaleExtent=function(e){return arguments.length?(u[0]=+e[0],u[1]=+e[1],y):[u[0],u[1]]},y.translateExtent=function(e){return arguments.length?(c[0][0]=+e[0][0],c[1][0]=+e[1][0],c[0][1]=+e[0][1],c[1][1]=+e[1][1],y):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},y.constrain=function(e){return arguments.length?(i=e,y):i},y.duration=function(e){return arguments.length?(s=+e,y):s},y.interpolate=function(e){return arguments.length?(d=e,y):d},y.on=function(){var e=f.on.apply(f,arguments);return e===f?y:e},y.clickDistance=function(e){return arguments.length?(g=(e=+e)*e,y):Math.sqrt(g)},y.tapDistance=function(e){return arguments.length?(p=+e,y):p},y}().scaleExtent([N,M]).translateExtent(C),n=je(B.current).call(t),o=lo.translate(_.x,_.y).scale(zo(_.zoom,N,M)),r=[[0,0],[e.width,e.height]],i=t.constrain()(o,r,C);t.transform(n,i),z.setState({d3Zoom:t,d3Selection:n,d3ZoomHandler:n.on("wheel.zoom"),transform:[i.x,i.y,i.k],domNode:B.current.closest(".react-flow")})}}),[]),(0,d.useEffect)((function(){X&&Y&&(!f||K||V?"undefined"!==typeof H&&X.on("wheel.zoom",(function(e,t){if(!O||ia(e,Z))return null;e.preventDefault(),H.call(this,e,t)}),{passive:!1}):X.on("wheel.zoom",(function(e){if(ia(e,Z))return!1;e.preventDefault(),e.stopImmediatePropagation();var t=X.property("__zoom").k||1;if(e.ctrlKey&&u){var n=Ye(e),o=-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*10,r=t*Math.pow(2,o);Y.scaleTo(X,r,n)}else{var i=1===e.deltaMode?20:1,a=p===tr.Vertical?0:e.deltaX*i,l=p===tr.Horizontal?0:e.deltaY*i;Y.translateBy(X,-a/t*v,-l/t*v)}}),{passive:!1}))}),[V,f,p,X,Y,H,K,u,O,Z]),(0,d.useEffect)((function(){Y&&Y.on("start",(function(e){var t;if(!e.sourceEvent)return null;U.current=e.sourceEvent.button;var o=z.getState().onViewportChangeStart;if(L.current=!0,"mousedown"===(null===(t=e.sourceEvent)||void 0===t?void 0:t.type)&&z.setState({paneDragging:!0}),n||o){var r=ra(e.transform);R.current=r,null===o||void 0===o||o(r),null===n||void 0===n||n(e.sourceEvent,r)}}))}),[Y,n]),(0,d.useEffect)((function(){Y&&(V&&!L.current?Y.on("zoom",null):V||Y.on("zoom",(function(e){var n,o=z.getState().onViewportChange;if(z.setState({transform:[e.transform.x,e.transform.y,e.transform.k]}),T.current=!(!r||!aa(S,null!==(n=U.current)&&void 0!==n?n:0)),t||o){var i=ra(e.transform);null===o||void 0===o||o(i),null===t||void 0===t||t(e.sourceEvent,i)}})))}),[V,Y,t,S,r]),(0,d.useEffect)((function(){Y&&Y.on("end",(function(e){var t;if(!e.sourceEvent)return null;var n,i,a=z.getState().onViewportChangeEnd;if(L.current=!1,z.setState({paneDragging:!1}),r&&aa(S,null!==(t=U.current)&&void 0!==t?t:0)&&!T.current&&r(e.sourceEvent),T.current=!1,(o||a)&&(n=R.current,i=e.transform,n.x!==i.x||n.y!==i.y||n.zoom!==i.k)){var l=ra(e.transform);R.current=l,clearTimeout(I.current),I.current=setTimeout((function(){null===a||void 0===a||a(l),null===o||void 0===o||o(e.sourceEvent,l)}),f?150:0)}}))}),[Y,f,S,o,r]),(0,d.useEffect)((function(){Y&&Y.filter((function(e){var t=K||a,n=u&&e.ctrlKey;if(1===e.button&&"mousedown"===e.type&&(ia(e,"react-flow__node")||ia(e,"react-flow__edge")))return!0;if(!S&&!t&&!f&&!b&&!u)return!1;if(V)return!1;if(!b&&"dblclick"===e.type)return!1;if(ia(e,Z)&&"wheel"===e.type)return!1;if(ia(e,D)&&"wheel"!==e.type)return!1;if(!u&&e.ctrlKey&&"wheel"===e.type)return!1;if(!t&&!f&&!n&&"wheel"===e.type)return!1;if(!S&&("mousedown"===e.type||"touchstart"===e.type))return!1;if(Array.isArray(S)&&!S.includes(e.button)&&("mousedown"===e.type||"touchstart"===e.type))return!1;var o=Array.isArray(S)&&S.includes(e.button)||!e.button||e.button<=1;return(!e.ctrlKey||"wheel"===e.type)&&o}))}),[V,Y,a,u,f,b,S,x,K]),(0,s.jsx)("div",{className:"react-flow__renderer",ref:B,style:oa,children:A})},ca=function(e){return{userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect}};function sa(){var e=ko(ca,y),t=e.userSelectionActive,n=e.userSelectionRect;return t&&n?(0,s.jsx)("div",{className:"react-flow__selection react-flow__container",style:{width:n.width,height:n.height,transform:"translate(".concat(n.x,"px, ").concat(n.y,"px)")}}):null}function da(e,t){var n=e.find((function(e){return e.id===t.parentNode}));if(n){var o=t.position.x+t.width-n.width,r=t.position.y+t.height-n.height;if(o>0||r>0||t.position.x<0||t.position.y<0){var i,a;if(n.style=(0,l.Z)({},n.style)||{},n.style.width=null!==(i=n.style.width)&&void 0!==i?i:n.width,n.style.height=null!==(a=n.style.height)&&void 0!==a?a:n.height,o>0&&(n.style.width+=o),r>0&&(n.style.height+=r),t.position.x<0){var u=Math.abs(t.position.x);n.position.x=n.position.x-u,n.style.width+=u,t.position.x=0}if(t.position.y<0){var c=Math.abs(t.position.y);n.position.y=n.position.y-c,n.style.height+=c,t.position.y=0}n.width=n.style.width,n.height=n.style.height}}}function fa(e,t){if(e.some((function(e){return"reset"===e.type})))return e.filter((function(e){return"reset"===e.type})).map((function(e){return e.item}));var n=e.filter((function(e){return"add"===e.type})).map((function(e){return e.item}));return t.reduce((function(t,n){var r=e.filter((function(e){return e.id===n.id}));if(0===r.length)return t.push(n),t;var i,a=(0,l.Z)({},n),u=(0,o.Z)(r);try{for(u.s();!(i=u.n()).done;){var c=i.value;if(c)switch(c.type){case"select":a.selected=c.selected;break;case"position":"undefined"!==typeof c.position&&(a.position=c.position),"undefined"!==typeof c.positionAbsolute&&(a.positionAbsolute=c.positionAbsolute),"undefined"!==typeof c.dragging&&(a.dragging=c.dragging),a.expandParent&&da(t,a);break;case"dimensions":"undefined"!==typeof c.dimensions&&(a.width=c.dimensions.width,a.height=c.dimensions.height),"undefined"!==typeof c.updateStyle&&(a.style=(0,l.Z)((0,l.Z)({},a.style||{}),c.dimensions)),"boolean"===typeof c.resizing&&(a.resizing=c.resizing),a.expandParent&&da(t,a);break;case"remove":return t}}}catch(s){u.e(s)}finally{u.f()}return t.push(a),t}),n)}function ha(e,t){return fa(e,t)}var va=function(e,t){return{id:e,type:"select",selected:t}};function ga(e,t){return e.reduce((function(e,n){var o=t.includes(n.id);return!n.selected&&o?(n.selected=!0,e.push(va(n.id,!0))):n.selected&&!o&&(n.selected=!1,e.push(va(n.id,!1))),e}),[])}var pa=function(e,t){return function(n){n.target===t.current&&(null===e||void 0===e||e(n))}},ya=function(e){return{userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}},ma=(0,d.memo)((function(e){var t=e.isSelecting,n=e.selectionMode,o=void 0===n?nr.Full:n,r=e.panOnDrag,i=e.onSelectionStart,a=e.onSelectionEnd,u=e.onPaneClick,c=e.onPaneContextMenu,h=e.onPaneScroll,v=e.onPaneMouseEnter,g=e.onPaneMouseMove,p=e.onPaneMouseLeave,m=e.children,b=(0,d.useRef)(null),x=Po(),w=(0,d.useRef)(0),S=(0,d.useRef)(0),E=(0,d.useRef)(),_=ko(ya,y),C=_.userSelectionActive,N=_.elementsSelectable,M=_.dragging,k=function(){x.setState({userSelectionActive:!1,userSelectionRect:null}),w.current=0,S.current=0},P=function(e){null===u||void 0===u||u(e),x.getState().resetSelectedElements(),x.setState({nodesSelectionActive:!1})},O=h?function(e){return h(e)}:void 0,A=N&&(t||C);return(0,s.jsxs)("div",{className:f(["react-flow__pane",{dragging:M,selection:t}]),onClick:A?void 0:pa(P,b),onContextMenu:pa((function(e){Array.isArray(r)&&null!==r&&void 0!==r&&r.includes(2)?e.preventDefault():null===c||void 0===c||c(e)}),b),onWheel:pa(O,b),onMouseEnter:A?void 0:v,onMouseDown:A?function(e){var n=x.getState(),o=n.resetSelectedElements,r=n.domNode;if(E.current=null===r||void 0===r?void 0:r.getBoundingClientRect(),N&&t&&0===e.button&&e.target===b.current&&E.current){var a=Qo(e,E.current),l=a.x,u=a.y;o(),x.setState({userSelectionRect:{width:0,height:0,startX:l,startY:u,x:l,y:u}}),null===i||void 0===i||i(e)}}:void 0,onMouseMove:A?function(e){var n,r,i=x.getState(),a=i.userSelectionRect,u=i.nodeInternals,c=i.edges,s=i.transform,d=i.onNodesChange,f=i.onEdgesChange,h=i.nodeOrigin,v=i.getNodes;if(t&&E.current&&a){x.setState({userSelectionActive:!0,nodesSelectionActive:!1});var g=Qo(e,E.current),p=null!==(n=a.startX)&&void 0!==n?n:0,y=null!==(r=a.startY)&&void 0!==r?r:0,m=(0,l.Z)((0,l.Z)({},a),{},{x:g.x<p?g.x:p,y:g.y<y?g.y:y,width:Math.abs(g.x-p),height:Math.abs(g.y-y)}),b=v(),_=Ar(u,m,s,o===nr.Partial,!0,h),C=Zr(_,c).map((function(e){return e.id})),N=_.map((function(e){return e.id}));if(w.current!==N.length){w.current=N.length;var M=ga(b,N);M.length&&(null===d||void 0===d||d(M))}if(S.current!==C.length){S.current=C.length;var k=ga(c,C);k.length&&(null===f||void 0===f||f(k))}x.setState({userSelectionRect:m})}}:g,onMouseUp:A?function(e){if(0===e.button){var t=x.getState().userSelectionRect;!C&&t&&e.target===b.current&&(null===P||void 0===P||P(e)),x.setState({nodesSelectionActive:w.current>0}),k(),null===a||void 0===a||a(e)}}:void 0,onMouseLeave:A?function(e){C&&(x.setState({nodesSelectionActive:w.current>0}),null===a||void 0===a||a(e)),k()}:p,ref:b,style:oa,children:[m,(0,s.jsx)(sa,{})]})}));ma.displayName="Pane";var ba=function(e){var t=e.getNodes().filter((function(e){return e.selected}));return(0,l.Z)((0,l.Z)({},Or(t,e.nodeOrigin)),{},{transformString:"translate(".concat(e.transform[0],"px,").concat(e.transform[1],"px) scale(").concat(e.transform[2],")"),userSelectionActive:e.userSelectionActive})};var xa=(0,d.memo)((function(e){var t=e.onSelectionContextMenu,n=e.noPanClassName,o=e.disableKeyboardA11y,r=Po(),i=ko(ba,y),a=i.width,l=i.height,u=i.x,c=i.y,h=i.transformString,v=i.userSelectionActive,g=Ti(),p=(0,d.useRef)(null);if((0,d.useEffect)((function(){var e;o||(null===(e=p.current)||void 0===e||e.focus({preventScroll:!0}))}),[o]),Li({nodeRef:p}),v||!a||!l)return null;var m=t?function(e){var n=r.getState().getNodes().filter((function(e){return e.selected}));t(e,n)}:void 0;return(0,s.jsx)("div",{className:f(["react-flow__nodesselection","react-flow__container",n]),style:{transform:h},children:(0,s.jsx)("div",{ref:p,className:"react-flow__nodesselection-rect",onContextMenu:m,tabIndex:o?void 0:-1,onKeyDown:o?void 0:function(e){Object.prototype.hasOwnProperty.call(Bi,e.key)&&g({x:Bi[e.key].x,y:Bi[e.key].y,isShiftPressed:e.shiftKey})},style:{width:a,height:l,top:c,left:u}})})})),wa=function(e){return e.nodesSelectionActive},Sa=function(e){var t=e.children,n=e.onPaneClick,o=e.onPaneMouseEnter,r=e.onPaneMouseMove,i=e.onPaneMouseLeave,a=e.onPaneContextMenu,l=e.onPaneScroll,u=e.deleteKeyCode,c=e.onMove,f=e.onMoveStart,h=e.onMoveEnd,v=e.selectionKeyCode,g=e.selectionOnDrag,p=e.selectionMode,y=e.onSelectionStart,m=e.onSelectionEnd,b=e.multiSelectionKeyCode,x=e.panActivationKeyCode,w=e.zoomActivationKeyCode,S=e.elementsSelectable,E=e.zoomOnScroll,_=e.zoomOnPinch,C=e.panOnScroll,N=e.panOnScrollSpeed,M=e.panOnScrollMode,k=e.zoomOnDoubleClick,P=e.panOnDrag,O=e.defaultViewport,A=e.translateExtent,Z=e.minZoom,D=e.maxZoom,I=e.preventScrolling,z=e.onSelectionContextMenu,L=e.noWheelClassName,T=e.noPanClassName,B=e.disableKeyboardA11y,R=ko(wa),j=Xi(v),Y=Xi(x)||P,X=j||g&&!0!==Y;return function(e){var t=e.deleteKeyCode,n=e.multiSelectionKeyCode,o=Po(),r=na().deleteElements,i=Xi(t),a=Xi(n);(0,d.useEffect)((function(){if(i){var e=o.getState(),t=e.edges,n=(0,e.getNodes)().filter((function(e){return e.selected})),a=t.filter((function(e){return e.selected}));r({nodes:n,edges:a}),o.setState({nodesSelectionActive:!1})}}),[i]),(0,d.useEffect)((function(){o.setState({multiSelectionActive:a})}),[a])}({deleteKeyCode:u,multiSelectionKeyCode:b}),(0,s.jsx)(ua,{onMove:c,onMoveStart:f,onMoveEnd:h,onPaneContextMenu:a,elementsSelectable:S,zoomOnScroll:E,zoomOnPinch:_,panOnScroll:C,panOnScrollSpeed:N,panOnScrollMode:M,zoomOnDoubleClick:k,panOnDrag:!j&&Y,defaultViewport:O,translateExtent:A,minZoom:Z,maxZoom:D,zoomActivationKeyCode:w,preventScrolling:I,noWheelClassName:L,noPanClassName:T,children:(0,s.jsxs)(ma,{onSelectionStart:y,onSelectionEnd:m,onPaneClick:n,onPaneMouseEnter:o,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:a,onPaneScroll:l,panOnDrag:Y,isSelecting:!!X,selectionMode:p,children:[t,R&&(0,s.jsx)(xa,{onSelectionContextMenu:z,noPanClassName:T,disableKeyboardA11y:B})]})})};Sa.displayName="FlowRenderer";var Ea=(0,d.memo)(Sa);var _a=function(e){return{nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}},Ca=function(e){var t,n=ko(_a,y),o=n.nodesDraggable,r=n.nodesConnectable,i=n.nodesFocusable,a=n.elementsSelectable,l=n.updateNodeDimensions,u=n.onError,c=(t=e.onlyRenderVisibleElements,ko((0,d.useCallback)((function(e){return t?Ar(e.nodeInternals,{x:0,y:0,width:e.width,height:e.height},e.transform,!0):e.getNodes()}),[t]))),f=(0,d.useRef)(),h=(0,d.useMemo)((function(){if("undefined"===typeof ResizeObserver)return null;var e=new ResizeObserver((function(e){var t=e.map((function(e){return{id:e.target.getAttribute("data-id"),nodeElement:e.target,forceUpdate:!0}}));l(t)}));return f.current=e,e}),[]);return(0,d.useEffect)((function(){return function(){var e;null===f||void 0===f||null===(e=f.current)||void 0===e||e.disconnect()}}),[]),(0,s.jsx)("div",{className:"react-flow__nodes",style:oa,children:c.map((function(t){var n,l,c,d,f,v,g,p=t.type||"default";e.nodeTypes[p]||(null===u||void 0===u||u("003",No.error003(p)),p="default");var y=e.nodeTypes[p]||e.nodeTypes.default,m=!!(t.draggable||o&&"undefined"===typeof t.draggable),b=!!(t.selectable||a&&"undefined"===typeof t.selectable),x=!!(t.connectable||r&&"undefined"===typeof t.connectable),w=!!(t.focusable||i&&"undefined"===typeof t.focusable),S=e.nodeExtent?Lo(t.positionAbsolute,e.nodeExtent):t.positionAbsolute,E=null!==(n=null===S||void 0===S?void 0:S.x)&&void 0!==n?n:0,_=null!==(l=null===S||void 0===S?void 0:S.y)&&void 0!==l?l:0,C=function(e){var t=e.x,n=e.y,o=e.width,r=e.height,i=e.origin;return o&&r?i[0]<0||i[1]<0||i[0]>1||i[1]>1?{x:t,y:n}:{x:t-o*i[0],y:n-r*i[1]}:{x:t,y:n}}({x:E,y:_,width:null!==(c=t.width)&&void 0!==c?c:0,height:null!==(d=t.height)&&void 0!==d?d:0,origin:e.nodeOrigin});return(0,s.jsx)(y,{id:t.id,className:t.className,style:t.style,type:p,data:t.data,sourcePosition:t.sourcePosition||ir.Bottom,targetPosition:t.targetPosition||ir.Top,hidden:t.hidden,xPos:E,yPos:_,xPosOrigin:C.x,yPosOrigin:C.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!t.selected,isDraggable:m,isSelectable:b,isConnectable:x,isFocusable:w,resizeObserver:h,dragHandle:t.dragHandle,zIndex:null!==(f=null===(v=t[Fo])||void 0===v?void 0:v.z)&&void 0!==f?f:0,isParent:!(null===(g=t[Fo])||void 0===g||!g.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!t.width&&!!t.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:t.ariaLabel},t.id)}))})};Ca.displayName="NodeRenderer";var Na=(0,d.memo)(Ca),Ma=[{level:0,isMaxLevel:!0,edges:[]}];function ka(e,t,n){var o=ko((0,d.useCallback)((function(n){return e?n.edges.filter((function(e){var o=t.get(e.source),r=t.get(e.target);return(null===o||void 0===o?void 0:o.width)&&(null===o||void 0===o?void 0:o.height)&&(null===r||void 0===r?void 0:r.width)&&(null===r||void 0===r?void 0:r.height)&&function(e){var t=e.sourcePos,n=e.targetPos,o=e.sourceWidth,r=e.sourceHeight,i=e.targetWidth,a=e.targetHeight,l=e.width,u=e.height,c=e.transform,s={x:Math.min(t.x,n.x),y:Math.min(t.y,n.y),x2:Math.max(t.x+o,n.x+i),y2:Math.max(t.y+r,n.y+a)};s.x===s.x2&&(s.x2+=1),s.y===s.y2&&(s.y2+=1);var d=Yo({x:(0-c[0])/c[2],y:(0-c[1])/c[2],width:l/c[2],height:u/c[2]}),f=Math.max(0,Math.min(d.x2,s.x2)-Math.max(d.x,s.x)),h=Math.max(0,Math.min(d.y2,s.y2)-Math.max(d.y,s.y));return Math.ceil(f*h)>0}({sourcePos:o.positionAbsolute||{x:0,y:0},targetPos:r.positionAbsolute||{x:0,y:0},sourceWidth:o.width,sourceHeight:o.height,targetWidth:r.width,targetHeight:r.height,width:n.width,height:n.height,transform:n.transform})})):n.edges}),[e,t]));return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=-1,r=e.reduce((function(e,r){var i,a,l,u,c=Uo(r.zIndex),s=c?r.zIndex:0;return n&&(s=c?r.zIndex:Math.max((null===(i=t.get(r.source))||void 0===i||null===(a=i[Fo])||void 0===a?void 0:a.z)||0,(null===(l=t.get(r.target))||void 0===l||null===(u=l[Fo])||void 0===u?void 0:u.z)||0)),e[s]?e[s].push(r):e[s]=[r],o=s>o?s:o,e}),{}),a=Object.entries(r).map((function(e){var t=(0,i.Z)(e,2),n=+t[0];return{edges:t[1],level:n,isMaxLevel:n===o}}));return 0===a.length?Ma:a}(o,t,n)}var Pa=(mo={},(0,r.Z)(mo,rr.Arrow,(function(e){var t=e.color,n=void 0===t?"none":t,o=e.strokeWidth,r=void 0===o?1:o;return(0,s.jsx)("polyline",{stroke:n,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:r,fill:"none",points:"-5,-4 0,0 -5,4"})})),(0,r.Z)(mo,rr.ArrowClosed,(function(e){var t=e.color,n=void 0===t?"none":t,o=e.strokeWidth,r=void 0===o?1:o;return(0,s.jsx)("polyline",{stroke:n,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:r,fill:n,points:"-5,-4 0,0 -5,4 -5,-4"})})),mo);var Oa=function(e){var t=e.id,n=e.type,o=e.color,r=e.width,i=void 0===r?12.5:r,a=e.height,l=void 0===a?12.5:a,u=e.markerUnits,c=void 0===u?"strokeWidth":u,f=e.strokeWidth,h=e.orient,v=void 0===h?"auto-start-reverse":h,g=function(e){var t=Po();return(0,d.useMemo)((function(){var n,o;return Object.prototype.hasOwnProperty.call(Pa,e)?Pa[e]:(null===(n=(o=t.getState()).onError)||void 0===n||n.call(o,"009",No.error009(e)),null)}),[e])}(n);return g?(0,s.jsx)("marker",{className:"react-flow__arrowhead",id:t,markerWidth:"".concat(i),markerHeight:"".concat(l),viewBox:"-10 -10 20 20",markerUnits:c,orient:v,refX:"0",refY:"0",children:(0,s.jsx)(g,{color:o,strokeWidth:f})}):null},Aa=function(e){var t=e.defaultColor,n=e.rfId,o=ko((0,d.useCallback)(function(e){var t=e.defaultColor,n=e.rfId;return function(e){var o=[];return e.edges.reduce((function(e,r){return[r.markerStart,r.markerEnd].forEach((function(r){if(r&&"object"===typeof r){var i=Nr(r,n);o.includes(i)||(e.push((0,l.Z)({id:i,color:r.color||t},r)),o.push(i))}})),e}),[]).sort((function(e,t){return e.id.localeCompare(t.id)}))}}({defaultColor:t,rfId:n}),[t,n]),(function(e,t){return!(e.length!==t.length||e.some((function(e,n){return e.id!==t[n].id})))}));return(0,s.jsx)("defs",{children:o.map((function(e){return(0,s.jsx)(Oa,{id:e.id,type:e.type,color:e.color,width:e.width,height:e.height,markerUnits:e.markerUnits,strokeWidth:e.strokeWidth,orient:e.orient},e.id)}))})};Aa.displayName="MarkerDefinitions";var Za=(0,d.memo)(Aa),Da=function(e){return{nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}},Ia=function(e){var t=e.defaultMarkerColor,n=e.onlyRenderVisibleElements,o=e.elevateEdgesOnSelect,r=e.rfId,a=e.edgeTypes,l=e.noPanClassName,u=e.onEdgeUpdate,c=e.onEdgeContextMenu,d=e.onEdgeMouseEnter,h=e.onEdgeMouseMove,v=e.onEdgeMouseLeave,g=e.onEdgeClick,p=e.edgeUpdaterRadius,m=e.onEdgeDoubleClick,b=e.onEdgeUpdateStart,x=e.onEdgeUpdateEnd,w=e.children,S=ko(Da,y),E=S.edgesFocusable,_=S.edgesUpdatable,C=S.elementsSelectable,N=S.width,M=S.height,k=S.connectionMode,P=S.nodeInternals,O=S.onError,A=ka(n,P,o);return N?(0,s.jsxs)(s.Fragment,{children:[A.map((function(e){var n=e.level,o=e.edges,y=e.isMaxLevel;return(0,s.jsxs)("svg",{style:{zIndex:n},width:N,height:M,className:"react-flow__edges react-flow__container",children:[y&&(0,s.jsx)(Za,{defaultColor:t,rfId:r}),(0,s.jsx)("g",{children:o.map((function(e){var t,n,o=Ni(P.get(e.source)),y=(0,i.Z)(o,3),w=y[0],S=y[1],N=y[2],M=Ni(P.get(e.target)),A=(0,i.Z)(M,3),Z=A[0],D=A[1],I=A[2];if(!N||!I)return null;var z=e.type||"default";a[z]||(null===O||void 0===O||O("011",No.error011(z)),z="default");var L=a[z]||a.default,T=k===er.Strict?D.target:(null!==(t=D.target)&&void 0!==t?t:[]).concat(null!==(n=D.source)&&void 0!==n?n:[]),B=Ci(S.source,e.sourceHandle),R=Ci(T,e.targetHandle),j=(null===B||void 0===B?void 0:B.position)||ir.Bottom,Y=(null===R||void 0===R?void 0:R.position)||ir.Top,X=!!(e.focusable||E&&"undefined"===typeof e.focusable),H="undefined"!==typeof u&&(e.updatable||_&&"undefined"===typeof e.updatable);if(!B||!R)return null===O||void 0===O||O("008",No.error008(B,e)),null;var V=function(e,t,n,o,r,i){var a=_i(n,e,t),l=_i(i,o,r);return{sourceX:a.x,sourceY:a.y,targetX:l.x,targetY:l.y}}(w,B,j,Z,R,Y),K=V.sourceX,U=V.sourceY,F=V.targetX,W=V.targetY;return(0,s.jsx)(L,{id:e.id,className:f([e.className,l]),type:z,data:e.data,selected:!!e.selected,animated:!!e.animated,hidden:!!e.hidden,label:e.label,labelStyle:e.labelStyle,labelShowBg:e.labelShowBg,labelBgStyle:e.labelBgStyle,labelBgPadding:e.labelBgPadding,labelBgBorderRadius:e.labelBgBorderRadius,style:e.style,source:e.source,target:e.target,sourceHandleId:e.sourceHandle,targetHandleId:e.targetHandle,markerEnd:e.markerEnd,markerStart:e.markerStart,sourceX:K,sourceY:U,targetX:F,targetY:W,sourcePosition:j,targetPosition:Y,elementsSelectable:C,onEdgeUpdate:u,onContextMenu:c,onMouseEnter:d,onMouseMove:h,onMouseLeave:v,onClick:g,edgeUpdaterRadius:p,onEdgeDoubleClick:m,onEdgeUpdateStart:b,onEdgeUpdateEnd:x,rfId:r,ariaLabel:e.ariaLabel,isFocusable:X,isUpdatable:H,pathOptions:"pathOptions"in e?e.pathOptions:void 0,interactionWidth:e.interactionWidth},e.id)}))})]},n)})),w]}):null};Ia.displayName="EdgeRenderer";var za=(0,d.memo)(Ia),La=function(e){return"translate(".concat(e.transform[0],"px,").concat(e.transform[1],"px) scale(").concat(e.transform[2],")")};function Ta(e){var t=e.children,n=ko(La);return(0,s.jsx)("div",{className:"react-flow__viewport react-flow__container",style:{transform:n},children:t})}var Ba=(bo={},(0,r.Z)(bo,ir.Left,ir.Right),(0,r.Z)(bo,ir.Right,ir.Left),(0,r.Z)(bo,ir.Top,ir.Bottom),(0,r.Z)(bo,ir.Bottom,ir.Top),bo),Ra=function(e){var t,n,o,r,a,u,c,f=e.nodeId,h=e.handleType,v=e.style,g=e.type,p=void 0===g?or.Bezier:g,m=e.CustomComponent,b=e.connectionStatus,x=ko((0,d.useCallback)((function(e){return{fromNode:e.nodeInternals.get(f),handleId:e.connectionHandleId,toX:(e.connectionPosition.x-e.transform[0])/e.transform[2],toY:(e.connectionPosition.y-e.transform[1])/e.transform[2],connectionMode:e.connectionMode}}),[f]),y),w=x.fromNode,S=x.handleId,E=x.toX,_=x.toY,C=x.connectionMode,N=null===w||void 0===w||null===(t=w[Fo])||void 0===t?void 0:t.handleBounds,M=null===N||void 0===N?void 0:N[h];if(C===er.Loose&&(M=M||(null===N||void 0===N?void 0:N["source"===h?"target":"source"])),!w||!M)return null;var k=S?M.find((function(e){return e.id===S})):M[0],P=k?k.x+k.width/2:(null!==(n=w.width)&&void 0!==n?n:0)/2,O=k?k.y+k.height/2:null!==(o=w.height)&&void 0!==o?o:0,A=(null!==(r=null===(a=w.positionAbsolute)||void 0===a?void 0:a.x)&&void 0!==r?r:0)+P,Z=(null!==(u=null===(c=w.positionAbsolute)||void 0===c?void 0:c.y)&&void 0!==u?u:0)+O,D=null===k||void 0===k?void 0:k.position,I=D?Ba[D]:null;if(!D||!I)return null;if(m)return(0,s.jsx)(m,{connectionLineType:p,connectionLineStyle:v,fromNode:w,fromHandle:k,fromX:A,fromY:Z,toX:E,toY:_,fromPosition:D,toPosition:I,connectionStatus:b});var z="",L={sourceX:A,sourceY:Z,sourcePosition:D,targetX:E,targetY:_,targetPosition:I};if(p===or.Bezier){var T=wr(L);z=(0,i.Z)(T,1)[0]}else if(p===or.Step){var B=gr((0,l.Z)((0,l.Z)({},L),{},{borderRadius:0}));z=(0,i.Z)(B,1)[0]}else if(p===or.SmoothStep){var R=gr(L);z=(0,i.Z)(R,1)[0]}else if(p===or.SimpleBezier){var j=sr(L);z=(0,i.Z)(j,1)[0]}else z="M".concat(A,",").concat(Z," ").concat(E,",").concat(_);return(0,s.jsx)("path",{d:z,fill:"none",className:"react-flow__connection-path",style:v})};Ra.displayName="ConnectionLine";var ja=function(e){return{nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height}};function Ya(e){var t=e.containerStyle,n=e.style,o=e.type,r=e.component,i=ko(ja,y),a=i.nodeId,l=i.handleType,u=i.nodesConnectable,c=i.width,d=i.height,h=i.connectionStatus;return!!(a&&l&&c&&u)?(0,s.jsx)("svg",{style:t,width:c,height:d,className:"react-flow__edges react-flow__connectionline react-flow__container",children:(0,s.jsx)("g",{className:f(["react-flow__connection",h]),children:(0,s.jsx)(Ra,{nodeId:a,handleType:l,style:n,type:o,CustomComponent:r,connectionStatus:h})})}):null}var Xa=function(e){var t=e.nodeTypes,n=e.edgeTypes,o=e.onMove,r=e.onMoveStart,i=e.onMoveEnd,a=e.onInit,l=e.onNodeClick,u=e.onEdgeClick,c=e.onNodeDoubleClick,f=e.onEdgeDoubleClick,h=e.onNodeMouseEnter,v=e.onNodeMouseMove,g=e.onNodeMouseLeave,p=e.onNodeContextMenu,y=e.onSelectionContextMenu,m=e.onSelectionStart,b=e.onSelectionEnd,x=e.connectionLineType,w=e.connectionLineStyle,S=e.connectionLineComponent,E=e.connectionLineContainerStyle,_=e.selectionKeyCode,C=e.selectionOnDrag,N=e.selectionMode,M=e.multiSelectionKeyCode,k=e.panActivationKeyCode,P=e.zoomActivationKeyCode,O=e.deleteKeyCode,A=e.onlyRenderVisibleElements,Z=e.elementsSelectable,D=e.selectNodesOnDrag,I=e.defaultViewport,z=e.translateExtent,L=e.minZoom,T=e.maxZoom,B=e.preventScrolling,R=e.defaultMarkerColor,j=e.zoomOnScroll,Y=e.zoomOnPinch,X=e.panOnScroll,H=e.panOnScrollSpeed,V=e.panOnScrollMode,K=e.zoomOnDoubleClick,U=e.panOnDrag,F=e.onPaneClick,W=e.onPaneMouseEnter,G=e.onPaneMouseMove,q=e.onPaneMouseLeave,$=e.onPaneScroll,Q=e.onPaneContextMenu,J=e.onEdgeUpdate,ee=e.onEdgeContextMenu,te=e.onEdgeMouseEnter,ne=e.onEdgeMouseMove,oe=e.onEdgeMouseLeave,re=e.edgeUpdaterRadius,ie=e.onEdgeUpdateStart,ae=e.onEdgeUpdateEnd,le=e.noDragClassName,ue=e.noWheelClassName,ce=e.noPanClassName,se=e.elevateEdgesOnSelect,de=e.disableKeyboardA11y,fe=e.nodeOrigin,he=e.nodeExtent,ve=e.rfId;return function(e){var t=na(),n=(0,d.useRef)(!1);(0,d.useEffect)((function(){!n.current&&t.viewportInitialized&&e&&(setTimeout((function(){return e(t)}),1),n.current=!0)}),[e,t.viewportInitialized])}(a),(0,s.jsx)(Ea,{onPaneClick:F,onPaneMouseEnter:W,onPaneMouseMove:G,onPaneMouseLeave:q,onPaneContextMenu:Q,onPaneScroll:$,deleteKeyCode:O,selectionKeyCode:_,selectionOnDrag:C,selectionMode:N,onSelectionStart:m,onSelectionEnd:b,multiSelectionKeyCode:M,panActivationKeyCode:k,zoomActivationKeyCode:P,elementsSelectable:Z,onMove:o,onMoveStart:r,onMoveEnd:i,zoomOnScroll:j,zoomOnPinch:Y,zoomOnDoubleClick:K,panOnScroll:X,panOnScrollSpeed:H,panOnScrollMode:V,panOnDrag:U,defaultViewport:I,translateExtent:z,minZoom:L,maxZoom:T,onSelectionContextMenu:y,preventScrolling:B,noDragClassName:le,noWheelClassName:ue,noPanClassName:ce,disableKeyboardA11y:de,children:(0,s.jsxs)(Ta,{children:[(0,s.jsx)(za,{edgeTypes:n,onEdgeClick:u,onEdgeDoubleClick:f,onEdgeUpdate:J,onlyRenderVisibleElements:A,onEdgeContextMenu:ee,onEdgeMouseEnter:te,onEdgeMouseMove:ne,onEdgeMouseLeave:oe,onEdgeUpdateStart:ie,onEdgeUpdateEnd:ae,edgeUpdaterRadius:re,defaultMarkerColor:R,noPanClassName:ce,elevateEdgesOnSelect:!!se,disableKeyboardA11y:de,rfId:ve,children:(0,s.jsx)(Ya,{style:w,type:x,component:S,containerStyle:E})}),(0,s.jsx)("div",{className:"react-flow__edgelabel-renderer"}),(0,s.jsx)(Na,{nodeTypes:t,onNodeClick:l,onNodeDoubleClick:c,onNodeMouseEnter:h,onNodeMouseMove:v,onNodeMouseLeave:g,onNodeContextMenu:p,selectNodesOnDrag:D,onlyRenderVisibleElements:A,noPanClassName:ce,noDragClassName:le,disableKeyboardA11y:de,nodeOrigin:fe,nodeExtent:he,rfId:ve})]})})};Xa.displayName="GraphView";var Ha=(0,d.memo)(Xa),Va=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Ka={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:Va,nodeExtent:Va,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:er.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:Go,isValidConnection:void 0},Ua=function(e){var t=e.children,n=(0,d.useRef)(null);return n.current||(n.current=p((function(e,t){return(0,l.Z)((0,l.Z)({},Ka),{},{setNodes:function(n){var o=t(),r=o.nodeInternals,i=o.nodeOrigin,a=o.elevateNodesOnSelect;e({nodeInternals:Fi(n,r,i,a)})},getNodes:function(){return Array.from(t().nodeInternals.values())},setEdges:function(n){var o=t().defaultEdgeOptions,r=void 0===o?{}:o;e({edges:n.map((function(e){return(0,l.Z)((0,l.Z)({},r),e)}))})},setDefaultNodesAndEdges:function(n,o){var r="undefined"!==typeof n,i="undefined"!==typeof o,a=r?Fi(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:a,edges:i?o:[],hasDefaultNodes:r,hasDefaultEdges:i})},updateNodeDimensions:function(n){var o=t(),i=o.onNodesChange,a=o.nodeInternals,u=o.fitViewOnInit,c=o.fitViewOnInitDone,s=o.fitViewOnInitOptions,d=o.domNode,f=o.nodeOrigin,h=null===d||void 0===d?void 0:d.querySelector(".react-flow__viewport");if(h){var v=window.getComputedStyle(h),g=new window.DOMMatrixReadOnly(v.transform).m22,p=n.reduce((function(e,t){var n=a.get(t.id);if(n){var o=Io(t.nodeElement);o.width&&o.height&&(n.width!==o.width||n.height!==o.height||t.forceUpdate)&&(a.set(n.id,(0,l.Z)((0,l.Z)({},n),{},(0,r.Z)({},Fo,(0,l.Z)((0,l.Z)({},n[Fo]),{},{handleBounds:{source:Zi(".source",t.nodeElement,g,f),target:Zi(".target",t.nodeElement,g,f)}})),o)),e.push({id:n.id,type:"dimensions",dimensions:o}))}return e}),[]);Ui(a,f);var y=c||u&&!c&&Wi(t,(0,l.Z)({initial:!0},s));e({nodeInternals:new Map(a),fitViewOnInitDone:y}),(null===p||void 0===p?void 0:p.length)>0&&(null===i||void 0===i||i(p))}},updateNodePositions:function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=t().triggerNodeChanges,i=e.map((function(e){var t={id:e.id,type:"position",dragging:o};return n&&(t.positionAbsolute=e.positionAbsolute,t.position=e.position),t}));r(i)},triggerNodeChanges:function(n){var o=t(),r=o.onNodesChange,i=o.nodeInternals,a=o.hasDefaultNodes,l=o.nodeOrigin,u=o.getNodes,c=o.elevateNodesOnSelect;if(null!==n&&void 0!==n&&n.length){if(a){var s=Fi(ha(n,u()),i,l,c);e({nodeInternals:s})}null===r||void 0===r||r(n)}},addSelectedNodes:function(n){var o,r=t(),i=r.multiSelectionActive,a=r.edges,l=r.getNodes,u=null;i?o=n.map((function(e){return va(e,!0)})):(o=ga(l(),n),u=ga(a,[])),$i({changedNodes:o,changedEdges:u,get:t,set:e})},addSelectedEdges:function(n){var o,r=t(),i=r.multiSelectionActive,a=r.edges,l=r.getNodes,u=null;i?o=n.map((function(e){return va(e,!0)})):(o=ga(a,n),u=ga(l(),[])),$i({changedNodes:u,changedEdges:o,get:t,set:e})},unselectNodesAndEdges:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=n.nodes,r=n.edges,i=t(),a=i.edges,l=i.getNodes,u=r||a;$i({changedNodes:(o||l()).map((function(e){return e.selected=!1,va(e.id,!1)})),changedEdges:u.map((function(e){return va(e.id,!1)})),get:t,set:e})},setMinZoom:function(n){var o=t(),r=o.d3Zoom,i=o.maxZoom;null===r||void 0===r||r.scaleExtent([n,i]),e({minZoom:n})},setMaxZoom:function(n){var o=t(),r=o.d3Zoom,i=o.minZoom;null===r||void 0===r||r.scaleExtent([i,n]),e({maxZoom:n})},setTranslateExtent:function(n){var o;null===(o=t().d3Zoom)||void 0===o||o.translateExtent(n),e({translateExtent:n})},resetSelectedElements:function(){var n=t(),o=n.edges;$i({changedNodes:(0,n.getNodes)().filter((function(e){return e.selected})).map((function(e){return va(e.id,!1)})),changedEdges:o.filter((function(e){return e.selected})).map((function(e){return va(e.id,!1)})),get:t,set:e})},setNodeExtent:function(n){var o=t().nodeInternals;o.forEach((function(e){e.positionAbsolute=Lo(e.position,n)})),e({nodeExtent:n,nodeInternals:new Map(o)})},panBy:function(e){var n=t(),o=n.transform,r=n.width,i=n.height,a=n.d3Zoom,l=n.d3Selection,u=n.translateExtent;if(!a||!l||!e.x&&!e.y)return!1;var c=lo.translate(o[0]+e.x,o[1]+e.y).scale(o[2]),s=[[0,0],[r,i]],d=null===a||void 0===a?void 0:a.constrain()(c,s,u);return a.transform(l,d),o[0]!==d.x||o[1]!==d.y||o[2]!==d.k},cancelConnection:function(){return e({connectionNodeId:Ka.connectionNodeId,connectionHandleId:Ka.connectionHandleId,connectionHandleType:Ka.connectionHandleType,connectionStatus:Ka.connectionStatus,connectionStartHandle:Ka.connectionStartHandle,connectionEndHandle:Ka.connectionEndHandle})},reset:function(){return e((0,l.Z)({},Ka))}})}))),(0,s.jsx)(Co,{value:n.current,children:t})};Ua.displayName="ReactFlowProvider";var Fa=function(e){var t=e.children;return(0,d.useContext)(_o)?(0,s.jsx)(s.Fragment,{children:t}):(0,s.jsx)(Ua,{children:t})};function Wa(e,t){(0,d.useRef)(null);return(0,d.useMemo)((function(){return t(e)}),[e])}Fa.displayName="ReactFlowWrapper";var Ga={input:Gr,default:Fr,output:$r,group:Qr},qa={default:Sr,straight:mr,step:yr,smoothstep:pr,simplebezier:dr},$a=[0,0],Qa=[15,15],Ja={x:0,y:0,zoom:1},el={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},tl=(0,d.forwardRef)((function(e,t){var n=e.nodes,o=e.edges,r=e.defaultNodes,i=e.defaultEdges,a=e.className,u=e.nodeTypes,d=void 0===u?Ga:u,h=e.edgeTypes,v=void 0===h?qa:h,g=e.onNodeClick,p=e.onEdgeClick,y=e.onInit,m=e.onMove,b=e.onMoveStart,x=e.onMoveEnd,w=e.onConnect,S=e.onConnectStart,E=e.onConnectEnd,_=e.onClickConnectStart,C=e.onClickConnectEnd,N=e.onNodeMouseEnter,M=e.onNodeMouseMove,k=e.onNodeMouseLeave,P=e.onNodeContextMenu,O=e.onNodeDoubleClick,A=e.onNodeDragStart,Z=e.onNodeDrag,D=e.onNodeDragStop,I=e.onNodesDelete,z=e.onEdgesDelete,L=e.onSelectionChange,T=e.onSelectionDragStart,B=e.onSelectionDrag,R=e.onSelectionDragStop,j=e.onSelectionContextMenu,Y=e.onSelectionStart,X=e.onSelectionEnd,H=e.connectionMode,V=void 0===H?er.Strict:H,K=e.connectionLineType,U=void 0===K?or.Bezier:K,F=e.connectionLineStyle,W=e.connectionLineComponent,G=e.connectionLineContainerStyle,q=e.deleteKeyCode,$=void 0===q?"Backspace":q,Q=e.selectionKeyCode,J=void 0===Q?"Shift":Q,ee=e.selectionOnDrag,te=void 0!==ee&&ee,ne=e.selectionMode,oe=void 0===ne?nr.Full:ne,re=e.panActivationKeyCode,ie=void 0===re?"Space":re,ae=e.multiSelectionKeyCode,le=void 0===ae?"Meta":ae,ue=e.zoomActivationKeyCode,ce=void 0===ue?"Meta":ue,se=e.snapToGrid,de=void 0!==se&&se,fe=e.snapGrid,he=void 0===fe?Qa:fe,ve=e.onlyRenderVisibleElements,ge=void 0!==ve&&ve,pe=e.selectNodesOnDrag,ye=void 0===pe||pe,me=e.nodesDraggable,be=e.nodesConnectable,xe=e.nodesFocusable,we=e.nodeOrigin,Se=void 0===we?$a:we,Ee=e.edgesFocusable,_e=e.edgesUpdatable,Ce=e.elementsSelectable,Ne=e.defaultViewport,Me=void 0===Ne?Ja:Ne,ke=e.minZoom,Pe=void 0===ke?.5:ke,Oe=e.maxZoom,Ae=void 0===Oe?2:Oe,Ze=e.translateExtent,De=void 0===Ze?Va:Ze,Ie=e.preventScrolling,ze=void 0===Ie||Ie,Le=e.nodeExtent,Te=e.defaultMarkerColor,Be=void 0===Te?"#b1b1b7":Te,Re=e.zoomOnScroll,je=void 0===Re||Re,Ye=e.zoomOnPinch,Xe=void 0===Ye||Ye,He=e.panOnScroll,Ve=void 0!==He&&He,Ke=e.panOnScrollSpeed,Ue=void 0===Ke?.5:Ke,Fe=e.panOnScrollMode,We=void 0===Fe?tr.Free:Fe,Ge=e.zoomOnDoubleClick,qe=void 0===Ge||Ge,$e=e.panOnDrag,Qe=void 0===$e||$e,Je=e.onPaneClick,et=e.onPaneMouseEnter,tt=e.onPaneMouseMove,nt=e.onPaneMouseLeave,ot=e.onPaneScroll,rt=e.onPaneContextMenu,it=e.children,at=e.onEdgeUpdate,lt=e.onEdgeContextMenu,ut=e.onEdgeDoubleClick,ct=e.onEdgeMouseEnter,st=e.onEdgeMouseMove,dt=e.onEdgeMouseLeave,ft=e.onEdgeUpdateStart,ht=e.onEdgeUpdateEnd,vt=e.edgeUpdaterRadius,gt=void 0===vt?10:vt,pt=e.onNodesChange,yt=e.onEdgesChange,mt=e.noDragClassName,bt=void 0===mt?"nodrag":mt,xt=e.noWheelClassName,wt=void 0===xt?"nowheel":xt,St=e.noPanClassName,Et=void 0===St?"nopan":St,_t=e.fitView,Ct=void 0!==_t&&_t,Nt=e.fitViewOptions,Mt=e.connectOnClick,kt=void 0===Mt||Mt,Pt=e.attributionPosition,Ot=e.proOptions,At=e.defaultEdgeOptions,Zt=e.elevateNodesOnSelect,Dt=void 0===Zt||Zt,It=e.elevateEdgesOnSelect,zt=void 0!==It&&It,Lt=e.disableKeyboardA11y,Tt=void 0!==Lt&&Lt,Bt=e.autoPanOnConnect,Rt=void 0===Bt||Bt,jt=e.autoPanOnNodeDrag,Yt=void 0===jt||jt,Xt=e.connectionRadius,Ht=void 0===Xt?20:Xt,Vt=e.isValidConnection,Kt=e.onError,Ut=e.style,Ft=e.id,Wt=c(e,Eo),Gt=Wa(d,ji),qt=Wa(v,Ei),$t=Ft||"1";return(0,s.jsx)("div",(0,l.Z)((0,l.Z)({},Wt),{},{style:(0,l.Z)((0,l.Z)({},Ut),el),ref:t,className:f(["react-flow",a]),"data-testid":"rf__wrapper",id:Ft,children:(0,s.jsxs)(Fa,{children:[(0,s.jsx)(Ha,{onInit:y,onMove:m,onMoveStart:b,onMoveEnd:x,onNodeClick:g,onEdgeClick:p,onNodeMouseEnter:N,onNodeMouseMove:M,onNodeMouseLeave:k,onNodeContextMenu:P,onNodeDoubleClick:O,nodeTypes:Gt,edgeTypes:qt,connectionLineType:U,connectionLineStyle:F,connectionLineComponent:W,connectionLineContainerStyle:G,selectionKeyCode:J,selectionOnDrag:te,selectionMode:oe,deleteKeyCode:$,multiSelectionKeyCode:le,panActivationKeyCode:ie,zoomActivationKeyCode:ce,onlyRenderVisibleElements:ge,selectNodesOnDrag:ye,defaultViewport:Me,translateExtent:De,minZoom:Pe,maxZoom:Ae,preventScrolling:ze,zoomOnScroll:je,zoomOnPinch:Xe,zoomOnDoubleClick:qe,panOnScroll:Ve,panOnScrollSpeed:Ue,panOnScrollMode:We,panOnDrag:Qe,onPaneClick:Je,onPaneMouseEnter:et,onPaneMouseMove:tt,onPaneMouseLeave:nt,onPaneScroll:ot,onPaneContextMenu:rt,onSelectionContextMenu:j,onSelectionStart:Y,onSelectionEnd:X,onEdgeUpdate:at,onEdgeContextMenu:lt,onEdgeDoubleClick:ut,onEdgeMouseEnter:ct,onEdgeMouseMove:st,onEdgeMouseLeave:dt,onEdgeUpdateStart:ft,onEdgeUpdateEnd:ht,edgeUpdaterRadius:gt,defaultMarkerColor:Be,noDragClassName:bt,noWheelClassName:wt,noPanClassName:Et,elevateEdgesOnSelect:zt,rfId:$t,disableKeyboardA11y:Tt,nodeOrigin:Se,nodeExtent:Le}),(0,s.jsx)(ui,{nodes:n,edges:o,defaultNodes:r,defaultEdges:i,onConnect:w,onConnectStart:S,onConnectEnd:E,onClickConnectStart:_,onClickConnectEnd:C,nodesDraggable:me,nodesConnectable:be,nodesFocusable:xe,edgesFocusable:Ee,edgesUpdatable:_e,elementsSelectable:Ce,elevateNodesOnSelect:Dt,minZoom:Pe,maxZoom:Ae,nodeExtent:Le,onNodesChange:pt,onEdgesChange:yt,snapToGrid:de,snapGrid:he,connectionMode:V,translateExtent:De,connectOnClick:kt,defaultEdgeOptions:At,fitView:Ct,fitViewOptions:Nt,onNodesDelete:I,onEdgesDelete:z,onNodeDragStart:A,onNodeDrag:Z,onNodeDragStop:D,onSelectionDrag:B,onSelectionDragStart:T,onSelectionDragStop:R,noPanClassName:Et,nodeOrigin:Se,rfId:$t,autoPanOnConnect:Rt,autoPanOnNodeDrag:Yt,onError:Kt,connectionRadius:Ht,isValidConnection:Vt}),(0,s.jsx)(ri,{onSelectionChange:L}),it,(0,s.jsx)(Zo,{proOptions:Ot,position:Pt}),(0,s.jsx)(pi,{rfId:$t,disableKeyboardA11y:Tt})]})}))}));tl.displayName="ReactFlow";function nl(e){return function(t){var n=(0,d.useState)(t),o=(0,i.Z)(n,2),r=o[0],a=o[1],l=(0,d.useCallback)((function(t){return a((function(n){return e(t,n)}))}),[]);return[r,a,l]}}var ol=nl(ha),rl=nl((function(e,t){return fa(e,t)}))},8107:function(){},4165:function(e,t,n){n.d(t,{Z:function(){return r}});var o=n(1002);function r(){r=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},l=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(O){s=function(e,t,n){return e[t]=n}}function d(e,t,n,o){var r=t&&t.prototype instanceof v?t:v,a=Object.create(r.prototype),l=new M(o||[]);return i(a,"_invoke",{value:E(e,n,l)}),a}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(O){return{type:"throw",arg:O}}}e.wrap=d;var h={};function v(){}function g(){}function p(){}var y={};s(y,l,(function(){return this}));var m=Object.getPrototypeOf,b=m&&m(m(k([])));b&&b!==t&&n.call(b,l)&&(y=b);var x=p.prototype=v.prototype=Object.create(y);function w(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function r(i,a,l,u){var c=f(e[i],e,a);if("throw"!==c.type){var s=c.arg,d=s.value;return d&&"object"==(0,o.Z)(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,l,u)}),(function(e){r("throw",e,l,u)})):t.resolve(d).then((function(e){s.value=e,l(s)}),(function(e){return r("throw",e,l,u)}))}u(c.arg)}var a;i(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function E(e,t,n){var o="suspendedStart";return function(r,i){if("executing"===o)throw new Error("Generator is already running");if("completed"===o){if("throw"===r)throw i;return P()}for(n.method=r,n.arg=i;;){var a=n.delegate;if(a){var l=_(a,n);if(l){if(l===h)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===o)throw o="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o="executing";var u=f(e,t,n);if("normal"===u.type){if(o=n.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o="completed",n.method="throw",n.arg=u.arg)}}}function _(e,t){var n=t.method,o=e.iterator[n];if(void 0===o)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var r=f(o,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,h;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function M(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function k(e){if(e){var t=e[l];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,r=function t(){for(;++o<e.length;)if(n.call(e,o))return t.value=e[o],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:P}}function P(){return{value:void 0,done:!0}}return g.prototype=p,i(x,"constructor",{value:p,configurable:!0}),i(p,"constructor",{value:g,configurable:!0}),g.displayName=s(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,c,"GeneratorFunction")),e.prototype=Object.create(x),e},e.awrap=function(e){return{__await:e}},w(S.prototype),s(S.prototype,u,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,o,r,i){void 0===i&&(i=Promise);var a=new S(d(t,n,o,r),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(x),s(x,c,"Generator"),s(x,l,(function(){return this})),s(x,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var o in t)n.push(o);return n.reverse(),function e(){for(;n.length;){var o=n.pop();if(o in t)return e.value=o,e.done=!1,e}return e.done=!0,e}},e.values=k,M.prototype={constructor:M,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(N),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function o(n,o){return a.type="throw",a.arg=e,t.next=n,o&&(t.method="next",t.arg=void 0),!!o}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],a=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var o=this.tryEntries.length-1;o>=0;--o){var r=this.tryEntries[o];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),N(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var o=n.completion;if("throw"===o.type){var r=o.arg;N(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},e}},9170:function(e,t,n){n.d(t,{iP:function(){return i}});var o=n(9439),r=n(2791);function i(){var e=r.useState({width:null,height:null}),t=(0,o.Z)(e,2),n=t[0],i=t[1];return r.useLayoutEffect((function(){var e=function(){i({width:window.innerWidth,height:window.innerHeight})};return e(),window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),n}}}]);
//# sourceMappingURL=21.405805b5.chunk.js.map