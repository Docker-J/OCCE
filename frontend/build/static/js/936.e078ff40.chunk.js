"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[936],{2612:(e,t,n)=>{n.d(t,{c:()=>i});var o=n(624);const i=e=>(0,o.w1)((e=>e.authToken.admin))&&e.children},5604:(e,t,n)=>{n.d(t,{c:()=>l});var o=n(6280),i=n(7132),r=n(9060),s=n(4864),a=n(1595),c=n(2496);const l=e=>{let{id:t,image:n,index:l,cover:d,setCoverImage:h,movePhoto:p,removeImage:g}=e;const m=(0,r.useRef)(null),[{isDragging:x},u]=(0,s.I)({type:"previewcard",item:()=>({id:t,index:l}),collect:e=>({isDragging:e.isDragging()})}),f=x?.7:1,[{handlerId:v},w]=(0,a.W)({accept:"previewcard",collect:e=>({handlerId:e.getHandlerId()}),hover(e,t){var n;if(!m.current)return;const o=e.index,i=l;if(o===i)return;const r=null===(n=m.current)||void 0===n?void 0:n.getBoundingClientRect(),s=(r.left-r.right)/2,a=t.getClientOffset().x-r.left;o<i&&a<s||o>i&&a<s||(p(o,i),h(i),e.index=i)}});return u(w(m)),(0,c.jsxs)("div",{ref:m,style:{position:"relative",borderRadius:2,border:d?"5px solid #4bb543":"1px solid #eaeaea",marginBottom:8,marginRight:l%3!==2?"calc(2%/2)":0,width:"calc(97%/3)",aspectRatio:"1/1",boxSizing:"border-box",cursor:"move",opacity:f,overflow:"hidden"},onClick:()=>h(l),children:[(0,c.jsx)("img",{src:n,alt:"preview",style:{width:"auto",height:"100%",objectFit:"cover"}}),(0,c.jsx)(o.c,{sx:{position:"absolute",zIndex:99,top:4,right:4,backgroundColor:"#f57c00",cursor:"pointer",width:30,height:30},onClick:()=>g(l),children:(0,c.jsx)(i.c,{sx:{color:"white"}})})]})}},5936:(e,t,n)=>{n.r(t),n.d(t,{default:()=>T});var o=n(9060),i=n(1640),r=n(6880),s=n(7256),a=n(8960),c=n(1088),l=n(1192),d=n(2904),h=n(8420),p=n(6200),g=n(12),m=n(2496);const x=e=>{let{posts:t}=e;return t.map((e=>(0,m.jsx)(p.c,{component:g.cH,to:e.ID,children:(0,m.jsx)("img",{src:"https://imagedelivery.net/ICo2WI8PXO_BVRlWfwzOww/".concat(e.Cover,"/thumbnail"),alt:"thumbnail",loading:"lazy"})},e.ID)))},u=(0,o.memo)(x);var f=n(2456),v=n(2160),w=n(771),j=n(1552),b=n.n(j),y=n(3556),C=n(5816),I=n(4192),k=n(5604),S=n(7856),R=n(8372);const O={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"90vw",height:"80vh",maxWidth:"1300px",bgcolor:"#ffffff",boxShadow:24,borderRadius:"0.5em",p:1,py:5,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},D=e=>{let{isOpen:t,onClose:n}=e;const{openSnackbar:i}=(0,S.c)(),a=()=>{x(),n()},[l,d]=(0,o.useState)([]),[h,p]=(0,o.useState)([]),g=e=>{URL.revokeObjectURL(h[e]),d((t=>b()(t,{$splice:[[e,1]]}))),p((t=>b()(t,{$splice:[[e,1]]})))},x=()=>{h.forEach((e=>URL.revokeObjectURL(e))),d([]),p([])},u=(0,o.useCallback)(((e,t)=>{d((n=>b()(n,{$splice:[[e,1],[t,0,n[e]]]}))),p((n=>b()(n,{$splice:[[e,1],[t,0,n[e]]]})))}),[]),{getRootProps:j,getInputProps:D}=(0,w.IX)({accept:{"image/*":[]},onDrop:e=>{var t;t=e,d((e=>[...e,...t])),t.forEach((e=>{p((t=>b()(t,{$push:[URL.createObjectURL(e)]})))}))},noDragEventsBubbling:!0}),E=(0,o.useCallback)(((e,t)=>(0,m.jsx)(k.c,{index:t,image:e,movePhoto:u,removeImage:g},t)),[]),[N,P]=(0,o.useState)(!1);return(0,m.jsx)(f.c,{open:t,onClose:a,children:(0,m.jsx)(s.c,{sx:O,children:N?(0,m.jsx)(c.c,{}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(C.q,{backend:I.i6,children:(0,m.jsx)("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",alignContent:"flex-start",justifyContent:"space-between",margin:"10pt",width:"95%",height:"75%",overflowX:"auto"},children:h.map(((e,t)=>E(e,t)))})}),(0,m.jsxs)("div",{style:{width:"95%",height:"20%",border:"1pt dotted #f57c00",borderRadius:"1em",overflowY:"auto"},...j(),children:[(0,m.jsx)("input",{...D()}),(0,m.jsx)(s.c,{sx:{position:"relative",height:"100%",widht:"100%"},children:(0,m.jsxs)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},children:[(0,m.jsx)(y.c,{fontSize:"large",color:"primary"}),(0,m.jsx)(r.c,{children:"Click or Drag Files to here"})]})})]}),(0,m.jsxs)("div",{style:{display:"flex",marginTop:"2em"},children:[(0,m.jsx)(v.c,{variant:"outlined",disabled:l.length<=0,onClick:async()=>{const e=new FormData;l.forEach((t=>{e.append("images",t)}));try{P(!0),await(async e=>{try{await R.c.post("/api/meditationON/uploadImage",e,{headers:{"Content-Type":"multipart/form-data"}})}catch{throw new Error}})(e),i("success","Uploaded Succesfully!"),a()}catch(t){console.log(t),i("error","Error Occured. Please contact to the administrator.")}finally{P(!1)}},children:"Submit"}),(0,m.jsx)(v.c,{variant:"outlined",onClick:x,disabled:l.length<=0,children:"Clear All"}),(0,m.jsx)(v.c,{variant:"outlined",onClick:a,children:"Close"})]})]})})})};var E=n(9672),N=(n(3243),n(2612)),P=n(1060),L=n(2532);const U={backgroundImage:'linear-gradient(rgba(0, 0, 0, 0.45), rgba(0, 0, 0, 0.45)), url("/img/Online/MeditationON.webp")'},T=()=>{const e=(0,i.c)("(min-width:1200px)"),{openModal:t}=(0,L.c)(),[n,p]=(0,o.useState)([]),[g,x]=(0,o.useState)(!1),[f,v]=(0,o.useState)(null),w=async()=>{console.log("test getPosts");const e=await(async e=>{try{return await R.c.get("/api/MeditationON/getPosts".concat(0===e.length?"":"?lastVisible=".concat(e.at(-1).ID,"&timeStamp=").concat(e.at(-1).Timestamp)))}catch{throw new Error}})(n);e.data.length>0?p((t=>[...t,...e.data])):x(!0)};(0,o.useEffect)((()=>{n.length%12!==0&&x(!0)}),[n]),(0,o.useEffect)((()=>(window.onpopstate=()=>{v(!0),console.log("test restore"),p(JSON.parse(sessionStorage.getItem("posts")))},v(!1),()=>{window.onpopstate=()=>{}})),[]),(0,o.useEffect)((()=>{null===f||f||w()}),[f]),(0,o.useEffect)((()=>()=>{sessionStorage.setItem("posts",JSON.stringify(n))}));const j=(0,o.useRef)();return(0,o.useEffect)((()=>{j.current&&!g&&n.length>=12&&setTimeout((()=>{try{const e=j.current.clientHeight,t=window.innerHeight-500;console.log("test content",e),console.log("test screen",t),e>100&&e<t&&w()}catch(e){}}),500)}),[n]),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{className:"title-wrapper",style:U,children:(0,m.jsx)("div",{className:"title",children:(0,m.jsx)(r.c,{variant:"h4",fontWeight:830,sx:{letterSpacing:"0.4em",pl:"0.4em",color:"white"},children:"\ubb35\uc0c1 ON"})})}),(0,m.jsx)("div",{className:"container-wrapper",children:(0,m.jsx)(s.c,{className:"container",sx:{px:{xs:"0 !important",md:"1.5em !important"},py:"0 !important"},children:n.length<=0?(0,m.jsx)(a.c,{alignItems:"center",children:(0,m.jsx)(c.c,{})}):(0,m.jsx)(E.c,{dataLength:n.length,next:w,hasMore:!g,loader:(0,m.jsx)(a.c,{alignItems:"center",children:(0,m.jsx)(c.c,{})}),scrollThreshold:1,style:{overflowY:"hidden"},children:(0,m.jsx)(l.c,{ref:j,cols:e?4:3,gap:3,children:(0,m.jsx)(u,{posts:n})})})})}),(0,m.jsx)(N.c,{children:(0,m.jsx)(d.c,{variant:"primary",style:{position:"fixed",right:"2vw",bottom:"3vh"},onClick:()=>t(D,{}),children:(0,m.jsx)(h.c,{})})}),g&&(0,m.jsx)(P.c,{})]})}},3243:()=>{}}]);
//# sourceMappingURL=936.e078ff40.chunk.js.map