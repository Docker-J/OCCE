"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[100],{2612:(e,t,s)=>{s.d(t,{c:()=>o});var n=s(624);const o=e=>(0,n.w1)((e=>e.authToken.admin))&&e.children},4100:(e,t,s)=>{s.r(t),s.d(t,{default:()=>T});var n=s(9060),o=s(1640),c=s(6880),a=s(8960),l=s(1088),r=s(1192),i=s(2904),h=s(8420),d=s(8372),p=s(6200),g=s(3260),u=s(12),x=s(2496);const m=e=>{let{photos:t}=e;return t.map((e=>(0,x.jsxs)(p.c,{component:u.cH,to:e.id,children:[(0,x.jsx)("img",{src:e.cover,alt:"test",loading:"lazy"}),(0,x.jsx)(g.c,{title:e.title})]},e.id)))},f=(0,n.memo)(m);var j=s(9672),w=s(2532),b=s(2612),v=s(1060),S=(s(3243),s(2456)),y=s(7256),k=s(2184),C=s(2160);s(940);const E=e=>{let{isOpen:t,onClose:s}=e;const[o,c]=(0,n.useState)("");return(0,x.jsx)(S.c,{open:t,onClose:()=>{s()},children:(0,x.jsxs)(y.c,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"800px",height:"800px",bgcolor:"#ffffff",border:"0.1px solid #f57c00",boxShadow:24,p:2},bgcolor:"white",children:[(0,x.jsx)(k.c,{type:"url",helperText:"Enter the album URL",onChange:e=>c(e.currentTarget.value)}),(0,x.jsx)(C.c,{onClick:async function(){await d.c.post("/api/photos/uploadAlbum",{url:o})},variant:"contained",component:"label",children:"Submit"})]})})},N={backgroundImage:'linear-gradient(rgba(0, 0, 0, 0.30), rgba(0, 0, 0, 0.30)), url("/img/WeeklyUpdate.jpg")'},T=()=>{const e=(0,o.c)("(min-width:1200px)"),{openModal:t}=(0,w.c)(),[s,p]=(0,n.useState)([]),[g,u]=(0,n.useState)(!1),[m,S]=(0,n.useState)(!0),y=async()=>{console.log("test getPosts");const e=await d.c.get("/api/photos/getPhotos".concat(0===s.length?"":"?lastVisible=".concat(s.at(-1).id,"&timeStamp=").concat(s.at(-1).Timestamp)));e.data.length>0?p((t=>[...t,...e.data])):u(!0)};(0,n.useEffect)((()=>{s.length%12!==0&&u(!0)}),[s]),(0,n.useEffect)((()=>(window.onpopstate=()=>{S(!0),console.log("test restore"),p(JSON.parse(sessionStorage.getItem("posts")))},S(!1),()=>{window.onpopstate=()=>{}})),[]),(0,n.useEffect)((()=>{null===m||m||y()}),[m]),(0,n.useEffect)((()=>()=>{sessionStorage.setItem("photos",JSON.stringify(s))}));const k=(0,n.useRef)();return(0,n.useEffect)((()=>{k.current&&!g&&s.length>=12&&setTimeout((()=>{try{const e=k.current.clientHeight,t=window.innerHeight-500;console.log("test content",e),console.log("test screen",t),e>100&&e<t&&y()}catch(e){}}),500)}),[s]),(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{className:"title-wrapper",style:N,children:(0,x.jsx)("div",{className:"title",children:(0,x.jsx)(c.c,{variant:"h4",fontWeight:830,sx:{letterSpacing:"0.4em",pl:"0.4em",color:"white"},children:"\uad50\ud68c\uc0ac\uc9c4"})})}),(0,x.jsx)("div",{className:"container-wrapper",children:(0,x.jsx)("div",{className:"container",children:0===s.length?(0,x.jsx)(a.c,{alignItems:"center",children:(0,x.jsx)(l.c,{})}):(0,x.jsx)(j.c,{dataLength:s.length,next:y,hasMore:!g,loader:(0,x.jsx)(l.c,{}),scrollThreshold:1,style:{overflowY:"hidden"},children:(0,x.jsx)(r.c,{ref:k,cols:e?4:3,gap:2.5,children:(0,x.jsx)(f,{photos:s})})})})}),(0,x.jsx)(b.c,{children:(0,x.jsx)(i.c,{variant:"primary",style:{position:"fixed",right:"2vw",bottom:"3vh"},onClick:()=>t(E,{}),children:(0,x.jsx)(h.c,{})})}),g&&(0,x.jsx)(v.c,{})]})}},3243:()=>{}}]);
//# sourceMappingURL=100.f3895bdb.chunk.js.map