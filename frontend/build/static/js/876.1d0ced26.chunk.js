"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[876],{5876:function(t,o,e){e.r(o),e.d(o,{default:function(){return H}});var n=e(4165),i=e(3433),r=e(5861),a=e(9439),s=e(2791),c=e(3239),l=e(2763),u=e(9877),p=e(2419),f=e(1243),d=e(7888),h=e(3366),m=e(7462),g=e(4419),x=e(9278),Z=e(6934),v=e(1402),w=e(4036),I=e(5878),b=e(1217);function S(t){return(0,b.Z)("MuiImageListItemBar",t)}(0,I.Z)("MuiImageListItemBar",["root","positionBottom","positionTop","positionBelow","titleWrap","titleWrapBottom","titleWrapTop","titleWrapBelow","titleWrapActionPosLeft","titleWrapActionPosRight","title","subtitle","actionIcon","actionIconActionPosLeft","actionIconActionPosRight"]);var P=e(184),j=["actionIcon","actionPosition","className","subtitle","title","position"],y=(0,Z.ZP)("div",{name:"MuiImageListItemBar",slot:"Root",overridesResolver:function(t,o){var e=t.ownerState;return[o.root,o["position".concat((0,w.Z)(e.position))]]}})((function(t){var o=t.theme,e=t.ownerState;return(0,m.Z)({position:"absolute",left:0,right:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",fontFamily:o.typography.fontFamily},"bottom"===e.position&&{bottom:0},"top"===e.position&&{top:0},"below"===e.position&&{position:"relative",background:"transparent",alignItems:"normal"})})),W=(0,Z.ZP)("div",{name:"MuiImageListItemBar",slot:"TitleWrap",overridesResolver:function(t,o){var e=t.ownerState;return[o.titleWrap,o["titleWrap".concat((0,w.Z)(e.position))],e.actionIcon&&o["titleWrapActionPos".concat((0,w.Z)(e.actionPosition))]]}})((function(t){var o=t.theme,e=t.ownerState;return(0,m.Z)({flexGrow:1,padding:"12px 16px",color:(o.vars||o).palette.common.white,overflow:"hidden"},"below"===e.position&&{padding:"6px 0 12px",color:"inherit"},e.actionIcon&&"left"===e.actionPosition&&{paddingLeft:0},e.actionIcon&&"right"===e.actionPosition&&{paddingRight:0})})),L=(0,Z.ZP)("div",{name:"MuiImageListItemBar",slot:"Title",overridesResolver:function(t,o){return o.title}})((function(t){return{fontSize:t.theme.typography.pxToRem(16),lineHeight:"24px",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}})),M=(0,Z.ZP)("div",{name:"MuiImageListItemBar",slot:"Subtitle",overridesResolver:function(t,o){return o.subtitle}})((function(t){return{fontSize:t.theme.typography.pxToRem(12),lineHeight:1,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}})),R=(0,Z.ZP)("div",{name:"MuiImageListItemBar",slot:"ActionIcon",overridesResolver:function(t,o){var e=t.ownerState;return[o.actionIcon,o["actionIconActionPos".concat((0,w.Z)(e.actionPosition))]]}})((function(t){var o=t.ownerState;return(0,m.Z)({},"left"===o.actionPosition&&{order:-1})})),B=s.forwardRef((function(t,o){var e=(0,v.Z)({props:t,name:"MuiImageListItemBar"}),n=e.actionIcon,i=e.actionPosition,r=void 0===i?"right":i,a=e.className,s=e.subtitle,c=e.title,l=e.position,u=void 0===l?"bottom":l,p=(0,h.Z)(e,j),f=(0,m.Z)({},e,{position:u,actionPosition:r}),d=function(t){var o=t.classes,e=t.position,n=t.actionIcon,i=t.actionPosition,r={root:["root","position".concat((0,w.Z)(e))],titleWrap:["titleWrap","titleWrap".concat((0,w.Z)(e)),n&&"titleWrapActionPos".concat((0,w.Z)(i))],title:["title"],subtitle:["subtitle"],actionIcon:["actionIcon","actionIconActionPos".concat((0,w.Z)(i))]};return(0,g.Z)(r,S,o)}(f);return(0,P.jsxs)(y,(0,m.Z)({ownerState:f,className:(0,x.Z)(d.root,a),ref:o},p,{children:[(0,P.jsxs)(W,{ownerState:f,className:d.titleWrap,children:[(0,P.jsx)(L,{className:d.title,children:c}),s?(0,P.jsx)(M,{className:d.subtitle,children:s}):null]}),n?(0,P.jsx)(R,{ownerState:f,className:d.actionIcon,children:n}):null]}))})),k=e(1087),A=function(t){return t.photos.map((function(t){return(0,P.jsxs)(d.Z,{component:k.rU,to:t.id,children:[(0,P.jsx)("img",{src:t.cover,alt:"test",loading:"lazy"}),(0,P.jsx)(B,{title:t.title})]},t.id)}))},N=(0,s.memo)(A),T=e(3590),C=e(4554),O=e(8641),E=e(4518),z=(e(7984),function(t){var o=t.openModal,e=t.setOpenModal,i=(0,s.useState)(""),c=(0,a.Z)(i,2),l=c[0],u=c[1];function p(){return(p=(0,r.Z)((0,n.Z)().mark((function t(){return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.Z.post("/api/photos/uploadAlbum",{url:l});case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return(0,P.jsx)(T.Z,{open:o,onClose:function(){e(!1)},children:(0,P.jsxs)(C.Z,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"800px",height:"800px",bgcolor:"#ffffff",border:"0.1px solid #f57c00",boxShadow:24,p:2},bgcolor:"white",children:[(0,P.jsx)(O.Z,{type:"url",helperText:"Enter the album URL",onChange:function(t){return u(t.currentTarget.value)}}),(0,P.jsx)(E.Z,{onClick:function(){return p.apply(this,arguments)},variant:"contained",component:"label",children:"Submit"})]})})}),F=e(4771),H=function(){var t=(0,s.useState)([]),o=(0,a.Z)(t,2),e=o[0],d=o[1],h=(0,s.useState)(!1),m=(0,a.Z)(h,2),g=m[0],x=m[1],Z=(0,s.useState)(!0),v=(0,a.Z)(Z,2),w=v[0],I=v[1],b=function(){var t=(0,r.Z)((0,n.Z)().mark((function t(){var o;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("test getPosts"),t.next=3,f.Z.get("/api/photos/getPhotos".concat(0===e.length?"":"?lastVisible=".concat(e.at(-1).id)));case 3:o=t.sent,d((function(t){return[].concat((0,i.Z)(t),(0,i.Z)(o.data))}));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();(0,s.useEffect)((function(){e.length%12!==0&&x(!0)}),[e]);(0,s.useEffect)((function(){return window.onpopstate=function(){I(!0),console.log("test restore"),d(JSON.parse(sessionStorage.getItem("photos")))},I(!1),function(){window.onpopstate=function(){}}}),[]),(0,s.useEffect)((function(){w||b()}),[w]),(0,s.useEffect)((function(){return function(){sessionStorage.setItem("photos",JSON.stringify(e))}}));var S=(0,s.useState)(!1),j=(0,a.Z)(S,2),y=j[0],W=j[1];return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("h1",{children:"\uc0ac\uc9c4"}),(0,P.jsx)("div",{style:{position:"absolute",width:"100%",maxWidth:"1500px",left:"50%",transform:"translateX(-50%)"},children:0!==e.length?(0,P.jsx)(F.Z,{dataLength:e.length,next:b,hasMore:!g,loader:(0,P.jsx)(c.Z,{}),scrollThreshold:.75,style:{overflowY:"hidden"},children:(0,P.jsx)(l.Z,{sx:{mx:"0.5rem"},cols:3,gap:2.5,children:(0,P.jsx)(N,{photos:e})})}):(0,P.jsx)(c.Z,{})}),(0,P.jsx)(u.Z,{variant:"primary",style:{position:"fixed",right:"2vw",bottom:"3vh"},onClick:function(){W(!0)},children:(0,P.jsx)(p.Z,{})}),(0,P.jsx)(z,{openModal:y,setOpenModal:W})]})}}}]);
//# sourceMappingURL=876.1d0ced26.chunk.js.map