"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[508],{7508:function(t,e,n){n.r(e),n.d(e,{default:function(){return I}});var o=n(4165),i=n(3433),r=n(5861),s=n(9439),c=n(2791),a=n(890),l=n(3239),u=n(2763),f=n(9877),d=n(2419),p=n(1243),h=n(7888),g=n(1087),x=n(184),m=function(t){return t.posts.map((function(t){return(0,x.jsx)(h.Z,{component:g.rU,to:t.id,children:(0,x.jsx)("img",{src:t[0],alt:"test",loading:"lazy"})},t.id)}))},v=(0,c.memo)(m),b=n(1413),Z=n(8447),j=n(4554),w=n(3400),y=(n(7984),n(7831)),k=n(2074),S=n(6401),R=n(7247),O=function(t){var e=t.openModal,n=t.setOpenModal,o=(0,c.useState)([]),r=(0,s.Z)(o,2),a=r[0],l=r[1],u=(0,c.useState)([]),f=(0,s.Z)(u,2),d=f[0],p=f[1],h=function(t){l((function(e){return[].concat((0,i.Z)(e),(0,i.Z)(t))}))};(0,c.useEffect)((function(){p([]),a.forEach((function(t){p((function(e){return[].concat((0,i.Z)(e),[URL.createObjectURL(t)])}))}))}),[a]);(0,c.useEffect)((function(){return function(){d.map((function(t){return URL.revokeObjectURL(t)}))}}));var g=(0,y.uI)({noClick:!0,accept:{"image/*":[]},onDrop:function(t){h(t)}}),m=g.getRootProps,v=g.getInputProps;g.open;return(0,x.jsx)(Z.Z,{open:e,onClose:function(){l([]),p([]),n(!1)},children:(0,x.jsx)(j.Z,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"80vw",height:"80vh",maxWidth:"1300px",bgcolor:"#ffffff",boxShadow:24,borderRadius:"0.5em",p:1,pt:5,pb:5,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},bgcolor:"white",children:(0,x.jsxs)("div",(0,b.Z)((0,b.Z)({style:{width:"95%",height:"90%",border:"1pt dotted #f57c00",borderRadius:"1em",overflowY:"auto"}},m()),{},{children:[(0,x.jsx)("input",(0,b.Z)({onChange:function(t){return h(t)}},v())),0===a.length?"Click or Drag Files":(0,x.jsx)(k.W,{backend:S.PD,children:(0,x.jsx)("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",margin:"10pt"},children:d.map((function(t){return(0,x.jsxs)("div",{style:{position:"relative",display:"inline-flex",borderRadius:2,border:"1px solid #eaeaea",marginBottom:8,marginRight:8,width:"18vw",height:"18vw",padding:4,boxSizing:"border-box"},children:[(0,x.jsx)("div",{style:{display:"flex",minWidth:0,overflow:"hidden"},children:(0,x.jsx)("img",{src:t,alt:"preview",style:{display:"block",width:"auto",height:"100%"},onClick:function(t){return function(t){var e,n=t.target.src;for(e=0;e<d.length&&d[e]!==n;e++);URL.revokeObjectURL(d[e]);var o=(0,i.Z)(a);o.splice(e,1),l(o)}(t)}})}),(0,x.jsx)(w.Z,{style:{position:"absolute",display:"block",zIndex:99,top:0,right:0},children:(0,x.jsx)(R.Z,{})})]})}))})})]}))})})},C=n(4771),E=(n(6527),{backgroundImage:'linear-gradient(rgba(0, 0, 0, 0.45), rgba(0, 0, 0, 0.45)), url("/img/Online/MeditationON.webp")'}),I=function(){var t=(0,c.useState)([]),e=(0,s.Z)(t,2),n=e[0],h=e[1],g=(0,c.useState)(!1),m=(0,s.Z)(g,2),b=m[0],Z=m[1],j=(0,c.useState)(!0),w=(0,s.Z)(j,2),y=w[0],k=w[1],S=function(){var t=(0,r.Z)((0,o.Z)().mark((function t(){var e;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("test getPosts"),t.next=3,p.Z.get("/api/MeditationON/getPosts".concat(0===n.length?"":"?lastVisible=".concat(n.at(-1).id)));case 3:e=t.sent,h((function(t){return[].concat((0,i.Z)(t),(0,i.Z)(e.data))}));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();(0,c.useEffect)((function(){n.length%12!==0&&Z(!0)}),[n]);(0,c.useEffect)((function(){return window.onpopstate=function(){k(!0),console.log("test restore"),h(JSON.parse(sessionStorage.getItem("posts")))},k(!1),function(){window.onpopstate=function(){}}}),[]),(0,c.useEffect)((function(){y||S()}),[y]),(0,c.useEffect)((function(){return function(){sessionStorage.setItem("posts",JSON.stringify(n))}}));var R=(0,c.useState)(!1),I=(0,s.Z)(R,2),L=I[0],M=I[1],N=(0,c.useRef)();return(0,c.useEffect)((function(){N.current&&!b&&n.length>=12&&setTimeout((function(){var t=N.current.clientHeight,e=window.innerHeight-500;console.log("test content",t),console.log("test screen",e),t>100&&t<e&&S()}),500)}),[n]),(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{className:"title",style:E,children:(0,x.jsx)("div",{className:"titleContent",children:(0,x.jsx)(a.Z,{variant:"h4",fontWeight:830,sx:{letterSpacing:"0.4em",pl:"0.4em",color:"white"},children:"\ubb35\uc0c1 ON"})})}),(0,x.jsx)("div",{style:{position:"absolute",width:"100%",maxWidth:"1500px",left:"50%",transform:"translateX(-50%)",marginTop:"1em"},children:0!==n.length?(0,x.jsx)(C.Z,{dataLength:n.length,next:S,hasMore:!b,loader:(0,x.jsx)(l.Z,{}),scrollThreshold:.75,style:{overflowY:"hidden"},children:(0,x.jsx)(u.Z,{ref:N,sx:{mx:"0.5rem"},cols:3,gap:2.5,children:(0,x.jsx)(v,{posts:n})})}):(0,x.jsx)(l.Z,{})}),(0,x.jsx)(f.Z,{variant:"primary",style:{position:"fixed",right:"2vw",bottom:"3vh"},onClick:function(){M(!0)},children:(0,x.jsx)(d.Z,{})}),(0,x.jsx)(O,{openModal:L,setOpenModal:M})]})}},6527:function(){}}]);
//# sourceMappingURL=508.e7270c3a.chunk.js.map