(self.webpackChunkblog=self.webpackChunkblog||[]).push([[171],{7788:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var l=n(4420);const i=e=>(0,l.v9)((e=>e.authToken.admin))&&e.children},1346:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>F});var l=n(2791),i=n(5294),s=n(3400),a=n(3239),o=n(9877),d=n(3543),r=n(9658),c=n(2017),u=n(3385),h=n(9013),p=n(173),g=n(4518),x=n(1652),f=n(9555),j=n(2170),m=n(6386),w=n(184);const v=e=>{const{setIsDatePickerOpen:t,id:n,disabled:l,value:i,InputProps:{ref:s}={},inputProps:{"aria-label":a}={}}=e;return(0,w.jsx)(g.Z,{variant:"outlined",size:"large",id:n,disabled:l,ref:s,"aria-label":a,onClick:()=>null===t||void 0===t?void 0:t((e=>!e)),children:(0,m.Z)(i,"yyyy/MM/dd")})},y=e=>{const[t,n]=(0,l.useState)(!1);return(0,w.jsx)(x._,{dateAdapter:j.H,children:(0,w.jsx)(f.M,{slots:{field:v,...e.slots},slotProps:{field:{setIsDatePickerOpen:n},popper:{placement:"bottom"}},...e,open:t,onClose:()=>n(!1),shouldDisableDate:e=>0!==e.getDay(),disableHighlightToday:!0})})};var D=n(7928),Z=n(1789),b=n(9898),k=n(6695);n(7549);Z.default.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(Z.default.version,"/pdf.worker.min.js");const C=function(e){let{file:t,documentDimension:n}=e;const[i,s]=(0,l.useState)(null),[o,d]=(0,l.useState)(1),[r,c]=(0,l.useState)(1);function u(e){d((t=>t+e))}return(0,l.useEffect)((()=>{d(1)}),[t]),(0,w.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,w.jsxs)(D.Z,{id:"scaleButton",sx:{my:"1em"},children:[(0,w.jsx)(g.Z,{onClick:()=>{c((e=>e+.2))},variant:"outlined",children:"+"}),(0,w.jsx)(g.Z,{onClick:()=>{1!==r&&c((e=>e-.2))},variant:"outlined",disabled:r<=1,children:"-"})]}),(0,w.jsx)(b.Z,{file:t,onLoadSuccess:function(e){let{numPages:t}=e;s(t)},loading:(0,w.jsx)("div",{style:{height:n.height,width:n.width},children:(0,w.jsx)(a.Z,{})}),children:(0,w.jsx)(k.Z,{renderTextLayer:!1,className:"page",scale:r,height:n.height,width:n.width,pageNumber:o,loading:(0,w.jsx)("div",{style:{height:n.height,width:n.width},children:(0,w.jsx)(a.Z,{})})})}),(0,w.jsxs)("p",{style:{color:"black"},children:["Page ",o||(i?1:"--")," of ",i||"--"]}),(0,w.jsxs)(D.Z,{id:"pageButton",children:[(0,w.jsx)(g.Z,{variant:"outlined",disabled:o<=1,onClick:function(){u(-1)},children:"Previous"}),(0,w.jsx)(g.Z,{variant:"outlined",disabled:o>=i,onClick:function(){u(1)},children:"Next"})]})]})};var S=n(8447),E=n(697),M=n(890),P=n(7831),B=n(8141);const W={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"80vw",height:"90vh",maxWidth:"1300px",bgcolor:"#ffffff",boxShadow:24,borderRadius:"0.5em",p:1,py:3,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},H=e=>{const[t,n]=(0,l.useState)(),[i,s]=(0,l.useState)(null),a=(0,l.useRef)(null),[o,d]=(0,l.useState)(0);(0,l.useEffect)((()=>{a.current&&d(a.current.clientHeight)}),[i]),console.log(o);const r=()=>{s(null),e.setModalState(!1)};(0,l.useEffect)((()=>{(()=>{const e=new Date;e.setDate(e.getDate()+(-1-e.getDay()+7)%7+1),n(e)})()}),[]);const{getRootProps:c,getInputProps:u}=(0,P.uI)({accept:{"application/pdf":[]},onDrop:e=>{var t;t=e,console.log(t),s(t[0])},multiple:!1});return(0,w.jsx)(S.Z,{open:e.open,onClose:r,children:(0,w.jsxs)(E.Z,{sx:W,bgcolor:"white",children:[(0,w.jsx)("h2",{children:"Choose Date"}),(0,w.jsx)(y,{value:t,minDate:new Date("2022/04/03"),onChange:n}),(0,w.jsxs)("div",{ref:a,style:{height:"60%"},children:[(0,w.jsx)("p",{children:i?i.name:null}),(0,w.jsx)(b.Z,{file:i,children:(0,w.jsx)(k.Z,{renderTextLayer:!1,className:"page",height:o-80,pageNumber:1})})]}),(0,w.jsxs)("div",{style:{width:"95%",height:"15%",border:"1pt dotted #f57c00",borderRadius:"1em",overflowY:"auto",marginBottom:"1em"},...c(),children:[(0,w.jsx)("input",{...u()}),(0,w.jsx)(E.Z,{sx:{position:"relative",height:"100%",widht:"100%"},children:(0,w.jsxs)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},children:[(0,w.jsx)(B.Z,{fontSize:"large",color:"primary"}),(0,w.jsx)(M.Z,{children:"Click or Drag File to here"})]})})]}),(0,w.jsxs)("p",{children:[(0,w.jsx)(g.Z,{variant:"outlined",onClick:()=>e.onModalUpload(i,t),children:"Upload"}),(0,w.jsx)(g.Z,{variant:"outlined",onClick:r,children:"Close"})]})]})})};var L=n(7689),U=n(7788);const F=()=>{const e=(0,L.s0)();let t=(0,L.xW)();const{maxDate:n,queryDate:g}=(0,L.f_)(),x=new Date("2022/04/03"),[f,j]=(0,l.useState)(null),[m,v]=(0,l.useState)(g),[D,Z]=(0,l.useState)(!1),[b,k]=(0,l.useState)(!1),[S,E]=(0,l.useState)(!1),M=(e,t)=>{"clickaway"!==t&&k(!1)},P=(0,l.useCallback)((async()=>{E(!0);try{const e=await i.Z.get("/api/WeeklyUpdate/GetBulletin",{params:{date:m.toLocaleDateString("en-CA").replace(/-/g,"")}}),t=new Uint8Array(Object.values(e.data)),n=new Blob([t.buffer],{type:"application/pdf"});j(n),E(!1)}catch(e){console.log(e)}}),[m]);function B(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()}(0,l.useEffect)((()=>{null!=m&&(P(),e("/weeklyupdate/"+m.toLocaleDateString("en-CA").replace(/-/g,"")))}),[m,P,e]);const W=p.tq?document.documentElement.clientWidth:window.innerWidth,F=p.tq?document.documentElement.clientHeight:window.innerHeight,[I,q]=(0,l.useState)({width:F/W>=1.6?W-30:null,height:F/W<1.6?F:null}),A=()=>{const e=p.tq?document.documentElement.clientWidth:window.innerWidth,t=p.tq?document.documentElement.clientHeight:window.innerHeight;q({width:t/e>=1.6?e-30:null,height:t/e<1.6?t:null})};return(0,l.useEffect)((()=>(window.addEventListener("resize",A),()=>{window.removeEventListener("resize",A)})),[I]),(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("h1",{children:"\uc8fc\ubcf4"}),(0,w.jsx)(s.Z,{id:"previousBulletin",onClick:()=>{v(new Date(m.getFullYear(),m.getMonth(),m.getDate()-7))},disabled:B(m,x)||S,children:(0,w.jsx)(c.Z,{})}),(0,w.jsx)(y,{value:m,minDate:x,maxDate:n,onChange:v}),(0,w.jsx)(s.Z,{id:"nextBulletin",onClick:()=>{v(new Date(m.getFullYear(),m.getMonth(),m.getDate()+7))},disabled:B(m,n)||S,children:(0,w.jsx)(u.Z,{})}),S?(0,w.jsx)("div",{children:(0,w.jsx)(a.Z,{sx:{mt:2}})}):(0,w.jsx)(C,{file:f,documentDimension:I}),(0,w.jsxs)(U.Z,{children:[(0,w.jsxs)(o.Z,{id:"uploadBulletinButton",variant:"extended",onClick:()=>Z(!0),children:[(0,w.jsx)(h.Z,{sx:{mr:1}}),"Upload"]}),(0,w.jsx)(H,{open:D,onModalUpload:async(e,n)=>{try{const l=new FormData;l.append("images",e),l.append("date",n.toLocaleDateString("en-CA").replace(/-/g,""));const s=await i.Z.put("/api/WeeklyUpdate/PostBulletin/",l,{headers:{"Content-Type":"multipart/form-data"}});console.log(s.data),v(n),t.revalidate(),Z(!1),k(!0)}catch(l){console.log(l)}},setModalState:Z}),(0,w.jsx)(d.Z,{open:b,autoHideDuration:8e3,onClose:M,children:(0,w.jsx)(r.Z,{severity:"success",onClose:M,children:"Uploaded Succesfully!"})})]})]})}},3414:()=>{},172:()=>{},2001:()=>{},3779:()=>{},6558:()=>{},2258:()=>{}}]);
//# sourceMappingURL=171.ffd9ea10.chunk.js.map