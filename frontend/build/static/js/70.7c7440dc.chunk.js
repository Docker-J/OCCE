"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[70],{7788:(e,t,s)=>{s.d(t,{Z:()=>o});var n=s(4420);const o=e=>(0,n.v9)((e=>e.authToken.admin))&&e.children},70:(e,t,s)=>{s.r(t),s.d(t,{default:()=>N});var n=s(2791),o=s(5193),a=s(890),l=s(6314),r=s(3239),i=s(2763),c=s(9877),h=s(2419),d=s(5294),p=s(7888),g=s(3774),u=s(1087),x=s(184);const m=e=>{let{photos:t}=e;return t.map((e=>(0,x.jsxs)(p.Z,{component:u.rU,to:e.id,children:[(0,x.jsx)("img",{src:e.cover,alt:"test",loading:"lazy"}),(0,x.jsx)(g.Z,{title:e.title})]},e.id)))},f=(0,n.memo)(m);var j=s(4771),Z=s(5977),w=s(7788),b=s(5057),v=(s(6527),s(8447)),S=s(697),y=s(8641),k=s(4518);s(7984);const C=e=>{let{isOpen:t,onClose:s}=e;const[o,a]=(0,n.useState)("");return(0,x.jsx)(v.Z,{open:t,onClose:()=>{s()},children:(0,x.jsxs)(S.Z,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"800px",height:"800px",bgcolor:"#ffffff",border:"0.1px solid #f57c00",boxShadow:24,p:2},bgcolor:"white",children:[(0,x.jsx)(y.Z,{type:"url",helperText:"Enter the album URL",onChange:e=>a(e.currentTarget.value)}),(0,x.jsx)(k.Z,{onClick:async function(){await d.Z.post("/api/photos/uploadAlbum",{url:o})},variant:"contained",component:"label",children:"Submit"})]})})},E={backgroundImage:'linear-gradient(rgba(0, 0, 0, 0.30), rgba(0, 0, 0, 0.30)), url("/img/WeeklyUpdate.jpg")'},N=()=>{const e=(0,o.Z)("(min-width:1200px)"),{openModal:t}=(0,Z.Z)(),[s,p]=(0,n.useState)([]),[g,u]=(0,n.useState)(!1),[m,v]=(0,n.useState)(!0),S=async()=>{console.log("test getPosts");const e=await d.Z.get("/api/photos/getPhotos".concat(0===s.length?"":"?lastVisible=".concat(s.at(-1).id,"&timeStamp=").concat(s.at(-1).Timestamp)));e.data.length>0?p((t=>[...t,...e.data])):u(!0)};(0,n.useEffect)((()=>{s.length%12!==0&&u(!0)}),[s]),(0,n.useEffect)((()=>(window.onpopstate=()=>{v(!0),console.log("test restore"),p(JSON.parse(sessionStorage.getItem("posts")))},v(!1),()=>{window.onpopstate=()=>{}})),[]),(0,n.useEffect)((()=>{null===m||m||S()}),[m]),(0,n.useEffect)((()=>()=>{sessionStorage.setItem("photos",JSON.stringify(s))}));const y=(0,n.useRef)();return(0,n.useEffect)((()=>{y.current&&!g&&s.length>=12&&setTimeout((()=>{try{const e=y.current.clientHeight,t=window.innerHeight-500;console.log("test content",e),console.log("test screen",t),e>100&&e<t&&S()}catch(e){}}),500)}),[s]),(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{className:"title-wrapper",style:E,children:(0,x.jsx)("div",{className:"title",children:(0,x.jsx)(a.Z,{variant:"h4",fontWeight:830,sx:{letterSpacing:"0.4em",pl:"0.4em",color:"white"},children:"\uad50\ud68c\uc0ac\uc9c4"})})}),(0,x.jsx)("div",{className:"container-wrapper",children:(0,x.jsx)("div",{className:"container",children:0===s.length?(0,x.jsx)(l.Z,{alignItems:"center",children:(0,x.jsx)(r.Z,{})}):(0,x.jsx)(j.Z,{dataLength:s.length,next:S,hasMore:!g,loader:(0,x.jsx)(r.Z,{}),scrollThreshold:1,style:{overflowY:"hidden"},children:(0,x.jsx)(i.Z,{ref:y,cols:e?4:3,gap:2.5,children:(0,x.jsx)(f,{photos:s})})})})}),(0,x.jsx)(w.Z,{children:(0,x.jsx)(c.Z,{variant:"primary",style:{position:"fixed",right:"2vw",bottom:"3vh"},onClick:()=>t(C,{}),children:(0,x.jsx)(h.Z,{})})}),g&&(0,x.jsx)(b.Z,{})]})}},6527:()=>{}}]);
//# sourceMappingURL=70.7c7440dc.chunk.js.map