"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[390],{7509:function(e,t,n){n.d(t,{x$:function(){return al},ll:function(){return sl},Rr:function(){return ul}});var o=n(7762),r=n(4942),i=n(9439),a=n(3433),l=n(1413),u=n(5987),s=n(184),c=n(2791);function d(e){if("string"===typeof e||"number"===typeof e)return""+e;var t="";if(Array.isArray(e))for(var n,o=0;o<e.length;o++)""!==(n=d(e[o]))&&(t+=(t&&" ")+n);else for(var r in e)e[r]&&(t+=(t&&" ")+r);return t}var f=n(327),h=function(e){var t,n=new Set,o=function(e,o){var r="function"===typeof e?e(t):e;if(!Object.is(r,t)){var i=t;t=(null!=o?o:"object"!==typeof r)?r:Object.assign({},t,r),n.forEach((function(e){return e(t,i)}))}},r=function(){return t},i={setState:o,getState:r,subscribe:function(e){return n.add(e),function(){return n.delete(e)}},destroy:function(){console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}};return t=e(o,r,i),i},v=function(e){return e?h(e):h},g=f.useSyncExternalStoreWithSelector;function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.getState,n=arguments.length>2?arguments[2]:void 0,o=g(e.subscribe,e.getState,e.getServerState||e.getState,t,n);return(0,c.useDebugValue)(o),o}var y=function(e,t){var n=v(e),o=function(e){return p(n,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:t)};return Object.assign(o,n),o};function m(e,t){if(Object.is(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;var n,r=(0,o.Z)(e);try{for(r.s();!(n=r.n()).done;){var a=(0,i.Z)(n.value,2),l=a[0],u=a[1];if(!Object.is(u,t.get(l)))return!1}}catch(v){r.e(v)}finally{r.f()}return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;var s,c=(0,o.Z)(e);try{for(c.s();!(s=c.n()).done;){var d=s.value;if(!t.has(d))return!1}}catch(v){c.e(v)}finally{c.f()}return!0}var f=Object.keys(e);if(f.length!==Object.keys(t).length)return!1;for(var h=0;h<f.length;h++)if(!Object.prototype.hasOwnProperty.call(t,f[h])||!Object.is(e[f[h]],t[f[h]]))return!1;return!0}var b={value:function(){}};function x(){for(var e,t=0,n=arguments.length,o={};t<n;++t){if(!(e=arguments[t]+"")||e in o||/[\s.]/.test(e))throw new Error("illegal type: "+e);o[e]=[]}return new w(o)}function w(e){this._=e}function S(e,t){for(var n,o=0,r=e.length;o<r;++o)if((n=e[o]).name===t)return n.value}function E(e,t,n){for(var o=0,r=e.length;o<r;++o)if(e[o].name===t){e[o]=b,e=e.slice(0,o).concat(e.slice(o+1));break}return null!=n&&e.push({name:t,value:n}),e}w.prototype=x.prototype={constructor:w,on:function(e,t){var n,o,r=this._,i=(o=r,(e+"").trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");if(n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),e&&!o.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:t}}))),a=-1,l=i.length;if(!(arguments.length<2)){if(null!=t&&"function"!==typeof t)throw new Error("invalid callback: "+t);for(;++a<l;)if(n=(e=i[a]).type)r[n]=E(r[n],e.name,t);else if(null==t)for(n in r)r[n]=E(r[n],e.name,null);return this}for(;++a<l;)if((n=(e=i[a]).type)&&(n=S(r[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new w(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,o,r=new Array(n),i=0;i<n;++i)r[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=0,n=(o=this._[e]).length;i<n;++i)o[i].value.apply(t,r)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)}};var C=x;function _(){}function N(e){return null==e?_:function(){return this.querySelector(e)}}function M(){return[]}function k(e){return null==e?M:function(){return this.querySelectorAll(e)}}function P(e){return function(){return null==(t=e.apply(this,arguments))?[]:Array.isArray(t)?t:Array.from(t);var t}}function A(e){return function(){return this.matches(e)}}function O(e){return function(t){return t.matches(e)}}var Z=Array.prototype.find;function D(){return this.firstElementChild}var I=Array.prototype.filter;function z(){return Array.from(this.children)}function R(e){return new Array(e.length)}function T(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function B(e,t,n,o,r,i){for(var a,l=0,u=t.length,s=i.length;l<s;++l)(a=t[l])?(a.__data__=i[l],o[l]=a):n[l]=new T(e,i[l]);for(;l<u;++l)(a=t[l])&&(r[l]=a)}function j(e,t,n,o,r,i,a){var l,u,s,c=new Map,d=t.length,f=i.length,h=new Array(d);for(l=0;l<d;++l)(u=t[l])&&(h[l]=s=a.call(u,u.__data__,l,t)+"",c.has(s)?r[l]=u:c.set(s,u));for(l=0;l<f;++l)s=a.call(e,i[l],l,i)+"",(u=c.get(s))?(o[l]=u,u.__data__=i[l],c.delete(s)):n[l]=new T(e,i[l]);for(l=0;l<d;++l)(u=t[l])&&c.get(h[l])===u&&(r[l]=u)}function L(e){return e.__data__}function X(e){return"object"===typeof e&&"length"in e?e:Array.from(e)}function Y(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}T.prototype={constructor:T,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var H="http://www.w3.org/1999/xhtml",V={svg:"http://www.w3.org/2000/svg",xhtml:H,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function K(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),V.hasOwnProperty(t)?{space:V[t],local:e}:e}function U(e){return function(){this.removeAttribute(e)}}function F(e){return function(){this.removeAttributeNS(e.space,e.local)}}function W(e,t){return function(){this.setAttribute(e,t)}}function q(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function G(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function $(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Q(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function J(e){return function(){this.style.removeProperty(e)}}function ee(e,t,n){return function(){this.style.setProperty(e,t,n)}}function te(e,t,n){return function(){var o=t.apply(this,arguments);null==o?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function ne(e,t){return e.style.getPropertyValue(t)||Q(e).getComputedStyle(e,null).getPropertyValue(t)}function oe(e){return function(){delete this[e]}}function re(e,t){return function(){this[e]=t}}function ie(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function ae(e){return e.trim().split(/^|\s+/)}function le(e){return e.classList||new ue(e)}function ue(e){this._node=e,this._names=ae(e.getAttribute("class")||"")}function se(e,t){for(var n=le(e),o=-1,r=t.length;++o<r;)n.add(t[o])}function ce(e,t){for(var n=le(e),o=-1,r=t.length;++o<r;)n.remove(t[o])}function de(e){return function(){se(this,e)}}function fe(e){return function(){ce(this,e)}}function he(e,t){return function(){(t.apply(this,arguments)?se:ce)(this,e)}}function ve(){this.textContent=""}function ge(e){return function(){this.textContent=e}}function pe(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function ye(){this.innerHTML=""}function me(e){return function(){this.innerHTML=e}}function be(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function xe(){this.nextSibling&&this.parentNode.appendChild(this)}function we(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Se(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===H&&t.documentElement.namespaceURI===H?t.createElement(e):t.createElementNS(n,e)}}function Ee(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Ce(e){var t=K(e);return(t.local?Ee:Se)(t)}function _e(){return null}function Ne(){var e=this.parentNode;e&&e.removeChild(this)}function Me(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ke(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Pe(e){return function(){var t=this.__on;if(t){for(var n,o=0,r=-1,i=t.length;o<i;++o)n=t[o],e.type&&n.type!==e.type||n.name!==e.name?t[++r]=n:this.removeEventListener(n.type,n.listener,n.options);++r?t.length=r:delete this.__on}}}function Ae(e,t,n){return function(){var o,r=this.__on,i=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(r)for(var a=0,l=r.length;a<l;++a)if((o=r[a]).type===e.type&&o.name===e.name)return this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=i,o.options=n),void(o.value=t);this.addEventListener(e.type,i,n),o={type:e.type,name:e.name,value:t,listener:i,options:n},r?r.push(o):this.__on=[o]}}function Oe(e,t,n){var o=Q(e),r=o.CustomEvent;"function"===typeof r?r=new r(t,n):(r=o.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function Ze(e,t){return function(){return Oe(this,e,t)}}function De(e,t){return function(){return Oe(this,e,t.apply(this,arguments))}}ue.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var Ie=n(4165),ze=(0,Ie.Z)().mark(Re);function Re(){var e,t,n,o,r,i,a;return(0,Ie.Z)().wrap((function(l){for(;;)switch(l.prev=l.next){case 0:e=this._groups,t=0,n=e.length;case 1:if(!(t<n)){l.next=13;break}o=e[t],r=0,i=o.length;case 3:if(!(r<i)){l.next=10;break}if(!(a=o[r])){l.next=7;break}return l.next=7,a;case 7:++r,l.next=3;break;case 10:++t,l.next=1;break;case 13:case"end":return l.stop()}}),ze,this)}var Te=[null];function Be(e,t){this._groups=e,this._parents=t}function je(){return new Be([[document.documentElement]],Te)}Be.prototype=je.prototype=(0,r.Z)({constructor:Be,select:function(e){"function"!==typeof e&&(e=N(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i,a,l=t[r],u=l.length,s=o[r]=new Array(u),c=0;c<u;++c)(i=l[c])&&(a=e.call(i,i.__data__,c,l))&&("__data__"in i&&(a.__data__=i.__data__),s[c]=a);return new Be(o,this._parents)},selectAll:function(e){e="function"===typeof e?P(e):k(e);for(var t=this._groups,n=t.length,o=[],r=[],i=0;i<n;++i)for(var a,l=t[i],u=l.length,s=0;s<u;++s)(a=l[s])&&(o.push(e.call(a,a.__data__,s,l)),r.push(a));return new Be(o,r)},selectChild:function(e){return this.select(null==e?D:function(e){return function(){return Z.call(this.children,e)}}("function"===typeof e?e:O(e)))},selectChildren:function(e){return this.selectAll(null==e?z:function(e){return function(){return I.call(this.children,e)}}("function"===typeof e?e:O(e)))},filter:function(e){"function"!==typeof e&&(e=A(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i,a=t[r],l=a.length,u=o[r]=[],s=0;s<l;++s)(i=a[s])&&e.call(i,i.__data__,s,a)&&u.push(i);return new Be(o,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,L);var n,o=t?j:B,r=this._parents,i=this._groups;"function"!==typeof e&&(n=e,e=function(){return n});for(var a=i.length,l=new Array(a),u=new Array(a),s=new Array(a),c=0;c<a;++c){var d=r[c],f=i[c],h=f.length,v=X(e.call(d,d&&d.__data__,c,r)),g=v.length,p=u[c]=new Array(g),y=l[c]=new Array(g);o(d,f,p,y,s[c]=new Array(h),v,t);for(var m,b,x=0,w=0;x<g;++x)if(m=p[x]){for(x>=w&&(w=x+1);!(b=y[w])&&++w<g;);m._next=b||null}}return(l=new Be(l,r))._enter=u,l._exit=s,l},enter:function(){return new Be(this._enter||this._groups.map(R),this._parents)},exit:function(){return new Be(this._exit||this._groups.map(R),this._parents)},join:function(e,t,n){var o=this.enter(),r=this,i=this.exit();return"function"===typeof e?(o=e(o))&&(o=o.selection()):o=o.append(e+""),null!=t&&(r=t(r))&&(r=r.selection()),null==n?i.remove():n(i),o&&r?o.merge(r).order():r},merge:function(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,r=n.length,i=o.length,a=Math.min(r,i),l=new Array(r),u=0;u<a;++u)for(var s,c=n[u],d=o[u],f=c.length,h=l[u]=new Array(f),v=0;v<f;++v)(s=c[v]||d[v])&&(h[v]=s);for(;u<r;++u)l[u]=n[u];return new Be(l,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o,r=e[t],i=r.length-1,a=r[i];--i>=0;)(o=r[i])&&(a&&4^o.compareDocumentPosition(a)&&a.parentNode.insertBefore(o,a),a=o);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=Y);for(var n=this._groups,o=n.length,r=new Array(o),i=0;i<o;++i){for(var a,l=n[i],u=l.length,s=r[i]=new Array(u),c=0;c<u;++c)(a=l[c])&&(s[c]=a);s.sort(t)}return new Be(r,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,i=o.length;r<i;++r){var a=o[r];if(a)return a}return null},size:function(){var e,t=0,n=(0,o.Z)(this);try{for(n.s();!(e=n.n()).done;){e.value;++t}}catch(r){n.e(r)}finally{n.f()}return t},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var r,i=t[n],a=0,l=i.length;a<l;++a)(r=i[a])&&e.call(r,r.__data__,a,i);return this},attr:function(e,t){var n=K(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((null==t?n.local?F:U:"function"===typeof t?n.local?$:G:n.local?q:W)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?J:"function"===typeof t?te:ee)(e,t,null==n?"":n)):ne(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?oe:"function"===typeof t?ie:re)(e,t)):this.node()[e]},classed:function(e,t){var n=ae(e+"");if(arguments.length<2){for(var o=le(this.node()),r=-1,i=n.length;++r<i;)if(!o.contains(n[r]))return!1;return!0}return this.each(("function"===typeof t?he:t?de:fe)(n,t))},text:function(e){return arguments.length?this.each(null==e?ve:("function"===typeof e?pe:ge)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?ye:("function"===typeof e?be:me)(e)):this.node().innerHTML},raise:function(){return this.each(xe)},lower:function(){return this.each(we)},append:function(e){var t="function"===typeof e?e:Ce(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"===typeof e?e:Ce(e),o=null==t?_e:"function"===typeof t?t:N(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)}))},remove:function(){return this.each(Ne)},clone:function(e){return this.select(e?ke:Me)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var o,r,i=function(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}(e+""),a=i.length;if(!(arguments.length<2)){for(l=t?Ae:Pe,o=0;o<a;++o)this.each(l(i[o],t,n));return this}var l=this.node().__on;if(l)for(var u,s=0,c=l.length;s<c;++s)for(o=0,u=l[s];o<a;++o)if((r=i[o]).type===u.type&&r.name===u.name)return u.value},dispatch:function(e,t){return this.each(("function"===typeof t?De:Ze)(e,t))}},Symbol.iterator,Re);var Le=je;function Xe(e){return"string"===typeof e?new Be([[document.querySelector(e)]],[document.documentElement]):new Be([[e]],Te)}var Ye={passive:!1},He={capture:!0,passive:!1};function Ve(e){e.stopImmediatePropagation()}function Ke(e){e.preventDefault(),e.stopImmediatePropagation()}function Ue(e){var t=e.document.documentElement,n=Xe(e).on("dragstart.drag",Ke,He);"onselectstart"in t?n.on("selectstart.drag",Ke,He):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Fe(e,t){var n=e.document.documentElement,o=Xe(e).on("dragstart.drag",null);t&&(o.on("click.drag",Ke,He),setTimeout((function(){o.on("click.drag",null)}),0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function We(e){return((e=Math.exp(e))+1/e)/2}var qe=function e(t,n,o){function r(e,r){var i,a,l=e[0],u=e[1],s=e[2],c=r[0],d=r[1],f=r[2],h=c-l,v=d-u,g=h*h+v*v;if(g<1e-12)a=Math.log(f/s)/t,i=function(e){return[l+e*h,u+e*v,s*Math.exp(t*e*a)]};else{var p=Math.sqrt(g),y=(f*f-s*s+o*g)/(2*s*n*p),m=(f*f-s*s-o*g)/(2*f*n*p),b=Math.log(Math.sqrt(y*y+1)-y),x=Math.log(Math.sqrt(m*m+1)-m);a=(x-b)/t,i=function(e){var o,r=e*a,i=We(b),c=s/(n*p)*(i*(o=t*r+b,((o=Math.exp(2*o))-1)/(o+1))-function(e){return((e=Math.exp(e))-1/e)/2}(b));return[l+c*h,u+c*v,s*i/We(t*r+b)]}}return i.duration=1e3*a*t/Math.SQRT2,i}return r.rho=function(t){var n=Math.max(.001,+t),o=n*n;return e(n,o,o*o)},r}(Math.SQRT2,2,4);function Ge(e,t){if(e=function(e){for(var t;t=e.sourceEvent;)e=t;return e}(e),void 0===t&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,[(o=o.matrixTransform(t.getScreenCTM().inverse())).x,o.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}var $e,Qe,Je=0,et=0,tt=0,nt=1e3,ot=0,rt=0,it=0,at="object"===typeof performance&&performance.now?performance:Date,lt="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function ut(){return rt||(lt(st),rt=at.now()+it)}function st(){rt=0}function ct(){this._call=this._time=this._next=null}function dt(e,t,n){var o=new ct;return o.restart(e,t,n),o}function ft(){rt=(ot=at.now())+it,Je=et=0;try{!function(){ut(),++Je;for(var e,t=$e;t;)(e=rt-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Je}()}finally{Je=0,function(){var e,t,n=$e,o=1/0;for(;n;)n._call?(o>n._time&&(o=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:$e=t);Qe=e,vt(o)}(),rt=0}}function ht(){var e=at.now(),t=e-ot;t>nt&&(it-=t,ot=e)}function vt(e){Je||(et&&(et=clearTimeout(et)),e-rt>24?(e<1/0&&(et=setTimeout(ft,e-at.now()-it)),tt&&(tt=clearInterval(tt))):(tt||(ot=at.now(),tt=setInterval(ht,nt)),Je=1,lt(ft)))}function gt(e,t,n){var o=new ct;return t=null==t?0:+t,o.restart((function(n){o.stop(),e(n+t)}),t,n),o}ct.prototype=dt.prototype={constructor:ct,restart:function(e,t,n){if("function"!==typeof e)throw new TypeError("callback is not a function");n=(null==n?ut():+n)+(null==t?0:+t),this._next||Qe===this||(Qe?Qe._next=this:$e=this,Qe=this),this._call=e,this._time=n,vt()},stop:function(){this._call&&(this._call=null,this._time=1/0,vt())}};var pt=C("start","end","cancel","interrupt"),yt=[],mt=0,bt=1,xt=2,wt=3,St=4,Et=5,Ct=6;function _t(e,t,n,o,r,i){var a=e.__transition;if(a){if(n in a)return}else e.__transition={};!function(e,t,n){var o,r=e.__transition;function i(e){n.state=bt,n.timer.restart(a,n.delay,n.time),n.delay<=e&&a(e-n.delay)}function a(i){var s,c,d,f;if(n.state!==bt)return u();for(s in r)if((f=r[s]).name===n.name){if(f.state===wt)return gt(a);f.state===St?(f.state=Ct,f.timer.stop(),f.on.call("interrupt",e,e.__data__,f.index,f.group),delete r[s]):+s<t&&(f.state=Ct,f.timer.stop(),f.on.call("cancel",e,e.__data__,f.index,f.group),delete r[s])}if(gt((function(){n.state===wt&&(n.state=St,n.timer.restart(l,n.delay,n.time),l(i))})),n.state=xt,n.on.call("start",e,e.__data__,n.index,n.group),n.state===xt){for(n.state=wt,o=new Array(d=n.tween.length),s=0,c=-1;s<d;++s)(f=n.tween[s].value.call(e,e.__data__,n.index,n.group))&&(o[++c]=f);o.length=c+1}}function l(t){for(var r=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(u),n.state=Et,1),i=-1,a=o.length;++i<a;)o[i].call(e,r);n.state===Et&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){for(var o in n.state=Ct,n.timer.stop(),delete r[t],r)return;delete e.__transition}r[t]=n,n.timer=dt(i,0,n.time)}(e,n,{name:t,index:o,group:r,on:pt,tween:yt,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:mt})}function Nt(e,t){var n=kt(e,t);if(n.state>mt)throw new Error("too late; already scheduled");return n}function Mt(e,t){var n=kt(e,t);if(n.state>wt)throw new Error("too late; already running");return n}function kt(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Pt(e,t){var n,o,r,i=e.__transition,a=!0;if(i){for(r in t=null==t?null:t+"",i)(n=i[r]).name===t?(o=n.state>xt&&n.state<Et,n.state=Ct,n.timer.stop(),n.on.call(o?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete i[r]):a=!1;a&&delete e.__transition}}function At(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Ot,Zt=180/Math.PI,Dt={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function It(e,t,n,o,r,i){var a,l,u;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(u=e*n+t*o)&&(n-=e*u,o-=t*u),(l=Math.sqrt(n*n+o*o))&&(n/=l,o/=l,u/=l),e*o<t*n&&(e=-e,t=-t,u=-u,a=-a),{translateX:r,translateY:i,rotate:Math.atan2(t,e)*Zt,skewX:Math.atan(u)*Zt,scaleX:a,scaleY:l}}function zt(e,t,n,o){function r(e){return e.length?e.pop()+" ":""}return function(i,a){var l=[],u=[];return i=e(i),a=e(a),function(e,o,r,i,a,l){if(e!==r||o!==i){var u=a.push("translate(",null,t,null,n);l.push({i:u-4,x:At(e,r)},{i:u-2,x:At(o,i)})}else(r||i)&&a.push("translate("+r+t+i+n)}(i.translateX,i.translateY,a.translateX,a.translateY,l,u),function(e,t,n,i){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),i.push({i:n.push(r(n)+"rotate(",null,o)-2,x:At(e,t)})):t&&n.push(r(n)+"rotate("+t+o)}(i.rotate,a.rotate,l,u),function(e,t,n,i){e!==t?i.push({i:n.push(r(n)+"skewX(",null,o)-2,x:At(e,t)}):t&&n.push(r(n)+"skewX("+t+o)}(i.skewX,a.skewX,l,u),function(e,t,n,o,i,a){if(e!==n||t!==o){var l=i.push(r(i)+"scale(",null,",",null,")");a.push({i:l-4,x:At(e,n)},{i:l-2,x:At(t,o)})}else 1===n&&1===o||i.push(r(i)+"scale("+n+","+o+")")}(i.scaleX,i.scaleY,a.scaleX,a.scaleY,l,u),i=a=null,function(e){for(var t,n=-1,o=u.length;++n<o;)l[(t=u[n]).i]=t.x(e);return l.join("")}}}var Rt=zt((function(e){var t=new("function"===typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Dt:It(t.a,t.b,t.c,t.d,t.e,t.f)}),"px, ","px)","deg)"),Tt=zt((function(e){return null==e?Dt:(Ot||(Ot=document.createElementNS("http://www.w3.org/2000/svg","g")),Ot.setAttribute("transform",e),(e=Ot.transform.baseVal.consolidate())?It((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):Dt)}),", ",")",")");function Bt(e,t){var n,o;return function(){var r=Mt(this,e),i=r.tween;if(i!==n)for(var a=0,l=(o=n=i).length;a<l;++a)if(o[a].name===t){(o=o.slice()).splice(a,1);break}r.tween=o}}function jt(e,t,n){var o,r;if("function"!==typeof n)throw new Error;return function(){var i=Mt(this,e),a=i.tween;if(a!==o){r=(o=a).slice();for(var l={name:t,value:n},u=0,s=r.length;u<s;++u)if(r[u].name===t){r[u]=l;break}u===s&&r.push(l)}i.tween=r}}function Lt(e,t,n){var o=e._id;return e.each((function(){var e=Mt(this,o);(e.value||(e.value={}))[t]=n.apply(this,arguments)})),function(e){return kt(e,o).value[t]}}function Xt(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Yt(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function Ht(){}var Vt=.7,Kt=1/Vt,Ut="\\s*([+-]?\\d+)\\s*",Ft="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Wt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",qt=/^#([0-9a-f]{3,8})$/,Gt=new RegExp("^rgb\\(".concat(Ut,",").concat(Ut,",").concat(Ut,"\\)$")),$t=new RegExp("^rgb\\(".concat(Wt,",").concat(Wt,",").concat(Wt,"\\)$")),Qt=new RegExp("^rgba\\(".concat(Ut,",").concat(Ut,",").concat(Ut,",").concat(Ft,"\\)$")),Jt=new RegExp("^rgba\\(".concat(Wt,",").concat(Wt,",").concat(Wt,",").concat(Ft,"\\)$")),en=new RegExp("^hsl\\(".concat(Ft,",").concat(Wt,",").concat(Wt,"\\)$")),tn=new RegExp("^hsla\\(".concat(Ft,",").concat(Wt,",").concat(Wt,",").concat(Ft,"\\)$")),nn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function on(){return this.rgb().formatHex()}function rn(){return this.rgb().formatRgb()}function an(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=qt.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?ln(t):3===n?new cn(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?un(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?un(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=Gt.exec(e))?new cn(t[1],t[2],t[3],1):(t=$t.exec(e))?new cn(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=Qt.exec(e))?un(t[1],t[2],t[3],t[4]):(t=Jt.exec(e))?un(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=en.exec(e))?pn(t[1],t[2]/100,t[3]/100,1):(t=tn.exec(e))?pn(t[1],t[2]/100,t[3]/100,t[4]):nn.hasOwnProperty(e)?ln(nn[e]):"transparent"===e?new cn(NaN,NaN,NaN,0):null}function ln(e){return new cn(e>>16&255,e>>8&255,255&e,1)}function un(e,t,n,o){return o<=0&&(e=t=n=NaN),new cn(e,t,n,o)}function sn(e,t,n,o){return 1===arguments.length?((r=e)instanceof Ht||(r=an(r)),r?new cn((r=r.rgb()).r,r.g,r.b,r.opacity):new cn):new cn(e,t,n,null==o?1:o);var r}function cn(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}function dn(){return"#".concat(gn(this.r)).concat(gn(this.g)).concat(gn(this.b))}function fn(){var e=hn(this.opacity);return"".concat(1===e?"rgb(":"rgba(").concat(vn(this.r),", ").concat(vn(this.g),", ").concat(vn(this.b)).concat(1===e?")":", ".concat(e,")"))}function hn(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function vn(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function gn(e){return((e=vn(e))<16?"0":"")+e.toString(16)}function pn(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new mn(e,t,n,o)}function yn(e){if(e instanceof mn)return new mn(e.h,e.s,e.l,e.opacity);if(e instanceof Ht||(e=an(e)),!e)return new mn;if(e instanceof mn)return e;var t=(e=e.rgb()).r/255,n=e.g/255,o=e.b/255,r=Math.min(t,n,o),i=Math.max(t,n,o),a=NaN,l=i-r,u=(i+r)/2;return l?(a=t===i?(n-o)/l+6*(n<o):n===i?(o-t)/l+2:(t-n)/l+4,l/=u<.5?i+r:2-i-r,a*=60):l=u>0&&u<1?0:a,new mn(a,l,u,e.opacity)}function mn(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}function bn(e){return(e=(e||0)%360)<0?e+360:e}function xn(e){return Math.max(0,Math.min(1,e||0))}function wn(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function Sn(e,t,n,o,r){var i=e*e,a=i*e;return((1-3*e+3*i-a)*t+(4-6*i+3*a)*n+(1+3*e+3*i-3*a)*o+a*r)/6}Xt(Ht,an,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:on,formatHex:on,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return yn(this).formatHsl()},formatRgb:rn,toString:rn}),Xt(cn,sn,Yt(Ht,{brighter:function(e){return e=null==e?Kt:Math.pow(Kt,e),new cn(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?Vt:Math.pow(Vt,e),new cn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},clamp:function(){return new cn(vn(this.r),vn(this.g),vn(this.b),hn(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:dn,formatHex:dn,formatHex8:function(){return"#".concat(gn(this.r)).concat(gn(this.g)).concat(gn(this.b)).concat(gn(255*(isNaN(this.opacity)?1:this.opacity)))},formatRgb:fn,toString:fn})),Xt(mn,(function(e,t,n,o){return 1===arguments.length?yn(e):new mn(e,t,n,null==o?1:o)}),Yt(Ht,{brighter:function(e){return e=null==e?Kt:Math.pow(Kt,e),new mn(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?Vt:Math.pow(Vt,e),new mn(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,r=2*n-o;return new cn(wn(e>=240?e-240:e+120,r,o),wn(e,r,o),wn(e<120?e+240:e-120,r,o),this.opacity)},clamp:function(){return new mn(bn(this.h),xn(this.s),xn(this.l),hn(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=hn(this.opacity);return"".concat(1===e?"hsl(":"hsla(").concat(bn(this.h),", ").concat(100*xn(this.s),"%, ").concat(100*xn(this.l),"%").concat(1===e?")":", ".concat(e,")"))}}));var En=function(e){return function(){return e}};function Cn(e,t){return function(n){return e+n*t}}function _n(e){return 1===(e=+e)?Nn:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}(t,n,e):En(isNaN(t)?n:t)}}function Nn(e,t){var n=t-e;return n?Cn(e,n):En(isNaN(e)?t:e)}var Mn=function e(t){var n=_n(t);function o(e,t){var o=n((e=sn(e)).r,(t=sn(t)).r),r=n(e.g,t.g),i=n(e.b,t.b),a=Nn(e.opacity,t.opacity);return function(t){return e.r=o(t),e.g=r(t),e.b=i(t),e.opacity=a(t),e+""}}return o.gamma=e,o}(1);function kn(e){return function(t){var n,o,r=t.length,i=new Array(r),a=new Array(r),l=new Array(r);for(n=0;n<r;++n)o=sn(t[n]),i[n]=o.r||0,a[n]=o.g||0,l[n]=o.b||0;return i=e(i),a=e(a),l=e(l),o.opacity=1,function(e){return o.r=i(e),o.g=a(e),o.b=l(e),o+""}}}kn((function(e){var t=e.length-1;return function(n){var o=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),r=e[o],i=e[o+1],a=o>0?e[o-1]:2*r-i,l=o<t-1?e[o+2]:2*i-r;return Sn((n-o/t)*t,a,r,i,l)}})),kn((function(e){var t=e.length;return function(n){var o=Math.floor(((n%=1)<0?++n:n)*t),r=e[(o+t-1)%t],i=e[o%t],a=e[(o+1)%t],l=e[(o+2)%t];return Sn((n-o/t)*t,r,i,a,l)}}));var Pn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,An=new RegExp(Pn.source,"g");function On(e,t){var n,o,r,i=Pn.lastIndex=An.lastIndex=0,a=-1,l=[],u=[];for(e+="",t+="";(n=Pn.exec(e))&&(o=An.exec(t));)(r=o.index)>i&&(r=t.slice(i,r),l[a]?l[a]+=r:l[++a]=r),(n=n[0])===(o=o[0])?l[a]?l[a]+=o:l[++a]=o:(l[++a]=null,u.push({i:a,x:At(n,o)})),i=An.lastIndex;return i<t.length&&(r=t.slice(i),l[a]?l[a]+=r:l[++a]=r),l.length<2?u[0]?function(e){return function(t){return e(t)+""}}(u[0].x):function(e){return function(){return e}}(t):(t=u.length,function(e){for(var n,o=0;o<t;++o)l[(n=u[o]).i]=n.x(e);return l.join("")})}function Zn(e,t){var n;return("number"===typeof t?At:t instanceof an?Mn:(n=an(t))?(t=n,Mn):On)(e,t)}function Dn(e){return function(){this.removeAttribute(e)}}function In(e){return function(){this.removeAttributeNS(e.space,e.local)}}function zn(e,t,n){var o,r,i=n+"";return function(){var a=this.getAttribute(e);return a===i?null:a===o?r:r=t(o=a,n)}}function Rn(e,t,n){var o,r,i=n+"";return function(){var a=this.getAttributeNS(e.space,e.local);return a===i?null:a===o?r:r=t(o=a,n)}}function Tn(e,t,n){var o,r,i;return function(){var a,l,u=n(this);if(null!=u)return(a=this.getAttribute(e))===(l=u+"")?null:a===o&&l===r?i:(r=l,i=t(o=a,u));this.removeAttribute(e)}}function Bn(e,t,n){var o,r,i;return function(){var a,l,u=n(this);if(null!=u)return(a=this.getAttributeNS(e.space,e.local))===(l=u+"")?null:a===o&&l===r?i:(r=l,i=t(o=a,u));this.removeAttributeNS(e.space,e.local)}}function jn(e,t){var n,o;function r(){var r=t.apply(this,arguments);return r!==o&&(n=(o=r)&&function(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}(e,r)),n}return r._value=t,r}function Ln(e,t){var n,o;function r(){var r=t.apply(this,arguments);return r!==o&&(n=(o=r)&&function(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}(e,r)),n}return r._value=t,r}function Xn(e,t){return function(){Nt(this,e).delay=+t.apply(this,arguments)}}function Yn(e,t){return t=+t,function(){Nt(this,e).delay=t}}function Hn(e,t){return function(){Mt(this,e).duration=+t.apply(this,arguments)}}function Vn(e,t){return t=+t,function(){Mt(this,e).duration=t}}var Kn=Le.prototype.constructor;function Un(e){return function(){this.style.removeProperty(e)}}var Fn=0;function Wn(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function qn(){return++Fn}var Gn=Le.prototype;Wn.prototype=function(e){return Le().transition(e)}.prototype=(0,r.Z)({constructor:Wn,select:function(e){var t=this._name,n=this._id;"function"!==typeof e&&(e=N(e));for(var o=this._groups,r=o.length,i=new Array(r),a=0;a<r;++a)for(var l,u,s=o[a],c=s.length,d=i[a]=new Array(c),f=0;f<c;++f)(l=s[f])&&(u=e.call(l,l.__data__,f,s))&&("__data__"in l&&(u.__data__=l.__data__),d[f]=u,_t(d[f],t,n,f,d,kt(l,n)));return new Wn(i,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!==typeof e&&(e=k(e));for(var o=this._groups,r=o.length,i=[],a=[],l=0;l<r;++l)for(var u,s=o[l],c=s.length,d=0;d<c;++d)if(u=s[d]){for(var f,h=e.call(u,u.__data__,d,s),v=kt(u,n),g=0,p=h.length;g<p;++g)(f=h[g])&&_t(f,t,n,g,h,v);i.push(h),a.push(u)}return new Wn(i,a,t,n)},selectChild:Gn.selectChild,selectChildren:Gn.selectChildren,filter:function(e){"function"!==typeof e&&(e=A(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i,a=t[r],l=a.length,u=o[r]=[],s=0;s<l;++s)(i=a[s])&&e.call(i,i.__data__,s,a)&&u.push(i);return new Wn(o,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,r=n.length,i=Math.min(o,r),a=new Array(o),l=0;l<i;++l)for(var u,s=t[l],c=n[l],d=s.length,f=a[l]=new Array(d),h=0;h<d;++h)(u=s[h]||c[h])&&(f[h]=u);for(;l<o;++l)a[l]=t[l];return new Wn(a,this._parents,this._name,this._id)},selection:function(){return new Kn(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=qn(),o=this._groups,r=o.length,i=0;i<r;++i)for(var a,l=o[i],u=l.length,s=0;s<u;++s)if(a=l[s]){var c=kt(a,t);_t(a,e,n,s,l,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Wn(o,this._parents,e,n)},call:Gn.call,nodes:Gn.nodes,node:Gn.node,size:Gn.size,empty:Gn.empty,each:Gn.each,on:function(e,t){var n=this._id;return arguments.length<2?kt(this.node(),n).on.on(e):this.each(function(e,t,n){var o,r,i=function(e){return(e+"").trim().split(/^|\s+/).every((function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e}))}(t)?Nt:Mt;return function(){var a=i(this,e),l=a.on;l!==o&&(r=(o=l).copy()).on(t,n),a.on=r}}(n,e,t))},attr:function(e,t){var n=K(e),o="transform"===n?Tt:Zn;return this.attrTween(e,"function"===typeof t?(n.local?Bn:Tn)(n,o,Lt(this,"attr."+e,t)):null==t?(n.local?In:Dn)(n):(n.local?Rn:zn)(n,o,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!==typeof t)throw new Error;var o=K(e);return this.tween(n,(o.local?jn:Ln)(o,t))},style:function(e,t,n){var o="transform"===(e+="")?Rt:Zn;return null==t?this.styleTween(e,function(e,t){var n,o,r;return function(){var i=ne(this,e),a=(this.style.removeProperty(e),ne(this,e));return i===a?null:i===n&&a===o?r:r=t(n=i,o=a)}}(e,o)).on("end.style."+e,Un(e)):"function"===typeof t?this.styleTween(e,function(e,t,n){var o,r,i;return function(){var a=ne(this,e),l=n(this),u=l+"";return null==l&&(this.style.removeProperty(e),u=l=ne(this,e)),a===u?null:a===o&&u===r?i:(r=u,i=t(o=a,l))}}(e,o,Lt(this,"style."+e,t))).each(function(e,t){var n,o,r,i,a="style."+t,l="end."+a;return function(){var u=Mt(this,e),s=u.on,c=null==u.value[a]?i||(i=Un(t)):void 0;s===n&&r===c||(o=(n=s).copy()).on(l,r=c),u.on=o}}(this._id,e)):this.styleTween(e,function(e,t,n){var o,r,i=n+"";return function(){var a=ne(this,e);return a===i?null:a===o?r:r=t(o=a,n)}}(e,o,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(null==t)return this.tween(o,null);if("function"!==typeof t)throw new Error;return this.tween(o,function(e,t,n){var o,r;function i(){var i=t.apply(this,arguments);return i!==r&&(o=(r=i)&&function(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}(e,i,n)),o}return i._value=t,i}(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"===typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(Lt(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!==typeof e)throw new Error;return this.tween(t,function(e){var t,n;function o(){var o=e.apply(this,arguments);return o!==n&&(t=(n=o)&&function(e){return function(t){this.textContent=e.call(this,t)}}(o)),t}return o._value=e,o}(e))},remove:function(){return this.on("end.remove",function(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}(this._id))},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o,r=kt(this.node(),n).tween,i=0,a=r.length;i<a;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((null==t?Bt:jt)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"===typeof e?Xn:Yn)(t,e)):kt(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"===typeof e?Hn:Vn)(t,e)):kt(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!==typeof t)throw new Error;return function(){Mt(this,e).ease=t}}(t,e)):kt(this.node(),t).ease},easeVarying:function(e){if("function"!==typeof e)throw new Error;return this.each(function(e,t){return function(){var n=t.apply(this,arguments);if("function"!==typeof n)throw new Error;Mt(this,e).ease=n}}(this._id,e))},end:function(){var e,t,n=this,o=n._id,r=n.size();return new Promise((function(i,a){var l={value:a},u={value:function(){0===--r&&i()}};n.each((function(){var n=Mt(this,o),r=n.on;r!==e&&((t=(e=r).copy())._.cancel.push(l),t._.interrupt.push(l),t._.end.push(u)),n.on=t})),0===r&&i()}))}},Symbol.iterator,Gn[Symbol.iterator]);var $n={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function Qn(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error("transition ".concat(t," not found"));return n}Le.prototype.interrupt=function(e){return this.each((function(){Pt(this,e)}))},Le.prototype.transition=function(e){var t,n;e instanceof Wn?(t=e._id,e=e._name):(t=qn(),(n=$n).time=ut(),e=null==e?null:e+"");for(var o=this._groups,r=o.length,i=0;i<r;++i)for(var a,l=o[i],u=l.length,s=0;s<u;++s)(a=l[s])&&_t(a,e,t,s,l,n||Qn(a,t));return new Wn(o,this._parents,e,t)};var Jn=function(e){return function(){return e}};function eo(e,t){var n=t.sourceEvent,o=t.target,r=t.transform,i=t.dispatch;Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function to(e,t,n){this.k=e,this.x=t,this.y=n}to.prototype={constructor:to,scale:function(e){return 1===e?this:new to(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new to(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var no=new to(1,0,0);function oo(e){e.stopImmediatePropagation()}function ro(e){e.preventDefault(),e.stopImmediatePropagation()}function io(e){return(!e.ctrlKey||"wheel"===e.type)&&!e.button}function ao(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function lo(){return this.__zoom||no}function uo(e){return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function so(){return navigator.maxTouchPoints||"ontouchstart"in this}function co(e,t,n){var o=e.invertX(t[0][0])-n[0][0],r=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],a=e.invertY(t[1][1])-n[1][1];return e.translate(r>o?(o+r)/2:Math.min(0,o)||Math.max(0,r),a>i?(i+a)/2:Math.min(0,i)||Math.max(0,a))}to.prototype;var fo=function(e){return function(){return e}};function ho(e,t){var n=t.sourceEvent,o=t.subject,r=t.target,i=t.identifier,a=t.active,l=t.x,u=t.y,s=t.dx,c=t.dy,d=t.dispatch;Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},subject:{value:o,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:l,enumerable:!0,configurable:!0},y:{value:u,enumerable:!0,configurable:!0},dx:{value:s,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:d}})}function vo(e){return!e.ctrlKey&&!e.button}function go(){return this.parentNode}function po(e,t){return null==t?{x:e.x,y:e.y}:t}function yo(){return navigator.maxTouchPoints||"ontouchstart"in this}ho.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};n(4164);var mo,bo,xo,wo=["position","children","className","style"],So=["x","y","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","children","className"],Eo=["type","position","isValidConnection","isConnectable","isConnectableStart","isConnectableEnd","id","onConnect","children","className","onMouseDown","onTouchStart"],Co=["nodes","edges","defaultNodes","defaultEdges","className","nodeTypes","edgeTypes","onNodeClick","onEdgeClick","onInit","onMove","onMoveStart","onMoveEnd","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","onNodeMouseEnter","onNodeMouseMove","onNodeMouseLeave","onNodeContextMenu","onNodeDoubleClick","onNodeDragStart","onNodeDrag","onNodeDragStop","onNodesDelete","onEdgesDelete","onSelectionChange","onSelectionDragStart","onSelectionDrag","onSelectionDragStop","onSelectionContextMenu","onSelectionStart","onSelectionEnd","connectionMode","connectionLineType","connectionLineStyle","connectionLineComponent","connectionLineContainerStyle","deleteKeyCode","selectionKeyCode","selectionOnDrag","selectionMode","panActivationKeyCode","multiSelectionKeyCode","zoomActivationKeyCode","snapToGrid","snapGrid","onlyRenderVisibleElements","selectNodesOnDrag","nodesDraggable","nodesConnectable","nodesFocusable","nodeOrigin","edgesFocusable","edgesUpdatable","elementsSelectable","defaultViewport","minZoom","maxZoom","translateExtent","preventScrolling","nodeExtent","defaultMarkerColor","zoomOnScroll","zoomOnPinch","panOnScroll","panOnScrollSpeed","panOnScrollMode","zoomOnDoubleClick","panOnDrag","onPaneClick","onPaneMouseEnter","onPaneMouseMove","onPaneMouseLeave","onPaneScroll","onPaneContextMenu","children","onEdgeUpdate","onEdgeContextMenu","onEdgeDoubleClick","onEdgeMouseEnter","onEdgeMouseMove","onEdgeMouseLeave","onEdgeUpdateStart","onEdgeUpdateEnd","edgeUpdaterRadius","onNodesChange","onEdgesChange","noDragClassName","noWheelClassName","noPanClassName","fitView","fitViewOptions","connectOnClick","attributionPosition","proOptions","defaultEdgeOptions","elevateNodesOnSelect","elevateEdgesOnSelect","disableKeyboardA11y","autoPanOnConnect","autoPanOnNodeDrag","connectionRadius","isValidConnection","onError","style","id"],_o=(0,c.createContext)(null),No=_o.Provider,Mo={error001:function(){return"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001"},error002:function(){return"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them."},error003:function(e){return'Node type "'.concat(e,'" not found. Using fallback type "default".')},error004:function(){return"The React Flow parent container needs a width and a height to render the graph."},error005:function(){return"Only child nodes can use a parent extent."},error006:function(){return"Can't create edge. An edge needs a source and a target."},error007:function(e){return"The old edge with id=".concat(e," does not exist.")},error009:function(e){return'Marker type "'.concat(e,"\" doesn't exist.")},error008:function(e,t){return"Couldn't create edge for ".concat(e?"target":"source",' handle id: "').concat(e?t.targetHandle:t.sourceHandle,'", edge id: ').concat(t.id,".")},error010:function(){return"Handle: No node id found. Make sure to only use a Handle inside a custom Node."},error011:function(e){return'Edge type "'.concat(e,'" not found. Using fallback type "default".')},error012:function(e){return'Node with id "'.concat(e,'" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.')}},ko=Mo.error001();function Po(e,t){var n=(0,c.useContext)(_o);if(null===n)throw new Error(ko);return p(n,e,t)}var Ao=function(){var e=(0,c.useContext)(_o);if(null===e)throw new Error(ko);return(0,c.useMemo)((function(){return{getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}}),[e])},Oo=function(e){return e.userSelectionActive?"none":"all"};function Zo(e){var t=e.position,n=e.children,o=e.className,r=e.style,i=(0,u.Z)(e,wo),c=Po(Oo),f="".concat(t).split("-");return(0,s.jsx)("div",(0,l.Z)((0,l.Z)({className:d(["react-flow__panel",o].concat((0,a.Z)(f))),style:(0,l.Z)((0,l.Z)({},r),{},{pointerEvents:c})},i),{},{children:n}))}function Do(e){var t=e.proOptions,n=e.position,o=void 0===n?"bottom-right":n;return null!==t&&void 0!==t&&t.hideAttribution?null:(0,s.jsx)(Zo,{position:o,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:(0,s.jsx)("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}var Io=(0,c.memo)((function(e){var t=e.x,n=e.y,o=e.label,r=e.labelStyle,a=void 0===r?{}:r,f=e.labelShowBg,h=void 0===f||f,v=e.labelBgStyle,g=void 0===v?{}:v,p=e.labelBgPadding,y=void 0===p?[2,4]:p,m=e.labelBgBorderRadius,b=void 0===m?2:m,x=e.children,w=e.className,S=(0,u.Z)(e,So),E=(0,c.useRef)(null),C=(0,c.useState)({x:0,y:0,width:0,height:0}),_=(0,i.Z)(C,2),N=_[0],M=_[1],k=d(["react-flow__edge-textwrapper",w]);return(0,c.useEffect)((function(){if(E.current){var e=E.current.getBBox();M({x:e.x,y:e.y,width:e.width,height:e.height})}}),[o]),"undefined"!==typeof o&&o?(0,s.jsxs)("g",(0,l.Z)((0,l.Z)({transform:"translate(".concat(t-N.width/2," ").concat(n-N.height/2,")"),className:k,visibility:N.width?"visible":"hidden"},S),{},{children:[h&&(0,s.jsx)("rect",{width:N.width+2*y[0],x:-y[0],y:-y[1],height:N.height+2*y[1],className:"react-flow__edge-textbg",style:g,rx:b,ry:b}),(0,s.jsx)("text",{className:"react-flow__edge-text",y:N.height/2,dy:"0.3em",ref:E,style:a,children:o}),x]})):null})),zo=function(e){return{width:e.offsetWidth,height:e.offsetHeight}},Ro=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(e,t),n)},To=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0},t=arguments.length>1?arguments[1]:void 0;return{x:Ro(e.x,t[0][0],t[1][0]),y:Ro(e.y,t[0][1],t[1][1])}},Bo=function(e,t,n){return e<t?Ro(Math.abs(e-t),1,50)/50:e>n?-Ro(Math.abs(e-n),1,50)/50:0},jo=function(e,t){return[20*Bo(e.x,35,t.width-35),20*Bo(e.y,35,t.height-35)]},Lo=function(e){var t,n;return(null===(t=e.getRootNode)||void 0===t?void 0:t.call(e))||(null===(n=window)||void 0===n?void 0:n.document)},Xo=function(e,t){return{x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}},Yo=function(e){var t=e.x,n=e.y;return{x:t,y:n,x2:t+e.width,y2:n+e.height}},Ho=function(e){var t=e.x,n=e.y;return{x:t,y:n,width:e.x2-t,height:e.y2-n}},Vo=function(e){return(0,l.Z)((0,l.Z)({},e.positionAbsolute||{x:0,y:0}),{},{width:e.width||0,height:e.height||0})},Ko=function(e,t){var n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),o=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*o)},Uo=function(e){return Fo(e.width)&&Fo(e.height)&&Fo(e.x)&&Fo(e.y)},Fo=function(e){return!isNaN(e)&&isFinite(e)},Wo=Symbol.for("internals"),qo=["Enter"," ","Escape"],Go=function(e,t){0};function $o(e){var t,n,o=function(e){return"nativeEvent"in e}(e)?e.nativeEvent:e,r=(null===(t=o.composedPath)||void 0===t||null===(n=t.call(o))||void 0===n?void 0:n[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(null===r||void 0===r?void 0:r.nodeName)||(null===r||void 0===r?void 0:r.hasAttribute("contenteditable"))||!(null===r||void 0===r||!r.closest(".nokey"))}var Qo=function(e){return"clientX"in e},Jo=function(e,t){var n,o,r,i,a=Qo(e),l=a?e.clientX:null===(n=e.touches)||void 0===n?void 0:n[0].clientX,u=a?e.clientY:null===(o=e.touches)||void 0===o?void 0:o[0].clientY;return{x:l-(null!==(r=null===t||void 0===t?void 0:t.left)&&void 0!==r?r:0),y:u-(null!==(i=null===t||void 0===t?void 0:t.top)&&void 0!==i?i:0)}},er=function(){var e,t;return"undefined"!==typeof navigator&&(null===(e=navigator)||void 0===e||null===(t=e.userAgent)||void 0===t?void 0:t.indexOf("Mac"))>=0},tr=function(e){var t=e.id,n=e.path,o=e.labelX,r=e.labelY,i=e.label,a=e.labelStyle,l=e.labelShowBg,u=e.labelBgStyle,c=e.labelBgPadding,d=e.labelBgBorderRadius,f=e.style,h=e.markerEnd,v=e.markerStart,g=e.interactionWidth,p=void 0===g?20:g;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("path",{id:t,style:f,d:n,fill:"none",className:"react-flow__edge-path",markerEnd:h,markerStart:v}),p&&(0,s.jsx)("path",{d:n,fill:"none",strokeOpacity:0,strokeWidth:p,className:"react-flow__edge-interaction"}),i&&Fo(o)&&Fo(r)?(0,s.jsx)(Io,{x:o,y:r,label:i,labelStyle:a,labelShowBg:l,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:d}):null]})};tr.displayName="BaseEdge";var nr,or,rr,ir,ar,lr;function ur(e,t,n){return void 0===n?n:function(o){var r=t().edges.find((function(t){return t.id===e}));r&&n(o,(0,l.Z)({},r))}}function sr(e){var t=e.sourceX,n=e.sourceY,o=e.targetX,r=e.targetY,i=Math.abs(o-t)/2,a=o<t?o+i:o-i,l=Math.abs(r-n)/2;return[a,r<n?r+l:r-l,i,l]}function cr(e){var t=e.sourceX,n=e.sourceY,o=e.targetX,r=e.targetY,i=e.sourceControlX,a=e.sourceControlY,l=.125*t+.375*i+.375*e.targetControlX+.125*o,u=.125*n+.375*a+.375*e.targetControlY+.125*r;return[l,u,Math.abs(l-t),Math.abs(u-n)]}function dr(e){var t=e.pos,n=e.x1,o=e.y1,r=e.x2,i=e.y2;return t===lr.Left||t===lr.Right?[.5*(n+r),o]:[n,.5*(o+i)]}function fr(e){var t=e.sourceX,n=e.sourceY,o=e.sourcePosition,r=void 0===o?lr.Bottom:o,a=e.targetX,l=e.targetY,u=e.targetPosition,s=void 0===u?lr.Top:u,c=dr({pos:r,x1:t,y1:n,x2:a,y2:l}),d=(0,i.Z)(c,2),f=d[0],h=d[1],v=dr({pos:s,x1:a,y1:l,x2:t,y2:n}),g=(0,i.Z)(v,2),p=g[0],y=g[1],m=cr({sourceX:t,sourceY:n,targetX:a,targetY:l,sourceControlX:f,sourceControlY:h,targetControlX:p,targetControlY:y}),b=(0,i.Z)(m,4),x=b[0],w=b[1],S=b[2],E=b[3];return["M".concat(t,",").concat(n," C").concat(f,",").concat(h," ").concat(p,",").concat(y," ").concat(a,",").concat(l),x,w,S,E]}!function(e){e.Strict="strict",e.Loose="loose"}(nr||(nr={})),function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"}(or||(or={})),function(e){e.Partial="partial",e.Full="full"}(rr||(rr={})),function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"}(ir||(ir={})),function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"}(ar||(ar={})),function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"}(lr||(lr={}));var hr=(0,c.memo)((function(e){var t=e.sourceX,n=e.sourceY,o=e.targetX,r=e.targetY,a=e.sourcePosition,l=void 0===a?lr.Bottom:a,u=e.targetPosition,c=void 0===u?lr.Top:u,d=e.label,f=e.labelStyle,h=e.labelShowBg,v=e.labelBgStyle,g=e.labelBgPadding,p=e.labelBgBorderRadius,y=e.style,m=e.markerEnd,b=e.markerStart,x=e.interactionWidth,w=fr({sourceX:t,sourceY:n,sourcePosition:l,targetX:o,targetY:r,targetPosition:c}),S=(0,i.Z)(w,3),E=S[0],C=S[1],_=S[2];return(0,s.jsx)(tr,{path:E,labelX:C,labelY:_,label:d,labelStyle:f,labelShowBg:h,labelBgStyle:v,labelBgPadding:g,labelBgBorderRadius:p,style:y,markerEnd:m,markerStart:b,interactionWidth:x})}));hr.displayName="SimpleBezierEdge";var vr=(mo={},(0,r.Z)(mo,lr.Left,{x:-1,y:0}),(0,r.Z)(mo,lr.Right,{x:1,y:0}),(0,r.Z)(mo,lr.Top,{x:0,y:-1}),(0,r.Z)(mo,lr.Bottom,{x:0,y:1}),mo),gr=function(e){var t=e.source,n=e.sourcePosition,o=void 0===n?lr.Bottom:n,r=e.target;return o===lr.Left||o===lr.Right?t.x<r.x?{x:1,y:0}:{x:-1,y:0}:t.y<r.y?{x:0,y:1}:{x:0,y:-1}},pr=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))};function yr(e){var t=e.sourceX,n=e.sourceY,o=e.sourcePosition,r=void 0===o?lr.Bottom:o,l=e.targetX,u=e.targetY,s=e.targetPosition,c=void 0===s?lr.Top:s,d=e.borderRadius,f=void 0===d?5:d,h=e.centerX,v=e.centerY,g=e.offset,p=function(e){var t,n,o=e.source,r=e.sourcePosition,l=void 0===r?lr.Bottom:r,u=e.target,s=e.targetPosition,c=void 0===s?lr.Top:s,d=e.center,f=e.offset,h=vr[l],v=vr[c],g={x:o.x+h.x*f,y:o.y+h.y*f},p={x:u.x+v.x*f,y:u.y+v.y*f},y=gr({source:g,sourcePosition:l,target:p}),m=0!==y.x?"x":"y",b=y[m],x=[],w={x:0,y:0},S={x:0,y:0},E=sr({sourceX:o.x,sourceY:o.y,targetX:u.x,targetY:u.y}),C=(0,i.Z)(E,4),_=C[0],N=C[1],M=C[2],k=C[3];if(h[m]*v[m]===-1){t=d.x||_,n=d.y||N;var P=[{x:t,y:g.y},{x:t,y:p.y}],A=[{x:g.x,y:n},{x:p.x,y:n}];x=h[m]===b?"x"===m?P:A:"x"===m?A:P}else{var O=[{x:g.x,y:p.y}],Z=[{x:p.x,y:g.y}];if(x="x"===m?h.x===b?Z:O:h.y===b?O:Z,l===c){var D=Math.abs(o[m]-u[m]);if(D<=f){var I=Math.min(f-1,f-D);h[m]===b?w[m]=(g[m]>o[m]?-1:1)*I:S[m]=(p[m]>u[m]?-1:1)*I}}if(l!==c){var z="x"===m?"y":"x",R=h[m]===v[z],T=g[z]>p[z],B=g[z]<p[z];(1===h[m]&&(!R&&T||R&&B)||1!==h[m]&&(!R&&B||R&&T))&&(x="x"===m?O:Z)}var j={x:g.x+w.x,y:g.y+w.y},L={x:p.x+S.x,y:p.y+S.y};Math.max(Math.abs(j.x-x[0].x),Math.abs(L.x-x[0].x))>=Math.max(Math.abs(j.y-x[0].y),Math.abs(L.y-x[0].y))?(t=(j.x+L.x)/2,n=x[0].y):(t=x[0].x,n=(j.y+L.y)/2)}return[[o,{x:g.x+w.x,y:g.y+w.y}].concat((0,a.Z)(x),[{x:p.x+S.x,y:p.y+S.y},u]),t,n,M,k]}({source:{x:t,y:n},sourcePosition:r,target:{x:l,y:u},targetPosition:c,center:{x:h,y:v},offset:void 0===g?20:g}),y=(0,i.Z)(p,5),m=y[0],b=y[1],x=y[2],w=y[3],S=y[4],E=m.reduce((function(e,t,n){var o="";return o=n>0&&n<m.length-1?function(e,t,n,o){var r=Math.min(pr(e,t)/2,pr(t,n)/2,o),i=t.x,a=t.y;if(e.x===i&&i===n.x||e.y===a&&a===n.y)return"L".concat(i," ").concat(a);if(e.y===a){var l=e.x<n.x?-1:1,u=e.y<n.y?1:-1;return"L ".concat(i+r*l,",").concat(a,"Q ").concat(i,",").concat(a," ").concat(i,",").concat(a+r*u)}var s=e.x<n.x?1:-1,c=e.y<n.y?-1:1;return"L ".concat(i,",").concat(a+r*c,"Q ").concat(i,",").concat(a," ").concat(i+r*s,",").concat(a)}(m[n-1],t,m[n+1],f):"".concat(0===n?"M":"L").concat(t.x," ").concat(t.y),e+=o}),"");return[E,b,x,w,S]}var mr=(0,c.memo)((function(e){var t=e.sourceX,n=e.sourceY,o=e.targetX,r=e.targetY,a=e.label,l=e.labelStyle,u=e.labelShowBg,c=e.labelBgStyle,d=e.labelBgPadding,f=e.labelBgBorderRadius,h=e.style,v=e.sourcePosition,g=void 0===v?lr.Bottom:v,p=e.targetPosition,y=void 0===p?lr.Top:p,m=e.markerEnd,b=e.markerStart,x=e.pathOptions,w=e.interactionWidth,S=yr({sourceX:t,sourceY:n,sourcePosition:g,targetX:o,targetY:r,targetPosition:y,borderRadius:null===x||void 0===x?void 0:x.borderRadius,offset:null===x||void 0===x?void 0:x.offset}),E=(0,i.Z)(S,3),C=E[0],_=E[1],N=E[2];return(0,s.jsx)(tr,{path:C,labelX:_,labelY:N,label:a,labelStyle:l,labelShowBg:u,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:m,markerStart:b,interactionWidth:w})}));mr.displayName="SmoothStepEdge";var br=(0,c.memo)((function(e){var t;return(0,s.jsx)(mr,(0,l.Z)((0,l.Z)({},e),{},{pathOptions:(0,c.useMemo)((function(){var t;return{borderRadius:0,offset:null===(t=e.pathOptions)||void 0===t?void 0:t.offset}}),[null===(t=e.pathOptions)||void 0===t?void 0:t.offset])}))}));br.displayName="StepEdge";var xr=(0,c.memo)((function(e){var t=e.sourceX,n=e.sourceY,o=e.targetX,r=e.targetY,a=e.label,l=e.labelStyle,u=e.labelShowBg,c=e.labelBgStyle,d=e.labelBgPadding,f=e.labelBgBorderRadius,h=e.style,v=e.markerEnd,g=e.markerStart,p=e.interactionWidth,y=function(e){var t=e.sourceX,n=e.sourceY,o=e.targetX,r=e.targetY,a=sr({sourceX:t,sourceY:n,targetX:o,targetY:r}),l=(0,i.Z)(a,4),u=l[0],s=l[1],c=l[2],d=l[3];return["M ".concat(t,",").concat(n,"L ").concat(o,",").concat(r),u,s,c,d]}({sourceX:t,sourceY:n,targetX:o,targetY:r}),m=(0,i.Z)(y,3),b=m[0],x=m[1],w=m[2];return(0,s.jsx)(tr,{path:b,labelX:x,labelY:w,label:a,labelStyle:l,labelShowBg:u,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:v,markerStart:g,interactionWidth:p})}));function wr(e,t){return e>=0?.5*e:25*t*Math.sqrt(-e)}function Sr(e){var t=e.pos,n=e.x1,o=e.y1,r=e.x2,i=e.y2,a=e.c;switch(t){case lr.Left:return[n-wr(n-r,a),o];case lr.Right:return[n+wr(r-n,a),o];case lr.Top:return[n,o-wr(o-i,a)];case lr.Bottom:return[n,o+wr(i-o,a)]}}function Er(e){var t=e.sourceX,n=e.sourceY,o=e.sourcePosition,r=void 0===o?lr.Bottom:o,a=e.targetX,l=e.targetY,u=e.targetPosition,s=void 0===u?lr.Top:u,c=e.curvature,d=void 0===c?.25:c,f=Sr({pos:r,x1:t,y1:n,x2:a,y2:l,c:d}),h=(0,i.Z)(f,2),v=h[0],g=h[1],p=Sr({pos:s,x1:a,y1:l,x2:t,y2:n,c:d}),y=(0,i.Z)(p,2),m=y[0],b=y[1],x=cr({sourceX:t,sourceY:n,targetX:a,targetY:l,sourceControlX:v,sourceControlY:g,targetControlX:m,targetControlY:b}),w=(0,i.Z)(x,4),S=w[0],E=w[1],C=w[2],_=w[3];return["M".concat(t,",").concat(n," C").concat(v,",").concat(g," ").concat(m,",").concat(b," ").concat(a,",").concat(l),S,E,C,_]}xr.displayName="StraightEdge";var Cr=(0,c.memo)((function(e){var t=e.sourceX,n=e.sourceY,o=e.targetX,r=e.targetY,a=e.sourcePosition,l=void 0===a?lr.Bottom:a,u=e.targetPosition,c=void 0===u?lr.Top:u,d=e.label,f=e.labelStyle,h=e.labelShowBg,v=e.labelBgStyle,g=e.labelBgPadding,p=e.labelBgBorderRadius,y=e.style,m=e.markerEnd,b=e.markerStart,x=e.pathOptions,w=e.interactionWidth,S=Er({sourceX:t,sourceY:n,sourcePosition:l,targetX:o,targetY:r,targetPosition:c,curvature:null===x||void 0===x?void 0:x.curvature}),E=(0,i.Z)(S,3),C=E[0],_=E[1],N=E[2];return(0,s.jsx)(tr,{path:C,labelX:_,labelY:N,label:d,labelStyle:f,labelShowBg:h,labelBgStyle:v,labelBgPadding:g,labelBgBorderRadius:p,style:y,markerEnd:m,markerStart:b,interactionWidth:w})}));Cr.displayName="BezierEdge";var _r=(0,c.createContext)(null),Nr=_r.Provider;_r.Consumer;var Mr=function(e){var t=e.source,n=e.sourceHandle,o=e.target,r=e.targetHandle;return"reactflow__edge-".concat(t).concat(n||"","-").concat(o).concat(r||"")},kr=function(e,t){if("undefined"===typeof e)return"";if("string"===typeof e)return e;var n=t?"".concat(t,"__"):"";return"".concat(n).concat(Object.keys(e).sort().map((function(t){return"".concat(t,"=").concat(e[t])})).join("&"))},Pr=function(e,t,n,o){var r=e.x,a=e.y,l=(0,i.Z)(t,3),u=l[0],s=l[1],c=l[2],d=(0,i.Z)(o,2),f=d[0],h=d[1],v={x:(r-u)/c,y:(a-s)/c};return n?{x:f*Math.round(v.x/f),y:h*Math.round(v.y/h)}:v},Ar=function(e,t){var n=e.x,o=e.y,r=(0,i.Z)(t,3),a=r[0],l=r[1],u=r[2];return{x:n*u+a,y:o*u+l}},Or=function(e){var t,n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0];if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};var r=(null!==(t=e.width)&&void 0!==t?t:0)*o[0],i=(null!==(n=e.height)&&void 0!==n?n:0)*o[1],a={x:e.position.x-r,y:e.position.y-i};return(0,l.Z)((0,l.Z)({},a),{},{positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-r,y:e.positionAbsolute.y-i}:a})},Zr=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0];if(0===e.length)return{x:0,y:0,width:0,height:0};var n=e.reduce((function(e,n){var o=Or(n,t).positionAbsolute,r=o.x,i=o.y;return Xo(e,Yo({x:r,y:i,width:n.width||0,height:n.height||0}))}),{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Ho(n)},Dr=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0,1],o=(0,i.Z)(n,3),r=o[0],a=o[1],l=o[2],u=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[0,0],d={x:(t.x-r)/l,y:(t.y-a)/l,width:t.width/l,height:t.height/l},f=[];return e.forEach((function(e){var t=e.width,n=e.height,o=e.selectable,r=void 0===o||o,i=e.hidden;if(s&&!r||void 0!==i&&i)return!1;var a=Or(e,c).positionAbsolute,l={x:a.x,y:a.y,width:t||0,height:n||0},h=Ko(d,l);("undefined"===typeof t||"undefined"===typeof n||null===t||null===n||u&&h>0||h>=(t||0)*(n||0)||e.dragging)&&f.push(e)})),f},Ir=function(e,t){var n=e.map((function(e){return e.id}));return t.filter((function(e){return n.includes(e.source)||n.includes(e.target)}))},zr=function(e,t,n,o,r){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.1,a=t/(e.width*(1+i)),l=n/(e.height*(1+i)),u=Math.min(a,l),s=Ro(u,o,r);return[t/2-(e.x+e.width/2)*s,n/2-(e.y+e.height/2)*s,s]},Rr=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.transition().duration(t)};function Tr(e,t,n,o){return(t[n]||[]).reduce((function(t,r){var i,a,l,u;"".concat(e.id,"-").concat(r.id,"-").concat(n)!==o&&t.push({id:r.id||null,type:n,nodeId:e.id,x:(null!==(i=null===(a=e.positionAbsolute)||void 0===a?void 0:a.x)&&void 0!==i?i:0)+r.x+r.width/2,y:(null!==(l=null===(u=e.positionAbsolute)||void 0===u?void 0:u.y)&&void 0!==l?l:0)+r.y+r.height/2});return t}),[])}var Br={source:null,target:null,sourceHandle:null,targetHandle:null},jr=function(){return{handleDomNode:null,isValid:!1,connection:Br,endHandle:null}};function Lr(e,t,n,o,r,i,a){var u="target"===r,s=a.querySelector('.react-flow__handle[data-id="'.concat(null===e||void 0===e?void 0:e.nodeId,"-").concat(null===e||void 0===e?void 0:e.id,"-").concat(null===e||void 0===e?void 0:e.type,'"]')),c=(0,l.Z)((0,l.Z)({},jr()),{},{handleDomNode:s});if(s){var d=Xr(void 0,s),f=s.getAttribute("data-nodeid"),h=s.getAttribute("data-handleid"),v=s.classList.contains("connectable"),g=s.classList.contains("connectableend"),p={source:u?f:n,sourceHandle:u?h:o,target:u?n:f,targetHandle:u?o:h};c.connection=p,v&&g&&(t===nr.Strict?u&&"source"===d||!u&&"target"===d:f!==n||h!==o)&&(c.endHandle={nodeId:f,handleId:h,type:d},c.isValid=i(p))}return c}function Xr(e,t){return e||(null!==t&&void 0!==t&&t.classList.contains("target")?"target":null!==t&&void 0!==t&&t.classList.contains("source")?"source":null)}function Yr(e){null===e||void 0===e||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function Hr(e,t){var n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function Vr(e){var t,n=e.event,o=e.handleId,r=e.nodeId,l=e.onConnect,u=e.isTarget,s=e.getState,c=e.setState,d=e.isValidConnection,f=e.edgeUpdaterType,h=e.onEdgeUpdateEnd,v=Lo(n.target),g=s(),p=g.connectionMode,y=g.domNode,m=g.autoPanOnConnect,b=g.connectionRadius,x=g.onConnectStart,w=g.panBy,S=g.getNodes,E=g.cancelConnection,C=0,_=Jo(n),N=_.x,M=_.y,k=null===v||void 0===v?void 0:v.elementFromPoint(N,M),P=Xr(f,k),A=null===y||void 0===y?void 0:y.getBoundingClientRect();if(A&&P){var O,Z=Jo(n,A),D=!1,I=null,z=!1,R=null,T=function(e){var t=e.nodes,n=e.nodeId,o=e.handleId,r=e.handleType;return t.reduce((function(e,t){if(t[Wo]){var i=t[Wo].handleBounds,l=[],u=[];i&&(l=Tr(t,i,"source","".concat(n,"-").concat(o,"-").concat(r)),u=Tr(t,i,"target","".concat(n,"-").concat(o,"-").concat(r))),e.push.apply(e,(0,a.Z)(l).concat((0,a.Z)(u)))}return e}),[])}({nodes:S(),nodeId:r,handleId:o,handleType:P}),B=function e(){if(m){var t=jo(Z,A),n=(0,i.Z)(t,2),o=n[0],r=n[1];w({x:o,y:r}),C=requestAnimationFrame(e)}};c({connectionPosition:Z,connectionStatus:null,connectionNodeId:r,connectionHandleId:o,connectionHandleType:P,connectionStartHandle:{nodeId:r,handleId:o,type:P},connectionEndHandle:null}),null===x||void 0===x||x(n,{nodeId:r,handleId:o,handleType:P}),v.addEventListener("mousemove",j),v.addEventListener("mouseup",L),v.addEventListener("touchmove",j),v.addEventListener("touchend",L)}function j(e){var n=s().transform;Z=Jo(e,A);var i=function(e,t,n,o,r,i){var a=Jo(e),l=a.x,u=a.y,s=t.elementsFromPoint(l,u).find((function(e){return e.classList.contains("react-flow__handle")}));if(s){var c=s.getAttribute("data-nodeid");if(c){var d=Xr(void 0,s),f=s.getAttribute("data-handleid"),h=i({nodeId:c,id:f,type:d});if(h)return{handle:{id:f,type:d,nodeId:c,x:n.x,y:n.y},validHandleResult:h}}}var v=[],g=1/0;if(r.forEach((function(e){var t=Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2));if(t<=o){var r=i(e);t<=g&&(t<g?v=[{handle:e,validHandleResult:r}]:t===g&&v.push({handle:e,validHandleResult:r}),g=t)}})),!v.length)return{handle:null,validHandleResult:jr()};if(1===v.length)return v[0];var p=v.some((function(e){return e.validHandleResult.isValid})),y=v.some((function(e){return"target"===e.handle.type}));return v.find((function(e){var t=e.handle,n=e.validHandleResult;return y?"target"===t.type:!p||n.isValid}))||v[0]}(e,v,Pr(Z,n,!1,[1,1]),b,T,(function(e){return Lr(e,p,r,o,u?"target":"source",d,v)})),a=i.handle,l=i.validHandleResult;if(t=a,D||(B(),D=!0),R=l.handleDomNode,I=l.connection,z=l.isValid,c({connectionPosition:t&&z?Ar({x:t.x,y:t.y},n):Z,connectionStatus:Hr(!!t,z),connectionEndHandle:l.endHandle}),!t&&!z&&!R)return Yr(O);I.source!==I.target&&R&&(Yr(O),O=R,R.classList.add("connecting","react-flow__handle-connecting"),R.classList.toggle("valid",z),R.classList.toggle("react-flow__handle-valid",z))}function L(e){var n,o;(t||R)&&I&&z&&(null===l||void 0===l||l(I)),null===(n=(o=s()).onConnectEnd)||void 0===n||n.call(o,e),f&&(null===h||void 0===h||h(e)),Yr(O),E(),cancelAnimationFrame(C),D=!1,z=!1,I=null,R=null,v.removeEventListener("mousemove",j),v.removeEventListener("mouseup",L),v.removeEventListener("touchmove",j),v.removeEventListener("touchend",L)}}var Kr=function(){return!0},Ur=function(e){return{connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}},Fr=(0,c.forwardRef)((function(e,t){var n,o,r=e.type,i=void 0===r?"source":r,a=e.position,f=void 0===a?lr.Top:a,h=e.isValidConnection,v=e.isConnectable,g=void 0===v||v,p=e.isConnectableStart,y=void 0===p||p,b=e.isConnectableEnd,x=void 0===b||b,w=e.id,S=e.onConnect,E=e.children,C=e.className,_=e.onMouseDown,N=e.onTouchStart,M=(0,u.Z)(e,Eo),k=w||null,P="target"===i,A=Ao(),O=(0,c.useContext)(_r),Z=Po(Ur,m),D=Z.connectOnClick,I=Z.noPanClassName,z=Po(function(e,t,n){return function(o){var r=o.connectionStartHandle,i=o.connectionEndHandle,a=o.connectionClickStartHandle;return{connecting:(null===r||void 0===r?void 0:r.nodeId)===e&&(null===r||void 0===r?void 0:r.handleId)===t&&(null===r||void 0===r?void 0:r.type)===n||(null===i||void 0===i?void 0:i.nodeId)===e&&(null===i||void 0===i?void 0:i.handleId)===t&&(null===i||void 0===i?void 0:i.type)===n,clickConnecting:(null===a||void 0===a?void 0:a.nodeId)===e&&(null===a||void 0===a?void 0:a.handleId)===t&&(null===a||void 0===a?void 0:a.type)===n}}}(O,k,i),m),R=z.connecting,T=z.clickConnecting;O||(null===(n=(o=A.getState()).onError)||void 0===n||n.call(o,"010",Mo.error010()));var B=function(e){var t=A.getState(),n=t.defaultEdgeOptions,o=t.onConnect,r=t.hasDefaultEdges,i=(0,l.Z)((0,l.Z)({},n),e);if(r){var a=A.getState(),u=a.edges;(0,a.setEdges)(function(e,t){return e.source&&e.target?function(e,t){return t.some((function(t){return t.source===e.source&&t.target===e.target&&(t.sourceHandle===e.sourceHandle||!t.sourceHandle&&!e.sourceHandle)&&(t.targetHandle===e.targetHandle||!t.targetHandle&&!e.targetHandle)}))}(n="id"in(o=e)&&"source"in o&&"target"in o?(0,l.Z)({},e):(0,l.Z)((0,l.Z)({},e),{},{id:Mr(e)}),t)?t:t.concat(n):(Go(0,Mo.error006()),t);var n,o}(i,u))}null===o||void 0===o||o(i),null===S||void 0===S||S(i)},j=function(e){if(O){var t=Qo(e);y&&(t&&0===e.button||!t)&&Vr({event:e,handleId:k,nodeId:O,onConnect:B,isTarget:P,getState:A.getState,setState:A.setState,isValidConnection:h||A.getState().isValidConnection||Kr}),t?null===_||void 0===_||_(e):null===N||void 0===N||N(e)}};return(0,s.jsx)("div",(0,l.Z)((0,l.Z)({"data-handleid":k,"data-nodeid":O,"data-handlepos":f,"data-id":"".concat(O,"-").concat(k,"-").concat(i),className:d(["react-flow__handle","react-flow__handle-".concat(f),"nodrag",I,C,{source:!P,target:P,connectable:g,connectablestart:y,connectableend:x,connecting:T,connectionindicator:g&&(y&&!R||x&&R)}]),onMouseDown:j,onTouchStart:j,onClick:D?function(e){var t=A.getState(),n=t.onClickConnectStart,o=t.onClickConnectEnd,r=t.connectionClickStartHandle,a=t.connectionMode,l=t.isValidConnection;if(O&&(r||y)){if(!r)return null===n||void 0===n||n(e,{nodeId:O,handleId:k,handleType:i}),void A.setState({connectionClickStartHandle:{nodeId:O,type:i,handleId:k}});var u=Lo(e.target),s=h||l||Kr,c=Lr({nodeId:O,id:k,type:i},a,r.nodeId,r.handleId||null,r.type,s,u),d=c.connection;c.isValid&&B(d),null===o||void 0===o||o(e),A.setState({connectionClickStartHandle:null})}}:void 0,ref:t},M),{},{children:E}))}));Fr.displayName="Handle";var Wr=(0,c.memo)(Fr),qr=function(e){var t=e.data,n=e.isConnectable,o=e.targetPosition,r=void 0===o?lr.Top:o,i=e.sourcePosition,a=void 0===i?lr.Bottom:i;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(Wr,{type:"target",position:r,isConnectable:n}),null===t||void 0===t?void 0:t.label,(0,s.jsx)(Wr,{type:"source",position:a,isConnectable:n})]})};qr.displayName="DefaultNode";var Gr=(0,c.memo)(qr),$r=function(e){var t=e.data,n=e.isConnectable,o=e.sourcePosition,r=void 0===o?lr.Bottom:o;return(0,s.jsxs)(s.Fragment,{children:[null===t||void 0===t?void 0:t.label,(0,s.jsx)(Wr,{type:"source",position:r,isConnectable:n})]})};$r.displayName="InputNode";var Qr=(0,c.memo)($r),Jr=function(e){var t=e.data,n=e.isConnectable,o=e.targetPosition,r=void 0===o?lr.Top:o;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(Wr,{type:"target",position:r,isConnectable:n}),null===t||void 0===t?void 0:t.label]})};Jr.displayName="OutputNode";var ei=(0,c.memo)(Jr),ti=function(){return null};ti.displayName="GroupNode";var ni=function(e){return{selectedNodes:e.getNodes().filter((function(e){return e.selected})),selectedEdges:e.edges.filter((function(e){return e.selected}))}},oi=function(e){return e.id};function ri(e,t){return m(e.selectedNodes.map(oi),t.selectedNodes.map(oi))&&m(e.selectedEdges.map(oi),t.selectedEdges.map(oi))}var ii=(0,c.memo)((function(e){var t=e.onSelectionChange,n=Ao(),o=Po(ni,ri),r=o.selectedNodes,i=o.selectedEdges;return(0,c.useEffect)((function(){var e,o,a={nodes:r,edges:i};null===t||void 0===t||t(a),null===(e=(o=n.getState()).onSelectionChange)||void 0===e||e.call(o,a)}),[r,i,t]),null}));ii.displayName="SelectionListener";var ai=function(e){return!!e.onSelectionChange};function li(e){var t=e.onSelectionChange,n=Po(ai);return t||n?(0,s.jsx)(ii,{onSelectionChange:t}):null}var ui=function(e){return{setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset}};function si(e,t){(0,c.useEffect)((function(){"undefined"!==typeof e&&t(e)}),[e])}function ci(e,t,n){(0,c.useEffect)((function(){"undefined"!==typeof t&&n((0,r.Z)({},e,t))}),[t])}var di=function(e){var t=e.nodes,n=e.edges,o=e.defaultNodes,r=e.defaultEdges,i=e.onConnect,a=e.onConnectStart,u=e.onConnectEnd,s=e.onClickConnectStart,d=e.onClickConnectEnd,f=e.nodesDraggable,h=e.nodesConnectable,v=e.nodesFocusable,g=e.edgesFocusable,p=e.edgesUpdatable,y=e.elevateNodesOnSelect,b=e.minZoom,x=e.maxZoom,w=e.nodeExtent,S=e.onNodesChange,E=e.onEdgesChange,C=e.elementsSelectable,_=e.connectionMode,N=e.snapGrid,M=e.snapToGrid,k=e.translateExtent,P=e.connectOnClick,A=e.defaultEdgeOptions,O=e.fitView,Z=e.fitViewOptions,D=e.onNodesDelete,I=e.onEdgesDelete,z=e.onNodeDrag,R=e.onNodeDragStart,T=e.onNodeDragStop,B=e.onSelectionDrag,j=e.onSelectionDragStart,L=e.onSelectionDragStop,X=e.noPanClassName,Y=e.nodeOrigin,H=e.rfId,V=e.autoPanOnConnect,K=e.autoPanOnNodeDrag,U=e.onError,F=e.connectionRadius,W=e.isValidConnection,q=Po(ui,m),G=q.setNodes,$=q.setEdges,Q=q.setDefaultNodesAndEdges,J=q.setMinZoom,ee=q.setMaxZoom,te=q.setTranslateExtent,ne=q.setNodeExtent,oe=q.reset,re=Ao();return(0,c.useEffect)((function(){var e=null===r||void 0===r?void 0:r.map((function(e){return(0,l.Z)((0,l.Z)({},e),A)}));return Q(o,e),function(){oe()}}),[]),ci("defaultEdgeOptions",A,re.setState),ci("connectionMode",_,re.setState),ci("onConnect",i,re.setState),ci("onConnectStart",a,re.setState),ci("onConnectEnd",u,re.setState),ci("onClickConnectStart",s,re.setState),ci("onClickConnectEnd",d,re.setState),ci("nodesDraggable",f,re.setState),ci("nodesConnectable",h,re.setState),ci("nodesFocusable",v,re.setState),ci("edgesFocusable",g,re.setState),ci("edgesUpdatable",p,re.setState),ci("elementsSelectable",C,re.setState),ci("elevateNodesOnSelect",y,re.setState),ci("snapToGrid",M,re.setState),ci("snapGrid",N,re.setState),ci("onNodesChange",S,re.setState),ci("onEdgesChange",E,re.setState),ci("connectOnClick",P,re.setState),ci("fitViewOnInit",O,re.setState),ci("fitViewOnInitOptions",Z,re.setState),ci("onNodesDelete",D,re.setState),ci("onEdgesDelete",I,re.setState),ci("onNodeDrag",z,re.setState),ci("onNodeDragStart",R,re.setState),ci("onNodeDragStop",T,re.setState),ci("onSelectionDrag",B,re.setState),ci("onSelectionDragStart",j,re.setState),ci("onSelectionDragStop",L,re.setState),ci("noPanClassName",X,re.setState),ci("nodeOrigin",Y,re.setState),ci("rfId",H,re.setState),ci("autoPanOnConnect",V,re.setState),ci("autoPanOnNodeDrag",K,re.setState),ci("onError",U,re.setState),ci("connectionRadius",F,re.setState),ci("isValidConnection",W,re.setState),si(t,G),si(n,$),si(b,J),si(x,ee),si(k,te),si(w,ne),null},fi={display:"none"},hi={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},vi="react-flow__node-desc",gi="react-flow__edge-desc",pi="react-flow__aria-live",yi=function(e){return e.ariaLiveMessage};function mi(e){var t=e.rfId,n=Po(yi);return(0,s.jsx)("div",{id:"".concat(pi,"-").concat(t),"aria-live":"assertive","aria-atomic":"true",style:hi,children:n})}function bi(e){var t=e.rfId,n=e.disableKeyboardA11y;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{id:"".concat(vi,"-").concat(t),style:fi,children:["Press enter or space to select a node.",!n&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "]}),(0,s.jsx)("div",{id:"".concat(gi,"-").concat(t),style:fi,children:"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."}),!n&&(0,s.jsx)(mi,{rfId:t})]})}var xi="undefined"!==typeof document?document:null,wi=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{target:xi},n=(0,c.useState)(!1),o=(0,i.Z)(n,2),r=o[0],l=o[1],u=(0,c.useRef)(!1),s=(0,c.useRef)(new Set([])),d=(0,c.useMemo)((function(){if(null!==e){var t=(Array.isArray(e)?e:[e]).filter((function(e){return"string"===typeof e})).map((function(e){return e.split("+")})),n=t.reduce((function(e,t){return e.concat.apply(e,(0,a.Z)(t))}),[]);return[t,n]}return[[],[]]}),[e]),f=(0,i.Z)(d,2),h=f[0],v=f[1];return(0,c.useEffect)((function(){if(null!==e){var n,o,r=function(e){if(u.current=e.ctrlKey||e.metaKey||e.shiftKey,!u.current&&$o(e))return!1;var t=Ei(e.code,v);s.current.add(e[t]),Si(h,s.current,!1)&&(e.preventDefault(),l(!0))},i=function(e){if(!u.current&&$o(e))return!1;var t=Ei(e.code,v);Si(h,s.current,!0)?(l(!1),s.current.clear()):s.current.delete(e[t]),"Meta"===e.key&&s.current.clear(),u.current=!1},a=function(){s.current.clear(),l(!1)};return null===t||void 0===t||null===(n=t.target)||void 0===n||n.addEventListener("keydown",r),null===t||void 0===t||null===(o=t.target)||void 0===o||o.addEventListener("keyup",i),window.addEventListener("blur",a),function(){var e,n;null===t||void 0===t||null===(e=t.target)||void 0===e||e.removeEventListener("keydown",r),null===t||void 0===t||null===(n=t.target)||void 0===n||n.removeEventListener("keyup",i),window.removeEventListener("blur",a)}}}),[e,l]),r};function Si(e,t,n){return e.filter((function(e){return n||e.length===t.size})).some((function(e){return e.every((function(e){return t.has(e)}))}))}function Ei(e,t){return t.includes(e)?"code":"key"}function Ci(e,t,n,o){var r,i,a,l,u,s,c,d;if(!e.parentNode)return n;var f=t.get(e.parentNode),h=Or(f,o);return Ci(f,t,{x:(null!==(r=n.x)&&void 0!==r?r:0)+h.x,y:(null!==(i=n.y)&&void 0!==i?i:0)+h.y,z:(null!==(a=null===(l=f[Wo])||void 0===l?void 0:l.z)&&void 0!==a?a:0)>(null!==(u=n.z)&&void 0!==u?u:0)?null!==(s=null===(c=f[Wo])||void 0===c?void 0:c.z)&&void 0!==s?s:0:null!==(d=n.z)&&void 0!==d?d:0},o)}function _i(e,t,n){e.forEach((function(o){if(o.parentNode&&!e.has(o.parentNode))throw new Error("Parent node ".concat(o.parentNode," not found"));if(o.parentNode||null!==n&&void 0!==n&&n[o.id]){var r,i,a=Ci(o,e,(0,l.Z)((0,l.Z)({},o.position),{},{z:null!==(r=null===(i=o[Wo])||void 0===i?void 0:i.z)&&void 0!==r?r:0}),t),u=a.x,s=a.y,c=a.z;o.positionAbsolute={x:u,y:s},o[Wo].z=c,null!==n&&void 0!==n&&n[o.id]&&(o[Wo].isParent=!0)}}))}function Ni(e,t,n,o){var r=new Map,i={},a=o?1e3:0;return e.forEach((function(e){var n,o=(Fo(e.zIndex)?e.zIndex:0)+(e.selected?a:0),u=t.get(e.id),s=(0,l.Z)((0,l.Z)({width:null===u||void 0===u?void 0:u.width,height:null===u||void 0===u?void 0:u.height},e),{},{positionAbsolute:{x:e.position.x,y:e.position.y}});e.parentNode&&(s.parentNode=e.parentNode,i[e.parentNode]=!0),Object.defineProperty(s,Wo,{enumerable:!1,value:{handleBounds:null===u||void 0===u||null===(n=u[Wo])||void 0===n?void 0:n.handleBounds,z:o}}),r.set(e.id,s)})),_i(r,n,i),r}function Mi(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e(),o=n.getNodes,r=n.width,a=n.height,l=n.minZoom,u=n.maxZoom,s=n.d3Zoom,c=n.d3Selection,d=n.fitViewOnInitDone,f=n.fitViewOnInit,h=n.nodeOrigin,v=t.initial&&!d&&f;if(s&&c&&(v||!t.initial)){var g=o().filter((function(e){var n,o=t.includeHiddenNodes?e.width&&e.height:!e.hidden;return null!==(n=t.nodes)&&void 0!==n&&n.length?o&&t.nodes.some((function(t){return t.id===e.id})):o})),p=g.every((function(e){return e.width&&e.height}));if(g.length>0&&p){var y,m,b,x=Zr(g,h),w=zr(x,r,a,null!==(y=t.minZoom)&&void 0!==y?y:l,null!==(m=t.maxZoom)&&void 0!==m?m:u,null!==(b=t.padding)&&void 0!==b?b:.1),S=(0,i.Z)(w,3),E=S[0],C=S[1],_=S[2],N=no.translate(E,C).scale(_);return"number"===typeof t.duration&&t.duration>0?s.transform(Rr(c,t.duration),N):s.transform(c,N),!0}}return!1}function ki(e,t){return e.forEach((function(e){var n,o=t.get(e.id);o&&t.set(o.id,(0,l.Z)((0,l.Z)({},o),{},(n={},(0,r.Z)(n,Wo,o[Wo]),(0,r.Z)(n,"selected",e.selected),n)))})),new Map(t)}function Pi(e,t){return t.map((function(t){var n=e.find((function(e){return e.id===t.id}));return n&&(t.selected=n.selected),t}))}function Ai(e){var t=e.changedNodes,n=e.changedEdges,o=e.get,r=e.set,i=o(),a=i.nodeInternals,l=i.edges,u=i.onNodesChange,s=i.onEdgesChange,c=i.hasDefaultNodes,d=i.hasDefaultEdges;null!==t&&void 0!==t&&t.length&&(c&&r({nodeInternals:ki(t,a)}),null===u||void 0===u||u(t)),null!==n&&void 0!==n&&n.length&&(d&&r({edges:Pi(n,l)}),null===s||void 0===s||s(n))}var Oi=function(){},Zi={zoomIn:Oi,zoomOut:Oi,zoomTo:Oi,getZoom:function(){return 1},setViewport:Oi,getViewport:function(){return{x:0,y:0,zoom:1}},fitView:function(){return!1},setCenter:Oi,fitBounds:Oi,project:function(e){return e},viewportInitialized:!1},Di=function(e){return{d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}},Ii=function(){var e=Ao(),t=Po(Di,m),n=t.d3Zoom,o=t.d3Selection,r=(0,c.useMemo)((function(){return o&&n?{zoomIn:function(e){return n.scaleBy(Rr(o,null===e||void 0===e?void 0:e.duration),1.2)},zoomOut:function(e){return n.scaleBy(Rr(o,null===e||void 0===e?void 0:e.duration),1/1.2)},zoomTo:function(e,t){return n.scaleTo(Rr(o,null===t||void 0===t?void 0:t.duration),e)},getZoom:function(){return e.getState().transform[2]},setViewport:function(t,r){var a,l,u,s=(0,i.Z)(e.getState().transform,3),c=s[0],d=s[1],f=s[2],h=no.translate(null!==(a=t.x)&&void 0!==a?a:c,null!==(l=t.y)&&void 0!==l?l:d).scale(null!==(u=t.zoom)&&void 0!==u?u:f);n.transform(Rr(o,null===r||void 0===r?void 0:r.duration),h)},getViewport:function(){var t=(0,i.Z)(e.getState().transform,3);return{x:t[0],y:t[1],zoom:t[2]}},fitView:function(t){return Mi(e.getState,t)},setCenter:function(t,r,i){var a=e.getState(),l=a.width,u=a.height,s=a.maxZoom,c="undefined"!==typeof(null===i||void 0===i?void 0:i.zoom)?i.zoom:s,d=l/2-t*c,f=u/2-r*c,h=no.translate(d,f).scale(c);n.transform(Rr(o,null===i||void 0===i?void 0:i.duration),h)},fitBounds:function(t,r){var a,l=e.getState(),u=l.width,s=l.height,c=l.minZoom,d=l.maxZoom,f=zr(t,u,s,c,d,null!==(a=null===r||void 0===r?void 0:r.padding)&&void 0!==a?a:.1),h=(0,i.Z)(f,3),v=h[0],g=h[1],p=h[2],y=no.translate(v,g).scale(p);n.transform(Rr(o,null===r||void 0===r?void 0:r.duration),y)},project:function(t){var n=e.getState(),o=n.transform,r=n.snapToGrid,i=n.snapGrid;return Pr(t,o,r,i)},viewportInitialized:!0}:Zi}),[n,o]);return r};function zi(){var e=Ii(),t=Ao(),n=(0,c.useCallback)((function(){return t.getState().getNodes().map((function(e){return(0,l.Z)({},e)}))}),[]),o=(0,c.useCallback)((function(e){return t.getState().nodeInternals.get(e)}),[]),r=(0,c.useCallback)((function(){var e=t.getState().edges;return(void 0===e?[]:e).map((function(e){return(0,l.Z)({},e)}))}),[]),u=(0,c.useCallback)((function(e){var n=t.getState().edges;return(void 0===n?[]:n).find((function(t){return t.id===e}))}),[]),s=(0,c.useCallback)((function(e){var n=t.getState(),o=n.getNodes,r=n.setNodes,i=n.hasDefaultNodes,a=n.onNodesChange,l=o(),u="function"===typeof e?e(l):e;if(i)r(u);else if(a){var s=0===u.length?l.map((function(e){return{type:"remove",id:e.id}})):u.map((function(e){return{item:e,type:"reset"}}));a(s)}}),[]),d=(0,c.useCallback)((function(e){var n=t.getState(),o=n.edges,r=void 0===o?[]:o,i=n.setEdges,a=n.hasDefaultEdges,l=n.onEdgesChange,u="function"===typeof e?e(r):e;if(a)i(u);else if(l){l(0===u.length?r.map((function(e){return{type:"remove",id:e.id}})):u.map((function(e){return{item:e,type:"reset"}})))}}),[]),f=(0,c.useCallback)((function(e){var n=Array.isArray(e)?e:[e],o=t.getState(),r=o.getNodes,i=o.setNodes,l=o.hasDefaultNodes,u=o.onNodesChange;if(l){var s=r();i([].concat((0,a.Z)(s),(0,a.Z)(n)))}else if(u){var c=n.map((function(e){return{item:e,type:"add"}}));u(c)}}),[]),h=(0,c.useCallback)((function(e){var n=Array.isArray(e)?e:[e],o=t.getState(),r=o.edges,i=void 0===r?[]:r,l=o.setEdges,u=o.hasDefaultEdges,s=o.onEdgesChange;if(u)l([].concat((0,a.Z)(i),(0,a.Z)(n)));else if(s){s(n.map((function(e){return{item:e,type:"add"}})))}}),[]),v=(0,c.useCallback)((function(){var e=t.getState(),n=e.getNodes,o=e.edges,r=void 0===o?[]:o,a=e.transform,u=(0,i.Z)(a,3),s=u[0],c=u[1],d=u[2];return{nodes:n().map((function(e){return(0,l.Z)({},e)})),edges:r.map((function(e){return(0,l.Z)({},e)})),viewport:{x:s,y:c,zoom:d}}}),[]),g=(0,c.useCallback)((function(e){var n=e.nodes,o=e.edges,r=t.getState(),i=r.nodeInternals,l=r.getNodes,u=r.edges,s=r.hasDefaultNodes,c=r.hasDefaultEdges,d=r.onNodesDelete,f=r.onEdgesDelete,h=r.onNodesChange,v=r.onEdgesChange,g=(n||[]).map((function(e){return e.id})),p=(o||[]).map((function(e){return e.id})),y=l().reduce((function(e,t){var n=!g.includes(t.id)&&t.parentNode&&e.find((function(e){return e.id===t.parentNode}));return("boolean"!==typeof t.deletable||t.deletable)&&(g.includes(t.id)||n)&&e.push(t),e}),[]),m=u.filter((function(e){return"boolean"!==typeof e.deletable||e.deletable})),b=m.filter((function(e){return p.includes(e.id)}));if(y||b){var x=Ir(y,m),w=[].concat((0,a.Z)(b),(0,a.Z)(x)),S=w.reduce((function(e,t){return e.includes(t.id)||e.push(t.id),e}),[]);if((c||s)&&(c&&t.setState({edges:u.filter((function(e){return!S.includes(e.id)}))}),s&&(y.forEach((function(e){i.delete(e.id)})),t.setState({nodeInternals:new Map(i)}))),S.length>0&&(null===f||void 0===f||f(w),v&&v(S.map((function(e){return{id:e,type:"remove"}})))),y.length>0)if(null===d||void 0===d||d(y),h)h(y.map((function(e){return{id:e.id,type:"remove"}})))}}),[]),p=(0,c.useCallback)((function(e){var n=Uo(e),o=n?null:t.getState().nodeInternals.get(e.id);return[n?e:Vo(o),o,n]}),[]),y=(0,c.useCallback)((function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=arguments.length>2?arguments[2]:void 0,r=p(e),a=(0,i.Z)(r,3),l=a[0],u=a[1],s=a[2];return l?(o||t.getState().getNodes()).filter((function(t){if(!s&&(t.id===u.id||!t.positionAbsolute))return!1;var o=Vo(t),r=Ko(o,l);return n&&r>0||r>=e.width*e.height})):[]}),[]),m=(0,c.useCallback)((function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=p(e),r=(0,i.Z)(o,1)[0];if(!r)return!1;var a=Ko(r,t);return n&&a>0||a>=e.width*e.height}),[]);return(0,c.useMemo)((function(){return(0,l.Z)((0,l.Z)({},e),{},{getNodes:n,getNode:o,getEdges:r,getEdge:u,setNodes:s,setEdges:d,addNodes:f,addEdges:h,toObject:v,deleteElements:g,getIntersectingNodes:y,isNodeIntersecting:m})}),[e,n,o,r,u,s,d,f,h,v,g,y,m])}var Ri={position:"absolute",width:"100%",height:"100%",top:0,left:0},Ti=function(e){return{x:e.x,y:e.y,zoom:e.k}},Bi=function(e,t){return e.target.closest(".".concat(t))},ji=function(e,t){return 2===t&&Array.isArray(e)&&e.includes(2)},Li=function(e){var t=e.ctrlKey&&er()?10:1;return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*t},Xi=function(e){return{d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}},Yi=function(e){var t=e.onMove,n=e.onMoveStart,o=e.onMoveEnd,r=e.onPaneContextMenu,i=e.zoomOnScroll,a=void 0===i||i,l=e.zoomOnPinch,u=void 0===l||l,d=e.panOnScroll,f=void 0!==d&&d,h=e.panOnScrollSpeed,v=void 0===h?.5:h,g=e.panOnScrollMode,p=void 0===g?or.Free:g,y=e.zoomOnDoubleClick,b=void 0===y||y,x=e.elementsSelectable,w=e.panOnDrag,S=void 0===w||w,E=e.defaultViewport,_=e.translateExtent,N=e.minZoom,M=e.maxZoom,k=e.zoomActivationKeyCode,P=e.preventScrolling,A=void 0===P||P,O=e.children,Z=e.noWheelClassName,D=e.noPanClassName,I=(0,c.useRef)(),z=Ao(),R=(0,c.useRef)(!1),T=(0,c.useRef)(!1),B=(0,c.useRef)(null),j=(0,c.useRef)({x:0,y:0,zoom:0}),L=Po(Xi,m),X=L.d3Zoom,Y=L.d3Selection,H=L.d3ZoomHandler,V=L.userSelectionActive,K=wi(k),U=(0,c.useRef)(0),F=(0,c.useRef)(!1),W=(0,c.useRef)();return function(e){var t=Ao();(0,c.useEffect)((function(){var n,o=function(){if(e.current){var n,o,r=zo(e.current);0!==r.height&&0!==r.width||null===(n=(o=t.getState()).onError)||void 0===n||n.call(o,"004",Mo.error004()),t.setState({width:r.width||500,height:r.height||500})}};return o(),window.addEventListener("resize",o),e.current&&(n=new ResizeObserver((function(){return o()}))).observe(e.current),function(){window.removeEventListener("resize",o),n&&e.current&&n.unobserve(e.current)}}),[])}(B),(0,c.useEffect)((function(){if(B.current){var e=B.current.getBoundingClientRect(),t=function(){var e,t,n,o=io,r=ao,i=co,a=uo,l=so,u=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],c=250,d=qe,f=C("start","zoom","end"),h=500,v=150,g=0,p=10;function y(e){e.property("__zoom",lo).on("wheel.zoom",_,{passive:!1}).on("mousedown.zoom",N).on("dblclick.zoom",M).filter(l).on("touchstart.zoom",k).on("touchmove.zoom",P).on("touchend.zoom touchcancel.zoom",A).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function m(e,t){return(t=Math.max(u[0],Math.min(u[1],t)))===e.k?e:new to(t,e.x,e.y)}function b(e,t,n){var o=t[0]-n[0]*e.k,r=t[1]-n[1]*e.k;return o===e.x&&r===e.y?e:new to(e.k,o,r)}function x(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function w(e,t,n,o){e.on("start.zoom",(function(){S(this,arguments).event(o).start()})).on("interrupt.zoom end.zoom",(function(){S(this,arguments).event(o).end()})).tween("zoom",(function(){var e=this,i=arguments,a=S(e,i).event(o),l=r.apply(e,i),u=null==n?x(l):"function"===typeof n?n.apply(e,i):n,s=Math.max(l[1][0]-l[0][0],l[1][1]-l[0][1]),c=e.__zoom,f="function"===typeof t?t.apply(e,i):t,h=d(c.invert(u).concat(s/c.k),f.invert(u).concat(s/f.k));return function(e){if(1===e)e=f;else{var t=h(e),n=s/t[2];e=new to(n,u[0]-t[0]*n,u[1]-t[1]*n)}a.zoom(null,e)}}))}function S(e,t,n){return!n&&e.__zooming||new E(e,t)}function E(e,t){this.that=e,this.args=t,this.active=0,this.sourceEvent=null,this.extent=r.apply(e,t),this.taps=0}function _(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(o.apply(this,arguments)){var l=S(this,n).event(e),c=this.__zoom,d=Math.max(u[0],Math.min(u[1],c.k*Math.pow(2,a.apply(this,arguments)))),f=Ge(e);if(l.wheel)l.mouse[0][0]===f[0]&&l.mouse[0][1]===f[1]||(l.mouse[1]=c.invert(l.mouse[0]=f)),clearTimeout(l.wheel);else{if(c.k===d)return;l.mouse=[f,c.invert(f)],Pt(this),l.start()}ro(e),l.wheel=setTimeout((function(){l.wheel=null,l.end()}),v),l.zoom("mouse",i(b(m(c,d),l.mouse[0],l.mouse[1]),l.extent,s))}}function N(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];if(!n&&o.apply(this,arguments)){var l=e.currentTarget,u=S(this,r,!0).event(e),c=Xe(e.view).on("mousemove.zoom",(function(e){if(ro(e),!u.moved){var t=e.clientX-f,n=e.clientY-h;u.moved=t*t+n*n>g}u.event(e).zoom("mouse",i(b(u.that.__zoom,u.mouse[0]=Ge(e,l),u.mouse[1]),u.extent,s))}),!0).on("mouseup.zoom",(function(e){c.on("mousemove.zoom mouseup.zoom",null),Fe(e.view,u.moved),ro(e),u.event(e).end()}),!0),d=Ge(e,l),f=e.clientX,h=e.clientY;Ue(e.view),oo(e),u.mouse=[d,this.__zoom.invert(d)],Pt(this),u.start()}}function M(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];if(o.apply(this,arguments)){var l=this.__zoom,u=Ge(e.changedTouches?e.changedTouches[0]:e,this),d=l.invert(u),f=l.k*(e.shiftKey?.5:2),h=i(b(m(l,f),u,d),r.apply(this,n),s);ro(e),c>0?Xe(this).transition().duration(c).call(w,h,u,e):Xe(this).call(y.transform,h,u,e)}}function k(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];if(o.apply(this,arguments)){var l,u,s,c,d=n.touches,f=d.length,v=S(this,i,n.changedTouches.length===f).event(n);for(oo(n),u=0;u<f;++u)c=[c=Ge(s=d[u],this),this.__zoom.invert(c),s.identifier],v.touch0?v.touch1||v.touch0[2]===c[2]||(v.touch1=c,v.taps=0):(v.touch0=c,l=!0,v.taps=1+!!e);e&&(e=clearTimeout(e)),l&&(v.taps<2&&(t=c[0],e=setTimeout((function(){e=null}),h)),Pt(this),v.start())}}function P(e){if(this.__zooming){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];var r,a,l,u,c=S(this,n).event(e),d=e.changedTouches,f=d.length;for(ro(e),r=0;r<f;++r)l=Ge(a=d[r],this),c.touch0&&c.touch0[2]===a.identifier?c.touch0[0]=l:c.touch1&&c.touch1[2]===a.identifier&&(c.touch1[0]=l);if(a=c.that.__zoom,c.touch1){var h=c.touch0[0],v=c.touch0[1],g=c.touch1[0],p=c.touch1[1],y=(y=g[0]-h[0])*y+(y=g[1]-h[1])*y,x=(x=p[0]-v[0])*x+(x=p[1]-v[1])*x;a=m(a,Math.sqrt(y/x)),l=[(h[0]+g[0])/2,(h[1]+g[1])/2],u=[(v[0]+p[0])/2,(v[1]+p[1])/2]}else{if(!c.touch0)return;l=c.touch0[0],u=c.touch0[1]}c.zoom("touch",i(b(a,l,u),c.extent,s))}}function A(e){for(var o=arguments.length,r=new Array(o>1?o-1:0),i=1;i<o;i++)r[i-1]=arguments[i];if(this.__zooming){var a,l,u=S(this,r).event(e),s=e.changedTouches,c=s.length;for(oo(e),n&&clearTimeout(n),n=setTimeout((function(){n=null}),h),a=0;a<c;++a)l=s[a],u.touch0&&u.touch0[2]===l.identifier?delete u.touch0:u.touch1&&u.touch1[2]===l.identifier&&delete u.touch1;if(u.touch1&&!u.touch0&&(u.touch0=u.touch1,delete u.touch1),u.touch0)u.touch0[1]=this.__zoom.invert(u.touch0[0]);else if(u.end(),2===u.taps&&(l=Ge(l,this),Math.hypot(t[0]-l[0],t[1]-l[1])<p)){var d=Xe(this).on("dblclick.zoom");d&&d.apply(this,arguments)}}}return y.transform=function(e,t,n,o){var r=e.selection?e.selection():e;r.property("__zoom",lo),e!==r?w(e,t,n,o):r.interrupt().each((function(){S(this,arguments).event(o).start().zoom(null,"function"===typeof t?t.apply(this,arguments):t).end()}))},y.scaleBy=function(e,t,n,o){y.scaleTo(e,(function(){return this.__zoom.k*("function"===typeof t?t.apply(this,arguments):t)}),n,o)},y.scaleTo=function(e,t,n,o){y.transform(e,(function(){var e=r.apply(this,arguments),o=this.__zoom,a=null==n?x(e):"function"===typeof n?n.apply(this,arguments):n,l=o.invert(a),u="function"===typeof t?t.apply(this,arguments):t;return i(b(m(o,u),a,l),e,s)}),n,o)},y.translateBy=function(e,t,n,o){y.transform(e,(function(){return i(this.__zoom.translate("function"===typeof t?t.apply(this,arguments):t,"function"===typeof n?n.apply(this,arguments):n),r.apply(this,arguments),s)}),null,o)},y.translateTo=function(e,t,n,o,a){y.transform(e,(function(){var e=r.apply(this,arguments),a=this.__zoom,l=null==o?x(e):"function"===typeof o?o.apply(this,arguments):o;return i(no.translate(l[0],l[1]).scale(a.k).translate("function"===typeof t?-t.apply(this,arguments):-t,"function"===typeof n?-n.apply(this,arguments):-n),e,s)}),o,a)},E.prototype={event:function(e){return e&&(this.sourceEvent=e),this},start:function(){return 1===++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0===--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){var t=Xe(this.that).datum();f.call(e,this.that,new eo(e,{sourceEvent:this.sourceEvent,target:y,type:e,transform:this.that.__zoom,dispatch:f}),t)}},y.wheelDelta=function(e){return arguments.length?(a="function"===typeof e?e:Jn(+e),y):a},y.filter=function(e){return arguments.length?(o="function"===typeof e?e:Jn(!!e),y):o},y.touchable=function(e){return arguments.length?(l="function"===typeof e?e:Jn(!!e),y):l},y.extent=function(e){return arguments.length?(r="function"===typeof e?e:Jn([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),y):r},y.scaleExtent=function(e){return arguments.length?(u[0]=+e[0],u[1]=+e[1],y):[u[0],u[1]]},y.translateExtent=function(e){return arguments.length?(s[0][0]=+e[0][0],s[1][0]=+e[1][0],s[0][1]=+e[0][1],s[1][1]=+e[1][1],y):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},y.constrain=function(e){return arguments.length?(i=e,y):i},y.duration=function(e){return arguments.length?(c=+e,y):c},y.interpolate=function(e){return arguments.length?(d=e,y):d},y.on=function(){var e=f.on.apply(f,arguments);return e===f?y:e},y.clickDistance=function(e){return arguments.length?(g=(e=+e)*e,y):Math.sqrt(g)},y.tapDistance=function(e){return arguments.length?(p=+e,y):p},y}().scaleExtent([N,M]).translateExtent(_),n=Xe(B.current).call(t),o=no.translate(E.x,E.y).scale(Ro(E.zoom,N,M)),r=[[0,0],[e.width,e.height]],i=t.constrain()(o,r,_);t.transform(n,i),t.wheelDelta(Li),z.setState({d3Zoom:t,d3Selection:n,d3ZoomHandler:n.on("wheel.zoom"),transform:[i.x,i.y,i.k],domNode:B.current.closest(".react-flow")})}}),[]),(0,c.useEffect)((function(){Y&&X&&(!f||K||V?"undefined"!==typeof H&&Y.on("wheel.zoom",(function(e,t){if(!A||Bi(e,Z))return null;e.preventDefault(),H.call(this,e,t)}),{passive:!1}):Y.on("wheel.zoom",(function(e){if(Bi(e,Z))return!1;e.preventDefault(),e.stopImmediatePropagation();var r=Y.property("__zoom").k||1,i=er();if(e.ctrlKey&&u&&i){var a=Ge(e),l=Li(e),s=r*Math.pow(2,l);X.scaleTo(Y,s,a,e)}else{var c=1===e.deltaMode?20:1,d=p===or.Vertical?0:e.deltaX*c,f=p===or.Horizontal?0:e.deltaY*c;!i&&e.shiftKey&&p!==or.Vertical&&(d=e.deltaY*c,f=0),X.translateBy(Y,-d/r*v,-f/r*v,{internal:!0});var h=Ti(Y.property("__zoom")),g=z.getState(),y=g.onViewportChangeStart,m=g.onViewportChange,b=g.onViewportChangeEnd;clearTimeout(W.current),F.current||(F.current=!0,null===n||void 0===n||n(e,h),null===y||void 0===y||y(h)),F.current&&(null===t||void 0===t||t(e,h),null===m||void 0===m||m(h),W.current=setTimeout((function(){null===o||void 0===o||o(e,h),null===b||void 0===b||b(h),F.current=!1}),150))}}),{passive:!1}))}),[V,f,p,Y,X,H,K,u,A,Z,n,t,o]),(0,c.useEffect)((function(){X&&X.on("start",(function(e){var t,o;if(!e.sourceEvent||e.sourceEvent.internal)return null;U.current=null===(t=e.sourceEvent)||void 0===t?void 0:t.button;var r=z.getState().onViewportChangeStart,i=Ti(e.transform);R.current=!0,j.current=i,"mousedown"===(null===(o=e.sourceEvent)||void 0===o?void 0:o.type)&&z.setState({paneDragging:!0}),null===r||void 0===r||r(i),null===n||void 0===n||n(e.sourceEvent,i)}))}),[X,n]),(0,c.useEffect)((function(){X&&(V&&!R.current?X.on("zoom",null):V||X.on("zoom",(function(e){var n,o,i=z.getState().onViewportChange;if(z.setState({transform:[e.transform.x,e.transform.y,e.transform.k]}),T.current=!(!r||!ji(S,null!==(n=U.current)&&void 0!==n?n:0)),(t||i)&&(null===(o=e.sourceEvent)||void 0===o||!o.internal)){var a=Ti(e.transform);null===i||void 0===i||i(a),null===t||void 0===t||t(e.sourceEvent,a)}})))}),[V,X,t,S,r]),(0,c.useEffect)((function(){X&&X.on("end",(function(e){var t;if(!e.sourceEvent||e.sourceEvent.internal)return null;var n,i,a=z.getState().onViewportChangeEnd;if(R.current=!1,z.setState({paneDragging:!1}),r&&ji(S,null!==(t=U.current)&&void 0!==t?t:0)&&!T.current&&r(e.sourceEvent),T.current=!1,(o||a)&&(n=j.current,i=e.transform,n.x!==i.x||n.y!==i.y||n.zoom!==i.k)){var l=Ti(e.transform);j.current=l,clearTimeout(I.current),I.current=setTimeout((function(){null===a||void 0===a||a(l),null===o||void 0===o||o(e.sourceEvent,l)}),f?150:0)}}))}),[X,f,S,o,r]),(0,c.useEffect)((function(){X&&X.filter((function(e){var t=K||a,n=u&&e.ctrlKey;if(1===e.button&&"mousedown"===e.type&&(Bi(e,"react-flow__node")||Bi(e,"react-flow__edge")))return!0;if(!S&&!t&&!f&&!b&&!u)return!1;if(V)return!1;if(!b&&"dblclick"===e.type)return!1;if(Bi(e,Z)&&"wheel"===e.type)return!1;if(Bi(e,D)&&"wheel"!==e.type)return!1;if(!u&&e.ctrlKey&&"wheel"===e.type)return!1;if(!t&&!f&&!n&&"wheel"===e.type)return!1;if(!S&&("mousedown"===e.type||"touchstart"===e.type))return!1;if(Array.isArray(S)&&!S.includes(e.button)&&("mousedown"===e.type||"touchstart"===e.type))return!1;var o=Array.isArray(S)&&S.includes(e.button)||!e.button||e.button<=1;return(!e.ctrlKey||"wheel"===e.type)&&o}))}),[V,X,a,u,f,b,S,x,K]),(0,s.jsx)("div",{className:"react-flow__renderer",ref:B,style:Ri,children:O})},Hi=function(e){return{userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect}};function Vi(){var e=Po(Hi,m),t=e.userSelectionActive,n=e.userSelectionRect;return t&&n?(0,s.jsx)("div",{className:"react-flow__selection react-flow__container",style:{width:n.width,height:n.height,transform:"translate(".concat(n.x,"px, ").concat(n.y,"px)")}}):null}function Ki(e,t){var n=e.find((function(e){return e.id===t.parentNode}));if(n){var o=t.position.x+t.width-n.width,r=t.position.y+t.height-n.height;if(o>0||r>0||t.position.x<0||t.position.y<0){var i,a;if(n.style=(0,l.Z)({},n.style)||{},n.style.width=null!==(i=n.style.width)&&void 0!==i?i:n.width,n.style.height=null!==(a=n.style.height)&&void 0!==a?a:n.height,o>0&&(n.style.width+=o),r>0&&(n.style.height+=r),t.position.x<0){var u=Math.abs(t.position.x);n.position.x=n.position.x-u,n.style.width+=u,t.position.x=0}if(t.position.y<0){var s=Math.abs(t.position.y);n.position.y=n.position.y-s,n.style.height+=s,t.position.y=0}n.width=n.style.width,n.height=n.style.height}}}function Ui(e,t){if(e.some((function(e){return"reset"===e.type})))return e.filter((function(e){return"reset"===e.type})).map((function(e){return e.item}));var n=e.filter((function(e){return"add"===e.type})).map((function(e){return e.item}));return t.reduce((function(t,n){var r=e.filter((function(e){return e.id===n.id}));if(0===r.length)return t.push(n),t;var i,a=(0,l.Z)({},n),u=(0,o.Z)(r);try{for(u.s();!(i=u.n()).done;){var s=i.value;if(s)switch(s.type){case"select":a.selected=s.selected;break;case"position":"undefined"!==typeof s.position&&(a.position=s.position),"undefined"!==typeof s.positionAbsolute&&(a.positionAbsolute=s.positionAbsolute),"undefined"!==typeof s.dragging&&(a.dragging=s.dragging),a.expandParent&&Ki(t,a);break;case"dimensions":"undefined"!==typeof s.dimensions&&(a.width=s.dimensions.width,a.height=s.dimensions.height),"undefined"!==typeof s.updateStyle&&(a.style=(0,l.Z)((0,l.Z)({},a.style||{}),s.dimensions)),"boolean"===typeof s.resizing&&(a.resizing=s.resizing),a.expandParent&&Ki(t,a);break;case"remove":return t}}}catch(c){u.e(c)}finally{u.f()}return t.push(a),t}),n)}function Fi(e,t){return Ui(e,t)}var Wi=function(e,t){return{id:e,type:"select",selected:t}};function qi(e,t){return e.reduce((function(e,n){var o=t.includes(n.id);return!n.selected&&o?(n.selected=!0,e.push(Wi(n.id,!0))):n.selected&&!o&&(n.selected=!1,e.push(Wi(n.id,!1))),e}),[])}var Gi=function(e,t){return function(n){n.target===t.current&&(null===e||void 0===e||e(n))}},$i=function(e){return{userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}},Qi=(0,c.memo)((function(e){var t=e.isSelecting,n=e.selectionMode,o=void 0===n?rr.Full:n,r=e.panOnDrag,i=e.onSelectionStart,a=e.onSelectionEnd,u=e.onPaneClick,f=e.onPaneContextMenu,h=e.onPaneScroll,v=e.onPaneMouseEnter,g=e.onPaneMouseMove,p=e.onPaneMouseLeave,y=e.children,b=(0,c.useRef)(null),x=Ao(),w=(0,c.useRef)(0),S=(0,c.useRef)(0),E=(0,c.useRef)(),C=Po($i,m),_=C.userSelectionActive,N=C.elementsSelectable,M=C.dragging,k=function(){x.setState({userSelectionActive:!1,userSelectionRect:null}),w.current=0,S.current=0},P=function(e){null===u||void 0===u||u(e),x.getState().resetSelectedElements(),x.setState({nodesSelectionActive:!1})},A=h?function(e){return h(e)}:void 0,O=N&&(t||_);return(0,s.jsxs)("div",{className:d(["react-flow__pane",{dragging:M,selection:t}]),onClick:O?void 0:Gi(P,b),onContextMenu:Gi((function(e){Array.isArray(r)&&null!==r&&void 0!==r&&r.includes(2)?e.preventDefault():null===f||void 0===f||f(e)}),b),onWheel:Gi(A,b),onMouseEnter:O?void 0:v,onMouseDown:O?function(e){var n=x.getState(),o=n.resetSelectedElements,r=n.domNode;if(E.current=null===r||void 0===r?void 0:r.getBoundingClientRect(),N&&t&&0===e.button&&e.target===b.current&&E.current){var a=Jo(e,E.current),l=a.x,u=a.y;o(),x.setState({userSelectionRect:{width:0,height:0,startX:l,startY:u,x:l,y:u}}),null===i||void 0===i||i(e)}}:void 0,onMouseMove:O?function(e){var n,r,i=x.getState(),a=i.userSelectionRect,u=i.nodeInternals,s=i.edges,c=i.transform,d=i.onNodesChange,f=i.onEdgesChange,h=i.nodeOrigin,v=i.getNodes;if(t&&E.current&&a){x.setState({userSelectionActive:!0,nodesSelectionActive:!1});var g=Jo(e,E.current),p=null!==(n=a.startX)&&void 0!==n?n:0,y=null!==(r=a.startY)&&void 0!==r?r:0,m=(0,l.Z)((0,l.Z)({},a),{},{x:g.x<p?g.x:p,y:g.y<y?g.y:y,width:Math.abs(g.x-p),height:Math.abs(g.y-y)}),b=v(),C=Dr(u,m,c,o===rr.Partial,!0,h),_=Ir(C,s).map((function(e){return e.id})),N=C.map((function(e){return e.id}));if(w.current!==N.length){w.current=N.length;var M=qi(b,N);M.length&&(null===d||void 0===d||d(M))}if(S.current!==_.length){S.current=_.length;var k=qi(s,_);k.length&&(null===f||void 0===f||f(k))}x.setState({userSelectionRect:m})}}:g,onMouseUp:O?function(e){if(0===e.button){var t=x.getState().userSelectionRect;!_&&t&&e.target===b.current&&(null===P||void 0===P||P(e)),x.setState({nodesSelectionActive:w.current>0}),k(),null===a||void 0===a||a(e)}}:void 0,onMouseLeave:O?function(e){_&&(x.setState({nodesSelectionActive:w.current>0}),null===a||void 0===a||a(e)),k()}:p,ref:b,style:Ri,children:[y,(0,s.jsx)(Vi,{})]})}));function Ji(e,t){if(!e.parentNode)return!1;var n=t.get(e.parentNode);return!!n&&(!!n.selected||Ji(n,t))}function ea(e,t,n){var o=e;do{var r;if(null!==(r=o)&&void 0!==r&&r.matches(t))return!0;if(o===n.current)return!1;o=o.parentElement}while(o);return!1}function ta(e,t,n,o){return Array.from(e.values()).filter((function(n){return(n.selected||n.id===o)&&(!n.parentNode||!Ji(n,e))&&(n.draggable||t&&"undefined"===typeof n.draggable)})).map((function(e){var t,o,r,i;return{id:e.id,position:e.position||{x:0,y:0},positionAbsolute:e.positionAbsolute||{x:0,y:0},distance:{x:n.x-(null!==(t=null===(o=e.positionAbsolute)||void 0===o?void 0:o.x)&&void 0!==t?t:0),y:n.y-(null!==(r=null===(i=e.positionAbsolute)||void 0===i?void 0:i.y)&&void 0!==r?r:0)},delta:{x:0,y:0},extent:e.extent,parentNode:e.parentNode,width:e.width,height:e.height}}))}function na(e,t,n,o){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[0,0],i=arguments.length>5?arguments[5]:void 0,a=function(e,t){return t&&"parent"!==t?[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]:t}(e,e.extent||o),l=a;if("parent"===e.extent)if(e.parentNode&&e.width&&e.height){var u=n.get(e.parentNode),s=Or(u,r).positionAbsolute,c=s.x,d=s.y;l=u&&Fo(c)&&Fo(d)&&Fo(u.width)&&Fo(u.height)?[[c+e.width*r[0],d+e.height*r[1]],[c+u.width-e.width+e.width*r[0],d+u.height-e.height+e.height*r[1]]]:l}else null===i||void 0===i||i("005",Mo.error005()),l=a;else if(e.extent&&e.parentNode){var f=n.get(e.parentNode),h=Or(f,r).positionAbsolute,v=h.x,g=h.y;l=[[e.extent[0][0]+v,e.extent[0][1]+g],[e.extent[1][0]+v,e.extent[1][1]+g]]}var p={x:0,y:0};if(e.parentNode){var y=n.get(e.parentNode);p=Or(y,r).positionAbsolute}var m=l&&"parent"!==l?To(t,l):t;return{position:{x:m.x-p.x,y:m.y-p.y},positionAbsolute:m}}function oa(e){var t=e.nodeId,n=e.dragItems,o=e.nodeInternals,r=n.map((function(e){var t=o.get(e.id);return(0,l.Z)((0,l.Z)({},t),{},{position:e.position,positionAbsolute:e.positionAbsolute})}));return[t?r.find((function(e){return e.id===t})):r[0],r]}Qi.displayName="Pane";var ra=function(e,t,n,o){var r=t.querySelectorAll(e);if(!r||!r.length)return null;var i=Array.from(r),a=t.getBoundingClientRect(),u=a.width*o[0],s=a.height*o[1];return i.map((function(e){var t=e.getBoundingClientRect();return(0,l.Z)({id:e.getAttribute("data-handleid"),position:e.getAttribute("data-handlepos"),x:(t.left-a.left-u)/n,y:(t.top-a.top-s)/n},zo(e))}))};function ia(e,t,n){return void 0===n?n:function(o){var r=t().nodeInternals.get(e);r&&n(o,(0,l.Z)({},r))}}function aa(e){var t=e.id,n=e.store,o=e.unselect,r=void 0!==o&&o,i=e.nodeRef,a=n.getState(),l=a.addSelectedNodes,u=a.unselectNodesAndEdges,s=a.multiSelectionActive,c=a.nodeInternals,d=a.onError,f=c.get(t);f?(n.setState({nodesSelectionActive:!1}),f.selected?(r||f.selected&&s)&&(u({nodes:[f]}),requestAnimationFrame((function(){var e;return null===i||void 0===i||null===(e=i.current)||void 0===e?void 0:e.blur()}))):l([t])):null===d||void 0===d||d("012",Mo.error012(t))}function la(e){return function(t,n,o){return null===e||void 0===e?void 0:e(t,o)}}function ua(e){var t=e.nodeRef,n=e.disabled,o=void 0!==n&&n,r=e.noDragClassName,a=e.handleSelector,u=e.nodeId,s=e.isSelectable,d=e.selectNodesOnDrag,f=Ao(),h=(0,c.useState)(!1),v=(0,i.Z)(h,2),g=v[0],p=v[1],y=(0,c.useRef)([]),m=(0,c.useRef)({x:null,y:null}),b=(0,c.useRef)(0),x=(0,c.useRef)(null),w=(0,c.useRef)({x:0,y:0}),S=(0,c.useRef)(null),E=(0,c.useRef)(!1),_=function(){var e=Ao(),t=(0,c.useCallback)((function(t){var n=t.sourceEvent,o=e.getState(),r=o.transform,i=o.snapGrid,a=o.snapToGrid,u=n.touches?n.touches[0].clientX:n.clientX,s=n.touches?n.touches[0].clientY:n.clientY,c={x:(u-r[0])/r[2],y:(s-r[1])/r[2]};return(0,l.Z)({xSnapped:a?i[0]*Math.round(c.x/i[0]):c.x,ySnapped:a?i[1]*Math.round(c.y/i[1]):c.y},c)}),[]);return t}();return(0,c.useEffect)((function(){if(null!==t&&void 0!==t&&t.current){var e=Xe(t.current),n=function(e){var t=e.x,n=e.y,o=f.getState(),r=o.nodeInternals,a=o.onNodeDrag,l=o.onSelectionDrag,s=o.updateNodePositions,c=o.nodeExtent,d=o.snapGrid,h=o.snapToGrid,v=o.nodeOrigin,g=o.onError;m.current={x:t,y:n};var b=!1,x={x:0,y:0,x2:0,y2:0};if(y.current.length>1&&c){var w=Zr(y.current,v);x=Yo(w)}if(y.current=y.current.map((function(e){var o={x:t-e.distance.x,y:n-e.distance.y};h&&(o.x=d[0]*Math.round(o.x/d[0]),o.y=d[1]*Math.round(o.y/d[1]));var i,a,l=[[c[0][0],c[0][1]],[c[1][0],c[1][1]]];y.current.length>1&&c&&!e.extent&&(l[0][0]=e.positionAbsolute.x-x.x+c[0][0],l[1][0]=e.positionAbsolute.x+(null!==(i=e.width)&&void 0!==i?i:0)-x.x2+c[1][0],l[0][1]=e.positionAbsolute.y-x.y+c[0][1],l[1][1]=e.positionAbsolute.y+(null!==(a=e.height)&&void 0!==a?a:0)-x.y2+c[1][1]);var u=na(e,o,r,l,v,g);return b=b||e.position.x!==u.position.x||e.position.y!==u.position.y,e.position=u.position,e.positionAbsolute=u.positionAbsolute,e})),b){s(y.current,!0,!0),p(!0);var E=u?a:la(l);if(E&&S.current){var C=oa({nodeId:u,dragItems:y.current,nodeInternals:r}),_=(0,i.Z)(C,2),N=_[0],M=_[1];E(S.current,N,M)}}},l=function e(){if(x.current){var t=jo(w.current,x.current),o=(0,i.Z)(t,2),r=o[0],a=o[1];if(0!==r||0!==a){var l,u,s=f.getState(),c=s.transform,d=s.panBy;m.current.x=(null!==(l=m.current.x)&&void 0!==l?l:0)-r/c[2],m.current.y=(null!==(u=m.current.y)&&void 0!==u?u:0)-a/c[2],d({x:r,y:a})&&n(m.current)}b.current=requestAnimationFrame(e)}};if(!o){var c=function(){var e,t,n,o,r=vo,i=go,a=po,l=yo,u={},s=C("start","drag","end"),c=0,d=0;function f(e){e.on("mousedown.drag",h).filter(l).on("touchstart.drag",p).on("touchmove.drag",y,Ye).on("touchend.drag touchcancel.drag",m).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(a,l){if(!o&&r.call(this,a,l)){var u=b(this,i.call(this,a,l),a,l,"mouse");u&&(Xe(a.view).on("mousemove.drag",v,He).on("mouseup.drag",g,He),Ue(a.view),Ve(a),n=!1,e=a.clientX,t=a.clientY,u("start",a))}}function v(o){if(Ke(o),!n){var r=o.clientX-e,i=o.clientY-t;n=r*r+i*i>d}u.mouse("drag",o)}function g(e){Xe(e.view).on("mousemove.drag mouseup.drag",null),Fe(e.view,n),Ke(e),u.mouse("end",e)}function p(e,t){if(r.call(this,e,t)){var n,o,a=e.changedTouches,l=i.call(this,e,t),u=a.length;for(n=0;n<u;++n)(o=b(this,l,e,t,a[n].identifier,a[n]))&&(Ve(e),o("start",e,a[n]))}}function y(e){var t,n,o=e.changedTouches,r=o.length;for(t=0;t<r;++t)(n=u[o[t].identifier])&&(Ke(e),n("drag",e,o[t]))}function m(e){var t,n,r=e.changedTouches,i=r.length;for(o&&clearTimeout(o),o=setTimeout((function(){o=null}),500),t=0;t<i;++t)(n=u[r[t].identifier])&&(Ve(e),n("end",e,r[t]))}function b(e,t,n,o,r,i){var l,d,h,v=s.copy(),g=Ge(i||n,t);if(null!=(h=a.call(e,new ho("beforestart",{sourceEvent:n,target:f,identifier:r,active:c,x:g[0],y:g[1],dx:0,dy:0,dispatch:v}),o)))return l=h.x-g[0]||0,d=h.y-g[1]||0,function n(i,a,s){var p,y=g;switch(i){case"start":u[r]=n,p=c++;break;case"end":delete u[r],--c;case"drag":g=Ge(s||a,t),p=c}v.call(i,e,new ho(i,{sourceEvent:a,subject:h,target:f,identifier:r,active:p,x:g[0]+l,y:g[1]+d,dx:g[0]-y[0],dy:g[1]-y[1],dispatch:v}),o)}}return f.filter=function(e){return arguments.length?(r="function"===typeof e?e:fo(!!e),f):r},f.container=function(e){return arguments.length?(i="function"===typeof e?e:fo(e),f):i},f.subject=function(e){return arguments.length?(a="function"===typeof e?e:fo(e),f):a},f.touchable=function(e){return arguments.length?(l="function"===typeof e?e:fo(!!e),f):l},f.on=function(){var e=s.on.apply(s,arguments);return e===s?f:e},f.clickDistance=function(e){return arguments.length?(d=(e=+e)*e,f):Math.sqrt(d)},f}().on("start",(function(e){var n,o=f.getState(),r=o.nodeInternals,a=o.multiSelectionActive,l=o.domNode,c=o.nodesDraggable,h=o.unselectNodesAndEdges,v=o.onNodeDragStart,g=o.onSelectionDragStart,p=u?v:la(g);d||a||!u||(null!==(n=r.get(u))&&void 0!==n&&n.selected||h());u&&s&&d&&aa({id:u,store:f,nodeRef:t});var b=_(e);if(m.current=b,y.current=ta(r,c,b,u),p&&y.current){var S=oa({nodeId:u,dragItems:y.current,nodeInternals:r}),E=(0,i.Z)(S,2),C=E[0],N=E[1];p(e.sourceEvent,C,N)}x.current=(null===l||void 0===l?void 0:l.getBoundingClientRect())||null,w.current=Jo(e.sourceEvent,x.current)})).on("drag",(function(e){var t=_(e),o=f.getState().autoPanOnNodeDrag;!E.current&&o&&(E.current=!0,l()),m.current.x===t.xSnapped&&m.current.y===t.ySnapped||!y.current||(S.current=e.sourceEvent,w.current=Jo(e.sourceEvent,x.current),n(t))})).on("end",(function(e){if(p(!1),E.current=!1,cancelAnimationFrame(b.current),y.current){var t=f.getState(),n=t.updateNodePositions,o=t.nodeInternals,r=t.onNodeDragStop,a=t.onSelectionDragStop,l=u?r:la(a);if(n(y.current,!1,!1),l){var s=oa({nodeId:u,dragItems:y.current,nodeInternals:o}),c=(0,i.Z)(s,2),d=c[0],h=c[1];l(e.sourceEvent,d,h)}}})).filter((function(e){var n=e.target;return!e.button&&(!r||!ea(n,".".concat(r),t))&&(!a||ea(n,a,t))}));return e.call(c),function(){e.on(".drag",null)}}e.on(".drag",null)}}),[t,o,r,a,s,f,u,d,_]),g}function sa(){var e=Ao();return(0,c.useCallback)((function(t){var n=e.getState(),o=n.nodeInternals,r=n.nodeExtent,i=n.updateNodePositions,a=n.getNodes,l=n.snapToGrid,u=n.snapGrid,s=n.onError,c=n.nodesDraggable,d=a().filter((function(e){return e.selected&&(e.draggable||c&&"undefined"===typeof e.draggable)})),f=l?u[0]:5,h=l?u[1]:5,v=t.isShiftPressed?4:1,g=t.x*f*v,p=t.y*h*v;i(d.map((function(e){if(e.positionAbsolute){var t={x:e.positionAbsolute.x+g,y:e.positionAbsolute.y+p};l&&(t.x=u[0]*Math.round(t.x/u[0]),t.y=u[1]*Math.round(t.y/u[1]));var n=na(e,t,o,r,void 0,s),i=n.positionAbsolute,a=n.position;e.position=a,e.positionAbsolute=i}return e})),!0,!1)}),[])}var ca={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},da=function(e){var t=function(t){var n=t.id,o=t.type,i=t.data,a=t.xPos,u=t.yPos,f=t.xPosOrigin,h=t.yPosOrigin,v=t.selected,g=t.onClick,p=t.onMouseEnter,y=t.onMouseMove,m=t.onMouseLeave,b=t.onContextMenu,x=t.onDoubleClick,w=t.style,S=t.className,E=t.isDraggable,C=t.isSelectable,_=t.isConnectable,N=t.isFocusable,M=t.selectNodesOnDrag,k=t.sourcePosition,P=t.targetPosition,A=t.hidden,O=t.resizeObserver,Z=t.dragHandle,D=t.zIndex,I=t.isParent,z=t.noDragClassName,R=t.noPanClassName,T=t.initialized,B=t.disableKeyboardA11y,j=t.ariaLabel,L=t.rfId,X=Ao(),Y=(0,c.useRef)(null),H=(0,c.useRef)(k),V=(0,c.useRef)(P),K=(0,c.useRef)(o),U=C||E||g||p||y||m,F=sa(),W=ia(n,X.getState,p),q=ia(n,X.getState,y),G=ia(n,X.getState,m),$=ia(n,X.getState,b),Q=ia(n,X.getState,x);(0,c.useEffect)((function(){if(Y.current&&!A){var e=Y.current;return null===O||void 0===O||O.observe(e),function(){return null===O||void 0===O?void 0:O.unobserve(e)}}}),[A]),(0,c.useEffect)((function(){var e=K.current!==o,t=H.current!==k,r=V.current!==P;Y.current&&(e||t||r)&&(e&&(K.current=o),t&&(H.current=k),r&&(V.current=P),X.getState().updateNodeDimensions([{id:n,nodeElement:Y.current,forceUpdate:!0}]))}),[n,o,k,P]);var J=ua({nodeRef:Y,disabled:A||!E,noDragClassName:z,handleSelector:Z,nodeId:n,isSelectable:C,selectNodesOnDrag:M});return A?null:(0,s.jsx)("div",{className:d(["react-flow__node","react-flow__node-".concat(o),(0,r.Z)({},R,E),S,{selected:v,selectable:C,parent:I,dragging:J}]),ref:Y,style:(0,l.Z)({zIndex:D,transform:"translate(".concat(f,"px,").concat(h,"px)"),pointerEvents:U?"all":"none",visibility:T?"visible":"hidden"},w),"data-id":n,"data-testid":"rf__node-".concat(n),onMouseEnter:W,onMouseMove:q,onMouseLeave:G,onContextMenu:$,onClick:function(e){if(!C||M&&E||aa({id:n,store:X,nodeRef:Y}),g){var t=X.getState().nodeInternals.get(n);t&&g(e,(0,l.Z)({},t))}},onDoubleClick:Q,onKeyDown:N?function(e){if(!$o(e))if(qo.includes(e.key)&&C){var t="Escape"===e.key;aa({id:n,store:X,unselect:t,nodeRef:Y})}else!B&&E&&v&&Object.prototype.hasOwnProperty.call(ca,e.key)&&(X.setState({ariaLiveMessage:"Moved selected node ".concat(e.key.replace("Arrow","").toLowerCase(),". New position, x: ").concat(~~a,", y: ").concat(~~u)}),F({x:ca[e.key].x,y:ca[e.key].y,isShiftPressed:e.shiftKey}))}:void 0,tabIndex:N?0:void 0,role:N?"button":void 0,"aria-describedby":B?void 0:"".concat(vi,"-").concat(L),"aria-label":j,children:(0,s.jsx)(Nr,{value:n,children:(0,s.jsx)(e,{id:n,data:i,type:o,xPos:a,yPos:u,selected:v,isConnectable:_,sourcePosition:k,targetPosition:P,dragging:J,dragHandle:Z,zIndex:D})})})};return t.displayName="NodeWrapper",(0,c.memo)(t)},fa=function(e){var t=e.getNodes().filter((function(e){return e.selected}));return(0,l.Z)((0,l.Z)({},Zr(t,e.nodeOrigin)),{},{transformString:"translate(".concat(e.transform[0],"px,").concat(e.transform[1],"px) scale(").concat(e.transform[2],")"),userSelectionActive:e.userSelectionActive})};var ha=(0,c.memo)((function(e){var t=e.onSelectionContextMenu,n=e.noPanClassName,o=e.disableKeyboardA11y,r=Ao(),i=Po(fa,m),a=i.width,l=i.height,u=i.x,f=i.y,h=i.transformString,v=i.userSelectionActive,g=sa(),p=(0,c.useRef)(null);if((0,c.useEffect)((function(){var e;o||(null===(e=p.current)||void 0===e||e.focus({preventScroll:!0}))}),[o]),ua({nodeRef:p}),v||!a||!l)return null;var y=t?function(e){var n=r.getState().getNodes().filter((function(e){return e.selected}));t(e,n)}:void 0;return(0,s.jsx)("div",{className:d(["react-flow__nodesselection","react-flow__container",n]),style:{transform:h},children:(0,s.jsx)("div",{ref:p,className:"react-flow__nodesselection-rect",onContextMenu:y,tabIndex:o?void 0:-1,onKeyDown:o?void 0:function(e){Object.prototype.hasOwnProperty.call(ca,e.key)&&g({x:ca[e.key].x,y:ca[e.key].y,isShiftPressed:e.shiftKey})},style:{width:a,height:l,top:f,left:u}})})})),va=function(e){return e.nodesSelectionActive},ga=function(e){var t=e.children,n=e.onPaneClick,o=e.onPaneMouseEnter,r=e.onPaneMouseMove,i=e.onPaneMouseLeave,a=e.onPaneContextMenu,l=e.onPaneScroll,u=e.deleteKeyCode,d=e.onMove,f=e.onMoveStart,h=e.onMoveEnd,v=e.selectionKeyCode,g=e.selectionOnDrag,p=e.selectionMode,y=e.onSelectionStart,m=e.onSelectionEnd,b=e.multiSelectionKeyCode,x=e.panActivationKeyCode,w=e.zoomActivationKeyCode,S=e.elementsSelectable,E=e.zoomOnScroll,C=e.zoomOnPinch,_=e.panOnScroll,N=e.panOnScrollSpeed,M=e.panOnScrollMode,k=e.zoomOnDoubleClick,P=e.panOnDrag,A=e.defaultViewport,O=e.translateExtent,Z=e.minZoom,D=e.maxZoom,I=e.preventScrolling,z=e.onSelectionContextMenu,R=e.noWheelClassName,T=e.noPanClassName,B=e.disableKeyboardA11y,j=Po(va),L=wi(v),X=wi(x)||P,Y=L||g&&!0!==X;return function(e){var t=e.deleteKeyCode,n=e.multiSelectionKeyCode,o=Ao(),r=zi().deleteElements,i=wi(t),a=wi(n);(0,c.useEffect)((function(){if(i){var e=o.getState(),t=e.edges,n=(0,e.getNodes)().filter((function(e){return e.selected})),a=t.filter((function(e){return e.selected}));r({nodes:n,edges:a}),o.setState({nodesSelectionActive:!1})}}),[i]),(0,c.useEffect)((function(){o.setState({multiSelectionActive:a})}),[a])}({deleteKeyCode:u,multiSelectionKeyCode:b}),(0,s.jsx)(Yi,{onMove:d,onMoveStart:f,onMoveEnd:h,onPaneContextMenu:a,elementsSelectable:S,zoomOnScroll:E,zoomOnPinch:C,panOnScroll:_,panOnScrollSpeed:N,panOnScrollMode:M,zoomOnDoubleClick:k,panOnDrag:!L&&X,defaultViewport:A,translateExtent:O,minZoom:Z,maxZoom:D,zoomActivationKeyCode:w,preventScrolling:I,noWheelClassName:R,noPanClassName:T,children:(0,s.jsxs)(Qi,{onSelectionStart:y,onSelectionEnd:m,onPaneClick:n,onPaneMouseEnter:o,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:a,onPaneScroll:l,panOnDrag:X,isSelecting:!!Y,selectionMode:p,children:[t,j&&(0,s.jsx)(ha,{onSelectionContextMenu:z,noPanClassName:T,disableKeyboardA11y:B})]})})};ga.displayName="FlowRenderer";var pa=(0,c.memo)(ga);function ya(e){var t={input:da(e.input||Qr),default:da(e.default||Gr),output:da(e.output||ei),group:da(e.group||ti)},n=Object.keys(e).filter((function(e){return!["input","default","output","group"].includes(e)})).reduce((function(t,n){return t[n]=da(e[n]||Gr),t}),{});return(0,l.Z)((0,l.Z)({},t),n)}var ma=function(e){return{nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}},ba=function(e){var t,n=Po(ma,m),o=n.nodesDraggable,r=n.nodesConnectable,i=n.nodesFocusable,a=n.elementsSelectable,l=n.updateNodeDimensions,u=n.onError,d=(t=e.onlyRenderVisibleElements,Po((0,c.useCallback)((function(e){return t?Dr(e.nodeInternals,{x:0,y:0,width:e.width,height:e.height},e.transform,!0):e.getNodes()}),[t]))),f=(0,c.useRef)(),h=(0,c.useMemo)((function(){if("undefined"===typeof ResizeObserver)return null;var e=new ResizeObserver((function(e){var t=e.map((function(e){return{id:e.target.getAttribute("data-id"),nodeElement:e.target,forceUpdate:!0}}));l(t)}));return f.current=e,e}),[]);return(0,c.useEffect)((function(){return function(){var e;null===f||void 0===f||null===(e=f.current)||void 0===e||e.disconnect()}}),[]),(0,s.jsx)("div",{className:"react-flow__nodes",style:Ri,children:d.map((function(t){var n,l,c,d,f,v,g,p=t.type||"default";e.nodeTypes[p]||(null===u||void 0===u||u("003",Mo.error003(p)),p="default");var y=e.nodeTypes[p]||e.nodeTypes.default,m=!!(t.draggable||o&&"undefined"===typeof t.draggable),b=!!(t.selectable||a&&"undefined"===typeof t.selectable),x=!!(t.connectable||r&&"undefined"===typeof t.connectable),w=!!(t.focusable||i&&"undefined"===typeof t.focusable),S=e.nodeExtent?To(t.positionAbsolute,e.nodeExtent):t.positionAbsolute,E=null!==(n=null===S||void 0===S?void 0:S.x)&&void 0!==n?n:0,C=null!==(l=null===S||void 0===S?void 0:S.y)&&void 0!==l?l:0,_=function(e){var t=e.x,n=e.y,o=e.width,r=e.height,i=e.origin;return o&&r?i[0]<0||i[1]<0||i[0]>1||i[1]>1?{x:t,y:n}:{x:t-o*i[0],y:n-r*i[1]}:{x:t,y:n}}({x:E,y:C,width:null!==(c=t.width)&&void 0!==c?c:0,height:null!==(d=t.height)&&void 0!==d?d:0,origin:e.nodeOrigin});return(0,s.jsx)(y,{id:t.id,className:t.className,style:t.style,type:p,data:t.data,sourcePosition:t.sourcePosition||lr.Bottom,targetPosition:t.targetPosition||lr.Top,hidden:t.hidden,xPos:E,yPos:C,xPosOrigin:_.x,yPosOrigin:_.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!t.selected,isDraggable:m,isSelectable:b,isConnectable:x,isFocusable:w,resizeObserver:h,dragHandle:t.dragHandle,zIndex:null!==(f=null===(v=t[Wo])||void 0===v?void 0:v.z)&&void 0!==f?f:0,isParent:!(null===(g=t[Wo])||void 0===g||!g.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!t.width&&!!t.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:t.ariaLabel},t.id)}))})};ba.displayName="NodeRenderer";var xa=(0,c.memo)(ba),wa=function(e,t,n){return n===lr.Left?e-t:n===lr.Right?e+t:e},Sa=function(e,t,n){return n===lr.Top?e-t:n===lr.Bottom?e+t:e},Ea="react-flow__edgeupdater",Ca=function(e){var t=e.position,n=e.centerX,o=e.centerY,r=e.radius,i=void 0===r?10:r,a=e.onMouseDown,l=e.onMouseEnter,u=e.onMouseOut,c=e.type;return(0,s.jsx)("circle",{onMouseDown:a,onMouseEnter:l,onMouseOut:u,className:d([Ea,"".concat(Ea,"-").concat(c)]),cx:wa(n,i,t),cy:Sa(o,i,t),r:i,stroke:"transparent",fill:"transparent"})},_a=function(){return!0},Na=function(e){var t=function(t){var n=t.id,o=t.className,r=t.type,a=t.data,l=t.onClick,u=t.onEdgeDoubleClick,f=t.selected,h=t.animated,v=t.label,g=t.labelStyle,p=t.labelShowBg,y=t.labelBgStyle,m=t.labelBgPadding,b=t.labelBgBorderRadius,x=t.style,w=t.source,S=t.target,E=t.sourceX,C=t.sourceY,_=t.targetX,N=t.targetY,M=t.sourcePosition,k=t.targetPosition,P=t.elementsSelectable,A=t.hidden,O=t.sourceHandleId,Z=t.targetHandleId,D=t.onContextMenu,I=t.onMouseEnter,z=t.onMouseMove,R=t.onMouseLeave,T=t.edgeUpdaterRadius,B=t.onEdgeUpdate,j=t.onEdgeUpdateStart,L=t.onEdgeUpdateEnd,X=t.markerEnd,Y=t.markerStart,H=t.rfId,V=t.ariaLabel,K=t.isFocusable,U=t.isUpdatable,F=t.pathOptions,W=t.interactionWidth,q=(0,c.useRef)(null),G=(0,c.useState)(!1),$=(0,i.Z)(G,2),Q=$[0],J=$[1],ee=(0,c.useState)(!1),te=(0,i.Z)(ee,2),ne=te[0],oe=te[1],re=Ao(),ie=(0,c.useMemo)((function(){return"url(#".concat(kr(Y,H),")")}),[Y,H]),ae=(0,c.useMemo)((function(){return"url(#".concat(kr(X,H),")")}),[X,H]);if(A)return null;var le=ur(n,re.getState,u),ue=ur(n,re.getState,D),se=ur(n,re.getState,I),ce=ur(n,re.getState,z),de=ur(n,re.getState,R),fe=function(e,t){if(0===e.button){var o=re.getState(),r=o.edges,i=o.isValidConnection,a=t?S:w,l=(t?Z:O)||null,u=t?"target":"source",s=i||_a,c=t,d=r.find((function(e){return e.id===n}));oe(!0),null===j||void 0===j||j(e,d,u);Vr({event:e,handleId:l,nodeId:a,onConnect:function(e){return null===B||void 0===B?void 0:B(d,e)},isTarget:c,getState:re.getState,setState:re.setState,isValidConnection:s,edgeUpdaterType:u,onEdgeUpdateEnd:function(e){oe(!1),null===L||void 0===L||L(e,d,u)}})}},he=function(){return J(!0)},ve=function(){return J(!1)},ge=!P&&!l;return(0,s.jsxs)("g",{className:d(["react-flow__edge","react-flow__edge-".concat(r),o,{selected:f,animated:h,inactive:ge,updating:Q}]),onClick:function(e){var t=re.getState(),o=t.edges,r=t.addSelectedEdges;if(P&&(re.setState({nodesSelectionActive:!1}),r([n])),l){var i=o.find((function(e){return e.id===n}));l(e,i)}},onDoubleClick:le,onContextMenu:ue,onMouseEnter:se,onMouseMove:ce,onMouseLeave:de,onKeyDown:K?function(e){if(qo.includes(e.key)&&P){var t,o=re.getState(),r=o.unselectNodesAndEdges,i=o.addSelectedEdges,a=o.edges;if("Escape"===e.key)null===(t=q.current)||void 0===t||t.blur(),r({edges:[a.find((function(e){return e.id===n}))]});else i([n])}}:void 0,tabIndex:K?0:void 0,role:K?"button":"img","data-testid":"rf__edge-".concat(n),"aria-label":null===V?void 0:V||"Edge from ".concat(w," to ").concat(S),"aria-describedby":K?"".concat(gi,"-").concat(H):void 0,ref:q,children:[!ne&&(0,s.jsx)(e,{id:n,source:w,target:S,selected:f,animated:h,label:v,labelStyle:g,labelShowBg:p,labelBgStyle:y,labelBgPadding:m,labelBgBorderRadius:b,data:a,style:x,sourceX:E,sourceY:C,targetX:_,targetY:N,sourcePosition:M,targetPosition:k,sourceHandleId:O,targetHandleId:Z,markerStart:ie,markerEnd:ae,pathOptions:F,interactionWidth:W}),U&&(0,s.jsxs)(s.Fragment,{children:[("source"===U||!0===U)&&(0,s.jsx)(Ca,{position:M,centerX:E,centerY:C,radius:T,onMouseDown:function(e){return fe(e,!0)},onMouseEnter:he,onMouseOut:ve,type:"source"}),("target"===U||!0===U)&&(0,s.jsx)(Ca,{position:k,centerX:_,centerY:N,radius:T,onMouseDown:function(e){return fe(e,!1)},onMouseEnter:he,onMouseOut:ve,type:"target"})]})]})};return t.displayName="EdgeWrapper",(0,c.memo)(t)};function Ma(e){var t={default:Na(e.default||Cr),straight:Na(e.bezier||xr),step:Na(e.step||br),smoothstep:Na(e.step||mr),simplebezier:Na(e.simplebezier||hr)},n=Object.keys(e).filter((function(e){return!["default","bezier"].includes(e)})).reduce((function(t,n){return t[n]=Na(e[n]||Cr),t}),{});return(0,l.Z)((0,l.Z)({},t),n)}function ka(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=((null===n||void 0===n?void 0:n.x)||0)+t.x,r=((null===n||void 0===n?void 0:n.y)||0)+t.y,i=(null===n||void 0===n?void 0:n.width)||t.width,a=(null===n||void 0===n?void 0:n.height)||t.height;switch(e){case lr.Top:return{x:o+i/2,y:r};case lr.Right:return{x:o+i,y:r+a/2};case lr.Bottom:return{x:o+i/2,y:r+a};case lr.Left:return{x:o,y:r+a/2}}}function Pa(e,t){return e?1!==e.length&&t?t&&e.find((function(e){return e.id===t}))||null:e[0]:null}function Aa(e){var t,n,o,r,i,a=(null===e||void 0===e||null===(t=e[Wo])||void 0===t?void 0:t.handleBounds)||null,l=a&&(null===e||void 0===e?void 0:e.width)&&(null===e||void 0===e?void 0:e.height)&&"undefined"!==typeof(null===e||void 0===e||null===(n=e.positionAbsolute)||void 0===n?void 0:n.x)&&"undefined"!==typeof(null===e||void 0===e||null===(o=e.positionAbsolute)||void 0===o?void 0:o.y);return[{x:(null===e||void 0===e||null===(r=e.positionAbsolute)||void 0===r?void 0:r.x)||0,y:(null===e||void 0===e||null===(i=e.positionAbsolute)||void 0===i?void 0:i.y)||0,width:(null===e||void 0===e?void 0:e.width)||0,height:(null===e||void 0===e?void 0:e.height)||0},a,!!l]}var Oa=[{level:0,isMaxLevel:!0,edges:[]}];function Za(e,t,n){var o=Po((0,c.useCallback)((function(n){return e?n.edges.filter((function(e){var o=t.get(e.source),r=t.get(e.target);return(null===o||void 0===o?void 0:o.width)&&(null===o||void 0===o?void 0:o.height)&&(null===r||void 0===r?void 0:r.width)&&(null===r||void 0===r?void 0:r.height)&&function(e){var t=e.sourcePos,n=e.targetPos,o=e.sourceWidth,r=e.sourceHeight,i=e.targetWidth,a=e.targetHeight,l=e.width,u=e.height,s=e.transform,c={x:Math.min(t.x,n.x),y:Math.min(t.y,n.y),x2:Math.max(t.x+o,n.x+i),y2:Math.max(t.y+r,n.y+a)};c.x===c.x2&&(c.x2+=1),c.y===c.y2&&(c.y2+=1);var d=Yo({x:(0-s[0])/s[2],y:(0-s[1])/s[2],width:l/s[2],height:u/s[2]}),f=Math.max(0,Math.min(d.x2,c.x2)-Math.max(d.x,c.x)),h=Math.max(0,Math.min(d.y2,c.y2)-Math.max(d.y,c.y));return Math.ceil(f*h)>0}({sourcePos:o.positionAbsolute||{x:0,y:0},targetPos:r.positionAbsolute||{x:0,y:0},sourceWidth:o.width,sourceHeight:o.height,targetWidth:r.width,targetHeight:r.height,width:n.width,height:n.height,transform:n.transform})})):n.edges}),[e,t]));return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=-1,r=e.reduce((function(e,r){var i=Fo(r.zIndex),a=i?r.zIndex:0;if(n){var l,u,s=t.get(r.target),c=t.get(r.source),d=r.selected||(null===s||void 0===s?void 0:s.selected)||(null===c||void 0===c?void 0:c.selected),f=Math.max((null===c||void 0===c||null===(l=c[Wo])||void 0===l?void 0:l.z)||0,(null===s||void 0===s||null===(u=s[Wo])||void 0===u?void 0:u.z)||0,1e3);a=(i?r.zIndex:0)+(d?f:0)}return e[a]?e[a].push(r):e[a]=[r],o=a>o?a:o,e}),{}),a=Object.entries(r).map((function(e){var t=(0,i.Z)(e,2),n=+t[0];return{edges:t[1],level:n,isMaxLevel:n===o}}));return 0===a.length?Oa:a}(o,t,n)}var Da=(bo={},(0,r.Z)(bo,ar.Arrow,(function(e){var t=e.color,n=void 0===t?"none":t,o=e.strokeWidth,r=void 0===o?1:o;return(0,s.jsx)("polyline",{stroke:n,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:r,fill:"none",points:"-5,-4 0,0 -5,4"})})),(0,r.Z)(bo,ar.ArrowClosed,(function(e){var t=e.color,n=void 0===t?"none":t,o=e.strokeWidth,r=void 0===o?1:o;return(0,s.jsx)("polyline",{stroke:n,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:r,fill:n,points:"-5,-4 0,0 -5,4 -5,-4"})})),bo);var Ia=function(e){var t=e.id,n=e.type,o=e.color,r=e.width,i=void 0===r?12.5:r,a=e.height,l=void 0===a?12.5:a,u=e.markerUnits,d=void 0===u?"strokeWidth":u,f=e.strokeWidth,h=e.orient,v=void 0===h?"auto-start-reverse":h,g=function(e){var t=Ao();return(0,c.useMemo)((function(){var n,o;return Object.prototype.hasOwnProperty.call(Da,e)?Da[e]:(null===(n=(o=t.getState()).onError)||void 0===n||n.call(o,"009",Mo.error009(e)),null)}),[e])}(n);return g?(0,s.jsx)("marker",{className:"react-flow__arrowhead",id:t,markerWidth:"".concat(i),markerHeight:"".concat(l),viewBox:"-10 -10 20 20",markerUnits:d,orient:v,refX:"0",refY:"0",children:(0,s.jsx)(g,{color:o,strokeWidth:f})}):null},za=function(e){var t=e.defaultColor,n=e.rfId,o=Po((0,c.useCallback)(function(e){var t=e.defaultColor,n=e.rfId;return function(e){var o=[];return e.edges.reduce((function(e,r){return[r.markerStart,r.markerEnd].forEach((function(r){if(r&&"object"===typeof r){var i=kr(r,n);o.includes(i)||(e.push((0,l.Z)({id:i,color:r.color||t},r)),o.push(i))}})),e}),[]).sort((function(e,t){return e.id.localeCompare(t.id)}))}}({defaultColor:t,rfId:n}),[t,n]),(function(e,t){return!(e.length!==t.length||e.some((function(e,n){return e.id!==t[n].id})))}));return(0,s.jsx)("defs",{children:o.map((function(e){return(0,s.jsx)(Ia,{id:e.id,type:e.type,color:e.color,width:e.width,height:e.height,markerUnits:e.markerUnits,strokeWidth:e.strokeWidth,orient:e.orient},e.id)}))})};za.displayName="MarkerDefinitions";var Ra=(0,c.memo)(za),Ta=function(e){return{nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}},Ba=function(e){var t=e.defaultMarkerColor,n=e.onlyRenderVisibleElements,o=e.elevateEdgesOnSelect,r=e.rfId,a=e.edgeTypes,l=e.noPanClassName,u=e.onEdgeUpdate,c=e.onEdgeContextMenu,f=e.onEdgeMouseEnter,h=e.onEdgeMouseMove,v=e.onEdgeMouseLeave,g=e.onEdgeClick,p=e.edgeUpdaterRadius,y=e.onEdgeDoubleClick,b=e.onEdgeUpdateStart,x=e.onEdgeUpdateEnd,w=e.children,S=Po(Ta,m),E=S.edgesFocusable,C=S.edgesUpdatable,_=S.elementsSelectable,N=S.width,M=S.height,k=S.connectionMode,P=S.nodeInternals,A=S.onError,O=Za(n,P,o);return N?(0,s.jsxs)(s.Fragment,{children:[O.map((function(e){var n=e.level,o=e.edges,m=e.isMaxLevel;return(0,s.jsxs)("svg",{style:{zIndex:n},width:N,height:M,className:"react-flow__edges react-flow__container",children:[m&&(0,s.jsx)(Ra,{defaultColor:t,rfId:r}),(0,s.jsx)("g",{children:o.map((function(e){var t,n,o=Aa(P.get(e.source)),m=(0,i.Z)(o,3),w=m[0],S=m[1],N=m[2],M=Aa(P.get(e.target)),O=(0,i.Z)(M,3),Z=O[0],D=O[1],I=O[2];if(!N||!I)return null;var z=e.type||"default";a[z]||(null===A||void 0===A||A("011",Mo.error011(z)),z="default");var R=a[z]||a.default,T=k===nr.Strict?D.target:(null!==(t=D.target)&&void 0!==t?t:[]).concat(null!==(n=D.source)&&void 0!==n?n:[]),B=Pa(S.source,e.sourceHandle),j=Pa(T,e.targetHandle),L=(null===B||void 0===B?void 0:B.position)||lr.Bottom,X=(null===j||void 0===j?void 0:j.position)||lr.Top,Y=!!(e.focusable||E&&"undefined"===typeof e.focusable),H="undefined"!==typeof u&&(e.updatable||C&&"undefined"===typeof e.updatable);if(!B||!j)return null===A||void 0===A||A("008",Mo.error008(B,e)),null;var V=function(e,t,n,o,r,i){var a=ka(n,e,t),l=ka(i,o,r);return{sourceX:a.x,sourceY:a.y,targetX:l.x,targetY:l.y}}(w,B,L,Z,j,X),K=V.sourceX,U=V.sourceY,F=V.targetX,W=V.targetY;return(0,s.jsx)(R,{id:e.id,className:d([e.className,l]),type:z,data:e.data,selected:!!e.selected,animated:!!e.animated,hidden:!!e.hidden,label:e.label,labelStyle:e.labelStyle,labelShowBg:e.labelShowBg,labelBgStyle:e.labelBgStyle,labelBgPadding:e.labelBgPadding,labelBgBorderRadius:e.labelBgBorderRadius,style:e.style,source:e.source,target:e.target,sourceHandleId:e.sourceHandle,targetHandleId:e.targetHandle,markerEnd:e.markerEnd,markerStart:e.markerStart,sourceX:K,sourceY:U,targetX:F,targetY:W,sourcePosition:L,targetPosition:X,elementsSelectable:_,onEdgeUpdate:u,onContextMenu:c,onMouseEnter:f,onMouseMove:h,onMouseLeave:v,onClick:g,edgeUpdaterRadius:p,onEdgeDoubleClick:y,onEdgeUpdateStart:b,onEdgeUpdateEnd:x,rfId:r,ariaLabel:e.ariaLabel,isFocusable:Y,isUpdatable:H,pathOptions:"pathOptions"in e?e.pathOptions:void 0,interactionWidth:e.interactionWidth},e.id)}))})]},n)})),w]}):null};Ba.displayName="EdgeRenderer";var ja=(0,c.memo)(Ba),La=function(e){return"translate(".concat(e.transform[0],"px,").concat(e.transform[1],"px) scale(").concat(e.transform[2],")")};function Xa(e){var t=e.children,n=Po(La);return(0,s.jsx)("div",{className:"react-flow__viewport react-flow__container",style:{transform:n},children:t})}var Ya=(xo={},(0,r.Z)(xo,lr.Left,lr.Right),(0,r.Z)(xo,lr.Right,lr.Left),(0,r.Z)(xo,lr.Top,lr.Bottom),(0,r.Z)(xo,lr.Bottom,lr.Top),xo),Ha=function(e){var t,n,o,r,a,u,d,f=e.nodeId,h=e.handleType,v=e.style,g=e.type,p=void 0===g?ir.Bezier:g,y=e.CustomComponent,b=e.connectionStatus,x=Po((0,c.useCallback)((function(e){return{fromNode:e.nodeInternals.get(f),handleId:e.connectionHandleId,toX:(e.connectionPosition.x-e.transform[0])/e.transform[2],toY:(e.connectionPosition.y-e.transform[1])/e.transform[2],connectionMode:e.connectionMode}}),[f]),m),w=x.fromNode,S=x.handleId,E=x.toX,C=x.toY,_=x.connectionMode,N=null===w||void 0===w||null===(t=w[Wo])||void 0===t?void 0:t.handleBounds,M=null===N||void 0===N?void 0:N[h];if(_===nr.Loose&&(M=M||(null===N||void 0===N?void 0:N["source"===h?"target":"source"])),!w||!M)return null;var k=S?M.find((function(e){return e.id===S})):M[0],P=k?k.x+k.width/2:(null!==(n=w.width)&&void 0!==n?n:0)/2,A=k?k.y+k.height/2:null!==(o=w.height)&&void 0!==o?o:0,O=(null!==(r=null===(a=w.positionAbsolute)||void 0===a?void 0:a.x)&&void 0!==r?r:0)+P,Z=(null!==(u=null===(d=w.positionAbsolute)||void 0===d?void 0:d.y)&&void 0!==u?u:0)+A,D=null===k||void 0===k?void 0:k.position,I=D?Ya[D]:null;if(!D||!I)return null;if(y)return(0,s.jsx)(y,{connectionLineType:p,connectionLineStyle:v,fromNode:w,fromHandle:k,fromX:O,fromY:Z,toX:E,toY:C,fromPosition:D,toPosition:I,connectionStatus:b});var z="",R={sourceX:O,sourceY:Z,sourcePosition:D,targetX:E,targetY:C,targetPosition:I};if(p===ir.Bezier){var T=Er(R);z=(0,i.Z)(T,1)[0]}else if(p===ir.Step){var B=yr((0,l.Z)((0,l.Z)({},R),{},{borderRadius:0}));z=(0,i.Z)(B,1)[0]}else if(p===ir.SmoothStep){var j=yr(R);z=(0,i.Z)(j,1)[0]}else if(p===ir.SimpleBezier){var L=fr(R);z=(0,i.Z)(L,1)[0]}else z="M".concat(O,",").concat(Z," ").concat(E,",").concat(C);return(0,s.jsx)("path",{d:z,fill:"none",className:"react-flow__connection-path",style:v})};Ha.displayName="ConnectionLine";var Va=function(e){return{nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height}};function Ka(e){var t=e.containerStyle,n=e.style,o=e.type,r=e.component,i=Po(Va,m),a=i.nodeId,l=i.handleType,u=i.nodesConnectable,c=i.width,f=i.height,h=i.connectionStatus;return!!(a&&l&&c&&u)?(0,s.jsx)("svg",{style:t,width:c,height:f,className:"react-flow__edges react-flow__connectionline react-flow__container",children:(0,s.jsx)("g",{className:d(["react-flow__connection",h]),children:(0,s.jsx)(Ha,{nodeId:a,handleType:l,style:n,type:o,CustomComponent:r,connectionStatus:h})})}):null}function Ua(e,t){(0,c.useRef)(null),Ao();return(0,c.useMemo)((function(){return t(e)}),[e])}var Fa=function(e){var t=e.nodeTypes,n=e.edgeTypes,o=e.onMove,r=e.onMoveStart,i=e.onMoveEnd,a=e.onInit,l=e.onNodeClick,u=e.onEdgeClick,d=e.onNodeDoubleClick,f=e.onEdgeDoubleClick,h=e.onNodeMouseEnter,v=e.onNodeMouseMove,g=e.onNodeMouseLeave,p=e.onNodeContextMenu,y=e.onSelectionContextMenu,m=e.onSelectionStart,b=e.onSelectionEnd,x=e.connectionLineType,w=e.connectionLineStyle,S=e.connectionLineComponent,E=e.connectionLineContainerStyle,C=e.selectionKeyCode,_=e.selectionOnDrag,N=e.selectionMode,M=e.multiSelectionKeyCode,k=e.panActivationKeyCode,P=e.zoomActivationKeyCode,A=e.deleteKeyCode,O=e.onlyRenderVisibleElements,Z=e.elementsSelectable,D=e.selectNodesOnDrag,I=e.defaultViewport,z=e.translateExtent,R=e.minZoom,T=e.maxZoom,B=e.preventScrolling,j=e.defaultMarkerColor,L=e.zoomOnScroll,X=e.zoomOnPinch,Y=e.panOnScroll,H=e.panOnScrollSpeed,V=e.panOnScrollMode,K=e.zoomOnDoubleClick,U=e.panOnDrag,F=e.onPaneClick,W=e.onPaneMouseEnter,q=e.onPaneMouseMove,G=e.onPaneMouseLeave,$=e.onPaneScroll,Q=e.onPaneContextMenu,J=e.onEdgeUpdate,ee=e.onEdgeContextMenu,te=e.onEdgeMouseEnter,ne=e.onEdgeMouseMove,oe=e.onEdgeMouseLeave,re=e.edgeUpdaterRadius,ie=e.onEdgeUpdateStart,ae=e.onEdgeUpdateEnd,le=e.noDragClassName,ue=e.noWheelClassName,se=e.noPanClassName,ce=e.elevateEdgesOnSelect,de=e.disableKeyboardA11y,fe=e.nodeOrigin,he=e.nodeExtent,ve=e.rfId,ge=Ua(t,ya),pe=Ua(n,Ma);return function(e){var t=zi(),n=(0,c.useRef)(!1);(0,c.useEffect)((function(){!n.current&&t.viewportInitialized&&e&&(setTimeout((function(){return e(t)}),1),n.current=!0)}),[e,t.viewportInitialized])}(a),(0,s.jsx)(pa,{onPaneClick:F,onPaneMouseEnter:W,onPaneMouseMove:q,onPaneMouseLeave:G,onPaneContextMenu:Q,onPaneScroll:$,deleteKeyCode:A,selectionKeyCode:C,selectionOnDrag:_,selectionMode:N,onSelectionStart:m,onSelectionEnd:b,multiSelectionKeyCode:M,panActivationKeyCode:k,zoomActivationKeyCode:P,elementsSelectable:Z,onMove:o,onMoveStart:r,onMoveEnd:i,zoomOnScroll:L,zoomOnPinch:X,zoomOnDoubleClick:K,panOnScroll:Y,panOnScrollSpeed:H,panOnScrollMode:V,panOnDrag:U,defaultViewport:I,translateExtent:z,minZoom:R,maxZoom:T,onSelectionContextMenu:y,preventScrolling:B,noDragClassName:le,noWheelClassName:ue,noPanClassName:se,disableKeyboardA11y:de,children:(0,s.jsxs)(Xa,{children:[(0,s.jsx)(ja,{edgeTypes:pe,onEdgeClick:u,onEdgeDoubleClick:f,onEdgeUpdate:J,onlyRenderVisibleElements:O,onEdgeContextMenu:ee,onEdgeMouseEnter:te,onEdgeMouseMove:ne,onEdgeMouseLeave:oe,onEdgeUpdateStart:ie,onEdgeUpdateEnd:ae,edgeUpdaterRadius:re,defaultMarkerColor:j,noPanClassName:se,elevateEdgesOnSelect:!!ce,disableKeyboardA11y:de,rfId:ve,children:(0,s.jsx)(Ka,{style:w,type:x,component:S,containerStyle:E})}),(0,s.jsx)("div",{className:"react-flow__edgelabel-renderer"}),(0,s.jsx)(xa,{nodeTypes:ge,onNodeClick:l,onNodeDoubleClick:d,onNodeMouseEnter:h,onNodeMouseMove:v,onNodeMouseLeave:g,onNodeContextMenu:p,selectNodesOnDrag:D,onlyRenderVisibleElements:O,noPanClassName:se,noDragClassName:le,disableKeyboardA11y:de,nodeOrigin:fe,nodeExtent:he,rfId:ve})]})})};Fa.displayName="GraphView";var Wa=(0,c.memo)(Fa),qa=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Ga={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:qa,nodeExtent:qa,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:nr.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:Go,isValidConnection:void 0},$a=function(){return e=function(e,t){return(0,l.Z)((0,l.Z)({},Ga),{},{setNodes:function(n){var o=t(),r=o.nodeInternals,i=o.nodeOrigin,a=o.elevateNodesOnSelect;e({nodeInternals:Ni(n,r,i,a)})},getNodes:function(){return Array.from(t().nodeInternals.values())},setEdges:function(n){var o=t().defaultEdgeOptions,r=void 0===o?{}:o;e({edges:n.map((function(e){return(0,l.Z)((0,l.Z)({},r),e)}))})},setDefaultNodesAndEdges:function(n,o){var r="undefined"!==typeof n,i="undefined"!==typeof o,a=r?Ni(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:a,edges:i?o:[],hasDefaultNodes:r,hasDefaultEdges:i})},updateNodeDimensions:function(n){var o=t(),i=o.onNodesChange,a=o.nodeInternals,u=o.fitViewOnInit,s=o.fitViewOnInitDone,c=o.fitViewOnInitOptions,d=o.domNode,f=o.nodeOrigin,h=null===d||void 0===d?void 0:d.querySelector(".react-flow__viewport");if(h){var v=window.getComputedStyle(h),g=new window.DOMMatrixReadOnly(v.transform).m22,p=n.reduce((function(e,t){var n=a.get(t.id);if(n){var o=zo(t.nodeElement);o.width&&o.height&&(n.width!==o.width||n.height!==o.height||t.forceUpdate)&&(a.set(n.id,(0,l.Z)((0,l.Z)({},n),{},(0,r.Z)({},Wo,(0,l.Z)((0,l.Z)({},n[Wo]),{},{handleBounds:{source:ra(".source",t.nodeElement,g,f),target:ra(".target",t.nodeElement,g,f)}})),o)),e.push({id:n.id,type:"dimensions",dimensions:o}))}return e}),[]);_i(a,f);var y=s||u&&!s&&Mi(t,(0,l.Z)({initial:!0},c));e({nodeInternals:new Map(a),fitViewOnInitDone:y}),(null===p||void 0===p?void 0:p.length)>0&&(null===i||void 0===i||i(p))}},updateNodePositions:function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=t().triggerNodeChanges,i=e.map((function(e){var t={id:e.id,type:"position",dragging:o};return n&&(t.positionAbsolute=e.positionAbsolute,t.position=e.position),t}));r(i)},triggerNodeChanges:function(n){var o=t(),r=o.onNodesChange,i=o.nodeInternals,a=o.hasDefaultNodes,l=o.nodeOrigin,u=o.getNodes,s=o.elevateNodesOnSelect;if(null!==n&&void 0!==n&&n.length){if(a){var c=Ni(Fi(n,u()),i,l,s);e({nodeInternals:c})}null===r||void 0===r||r(n)}},addSelectedNodes:function(n){var o,r=t(),i=r.multiSelectionActive,a=r.edges,l=r.getNodes,u=null;i?o=n.map((function(e){return Wi(e,!0)})):(o=qi(l(),n),u=qi(a,[])),Ai({changedNodes:o,changedEdges:u,get:t,set:e})},addSelectedEdges:function(n){var o,r=t(),i=r.multiSelectionActive,a=r.edges,l=r.getNodes,u=null;i?o=n.map((function(e){return Wi(e,!0)})):(o=qi(a,n),u=qi(l(),[])),Ai({changedNodes:u,changedEdges:o,get:t,set:e})},unselectNodesAndEdges:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=n.nodes,r=n.edges,i=t(),a=i.edges,l=i.getNodes,u=r||a;Ai({changedNodes:(o||l()).map((function(e){return e.selected=!1,Wi(e.id,!1)})),changedEdges:u.map((function(e){return Wi(e.id,!1)})),get:t,set:e})},setMinZoom:function(n){var o=t(),r=o.d3Zoom,i=o.maxZoom;null===r||void 0===r||r.scaleExtent([n,i]),e({minZoom:n})},setMaxZoom:function(n){var o=t(),r=o.d3Zoom,i=o.minZoom;null===r||void 0===r||r.scaleExtent([i,n]),e({maxZoom:n})},setTranslateExtent:function(n){var o;null===(o=t().d3Zoom)||void 0===o||o.translateExtent(n),e({translateExtent:n})},resetSelectedElements:function(){var n=t(),o=n.edges;Ai({changedNodes:(0,n.getNodes)().filter((function(e){return e.selected})).map((function(e){return Wi(e.id,!1)})),changedEdges:o.filter((function(e){return e.selected})).map((function(e){return Wi(e.id,!1)})),get:t,set:e})},setNodeExtent:function(n){var o=t().nodeInternals;o.forEach((function(e){e.positionAbsolute=To(e.position,n)})),e({nodeExtent:n,nodeInternals:new Map(o)})},panBy:function(e){var n=t(),o=n.transform,r=n.width,i=n.height,a=n.d3Zoom,l=n.d3Selection,u=n.translateExtent;if(!a||!l||!e.x&&!e.y)return!1;var s=no.translate(o[0]+e.x,o[1]+e.y).scale(o[2]),c=[[0,0],[r,i]],d=null===a||void 0===a?void 0:a.constrain()(s,c,u);return a.transform(l,d),o[0]!==d.x||o[1]!==d.y||o[2]!==d.k},cancelConnection:function(){return e({connectionNodeId:Ga.connectionNodeId,connectionHandleId:Ga.connectionHandleId,connectionHandleType:Ga.connectionHandleType,connectionStatus:Ga.connectionStatus,connectionStartHandle:Ga.connectionStartHandle,connectionEndHandle:Ga.connectionEndHandle})},reset:function(){return e((0,l.Z)({},Ga))}})},t=Object.is,e?y(e,t):y;var e,t},Qa=function(e){var t=e.children,n=(0,c.useRef)(null);return n.current||(n.current=$a()),(0,s.jsx)(No,{value:n.current,children:t})};Qa.displayName="ReactFlowProvider";var Ja=function(e){var t=e.children;return(0,c.useContext)(_o)?(0,s.jsx)(s.Fragment,{children:t}):(0,s.jsx)(Qa,{children:t})};Ja.displayName="ReactFlowWrapper";var el={input:Qr,default:Gr,output:ei,group:ti},tl={default:Cr,straight:xr,step:br,smoothstep:mr,simplebezier:hr},nl=[0,0],ol=[15,15],rl={x:0,y:0,zoom:1},il={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},al=(0,c.forwardRef)((function(e,t){var n=e.nodes,o=e.edges,r=e.defaultNodes,i=e.defaultEdges,a=e.className,c=e.nodeTypes,f=void 0===c?el:c,h=e.edgeTypes,v=void 0===h?tl:h,g=e.onNodeClick,p=e.onEdgeClick,y=e.onInit,m=e.onMove,b=e.onMoveStart,x=e.onMoveEnd,w=e.onConnect,S=e.onConnectStart,E=e.onConnectEnd,C=e.onClickConnectStart,_=e.onClickConnectEnd,N=e.onNodeMouseEnter,M=e.onNodeMouseMove,k=e.onNodeMouseLeave,P=e.onNodeContextMenu,A=e.onNodeDoubleClick,O=e.onNodeDragStart,Z=e.onNodeDrag,D=e.onNodeDragStop,I=e.onNodesDelete,z=e.onEdgesDelete,R=e.onSelectionChange,T=e.onSelectionDragStart,B=e.onSelectionDrag,j=e.onSelectionDragStop,L=e.onSelectionContextMenu,X=e.onSelectionStart,Y=e.onSelectionEnd,H=e.connectionMode,V=void 0===H?nr.Strict:H,K=e.connectionLineType,U=void 0===K?ir.Bezier:K,F=e.connectionLineStyle,W=e.connectionLineComponent,q=e.connectionLineContainerStyle,G=e.deleteKeyCode,$=void 0===G?"Backspace":G,Q=e.selectionKeyCode,J=void 0===Q?"Shift":Q,ee=e.selectionOnDrag,te=void 0!==ee&&ee,ne=e.selectionMode,oe=void 0===ne?rr.Full:ne,re=e.panActivationKeyCode,ie=void 0===re?"Space":re,ae=e.multiSelectionKeyCode,le=void 0===ae?er()?"Meta":"Control":ae,ue=e.zoomActivationKeyCode,se=void 0===ue?er()?"Meta":"Control":ue,ce=e.snapToGrid,de=void 0!==ce&&ce,fe=e.snapGrid,he=void 0===fe?ol:fe,ve=e.onlyRenderVisibleElements,ge=void 0!==ve&&ve,pe=e.selectNodesOnDrag,ye=void 0===pe||pe,me=e.nodesDraggable,be=e.nodesConnectable,xe=e.nodesFocusable,we=e.nodeOrigin,Se=void 0===we?nl:we,Ee=e.edgesFocusable,Ce=e.edgesUpdatable,_e=e.elementsSelectable,Ne=e.defaultViewport,Me=void 0===Ne?rl:Ne,ke=e.minZoom,Pe=void 0===ke?.5:ke,Ae=e.maxZoom,Oe=void 0===Ae?2:Ae,Ze=e.translateExtent,De=void 0===Ze?qa:Ze,Ie=e.preventScrolling,ze=void 0===Ie||Ie,Re=e.nodeExtent,Te=e.defaultMarkerColor,Be=void 0===Te?"#b1b1b7":Te,je=e.zoomOnScroll,Le=void 0===je||je,Xe=e.zoomOnPinch,Ye=void 0===Xe||Xe,He=e.panOnScroll,Ve=void 0!==He&&He,Ke=e.panOnScrollSpeed,Ue=void 0===Ke?.5:Ke,Fe=e.panOnScrollMode,We=void 0===Fe?or.Free:Fe,qe=e.zoomOnDoubleClick,Ge=void 0===qe||qe,$e=e.panOnDrag,Qe=void 0===$e||$e,Je=e.onPaneClick,et=e.onPaneMouseEnter,tt=e.onPaneMouseMove,nt=e.onPaneMouseLeave,ot=e.onPaneScroll,rt=e.onPaneContextMenu,it=e.children,at=e.onEdgeUpdate,lt=e.onEdgeContextMenu,ut=e.onEdgeDoubleClick,st=e.onEdgeMouseEnter,ct=e.onEdgeMouseMove,dt=e.onEdgeMouseLeave,ft=e.onEdgeUpdateStart,ht=e.onEdgeUpdateEnd,vt=e.edgeUpdaterRadius,gt=void 0===vt?10:vt,pt=e.onNodesChange,yt=e.onEdgesChange,mt=e.noDragClassName,bt=void 0===mt?"nodrag":mt,xt=e.noWheelClassName,wt=void 0===xt?"nowheel":xt,St=e.noPanClassName,Et=void 0===St?"nopan":St,Ct=e.fitView,_t=void 0!==Ct&&Ct,Nt=e.fitViewOptions,Mt=e.connectOnClick,kt=void 0===Mt||Mt,Pt=e.attributionPosition,At=e.proOptions,Ot=e.defaultEdgeOptions,Zt=e.elevateNodesOnSelect,Dt=void 0===Zt||Zt,It=e.elevateEdgesOnSelect,zt=void 0!==It&&It,Rt=e.disableKeyboardA11y,Tt=void 0!==Rt&&Rt,Bt=e.autoPanOnConnect,jt=void 0===Bt||Bt,Lt=e.autoPanOnNodeDrag,Xt=void 0===Lt||Lt,Yt=e.connectionRadius,Ht=void 0===Yt?20:Yt,Vt=e.isValidConnection,Kt=e.onError,Ut=e.style,Ft=e.id,Wt=(0,u.Z)(e,Co),qt=Ft||"1";return(0,s.jsx)("div",(0,l.Z)((0,l.Z)({},Wt),{},{style:(0,l.Z)((0,l.Z)({},Ut),il),ref:t,className:d(["react-flow",a]),"data-testid":"rf__wrapper",id:Ft,children:(0,s.jsxs)(Ja,{children:[(0,s.jsx)(Wa,{onInit:y,onMove:m,onMoveStart:b,onMoveEnd:x,onNodeClick:g,onEdgeClick:p,onNodeMouseEnter:N,onNodeMouseMove:M,onNodeMouseLeave:k,onNodeContextMenu:P,onNodeDoubleClick:A,nodeTypes:f,edgeTypes:v,connectionLineType:U,connectionLineStyle:F,connectionLineComponent:W,connectionLineContainerStyle:q,selectionKeyCode:J,selectionOnDrag:te,selectionMode:oe,deleteKeyCode:$,multiSelectionKeyCode:le,panActivationKeyCode:ie,zoomActivationKeyCode:se,onlyRenderVisibleElements:ge,selectNodesOnDrag:ye,defaultViewport:Me,translateExtent:De,minZoom:Pe,maxZoom:Oe,preventScrolling:ze,zoomOnScroll:Le,zoomOnPinch:Ye,zoomOnDoubleClick:Ge,panOnScroll:Ve,panOnScrollSpeed:Ue,panOnScrollMode:We,panOnDrag:Qe,onPaneClick:Je,onPaneMouseEnter:et,onPaneMouseMove:tt,onPaneMouseLeave:nt,onPaneScroll:ot,onPaneContextMenu:rt,onSelectionContextMenu:L,onSelectionStart:X,onSelectionEnd:Y,onEdgeUpdate:at,onEdgeContextMenu:lt,onEdgeDoubleClick:ut,onEdgeMouseEnter:st,onEdgeMouseMove:ct,onEdgeMouseLeave:dt,onEdgeUpdateStart:ft,onEdgeUpdateEnd:ht,edgeUpdaterRadius:gt,defaultMarkerColor:Be,noDragClassName:bt,noWheelClassName:wt,noPanClassName:Et,elevateEdgesOnSelect:zt,rfId:qt,disableKeyboardA11y:Tt,nodeOrigin:Se,nodeExtent:Re}),(0,s.jsx)(di,{nodes:n,edges:o,defaultNodes:r,defaultEdges:i,onConnect:w,onConnectStart:S,onConnectEnd:E,onClickConnectStart:C,onClickConnectEnd:_,nodesDraggable:me,nodesConnectable:be,nodesFocusable:xe,edgesFocusable:Ee,edgesUpdatable:Ce,elementsSelectable:_e,elevateNodesOnSelect:Dt,minZoom:Pe,maxZoom:Oe,nodeExtent:Re,onNodesChange:pt,onEdgesChange:yt,snapToGrid:de,snapGrid:he,connectionMode:V,translateExtent:De,connectOnClick:kt,defaultEdgeOptions:Ot,fitView:_t,fitViewOptions:Nt,onNodesDelete:I,onEdgesDelete:z,onNodeDragStart:O,onNodeDrag:Z,onNodeDragStop:D,onSelectionDrag:B,onSelectionDragStart:T,onSelectionDragStop:j,noPanClassName:Et,nodeOrigin:Se,rfId:qt,autoPanOnConnect:jt,autoPanOnNodeDrag:Xt,onError:Kt,connectionRadius:Ht,isValidConnection:Vt}),(0,s.jsx)(li,{onSelectionChange:R}),it,(0,s.jsx)(Do,{proOptions:At,position:Pt}),(0,s.jsx)(bi,{rfId:qt,disableKeyboardA11y:Tt})]})}))}));al.displayName="ReactFlow";function ll(e){return function(t){var n=(0,c.useState)(t),o=(0,i.Z)(n,2),r=o[0],a=o[1],l=(0,c.useCallback)((function(t){return a((function(n){return e(t,n)}))}),[]);return[r,a,l]}}var ul=ll(Fi),sl=ll((function(e,t){return Ui(e,t)}))},8107:function(){},9170:function(e,t,n){n.d(t,{iP:function(){return i}});var o=n(9439),r=n(2791);function i(){var e=r.useState({width:null,height:null}),t=(0,o.Z)(e,2),n=t[0],i=t[1];return r.useLayoutEffect((function(){var e=function(){i({width:window.innerWidth,height:window.innerHeight})};return e(),window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),n}}}]);
//# sourceMappingURL=390.3a80af03.chunk.js.map