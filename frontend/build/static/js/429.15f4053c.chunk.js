(self.webpackChunkblog=self.webpackChunkblog||[]).push([[429],{1522:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return q}});var i=t(4165),o=t(5861),l=t(9439),a=t(2791),r=t(1243),u=t(3400),s=t(3239),c=t(9877),d=t(3543),f=t(9658),h=t(2017),p=t(3385),x=t(9013),g=t(1413),v=t(4518),Z=t(1652),j=t(1263),m=t(8178),w=t(6386),b=t(184);function k(e){var n=e.setIsDatePickerOpen,t=e.id,i=e.disabled,o=e.value,l=e.InputProps,a=(void 0===l?{}:l).ref,r=e.inputProps,u=(void 0===r?{}:r)["aria-label"];return(0,b.jsx)(v.Z,{variant:"outlined",size:"large",id:t,disabled:i,ref:a,"aria-label":u,onClick:function(){return null===n||void 0===n?void 0:n((function(e){return!e}))},children:(0,w.Z)(o,"MM/dd/yyyy")})}var D=function(e){var n=(0,a.useState)(!1),t=(0,l.Z)(n,2),i=t[0],o=t[1];return(0,b.jsx)(Z._,{dateAdapter:m.H,children:(0,b.jsx)(j.M,(0,g.Z)((0,g.Z)({slots:(0,g.Z)({field:k},e.slots),slotProps:{field:{setIsDatePickerOpen:o},popper:{placement:"bottom"}}},e),{},{open:i,onClose:function(){return o(!1)},shouldDisableDate:function(e){return 0!==e.getDay()},disableHighlightToday:!0}))})},C=t(2199),y=t(173),S=t(1789),F=t(9898),E=t(6695);t(7549);S.Z.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(S.Z.version,"/pdf.worker.min.js");var B=function(e){var n=(0,a.useState)(null),t=(0,l.Z)(n,2),i=t[0],o=t[1],r=(0,a.useState)(1),u=(0,l.Z)(r,2),c=u[0],d=u[1],f=(0,a.useState)(1),h=(0,l.Z)(f,2),p=h[0],x=h[1];function g(e){d((function(n){return n+e}))}(0,a.useEffect)((function(){d(1)}),[e.file]);var Z=y.tq?document.documentElement.clientWidth:window.innerWidth,j=y.tq?document.documentElement.clientHeight:window.innerHeight,m=(0,a.useState)({width:j/Z>=1.6?Z-30:null,height:j/Z<1.6?j:null}),w=(0,l.Z)(m,2),k=w[0],D=w[1],S=function(){var e=y.tq?document.documentElement.clientWidth:window.innerWidth,n=y.tq?document.documentElement.clientHeight:window.innerHeight;D({width:n/e>=1.6?e-30:null,height:n/e<1.6?n:null})};return(0,a.useEffect)((function(){return window.addEventListener("resize",S),function(){window.removeEventListener("resize",S)}}),[k]),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{style:{marginTop:"1em",marginBottom:"1em"},children:(0,b.jsxs)(C.Z,{id:"scaleButton",children:[(0,b.jsx)(v.Z,{onClick:function(){x((function(e){return e+.2}))},variant:"outlined",children:"+"}),(0,b.jsx)(v.Z,{onClick:function(){1!==p&&x((function(e){return e-.2}))},variant:"outlined",disabled:p<=1,children:"-"})]})}),(0,b.jsx)(F.Z,{file:e.file,onLoadSuccess:function(e){var n=e.numPages;o(n)},loading:(0,b.jsx)(s.Z,{}),children:(0,b.jsx)(E.Z,{renderTextLayer:!1,className:"page",scale:p,height:k.height,width:k.width,pageNumber:c})}),(0,b.jsxs)("p",{style:{color:"black"},children:["Page ",c||(i?1:"--")," of ",i||"--"]}),(0,b.jsxs)(C.Z,{id:"pageButton",children:[(0,b.jsx)(v.Z,{type:"button",variant:"outlined",disabled:c<=1,onClick:function(){g(-1)},children:"Previous"}),(0,b.jsx)(v.Z,{type:"button",variant:"outlined",disabled:c>=i,onClick:function(){g(1)},children:"Next"})]})]})},M=t(3590),P=t(4554),W={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"50vw",maxWidth:"1500px",height:"50vh",bgcolor:"#ffffff",border:"0.1px solid #f57c00",boxShadow:24,p:2},L=function(e){var n=(0,a.useState)(),t=(0,l.Z)(n,2),i=t[0],o=t[1],r=(0,a.useState)(null),u=(0,l.Z)(r,2),s=u[0],c=u[1],d=(0,a.useRef)(null);return(0,a.useEffect)((function(){!function(){var e=new Date;e.setDate(e.getDate()+(-1-e.getDay()+7)%7+1),o(e)}()}),[]),(0,b.jsx)(M.Z,{open:e.open,onClose:e.onClose,children:(0,b.jsxs)(P.Z,{sx:W,bgcolor:"white",children:[(0,b.jsx)("h2",{children:"Choose Date"}),(0,b.jsx)(D,{value:i,minDate:new Date("2022/04/03"),onChange:o}),(0,b.jsx)("h2",{children:"Choose File"}),(0,b.jsx)("input",{type:"file",ref:d,id:"bulletin",name:"theFile",onChange:function(e){var n=e.target;c(n.files[0])},accept:"application/pdf"}),(0,b.jsxs)("p",{children:[(0,b.jsx)(v.Z,{onClick:function(){return e.onModalUpload(s,i)},children:"Upload"}),(0,b.jsx)(v.Z,{onClick:e.onClose,children:"Close"})]})]})})},U=t(9434),H=t(7689),q=function(){var e=(0,U.v9)((function(e){return e.authToken.admin})),n=(0,H.s0)(),t=(0,H.xW)(),g=(0,H.f_)(),v=g.maxDate,Z=g.queryDate,j=new Date("2022/04/03"),m=(0,a.useState)(null),w=(0,l.Z)(m,2),k=w[0],C=w[1],y=(0,a.useState)(Z),S=(0,l.Z)(y,2),F=S[0],E=S[1],M=(0,a.useState)(!1),P=(0,l.Z)(M,2),W=P[0],q=P[1],T=(0,a.useState)(!1),Y=(0,l.Z)(T,2),z=Y[0],I=Y[1],N=function(e,n){"clickaway"!==n&&I(!1)},O=(0,a.useCallback)((0,o.Z)((0,i.Z)().mark((function e(){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.Z.get("/api/WeeklyUpdate/GetBulletin",{params:{date:F.toLocaleDateString("sv")}});case 3:n=e.sent,C(n.data),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])}))),[F]),R=function(){q(!1)},A=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(n,o){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:G(n,(function(e,n){r.Z.put("/api/WeeklyUpdate/PostBulletin/",{file:n,date:o.toLocaleDateString("sv")}).then((function(e){console.log(e.data),E(o),t.revalidate(),R(),I(!0)}))}));case 1:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),G=function(e,n){var t=new FileReader;t.readAsDataURL(e),t.onload=function(){n(null,t.result)},t.onerror=function(e){n(e,null)}};function _(e,n){return e.getFullYear()===n.getFullYear()&&e.getMonth()===n.getMonth()&&e.getDate()===n.getDate()}return(0,a.useEffect)((function(){null!=F&&(O(),n("/weeklyupdate/"+F.toLocaleDateString("sv").replace(/-/g,"")))}),[F,O,n]),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("h1",{children:"\uc8fc\ubcf4"}),k?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(u.Z,{id:"previousBulletin",onClick:function(){E(new Date(F.getFullYear(),F.getMonth(),F.getDate()-7))},disabled:_(F,j),children:(0,b.jsx)(h.Z,{})}),(0,b.jsx)(D,{value:F,minDate:j,maxDate:v,onChange:E}),(0,b.jsx)(u.Z,{id:"nextBulletin",onClick:function(){E(new Date(F.getFullYear(),F.getMonth(),F.getDate()+7))},disabled:_(F,v),children:(0,b.jsx)(p.Z,{})}),(0,b.jsx)(B,{file:k})]}):(0,b.jsx)(s.Z,{}),e&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(c.Z,{id:"uploadBulletinButton",variant:"extended",onClick:function(){return q(!0)},children:[(0,b.jsx)(x.Z,{sx:{mr:1}}),"Upload"]}),(0,b.jsx)(L,{open:W,onModalUpload:A,onClose:R}),(0,b.jsx)(d.Z,{open:z,autoHideDuration:8e3,onClose:N,children:(0,b.jsx)(f.Z,{severity:"success",onClose:N,children:"Uploaded Succesfully!"})})]})]})}},3414:function(){},172:function(){},2001:function(){},3779:function(){},6558:function(){},2258:function(){}}]);
//# sourceMappingURL=429.15f4053c.chunk.js.map