(self.webpackChunkblog=self.webpackChunkblog||[]).push([[567],{4439:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return R}});var i=t(4165),a=t(5861),o=t(9439),l=t(2791),r=t(1243),c=t(3400),s=t(3239),u=t(9877),d=t(3543),f=t(9658),h=t(2017),p=t(3385),g=t(9013),x=t(1413),v=t(4518),w=t(1652),Z=t(2016),j=t(5050),m=t(6386),b=t(184);function k(e){var n=e.setIsDatePickerOpen,t=e.id,i=e.disabled,a=e.value,o=e.InputProps,l=(void 0===o?{}:o).ref,r=e.inputProps,c=(void 0===r?{}:r)["aria-label"];return(0,b.jsx)(v.Z,{variant:"outlined",size:"large",id:t,disabled:i,ref:l,"aria-label":c,onClick:function(){return null===n||void 0===n?void 0:n((function(e){return!e}))},children:(0,m.Z)(a,"MM/dd/yyyy")})}var D=function(e){var n=(0,l.useState)(!1),t=(0,o.Z)(n,2),i=t[0],a=t[1];return(0,b.jsx)(w._,{dateAdapter:j.H,children:(0,b.jsx)(Z.M,(0,x.Z)((0,x.Z)({slots:(0,x.Z)({field:k},e.slots),slotProps:{field:{setIsDatePickerOpen:a},popper:{placement:"bottom"}}},e),{},{open:i,onClose:function(){return a(!1)},shouldDisableDate:function(e){return 0!==e.getDay()},disableHighlightToday:!0}))})},C=t(2199),y=t(173),S=t(3661),B=t(8175),E=t(8136),P=t(2219),U=t.n(P);t(7549);S.GlobalWorkerOptions.workerSrc=U();var F=function(e){var n=(0,l.useState)(null),t=(0,o.Z)(n,2),i=t[0],a=t[1],r=(0,l.useState)(1),c=(0,o.Z)(r,2),u=c[0],d=c[1],f=(0,l.useState)(1),h=(0,o.Z)(f,2),p=h[0],g=h[1];function x(e){d((function(n){return n+e}))}(0,l.useEffect)((function(){d(1)}),[e.file]);var w=y.tq?document.documentElement.clientWidth:window.innerWidth,Z=y.tq?document.documentElement.clientHeight:window.innerHeight,j=(0,l.useState)({width:10*Z>16*w?w-30:null,height:10*Z<16*w?Z-400:null}),m=(0,o.Z)(j,2),k=m[0],D=m[1],S=function(){var e=y.tq?document.documentElement.clientWidth:window.innerWidth,n=y.tq?document.documentElement.clientHeight:window.innerHeight;D({width:10*n>=16*e?e-30:null,height:10*n<=16*e?n-400:null})};return(0,l.useEffect)((function(){return window.addEventListener("resize",S),function(){window.removeEventListener("resize",S)}}),[k]),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{style:{marginTop:"1em",marginBottom:"1em"},children:(0,b.jsxs)(C.Z,{id:"scaleButton",children:[(0,b.jsx)(v.Z,{onClick:function(){g(p+.2)},variant:"outlined",children:"+"}),(0,b.jsx)(v.Z,{onClick:function(){1!==p&&g(p-.2)},variant:"outlined",disabled:p<=1,children:"-"})]})}),(0,b.jsx)(B.Z,{file:e.file,onLoadSuccess:function(e){var n=e.numPages;a(n)},loading:(0,b.jsx)(s.Z,{}),children:(0,b.jsx)(E.Z,{renderTextLayer:!1,className:"page",scale:p,height:k.height,width:k.width,pageNumber:u})}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("p",{style:{color:"black"},children:["Page ",u||(i?1:"--")," of ",i||"--"]}),(0,b.jsxs)(C.Z,{id:"pageButton",children:[(0,b.jsx)(v.Z,{type:"button",variant:"outlined",disabled:u<=1,onClick:function(){x(-1)},children:"Previous"}),(0,b.jsx)(v.Z,{type:"button",variant:"outlined",disabled:u>=i,onClick:function(){x(1)},children:"Next"})]})]})]})},L=t(3590),M=t(4554),W={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"50vw",maxWidth:"1500px",height:"50vh",bgcolor:"#ffffff",border:"0.1px solid #f57c00",boxShadow:24,p:2},H=function(e){var n=(0,l.useState)(function(){var e=new Date;return e.setDate(e.getDate()+(-1-e.getDay()+7)%7+1),e}()),t=(0,o.Z)(n,2),i=t[0],a=t[1],r=(0,l.useRef)(null),c=(0,l.useState)(null),s=(0,o.Z)(c,2),u=s[0],d=s[1];return(0,b.jsx)(L.Z,{open:e.open,onClose:e.onClose,children:(0,b.jsxs)(M.Z,{sx:W,bgcolor:"white",children:[(0,b.jsx)("h2",{children:"Choose Date"}),(0,b.jsx)(D,{value:i,minDate:new Date("2022/04/03"),onChange:a}),(0,b.jsx)("h2",{children:"Choose File"}),(0,b.jsx)("input",{type:"file",ref:r,id:"bulletin",name:"theFile",onChange:function(e){var n=e.target;d(n.files[0])},accept:"application/pdf"}),(0,b.jsxs)("p",{children:[(0,b.jsx)(v.Z,{onClick:function(){return e.onModalUpload(u,i)},children:"Upload"}),(0,b.jsx)(v.Z,{onClick:e.onClose,children:"Close"})]})]})})},R=function(){var e=(0,l.useState)(null),n=(0,o.Z)(e,2),t=n[0],x=n[1],v=(0,l.useState)(!1),w=(0,o.Z)(v,2),Z=w[0],j=w[1],m=(0,l.useState)(null),k=(0,o.Z)(m,2),C=k[0],y=k[1],S=(0,l.useState)(!1),B=(0,o.Z)(S,2),E=B[0],P=B[1],U=(0,l.useState)(null),L=(0,o.Z)(U,2),M=L[0],W=L[1],R=new Date("2022/04/03"),q=function(e,n){"clickaway"!==n&&j(!1)},N=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(){var n,t,a,o,l,c,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.Z.get("http://oncce.ca:3001/api/WeeklyUpdate/RecentDate");case 3:n=e.sent,console.log(n.data),t=new Date(n.data.replace(/-/g,"/")),W(t),a=new URLSearchParams(window.location.search),null===(o=a.get("date"))?y(t):(l=+o.substring(0,4),c=+o.substring(4,6),s=+o.substring(6,8),y(new Date(l,c-1,s))),e.next=14;break;case 12:e.prev=12,e.t0=e.catch(0);case 14:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),Y=(0,l.useCallback)((0,a.Z)((0,i.Z)().mark((function e(){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.Z.get("http://oncce.ca:3001/api/WeeklyUpdate/GetBulletin",{params:{date:C.toLocaleDateString("sv")}});case 3:n=e.sent,x(n.data),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])}))),[C]),z=function(){P(!1)},I=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(n,t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:O(n,(function(e,n){r.Z.put("http://oncce.ca:3001/api/WeeklyUpdate/PostBulletin/",{file:n,date:t.toLocaleDateString("sv")}).then((function(e){console.log(e.data),W(new Date(e.data.replace(/-/g,"/"))),y(t),z(),j(!0)}))}));case 1:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),O=function(e,n){var t=new FileReader;t.readAsDataURL(e),t.onload=function(){n(null,t.result)},t.onerror=function(e){n(e,null)}};function T(e,n){return e.getFullYear()===n.getFullYear()&&e.getMonth()===n.getMonth()&&e.getDate()===n.getDate()}return(0,l.useEffect)((function(){N()}),[]),(0,l.useEffect)((function(){if(null!=C){Y();var e=window.location.protocol+"//"+window.location.host+window.location.pathname+"?date="+C.toLocaleDateString("sv").replace(/-/g,"");window.history.replaceState({},null,e)}}),[C,Y]),(0,b.jsxs)("div",{className:"weeklyBulletinBoard",children:[(0,b.jsx)("h1",{children:"\uc8fc\ubcf4"}),C&&t?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(c.Z,{id:"previousBulletin",onClick:function(){y(new Date(C.getFullYear(),C.getMonth(),C.getDate()-7))},disabled:T(C,R),children:(0,b.jsx)(h.Z,{})}),(0,b.jsx)(D,{value:C,minDate:R,maxDate:M,onChange:y}),(0,b.jsx)(c.Z,{id:"nextBulletin",onClick:function(){y(new Date(C.getFullYear(),C.getMonth(),C.getDate()+7))},disabled:T(C,M),children:(0,b.jsx)(p.Z,{})}),(0,b.jsx)(F,{file:t})]}):(0,b.jsx)(s.Z,{}),(0,b.jsxs)(u.Z,{id:"uploadBulletinButton",variant:"extended",onClick:function(){return P(!0)},children:[(0,b.jsx)(g.Z,{sx:{mr:1}}),"Upload"]}),(0,b.jsx)(H,{open:E,onModalUpload:I,onClose:z}),(0,b.jsx)(d.Z,{open:Z,autoHideDuration:8e3,onClose:q,children:(0,b.jsx)(f.Z,{severity:"success",onClose:q,children:"Uploaded Succesfully!"})})]})}},3414:function(){},172:function(){},2001:function(){},3779:function(){},6558:function(){},2258:function(){}}]);
//# sourceMappingURL=567.78cde7af.chunk.js.map