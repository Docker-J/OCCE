"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[200],{9448:(e,t,s)=>{s.d(t,{A:()=>i});var l=s(3003);const i=e=>(0,l.d4)((e=>e.authToken.admin))&&e.children},9596:(e,t,s)=>{s.d(t,{A:()=>h});var l=s(5043),i=s(2518),a=s(8390),r=s(3728),n=s(1119),o=s(9432),c=s(579);const d=e=>{const{setIsDatePickerOpen:t,id:s,disabled:l,value:a,InputProps:{ref:r}={},inputProps:{"aria-label":n}={}}=e;return(0,c.jsx)(i.A,{variant:"outlined",size:"large",id:s,disabled:l,ref:r,"aria-label":n,onClick:()=>null===t||void 0===t?void 0:t((e=>!e)),children:(0,o.GP)(a,"yyyy/MM/dd")})},h=e=>{const[t,s]=(0,l.useState)(!1),{disableDate:i,...o}=e;return(0,c.jsx)(a.$,{dateAdapter:n.h,children:(0,c.jsx)(r.l,{slots:{field:d},slotProps:{field:{setIsDatePickerOpen:s},popper:{placement:"bottom"}},...o,open:t,onClose:()=>s(!1),shouldDisableDate:e=>i&&i(e),disableHighlightToday:!0})})}},5214:(e,t,s)=>{s.d(t,{A:()=>n});var l=s(4496),i=s(9435),a=s(9337),r=s(579);const n=e=>{let{accept:t,handleChangeFile:s,multiple:n}=e;const{getRootProps:o,getInputProps:c}=(0,a.VB)({accept:t,onDrop:e=>{s(e)},multiple:n});return(0,r.jsxs)("div",{style:{width:"100%",height:"100%",border:"1pt dotted #f57c00",borderRadius:"1em",overflowY:"auto"},...o(),children:[(0,r.jsx)("input",{...c()}),(0,r.jsxs)("div",{style:{height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[(0,r.jsx)(i.A,{fontSize:"large",color:"primary"}),(0,r.jsx)(l.A,{children:"Click or Drag File to here"})]})]})}},2460:(e,t,s)=>{s.d(t,{A:()=>g});var l=s(5043),i=s(4223),a=s(7537),r=s(6805),n=s.n(r),o=s(1045),c=s(79),d=s(2734),h=s(5964),p=s(579);const u=e=>{let{id:t,image:s,index:i,cover:a,setCoverImage:r,movePhoto:n,removeImage:u}=e;const g=(0,l.useRef)(null),[{isDragging:m},x]=(0,d.i)({type:"previewcard",item:()=>({id:t,index:i}),collect:e=>({isDragging:e.isDragging()})}),v=m?.7:1,[{handlerId:f},b]=(0,h.H)({accept:"previewcard",collect:e=>({handlerId:e.getHandlerId()}),hover(e,t){var s;if(!g.current)return;const l=e.index,a=i;if(l===a)return;const r=null===(s=g.current)||void 0===s?void 0:s.getBoundingClientRect(),o=(r.left-r.right)/2,c=t.getClientOffset().x-r.left;l<a&&c<o||l>a&&c<o||(n(l,a),e.index=a)}});return x(b(g)),(0,p.jsxs)("div",{ref:g,style:{position:"relative",borderRadius:2,border:a?"5px solid #4bb543":"1px solid #eaeaea",marginBottom:8,marginRight:i%3!==2?"calc(2%/2)":0,width:"calc(97%/3)",aspectRatio:"1/1",boxSizing:"border-box",cursor:"move",opacity:v,overflow:"hidden"},onClick:()=>{"function"===typeof r&&r(i)},children:[(0,p.jsx)("img",{src:s,alt:"preview",style:{width:"auto",height:"100%",objectFit:"cover"}}),(0,p.jsx)(o.A,{sx:{position:"absolute",zIndex:99,top:4,right:4,backgroundColor:"#f57c00",cursor:"pointer",width:30,height:30},onClick:()=>u(i),children:(0,p.jsx)(c.A,{sx:{color:"white"}})})]})},g=e=>{let{imagesPreview:t,cover:s,setCoverImage:r,setImagesPreview:o,setFilesToUpload:c}=e;const d=(0,l.useCallback)(((e,t)=>{c((s=>n()(s,{$splice:[[e,1],[t,0,s[e]]]}))),o((s=>n()(s,{$splice:[[e,1],[t,0,s[e]]]})))}),[c,o]),h=(0,l.useCallback)((e=>{URL.revokeObjectURL(t[e]),c((t=>n()(t,{$splice:[[e,1]]}))),o((t=>n()(t,{$splice:[[e,1]]})))}),[t,c,o]),g=(0,l.useCallback)(((e,t)=>(0,p.jsx)(u,{index:t,image:e,cover:t===s,setCoverImage:r,movePhoto:d,removeImage:h},t)),[s,d,h,r]);return(0,p.jsx)(i.Q,{backend:a.t2,children:(0,p.jsx)("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",alignContent:"flex-start",justifyContent:"space-between",margin:"10pt",width:"100%",height:"68vh",overflowX:"auto"},children:t.map(((e,t)=>g(e,t)))})})}},7200:(e,t,s)=>{s.r(t),s.d(t,{default:()=>M});var l=s(5043),i=s(344),a=s(4496),r=s(7353),n=s(8911),o=s(1637),c=s(4161),d=s(4010),h=s(141),p=s(4997),u=s(6453),g=s(9448),m=s(3086),x=(s(1843),s(383)),v=s(7811),f=s(2518),b=s(6805),j=s.n(b),w=s(8081),y=s(9596),A=s(2460),C=s(5214),k=s(4889),I=s(1641),D=s(579);const S=e=>{let{isOpen:t,onClose:s}=e;const{openSnackbar:i}=(0,w.A)(),a=()=>{P(),s()},r=new Date,[n,c]=(0,l.useState)(""),[d,h]=(0,l.useState)(r),[p,u]=(0,l.useState)([]),[g,m]=(0,l.useState)(0),[b,S]=(0,l.useState)([]),P=()=>{b.forEach((e=>URL.revokeObjectURL(e))),u([]),S([])},[O,R]=(0,l.useState)(!1);return(0,D.jsx)(k.A,{isOpen:t,onClose:a,height:"85vh",maxWidth:"1300px",loading:O,children:O?(0,D.jsx)(o.A,{}):(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)("div",{style:{display:"flex",width:"95%"},children:[(0,D.jsx)(y.A,{value:d,minDate:new Date("2022/04/03"),maxDate:r,onChange:h}),(0,D.jsx)(v.A,{id:"filled-basic",label:"Album Title",variant:"outlined",sx:{flexGrow:1,ml:4},onChange:e=>c(e.target.value)})]}),(0,D.jsx)(A.A,{imagesPreview:b,setImagesPreview:S,setFilesToUpload:u,cover:g,setCoverImage:m}),(0,D.jsx)("div",{style:{width:"100%",height:"12.75svh"},children:(0,D.jsx)(C.A,{accept:{"image/*":[]},handleChangeFile:e=>{u((t=>[...t,...e])),e.forEach((e=>{S((t=>j()(t,{$push:[URL.createObjectURL(e)]})))}))},multiple:!0})}),(0,D.jsxs)("div",{style:{display:"flex",marginTop:"1.5em",width:"100%"},children:[(0,D.jsx)(f.A,{variant:"outlined",disabled:""===n.trim()||p.length<=0,onClick:async()=>{const e=new FormData;e.append("title",n),e.append("date",d.toISOString()),p.forEach((async t=>{try{const s=t.size>=10485760?await(0,I.A)(t,{maxSizeMB:10,useWebWorker:!0}):t;e.append("images",s)}catch(s){console.error("Image compression failed:",s)}})),e.append("cover",g);try{R(!0),await(0,x.Br)(e),i("success","Uploaded Succesfully!"),a()}catch(t){console.log(t),i("error","Error Occured. Please contact to the administrator.")}finally{R(!1)}},fullWidth:!0,children:"Submit"}),(0,D.jsx)(f.A,{variant:"outlined",onClick:P,disabled:p.length<=0,fullWidth:!0,children:"Clear All"})]})]})})};var P=s(8669),O=s(469),R=s(9228),F=s(5475),E=s(9432);const T=e=>{let{posts:t,cols:s}=e;const l={};let i=null;for(let a of t){const e=new Date(a.Timestamp).getFullYear();e!==i&&(i=e,l[e]=[]),l[e].push(a)}return Object.keys(l).reverse().map((e=>(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(P.A,{cols:s,children:(0,D.jsx)(O.A,{component:"div",children:e})},e),l[e].map((e=>(0,D.jsxs)(P.A,{component:F.N_,to:e.ID,sx:{textDecoration:"none"},children:[(0,D.jsx)("img",{src:`https://imagedelivery.net/ICo2WI8PXO_BVRlWfwzOww/${e.Cover}/thumbnail`,alt:"thumbnail",loading:"lazy"}),(0,D.jsx)(R.A,{title:(0,D.jsx)(a.A,{color:"black",children:e.Title}),subtitle:(0,D.jsx)(a.A,{fontSize:"small",color:"black",children:(0,E.GP)(e.Timestamp,"MMdd")}),position:"below"})]},e.ID)))]})))},z=(0,l.memo)(T);var U=s(8390),W=s(3728),N=s(1119);const $=e=>{const{setIsDatePickerOpen:t,id:s,disabled:l,value:i,sx:a,InputProps:{ref:r}={},inputProps:{"aria-label":n}={}}=e;return(0,D.jsx)(f.A,{variant:"outlined",size:"large",id:s,disabled:l,ref:r,"aria-label":n,sx:{color:"white",borderColor:"white",...a},onClick:()=>null===t||void 0===t?void 0:t((e=>!e)),children:i?(0,E.GP)(i,"yyyy"):"All Year"})},B=e=>{const[t,s]=(0,l.useState)(!1),{disableDate:i,...a}=e;return(0,D.jsx)(U.$,{dateAdapter:N.h,children:(0,D.jsx)(W.l,{views:["year"],slots:{field:$},slotProps:{field:{setIsDatePickerOpen:s},popper:{placement:"bottom"},actionBar:{actions:["clear"]}},...a,open:t,onClose:()=>s(!1)})})},L={backgroundImage:'linear-gradient(rgba(0, 0, 0, 0.40), rgba(0, 0, 0, 0.40)), url("/img/News/Albums/Albums.webp")'},M=()=>{const e=(0,i.A)("(min-width:1200px)");let[t,s]=(0,F.ok)();const{openModal:v}=(0,u.A)(),[f,b]=(0,l.useState)(!1),[j,w]=(0,l.useState)(t.has("year")?new Date(t.get("year"),0,1):null),[y,A]=(0,l.useState)([]),[C,k]=(0,l.useState)(!1),[I,P]=(0,l.useState)(null);(0,l.useEffect)((()=>{A([]),k(!1),console.log(j),s(j?{year:j.getFullYear()}:e=>e.delete("year"))}),[j,s]),(0,l.useEffect)((()=>{null!==I&&O()}),[t.get("year")]);const O=async()=>{if(!f){b(!0);try{const e=await(0,x.Zt)(y,null===j||void 0===j?void 0:j.getFullYear());e.data.length>0?A((t=>[...t,...e.data])):k(!0)}finally{b(!1)}}};(0,l.useEffect)((()=>{y.length%12!==0&&k(!0)}),[y]),(0,l.useEffect)((()=>(window.onpopstate=()=>{P(!0),console.log("test restore"),A(JSON.parse(sessionStorage.getItem("albums")))},P(!1),()=>{window.onpopstate=()=>{}})),[]),(0,l.useEffect)((()=>{null===I||I||O()}),[I]),(0,l.useEffect)((()=>()=>{sessionStorage.setItem("albums",JSON.stringify(y))}));const R=(0,l.useRef)();return(0,l.useEffect)((()=>{R.current&&!C&&y.length>=12&&setTimeout((()=>{try{const e=R.current.clientHeight,t=window.innerHeight-500;console.log("test content",e),console.log("test screen",t),e>100&&e<t&&O()}catch(e){}}),500)}),[y]),(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)("div",{className:"title-wrapper",style:L,children:(0,D.jsxs)("div",{className:"title",children:[(0,D.jsx)(a.A,{variant:"h4",fontWeight:830,sx:{letterSpacing:"0.4em",pl:"0.4em",color:"white"},children:"\uad50\ud68c\uc0ac\uc9c4"}),(0,D.jsx)(B,{sx:{mt:2},value:j,minDate:new Date("2022/04/03"),maxDate:new Date,onChange:w})]})}),(0,D.jsx)("div",{className:"container-wrapper",children:(0,D.jsx)(r.A,{className:"container",sx:{px:{xs:"0 !important",md:"1.5em !important"},py:"0 !important"},children:y.length<=0?(0,D.jsx)(n.A,{alignItems:"center",sx:{py:8},children:f?(0,D.jsx)(o.A,{}):"\uc0ac\uc9c4\uc774 \uc874\uc7ac\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4"}):(0,D.jsx)(p.A,{dataLength:y.length,next:O,hasMore:!C,loader:(0,D.jsx)(n.A,{alignItems:"center",children:(0,D.jsx)(o.A,{})}),scrollThreshold:1,style:{overflowY:"hidden"},children:(0,D.jsx)(c.A,{ref:R,cols:e?4:3,gap:3,children:(0,D.jsx)(z,{posts:y,cols:e?4:3})})})})}),(0,D.jsx)(g.A,{children:(0,D.jsx)(d.A,{variant:"primary",style:{position:"fixed",right:"2vw",bottom:"3vh"},onClick:()=>v(S,{}),children:(0,D.jsx)(h.A,{})})}),C&&(0,D.jsx)(m.A,{})]})}},1843:()=>{}}]);
//# sourceMappingURL=200.6ff8921d.chunk.js.map