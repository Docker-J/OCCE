{"version":3,"file":"static/js/171.ffd9ea10.chunk.js","mappings":"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","sources":["common/AdminComponent.js","components/News/WeeklyUpdate/ButtonDatePicker.js","components/News/WeeklyUpdate/PDFReader.js","components/News/WeeklyUpdate/BulletinUploadModal.js","pages/News/WeeklyUpdate/WeeklyUpdate.js"],"sourcesContent":["import { useSelector } from \"react-redux\";\r\n\r\nconst AdminComponent = (props) => {\r\n  const user = useSelector((state) => state.authToken.admin);\r\n\r\n  return user && props.children;\r\n};\r\n\r\nexport default AdminComponent;\r\n","import PropTypes from \"prop-types\";\r\nimport { useState } from \"react\";\r\nimport { Button } from \"@mui/material\";\r\nimport { DatePicker, LocalizationProvider } from \"@mui/x-date-pickers\";\r\nimport { AdapterDateFns } from \"@mui/x-date-pickers/AdapterDateFns\";\r\nimport { format } from \"date-fns\";\r\n\r\nconst ButtonField = (props) => {\r\n  const {\r\n    setIsDatePickerOpen,\r\n    id,\r\n    disabled,\r\n    value,\r\n    InputProps: { ref } = {},\r\n    inputProps: { \"aria-label\": ariaLabel } = {},\r\n  } = props;\r\n\r\n  return (\r\n    <Button\r\n      variant=\"outlined\"\r\n      size=\"large\"\r\n      id={id}\r\n      disabled={disabled}\r\n      ref={ref}\r\n      aria-label={ariaLabel}\r\n      onClick={() => setIsDatePickerOpen?.((prev) => !prev)}\r\n    >\r\n      {format(value, \"yyyy/MM/dd\")}\r\n    </Button>\r\n  );\r\n};\r\n\r\nButtonField.propTypes = {\r\n  disabled: PropTypes.bool,\r\n  id: PropTypes.string,\r\n  inputProps: PropTypes.shape({\r\n    \"aria-label\": PropTypes.string,\r\n  }),\r\n  InputProps: PropTypes.shape({\r\n    endAdornment: PropTypes.node,\r\n    startAdornment: PropTypes.node,\r\n  }),\r\n  setIsDatePickerOpen: PropTypes.func,\r\n  label: PropTypes.node,\r\n};\r\n\r\nconst ButtonDatePicker = (props) => {\r\n  const [isDatePickerOpen, setIsDatePickerOpen] = useState(false);\r\n\r\n  const notSunday = (date) => {\r\n    const day = date.getDay();\r\n    return day !== 0;\r\n  };\r\n\r\n  return (\r\n    <LocalizationProvider dateAdapter={AdapterDateFns}>\r\n      <DatePicker\r\n        slots={{ field: ButtonField, ...props.slots }}\r\n        slotProps={{\r\n          field: { setIsDatePickerOpen },\r\n          popper: { placement: \"bottom\" },\r\n        }}\r\n        {...props}\r\n        open={isDatePickerOpen}\r\n        onClose={() => setIsDatePickerOpen(false)}\r\n        shouldDisableDate={notSunday}\r\n        disableHighlightToday\r\n      />\r\n    </LocalizationProvider>\r\n  );\r\n};\r\n\r\nexport default ButtonDatePicker;\r\n","import { Button, ButtonGroup, CircularProgress } from \"@mui/material\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { pdfjs, Page, Document } from \"react-pdf\";\r\n\r\nimport \"react-pdf/dist/esm/Page/AnnotationLayer.css\";\r\nimport \"./PDFReader.css\";\r\n\r\n// pdfjs.GlobalWorkerOptions.workerSrc = new URL(\r\n//   \"pdfjs-dist/build/pdf.worker.min.js\",\r\n//   import.meta.url\r\n// ).toString();\r\n\r\npdfjs.GlobalWorkerOptions.workerSrc = `//cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjs.version}/pdf.worker.min.js`;\r\n\r\nfunction PDFReader({ file, documentDimension }) {\r\n  const [numPages, setNumPages] = useState(null);\r\n  const [pageNumber, setPageNumber] = useState(1);\r\n  const [scale, setScale] = useState(1);\r\n\r\n  const add = () => {\r\n    setScale((prev) => {\r\n      return prev + 0.2;\r\n    });\r\n  };\r\n\r\n  const minus = () => {\r\n    if (scale !== 1) {\r\n      setScale((prev) => {\r\n        return prev - 0.2;\r\n      });\r\n    }\r\n  };\r\n\r\n  function onDocumentLoadSuccess({ numPages }) {\r\n    setNumPages(numPages);\r\n  }\r\n\r\n  function changePage(offset) {\r\n    setPageNumber((prevPageNumber) => prevPageNumber + offset);\r\n  }\r\n\r\n  function previousPage() {\r\n    changePage(-1);\r\n  }\r\n\r\n  function nextPage() {\r\n    changePage(1);\r\n  }\r\n\r\n  useEffect(() => {\r\n    setPageNumber(1);\r\n  }, [file]);\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        alignItems: \"center\",\r\n      }}\r\n    >\r\n      <ButtonGroup id=\"scaleButton\" sx={{ my: \"1em\" }}>\r\n        <Button onClick={add} variant=\"outlined\">\r\n          +\r\n        </Button>\r\n        <Button onClick={minus} variant=\"outlined\" disabled={scale <= 1}>\r\n          -\r\n        </Button>\r\n      </ButtonGroup>\r\n\r\n      <Document\r\n        file={file}\r\n        onLoadSuccess={onDocumentLoadSuccess}\r\n        loading={\r\n          <div\r\n            style={{\r\n              height: documentDimension.height,\r\n              width: documentDimension.width,\r\n            }}\r\n          >\r\n            <CircularProgress />\r\n          </div>\r\n        }\r\n      >\r\n        <Page\r\n          renderTextLayer={false}\r\n          className=\"page\"\r\n          scale={scale}\r\n          height={documentDimension.height}\r\n          width={documentDimension.width}\r\n          pageNumber={pageNumber}\r\n          loading={\r\n            <div\r\n              style={{\r\n                height: documentDimension.height,\r\n                width: documentDimension.width,\r\n              }}\r\n            >\r\n              <CircularProgress />\r\n            </div>\r\n          }\r\n        />\r\n      </Document>\r\n\r\n      <p style={{ color: \"black\" }}>\r\n        Page {pageNumber || (numPages ? 1 : \"--\")} of {numPages || \"--\"}\r\n      </p>\r\n\r\n      <ButtonGroup id=\"pageButton\">\r\n        <Button\r\n          variant=\"outlined\"\r\n          disabled={pageNumber <= 1}\r\n          onClick={previousPage}\r\n        >\r\n          Previous\r\n        </Button>\r\n        <Button\r\n          variant=\"outlined\"\r\n          disabled={pageNumber >= numPages}\r\n          onClick={nextPage}\r\n        >\r\n          Next\r\n        </Button>\r\n      </ButtonGroup>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PDFReader;\r\n","import React, { useEffect, useRef, useState } from \"react\";\r\nimport { Box, Button, Modal, Typography } from \"@mui/material\";\r\nimport ButtonDatePicker from \"./ButtonDatePicker\";\r\nimport { useDropzone } from \"react-dropzone\";\r\nimport AddCircleOutlineIcon from \"@mui/icons-material/AddCircleOutline\";\r\nimport { Document, Page } from \"react-pdf\";\r\n\r\nconst style = {\r\n  position: \"absolute\",\r\n  top: \"50%\",\r\n  left: \"50%\",\r\n  transform: \"translate(-50%, -50%)\",\r\n  width: \"80vw\",\r\n  height: \"90vh\",\r\n  maxWidth: \"1300px\",\r\n  bgcolor: \"#ffffff\",\r\n  boxShadow: 24,\r\n  borderRadius: \"0.5em\",\r\n  p: 1,\r\n  py: 3,\r\n  display: \"flex\",\r\n  flexDirection: \"column\",\r\n  alignItems: \"center\",\r\n  justifyContent: \"center\",\r\n};\r\n\r\nconst MIN_DATE = \"2022/04/03\";\r\n\r\nconst BulletinUploadModal = (props) => {\r\n  const [selectedDate, setSelectedDate] = useState();\r\n  const [fileToUpload, setFileToUpload] = useState(null);\r\n\r\n  const test = useRef(null);\r\n  const [height, setHeight] = useState(0);\r\n\r\n  useEffect(() => {\r\n    if (test.current) {\r\n      setHeight(test.current.clientHeight);\r\n    }\r\n  }, [fileToUpload]);\r\n\r\n  console.log(height);\r\n\r\n  const handleClose = () => {\r\n    setFileToUpload(null);\r\n    props.setModalState(false);\r\n  };\r\n\r\n  const nextSunday = () => {\r\n    const today = new Date();\r\n    today.setDate(today.getDate() + ((-1 - today.getDay() + 7) % 7) + 1);\r\n    setSelectedDate(today);\r\n  };\r\n\r\n  const handleChangeFile = (file) => {\r\n    console.log(file);\r\n    setFileToUpload(file[0]);\r\n  };\r\n\r\n  useEffect(() => {\r\n    nextSunday();\r\n  }, []);\r\n\r\n  const { getRootProps, getInputProps } = useDropzone({\r\n    accept: {\r\n      \"application/pdf\": [],\r\n    },\r\n    onDrop: (acceptedFiles) => {\r\n      handleChangeFile(acceptedFiles);\r\n    },\r\n    multiple: false,\r\n  });\r\n\r\n  return (\r\n    <Modal open={props.open} onClose={handleClose}>\r\n      <Box sx={style} bgcolor=\"white\">\r\n        <h2>Choose Date</h2>\r\n\r\n        <ButtonDatePicker\r\n          value={selectedDate}\r\n          minDate={new Date(MIN_DATE)}\r\n          onChange={setSelectedDate}\r\n        />\r\n\r\n        <div ref={test} style={{ height: \"60%\" }}>\r\n          <p>{fileToUpload ? fileToUpload.name : null}</p>\r\n          <Document file={fileToUpload}>\r\n            <Page\r\n              renderTextLayer={false}\r\n              className=\"page\"\r\n              height={height - 80}\r\n              // width={100}\r\n              pageNumber={1}\r\n            />\r\n          </Document>\r\n        </div>\r\n\r\n        <div\r\n          style={{\r\n            width: \"95%\",\r\n            height: \"15%\",\r\n            border: \"1pt dotted #f57c00\",\r\n            borderRadius: \"1em\",\r\n            overflowY: \"auto\",\r\n            marginBottom: \"1em\",\r\n          }}\r\n          {...getRootProps()}\r\n        >\r\n          <input {...getInputProps()} />\r\n          <Box\r\n            sx={{\r\n              position: \"relative\",\r\n              height: \"100%\",\r\n              widht: \"100%\",\r\n            }}\r\n          >\r\n            <div\r\n              style={{\r\n                position: \"absolute\",\r\n                top: \"50%\",\r\n                left: \"50%\",\r\n                transform: \"translate(-50%, -50%)\",\r\n              }}\r\n            >\r\n              <AddCircleOutlineIcon fontSize=\"large\" color=\"primary\" />\r\n              <Typography>Click or Drag File to here</Typography>\r\n            </div>\r\n          </Box>\r\n        </div>\r\n\r\n        <p>\r\n          <Button\r\n            variant=\"outlined\"\r\n            onClick={() => props.onModalUpload(fileToUpload, selectedDate)}\r\n          >\r\n            Upload\r\n          </Button>\r\n          <Button variant=\"outlined\" onClick={handleClose}>\r\n            Close\r\n          </Button>\r\n        </p>\r\n      </Box>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default BulletinUploadModal;\r\n","import React, { useState, useEffect, useCallback } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nimport {\r\n  Alert,\r\n  CircularProgress,\r\n  Fab,\r\n  IconButton,\r\n  Snackbar,\r\n} from \"@mui/material\";\r\nimport ArrowBackIosIcon from \"@mui/icons-material/ArrowBackIos\";\r\nimport ArrowForwardIosIcon from \"@mui/icons-material/ArrowForwardIos\";\r\nimport UploadIcon from \"@mui/icons-material/Upload\";\r\n\r\nimport { isMobile } from \"react-device-detect\";\r\n\r\nimport ButtonDatePicker from \"../../../components/News/WeeklyUpdate/ButtonDatePicker\";\r\nimport PDFReader from \"../../../components/News/WeeklyUpdate/PDFReader\";\r\nimport BulletinUploadModal from \"../../../components/News/WeeklyUpdate/BulletinUploadModal\";\r\n\r\nimport \"./WeeklyUpdate.css\";\r\nimport { useLoaderData, useNavigate, useRevalidator } from \"react-router-dom\";\r\nimport AdminComponent from \"../../../common/AdminComponent\";\r\n\r\nconst WeeklyUpdate = () => {\r\n  const navigate = useNavigate();\r\n  let revalidator = useRevalidator();\r\n\r\n  const { maxDate, queryDate } = useLoaderData();\r\n  const minDate = new Date(\"2022/04/03\");\r\n\r\n  const [bulletin, setBulletin] = useState(null);\r\n  const [selectedDate, setSelectedDate] = useState(queryDate);\r\n  const [modalState, setModalState] = useState(false);\r\n  const [isSuccessSnackBarOpen, setIsSuccessSnackBarOpen] = useState(false);\r\n\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const handleClose = (event, reason) => {\r\n    if (reason === \"clickaway\") {\r\n      return;\r\n    }\r\n\r\n    setIsSuccessSnackBarOpen(false);\r\n  };\r\n\r\n  // Get Bulletin from Firestore\r\n  const loadFile = useCallback(async () => {\r\n    setLoading(true);\r\n    try {\r\n      const result = await axios.get(\"/api/WeeklyUpdate/GetBulletin\", {\r\n        params: {\r\n          date: selectedDate.toLocaleDateString(\"en-CA\").replace(/-/g, \"\"),\r\n        },\r\n      });\r\n\r\n      const byteArray = new Uint8Array(Object.values(result.data));\r\n      const pdf = new Blob([byteArray.buffer], { type: \"application/pdf\" });\r\n\r\n      setBulletin(pdf);\r\n      setLoading(false);\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  }, [selectedDate]);\r\n\r\n  const closeModal = () => {\r\n    setModalState(false);\r\n  };\r\n\r\n  const uploadBulletin = async (file, date) => {\r\n    try {\r\n      const form = new FormData();\r\n      form.append(\"images\", file);\r\n      form.append(\"date\", date.toLocaleDateString(\"en-CA\").replace(/-/g, \"\"));\r\n      const res = await axios.put(\"/api/WeeklyUpdate/PostBulletin/\", form, {\r\n        headers: {\r\n          \"Content-Type\": `multipart/form-data`,\r\n        },\r\n      });\r\n\r\n      console.log(res.data);\r\n      // setMaxDate(new Date(res.data.replace(/-/g, \"/\")));\r\n      setSelectedDate(date);\r\n      revalidator.revalidate(); //get new maxdate\r\n      closeModal();\r\n      setIsSuccessSnackBarOpen(true);\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  const previousBulletin = () => {\r\n    setSelectedDate(\r\n      new Date(\r\n        selectedDate.getFullYear(),\r\n        selectedDate.getMonth(),\r\n        selectedDate.getDate() - 7\r\n      )\r\n    );\r\n  };\r\n\r\n  const nextBulletin = () => {\r\n    setSelectedDate(\r\n      new Date(\r\n        selectedDate.getFullYear(),\r\n        selectedDate.getMonth(),\r\n        selectedDate.getDate() + 7\r\n      )\r\n    );\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (selectedDate != null) {\r\n      loadFile();\r\n      navigate(\r\n        \"/weeklyupdate/\" +\r\n          selectedDate.toLocaleDateString(\"en-CA\").replace(/-/g, \"\")\r\n      );\r\n    }\r\n  }, [selectedDate, loadFile, navigate]);\r\n\r\n  function compareDate(date1, date2) {\r\n    return (\r\n      date1.getFullYear() === date2.getFullYear() &&\r\n      date1.getMonth() === date2.getMonth() &&\r\n      date1.getDate() === date2.getDate()\r\n    );\r\n  }\r\n\r\n  const width = isMobile\r\n    ? document.documentElement.clientWidth\r\n    : window.innerWidth;\r\n  const height = isMobile\r\n    ? document.documentElement.clientHeight\r\n    : window.innerHeight;\r\n\r\n  const [documentDimension, detectHW] = useState({\r\n    width: height / width >= 16 / 10 ? width - 30 : null,\r\n    height: height / width < 16 / 10 ? height : null,\r\n  });\r\n\r\n  const detectSize = () => {\r\n    const width = isMobile\r\n      ? document.documentElement.clientWidth\r\n      : window.innerWidth;\r\n    const height = isMobile\r\n      ? document.documentElement.clientHeight\r\n      : window.innerHeight;\r\n\r\n    detectHW({\r\n      width: height / width >= 16 / 10 ? width - 30 : null,\r\n      height: height / width < 16 / 10 ? height : null,\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    window.addEventListener(\"resize\", detectSize);\r\n\r\n    return () => {\r\n      window.removeEventListener(\"resize\", detectSize);\r\n    };\r\n  }, [documentDimension]);\r\n\r\n  return (\r\n    <>\r\n      <h1>주보</h1>\r\n\r\n      <IconButton\r\n        id=\"previousBulletin\"\r\n        onClick={previousBulletin}\r\n        disabled={compareDate(selectedDate, minDate) || loading}\r\n      >\r\n        <ArrowBackIosIcon />\r\n      </IconButton>\r\n\r\n      <ButtonDatePicker\r\n        value={selectedDate}\r\n        minDate={minDate}\r\n        maxDate={maxDate}\r\n        onChange={setSelectedDate}\r\n      />\r\n\r\n      <IconButton\r\n        id=\"nextBulletin\"\r\n        onClick={nextBulletin}\r\n        disabled={compareDate(selectedDate, maxDate) || loading}\r\n      >\r\n        <ArrowForwardIosIcon />\r\n      </IconButton>\r\n      {loading ? (\r\n        <div>\r\n          <CircularProgress sx={{ mt: 2 }} />\r\n        </div>\r\n      ) : (\r\n        <PDFReader file={bulletin} documentDimension={documentDimension} />\r\n      )}\r\n\r\n      <AdminComponent>\r\n        <Fab\r\n          id=\"uploadBulletinButton\"\r\n          variant=\"extended\"\r\n          onClick={() => setModalState(true)}\r\n        >\r\n          <UploadIcon sx={{ mr: 1 }} />\r\n          Upload\r\n        </Fab>\r\n\r\n        <BulletinUploadModal\r\n          open={modalState}\r\n          onModalUpload={uploadBulletin}\r\n          setModalState={setModalState}\r\n        />\r\n\r\n        <Snackbar\r\n          open={isSuccessSnackBarOpen}\r\n          autoHideDuration={8000}\r\n          onClose={handleClose}\r\n        >\r\n          <Alert severity=\"success\" onClose={handleClose}>\r\n            Uploaded Succesfully!\r\n          </Alert>\r\n        </Snackbar>\r\n      </AdminComponent>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default WeeklyUpdate;\r\n"],"names":["props","useSelector","state","authToken","admin","children","ButtonField","setIsDatePickerOpen","id","disabled","value","InputProps","ref","inputProps","ariaLabel","_jsx","Button","variant","size","onClick","prev","format","isDatePickerOpen","useState","LocalizationProvider","dateAdapter","AdapterDateFns","DatePicker","slots","field","slotProps","popper","placement","open","onClose","shouldDisableDate","date","getDay","disableHighlightToday","pdfjs","concat","_ref","file","documentDimension","numPages","setNumPages","pageNumber","setPageNumber","scale","setScale","changePage","offset","prevPageNumber","useEffect","_jsxs","style","display","flexDirection","alignItems","ButtonGroup","sx","my","add","minus","Document","onLoadSuccess","_ref2","loading","height","width","CircularProgress","Page","renderTextLayer","className","color","position","top","left","transform","maxWidth","bgcolor","boxShadow","borderRadius","p","py","justifyContent","selectedDate","setSelectedDate","fileToUpload","setFileToUpload","test","useRef","setHeight","current","clientHeight","console","log","handleClose","setModalState","nextSunday","today","Date","setDate","getDate","getRootProps","getInputProps","useDropzone","accept","onDrop","acceptedFiles","multiple","Modal","Box","ButtonDatePicker","minDate","onChange","name","border","overflowY","marginBottom","widht","AddCircleOutlineIcon","fontSize","Typography","onModalUpload","WeeklyUpdate","navigate","useNavigate","revalidator","useRevalidator","maxDate","queryDate","useLoaderData","bulletin","setBulletin","modalState","isSuccessSnackBarOpen","setIsSuccessSnackBarOpen","setLoading","event","reason","loadFile","useCallback","async","result","axios","params","toLocaleDateString","replace","byteArray","Uint8Array","Object","values","data","pdf","Blob","buffer","type","err","compareDate","date1","date2","getFullYear","getMonth","isMobile","document","documentElement","clientWidth","window","innerWidth","innerHeight","detectHW","detectSize","addEventListener","removeEventListener","_Fragment","IconButton","previousBulletin","ArrowBackIosIcon","nextBulletin","ArrowForwardIosIcon","mt","PDFReader","AdminComponent","Fab","UploadIcon","mr","BulletinUploadModal","form","FormData","append","res","headers","revalidate","error","Snackbar","autoHideDuration","Alert","severity"],"sourceRoot":""}