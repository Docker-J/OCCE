"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[566],{5566:(t,e,s)=>{s.r(e),s.d(e,{default:()=>Z});var o=s(2791),n=s(3239),a=s(2763),l=s(9877),r=s(2419),i=s(1243),c=s(7888),h=s(3774),p=s(1087),d=s(184);const x=t=>{let{photos:e}=t;return e.map((t=>(0,d.jsxs)(c.Z,{component:p.rU,to:t.id,children:[(0,d.jsx)("img",{src:t.cover,alt:"test",loading:"lazy"}),(0,d.jsx)(h.Z,{title:t.title})]},t.id)))},u=(0,o.memo)(x);var f=s(8447),g=s(4554),m=s(8641),j=s(4518);s(7984);const b=t=>{let{openModal:e,setOpenModal:s}=t;const[n,a]=(0,o.useState)("");return(0,d.jsx)(f.Z,{open:e,onClose:()=>{s(!1)},children:(0,d.jsxs)(g.Z,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"800px",height:"800px",bgcolor:"#ffffff",border:"0.1px solid #f57c00",boxShadow:24,p:2},bgcolor:"white",children:[(0,d.jsx)(m.Z,{type:"url",helperText:"Enter the album URL",onChange:t=>a(t.currentTarget.value)}),(0,d.jsx)(j.Z,{onClick:async function(){await i.Z.post("/api/photos/uploadAlbum",{url:n})},variant:"contained",component:"label",children:"Submit"})]})})};var w=s(4771);const Z=()=>{const[t,e]=(0,o.useState)([]),[s,c]=(0,o.useState)(!1),[h,p]=(0,o.useState)(!0),x=async()=>{console.log("test getPosts");const s=await i.Z.get("/api/photos/getPhotos".concat(0===t.length?"":"?lastVisible=".concat(t.at(-1).id)));e((t=>[...t,...s.data]))};(0,o.useEffect)((()=>{t.length%12!==0&&c(!0)}),[t]);(0,o.useEffect)((()=>(window.onpopstate=()=>{p(!0),console.log("test restore"),e(JSON.parse(sessionStorage.getItem("photos")))},p(!1),()=>{window.onpopstate=()=>{}})),[]),(0,o.useEffect)((()=>{h||x()}),[h]),(0,o.useEffect)((()=>()=>{sessionStorage.setItem("photos",JSON.stringify(t))}));const[f,g]=(0,o.useState)(!1);return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("h1",{children:"\uc0ac\uc9c4"}),(0,d.jsx)("div",{style:{position:"absolute",width:"100%",maxWidth:"1500px",left:"50%",transform:"translateX(-50%)"},children:0!==t.length?(0,d.jsx)(w.Z,{dataLength:t.length,next:x,hasMore:!s,loader:(0,d.jsx)(n.Z,{}),scrollThreshold:.75,style:{overflowY:"hidden"},children:(0,d.jsx)(a.Z,{sx:{mx:"0.5rem"},cols:3,gap:2.5,children:(0,d.jsx)(u,{photos:t})})}):(0,d.jsx)(n.Z,{})}),(0,d.jsx)(l.Z,{variant:"primary",style:{position:"fixed",right:"2vw",bottom:"3vh"},onClick:()=>{g(!0)},children:(0,d.jsx)(r.Z,{})}),(0,d.jsx)(b,{openModal:f,setOpenModal:g})]})}}}]);
//# sourceMappingURL=566.b9784bb9.chunk.js.map