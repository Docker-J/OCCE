"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[522],{9448:(e,t,o)=>{o.d(t,{A:()=>n});var i=o(3003);const n=e=>(0,i.d4)((e=>e.authToken.admin))&&e.children},9596:(e,t,o)=>{o.d(t,{A:()=>p});var i=o(5043),n=o(2518),a=o(8390),r=o(1121),s=o(8627),l=o(7537),c=o(579);const d=e=>{const{setIsDatePickerOpen:t,id:o,disabled:i,value:a,InputProps:{ref:r}={},inputProps:{"aria-label":s}={}}=e;return(0,c.jsx)(n.A,{variant:"outlined",size:"large",id:o,disabled:i,ref:r,"aria-label":s,onClick:()=>null===t||void 0===t?void 0:t((e=>!e)),children:(0,l.GP)(a,"yyyy/MM/dd")})},p=e=>{const[t,o]=(0,i.useState)(!1),{disableDate:n,...l}=e;return(0,c.jsx)(a.$,{dateAdapter:s.h,children:(0,c.jsx)(r.l,{slots:{field:d},slotProps:{field:{setIsDatePickerOpen:o},popper:{placement:"bottom"}},...l,open:t,onClose:()=>o(!1),shouldDisableDate:e=>n&&n(e),disableHighlightToday:!0})})}},5214:(e,t,o)=>{o.d(t,{A:()=>s});var i=o(5865),n=o(4783),a=o(9337),r=o(579);const s=e=>{let{accept:t,handleChangeFile:o,multiple:s}=e;const{getRootProps:l,getInputProps:c}=(0,a.VB)({accept:t,onDrop:e=>{o(e)},multiple:s});return(0,r.jsxs)("div",{style:{width:"100%",height:"100%",border:"1pt dotted #f57c00",borderRadius:"1em",overflowY:"auto"},...l(),children:[(0,r.jsx)("input",{...c()}),(0,r.jsxs)("div",{style:{height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[(0,r.jsx)(n.A,{fontSize:"large",color:"primary"}),(0,r.jsx)(i.A,{children:"Click or Drag File to here"})]})]})}},2460:(e,t,o)=>{o.d(t,{A:()=>m});var i=o(5043),n=o(4223),a=o(9918),r=o(6805),s=o.n(r),l=o(1045),c=o(155),d=o(2734),p=o(5964),u=o(579);const h=e=>{let{id:t,image:o,index:n,cover:a,setCoverImage:r,movePhoto:s,removeImage:h}=e;const m=(0,i.useRef)(null),[{isDragging:g},x]=(0,d.i)({type:"previewcard",item:()=>({id:t,index:n}),collect:e=>({isDragging:e.isDragging()})}),v=g?.7:1,[{handlerId:f},b]=(0,p.H)({accept:"previewcard",collect:e=>({handlerId:e.getHandlerId()}),hover(e,t){var o;if(!m.current)return;const i=e.index,a=n;if(i===a)return;const r=null===(o=m.current)||void 0===o?void 0:o.getBoundingClientRect(),l=(r.left-r.right)/2,c=t.getClientOffset().x-r.left;i<a&&c<l||i>a&&c<l||(s(i,a),e.index=a)}});return x(b(m)),(0,u.jsxs)("div",{ref:m,style:{position:"relative",borderRadius:2,border:a?"5px solid #4bb543":"1px solid #eaeaea",marginBottom:8,marginRight:n%3!==2?"calc(2%/2)":0,width:"calc(97%/3)",aspectRatio:"1/1",boxSizing:"border-box",cursor:"move",opacity:v,overflow:"hidden"},onClick:()=>{"function"===typeof r&&r(n)},children:[(0,u.jsx)("img",{src:o,alt:"preview",style:{width:"auto",height:"100%",objectFit:"cover"}}),(0,u.jsx)(l.A,{sx:{position:"absolute",zIndex:99,top:4,right:4,backgroundColor:"#f57c00",cursor:"pointer",width:30,height:30},onClick:()=>h(n),children:(0,u.jsx)(c.A,{sx:{color:"white"}})})]})},m=e=>{let{imagesPreview:t,cover:o,setCoverImage:r,setImagesPreview:l,setFilesToUpload:c}=e;const d=(0,i.useCallback)(((e,t)=>{c((o=>s()(o,{$splice:[[e,1],[t,0,o[e]]]}))),l((o=>s()(o,{$splice:[[e,1],[t,0,o[e]]]})))}),[c,l]),p=(0,i.useCallback)((e=>{URL.revokeObjectURL(t[e]),c((t=>s()(t,{$splice:[[e,1]]}))),l((t=>s()(t,{$splice:[[e,1]]})))}),[t,c,l]),m=(0,i.useCallback)(((e,t)=>(0,u.jsx)(h,{index:t,image:e,cover:t===o,setCoverImage:r,movePhoto:d,removeImage:p},t)),[o,d,p,r]);return(0,u.jsx)(n.Q,{backend:a.t2,children:(0,u.jsx)("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",alignContent:"flex-start",justifyContent:"space-between",margin:"10pt",width:"100%",height:"68vh",overflowX:"auto"},children:t.map(((e,t)=>m(e,t)))})})}},1522:(e,t,o)=>{o.r(t),o.d(t,{default:()=>se});var i=o(5043),n=o(344),a=o(5865),r=o(8911),s=o(1637),l=o(4161),c=o(4010),d=o(2505),p=o(4997),u=o(6453),h=o(9448),m=o(2326),g=(o(1843),o(6213));var x=o(2037),v=o(2518),f=o(6805),b=o.n(f),A=o(8081),w=o(9596),y=o(2460),j=o(5214),I=o(2660),S=o(579);const k=e=>{let{isOpen:t,onClose:o}=e;const{openSnackbar:n}=(0,A.A)(),a=()=>{C(),o()},r=new Date,[l,c]=(0,i.useState)(""),[d,p]=(0,i.useState)(r),[u,h]=(0,i.useState)([]),[m,f]=(0,i.useState)(0),[k,P]=(0,i.useState)([]),C=()=>{k.forEach((e=>URL.revokeObjectURL(e))),h([]),P([])},[R,D]=(0,i.useState)(!1);return(0,S.jsx)(I.A,{isOpen:t,onClose:a,maxHeight:"85vh",maxWidth:"1300px",children:R?(0,S.jsx)(s.A,{}):(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)("div",{style:{display:"flex",width:"95%"},children:[(0,S.jsx)(w.A,{value:d,minDate:new Date("2022/04/03"),maxDate:r,onChange:p}),(0,S.jsx)(x.A,{id:"filled-basic",label:"Album Title",variant:"outlined",sx:{flexGrow:1,ml:4},onChange:e=>c(e.target.value)})]}),(0,S.jsx)(y.A,{imagesPreview:k,setImagesPreview:P,setFilesToUpload:h,cover:m,setCoverImage:f}),(0,S.jsx)("div",{style:{width:"100%",height:"12.75svh"},children:(0,S.jsx)(j.A,{accept:{"image/*":[]},handleChangeFile:e=>{h((t=>[...t,...e])),e.forEach((e=>{P((t=>b()(t,{$push:[URL.createObjectURL(e)]})))}))},multiple:!0})}),(0,S.jsxs)("div",{style:{display:"flex",marginTop:"1.5em",width:"100%"},children:[(0,S.jsx)(v.A,{variant:"outlined",disabled:""===l.trim()||u.length<=0,onClick:async()=>{const e=new FormData;e.append("title",l),e.append("date",d.toISOString()),u.forEach((t=>{e.append("images",t)})),e.append("cover",m);try{D(!0),await(async e=>{try{await g.A.post("/api/albums",e,{headers:{"Content-Type":"multipart/form-data"}})}catch{throw new Error}})(e),n("success","Uploaded Succesfully!"),a()}catch(t){console.log(t),n("error","Error Occured. Please contact to the administrator.")}finally{D(!1)}},fullWidth:!0,children:"Submit"}),(0,S.jsx)(v.A,{variant:"outlined",onClick:C,disabled:u.length<=0,fullWidth:!0,children:"Clear All"})]})]})})};var P=o(8669),C=o(8587),R=o(8168),D=o(8387),L=o(8606),W=o(4535),O=o(2876),T=o(6803),N=o(7056),B=o(2400);function M(e){return(0,B.Ay)("MuiListSubheader",e)}(0,N.A)("MuiListSubheader",["root","colorPrimary","colorInherit","gutters","inset","sticky"]);const F=["className","color","component","disableGutters","disableSticky","inset"],z=(0,W.Ay)("li",{name:"MuiListSubheader",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,"default"!==o.color&&t["color".concat((0,T.A)(o.color))],!o.disableGutters&&t.gutters,o.inset&&t.inset,!o.disableSticky&&t.sticky]}})((e=>{let{theme:t,ownerState:o}=e;return(0,R.A)({boxSizing:"border-box",lineHeight:"48px",listStyle:"none",color:(t.vars||t).palette.text.secondary,fontFamily:t.typography.fontFamily,fontWeight:t.typography.fontWeightMedium,fontSize:t.typography.pxToRem(14)},"primary"===o.color&&{color:(t.vars||t).palette.primary.main},"inherit"===o.color&&{color:"inherit"},!o.disableGutters&&{paddingLeft:16,paddingRight:16},o.inset&&{paddingLeft:72},!o.disableSticky&&{position:"sticky",top:0,zIndex:1,backgroundColor:(t.vars||t).palette.background.paper})})),E=i.forwardRef((function(e,t){const o=(0,O.A)({props:e,name:"MuiListSubheader"}),{className:i,color:n="default",component:a="li",disableGutters:r=!1,disableSticky:s=!1,inset:l=!1}=o,c=(0,C.A)(o,F),d=(0,R.A)({},o,{color:n,component:a,disableGutters:r,disableSticky:s,inset:l}),p=(e=>{const{classes:t,color:o,disableGutters:i,inset:n,disableSticky:a}=e,r={root:["root","default"!==o&&"color".concat((0,T.A)(o)),!i&&"gutters",n&&"inset",!a&&"sticky"]};return(0,L.A)(r,M,t)})(d);return(0,S.jsx)(z,(0,R.A)({as:a,className:(0,D.A)(p.root,i),ref:t,ownerState:d},c))}));E.muiSkipListHighlight=!0;const G=E;function H(e){return(0,B.Ay)("MuiImageListItemBar",e)}(0,N.A)("MuiImageListItemBar",["root","positionBottom","positionTop","positionBelow","titleWrap","titleWrapBottom","titleWrapTop","titleWrapBelow","titleWrapActionPosLeft","titleWrapActionPosRight","title","subtitle","actionIcon","actionIconActionPosLeft","actionIconActionPosRight"]);const U=["actionIcon","actionPosition","className","subtitle","title","position"],$=(0,W.Ay)("div",{name:"MuiImageListItemBar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,t["position".concat((0,T.A)(o.position))]]}})((e=>{let{theme:t,ownerState:o}=e;return(0,R.A)({position:"absolute",left:0,right:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",fontFamily:t.typography.fontFamily},"bottom"===o.position&&{bottom:0},"top"===o.position&&{top:0},"below"===o.position&&{position:"relative",background:"transparent",alignItems:"normal"})})),Y=(0,W.Ay)("div",{name:"MuiImageListItemBar",slot:"TitleWrap",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.titleWrap,t["titleWrap".concat((0,T.A)(o.position))],o.actionIcon&&t["titleWrapActionPos".concat((0,T.A)(o.actionPosition))]]}})((e=>{let{theme:t,ownerState:o}=e;return(0,R.A)({flexGrow:1,padding:"12px 16px",color:(t.vars||t).palette.common.white,overflow:"hidden"},"below"===o.position&&{padding:"6px 0 12px",color:"inherit"},o.actionIcon&&"left"===o.actionPosition&&{paddingLeft:0},o.actionIcon&&"right"===o.actionPosition&&{paddingRight:0})})),V=(0,W.Ay)("div",{name:"MuiImageListItemBar",slot:"Title",overridesResolver:(e,t)=>t.title})((e=>{let{theme:t}=e;return{fontSize:t.typography.pxToRem(16),lineHeight:"24px",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}})),J=(0,W.Ay)("div",{name:"MuiImageListItemBar",slot:"Subtitle",overridesResolver:(e,t)=>t.subtitle})((e=>{let{theme:t}=e;return{fontSize:t.typography.pxToRem(12),lineHeight:1,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}})),X=(0,W.Ay)("div",{name:"MuiImageListItemBar",slot:"ActionIcon",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.actionIcon,t["actionIconActionPos".concat((0,T.A)(o.actionPosition))]]}})((e=>{let{ownerState:t}=e;return(0,R.A)({},"left"===t.actionPosition&&{order:-1})})),_=i.forwardRef((function(e,t){const o=(0,O.A)({props:e,name:"MuiImageListItemBar"}),{actionIcon:i,actionPosition:n="right",className:a,subtitle:r,title:s,position:l="bottom"}=o,c=(0,C.A)(o,U),d=(0,R.A)({},o,{position:l,actionPosition:n}),p=(e=>{const{classes:t,position:o,actionIcon:i,actionPosition:n}=e,a={root:["root","position".concat((0,T.A)(o))],titleWrap:["titleWrap","titleWrap".concat((0,T.A)(o)),i&&"titleWrapActionPos".concat((0,T.A)(n))],title:["title"],subtitle:["subtitle"],actionIcon:["actionIcon","actionIconActionPos".concat((0,T.A)(n))]};return(0,L.A)(a,H,t)})(d);return(0,S.jsxs)($,(0,R.A)({ownerState:d,className:(0,D.A)(p.root,a),ref:t},c,{children:[(0,S.jsxs)(Y,{ownerState:d,className:p.titleWrap,children:[(0,S.jsx)(V,{className:p.title,children:s}),r?(0,S.jsx)(J,{className:p.subtitle,children:r}):null]}),i?(0,S.jsx)(X,{ownerState:d,className:p.actionIcon,children:i}):null]}))}));var Q=o(5475);const Z=e=>{let{posts:t,cols:o}=e,i={};for(let n=0;n<t.length;n++){let e=new Date(t[n].Timestamp).getFullYear();i[e]||(i[e]=[]),i[e].push(t[n])}return Object.keys(i).map((e=>(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(P.A,{cols:o,children:(0,S.jsx)(G,{component:"div",children:e})},"Subheader"),i[e].map((e=>(0,S.jsxs)(P.A,{component:Q.N_,to:e.ID,sx:{textDecoration:"none"},children:[(0,S.jsx)("img",{src:"https://imagedelivery.net/ICo2WI8PXO_BVRlWfwzOww/".concat(e.Cover,"/thumbnail"),alt:"thumbnail",loading:"lazy"}),(0,S.jsx)(_,{title:(0,S.jsx)(a.A,{color:"black",children:e.Title}),subtitle:(0,S.jsx)(a.A,{fontSize:"small",color:"black",children:"0711"}),position:"below"})]},e.ID)))]})))},q=(0,i.memo)(Z);var K=o(8390),ee=o(1121),te=o(8627),oe=o(7537);const ie=e=>{const{setIsDatePickerOpen:t,id:o,disabled:i,value:n,sx:a,InputProps:{ref:r}={},inputProps:{"aria-label":s}={}}=e;return(0,S.jsx)(v.A,{variant:"outlined",size:"large",id:o,disabled:i,ref:r,"aria-label":s,sx:{color:"white",borderColor:"white",...a},onClick:()=>null===t||void 0===t?void 0:t((e=>!e)),children:n?(0,oe.GP)(n,"yyyy"):"All Year"})},ne=e=>{const[t,o]=(0,i.useState)(!1),{disableDate:n,...a}=e;return(0,S.jsx)(K.$,{dateAdapter:te.h,children:(0,S.jsx)(ee.l,{views:["year"],slots:{field:ie},slotProps:{field:{setIsDatePickerOpen:o},popper:{placement:"bottom"},actionBar:{actions:["clear"]}},...a,open:t,onClose:()=>o(!1)})})};var ae=o(3216);const re={backgroundImage:'linear-gradient(rgba(0, 0, 0, 0.40), rgba(0, 0, 0, 0.40)), url("/img/News/Albums/Albums.jpg")'},se=()=>{const e=(0,n.A)("(min-width:1200px)"),t=(0,ae.Zp)(),{openModal:o}=(0,u.A)(),[x,v]=(0,i.useState)(null),[f,b]=(0,i.useState)([]),[A,w]=(0,i.useState)(!1),[y,j]=(0,i.useState)(!0);(0,i.useEffect)((()=>{t(x?"?year=".concat(x.getFullYear()):"")}),[x]);const I=async()=>{const e=await(async(e,t)=>{try{return await g.A.get("/api/albums/".concat(0===e.length?"":"?lastVisible=".concat(e.at(-1).ID,"&timeStamp=").concat(e.at(-1).Timestamp)))}catch{throw new Error}})(f);e.data.length>0?b((t=>[...t,...e.data])):w(!0)};(0,i.useEffect)((()=>{f.length%12!==0&&w(!0)}),[f]),(0,i.useEffect)((()=>(window.onpopstate=()=>{j(!0),console.log("test restore"),b(JSON.parse(sessionStorage.getItem("albums")))},j(!1),()=>{window.onpopstate=()=>{}})),[]),(0,i.useEffect)((()=>{null===y||y||I()}),[y]),(0,i.useEffect)((()=>()=>{sessionStorage.setItem("albums",JSON.stringify(f))}));const P=(0,i.useRef)();return(0,i.useEffect)((()=>{P.current&&!A&&f.length>=12&&setTimeout((()=>{try{const e=P.current.clientHeight,t=window.innerHeight-500;console.log("test content",e),console.log("test screen",t),e>100&&e<t&&I()}catch(e){}}),500)}),[f]),(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("div",{className:"title-wrapper",style:re,children:(0,S.jsxs)("div",{className:"title",children:[(0,S.jsx)(a.A,{variant:"h4",fontWeight:830,sx:{letterSpacing:"0.4em",pl:"0.4em",color:"white"},children:"\uad50\ud68c\uc0ac\uc9c4"}),(0,S.jsx)(ne,{sx:{mt:2},value:x,minDate:new Date("2022/04/03"),maxDate:new Date,onChange:v})]})}),(0,S.jsx)("div",{className:"container-wrapper",children:(0,S.jsx)("div",{className:"container",children:f.length<=0?(0,S.jsx)(r.A,{alignItems:"center",children:(0,S.jsx)(s.A,{})}):(0,S.jsx)(p.A,{dataLength:f.length,next:I,hasMore:!A,loader:(0,S.jsx)(r.A,{alignItems:"center",children:(0,S.jsx)(s.A,{})}),scrollThreshold:1,style:{overflowY:"hidden"},children:(0,S.jsx)(l.A,{ref:P,cols:e?4:3,gap:2.5,children:(0,S.jsx)(q,{posts:f,cols:e?4:3})})})})}),(0,S.jsx)(h.A,{children:(0,S.jsx)(c.A,{variant:"primary",style:{position:"fixed",right:"2vw",bottom:"3vh"},onClick:()=>o(k,{}),children:(0,S.jsx)(d.A,{})})}),A&&(0,S.jsx)(m.A,{})]})}},1843:()=>{}}]);
//# sourceMappingURL=522.22a3911c.chunk.js.map