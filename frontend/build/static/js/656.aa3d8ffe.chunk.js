/*! For license information please see 656.aa3d8ffe.chunk.js.LICENSE.txt */
(self.webpackChunkblog=self.webpackChunkblog||[]).push([[656],{7977:(t,e,r)=>{var o;self,o=(t,e,r)=>(()=>{"use strict";var o={546:t=>{t.exports=r},949:t=>{t.exports=e},155:e=>{e.exports=t}},n={};function i(t){var e=n[t];if(void 0!==e)return e.exports;var r=n[t]={exports:{}};return o[t](r,r.exports,i),r.exports}i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var r in e)i.o(e,r)&&!i.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var s={};return(()=>{i.r(s),i.d(s,{CKEditor:()=>d,CKEditorContext:()=>u,useMultiRootEditor:()=>j});var t=i(155),e=i.n(t),r=i(949),o=i.n(r);const n=new Array(256).fill("").map(((t,e)=>("0"+e.toString(16)).slice(-2)));var a=i(546);const c=e().createContext("contextWatchdog");class u extends e().Component{constructor(t,e){super(t,e),this.contextWatchdog=null,this.props.isLayoutReady&&this._initializeContextWatchdog(this.props.config)}shouldComponentUpdate(t){return this._shouldComponentUpdate(t)}async _shouldComponentUpdate(t){return t.id!==this.props.id&&(this.contextWatchdog&&await this.contextWatchdog.destroy(),await this._initializeContextWatchdog(t.config)),t.isLayoutReady&&!this.contextWatchdog?(await this._initializeContextWatchdog(t.config),!0):this.props.children!==t.children}render(){return e().createElement(c.Provider,{value:this.contextWatchdog},this.props.children)}componentWillUnmount(){this._destroyContext()}async _initializeContextWatchdog(t){this.contextWatchdog=new a.ContextWatchdog(this.props.context,this.props.watchdogConfig),this.contextWatchdog.on("error",((t,e)=>{this.props.onError(e.error,{phase:"runtime",willContextRestart:e.causesRestart})})),this.contextWatchdog.on("stateChange",(()=>{"ready"===this.contextWatchdog.state&&this.props.onReady&&this.props.onReady(this.contextWatchdog.context)})),await this.contextWatchdog.create(t).catch((t=>{this.props.onError(t,{phase:"initialization",willContextRestart:!1})}))}async _destroyContext(){this.contextWatchdog&&(await this.contextWatchdog.destroy(),this.contextWatchdog=null)}}u.defaultProps={isLayoutReady:!0,onError:(t,e)=>console.error(t,e)},u.propTypes={id:o().string,isLayoutReady:o().bool,context:o().func,watchdogConfig:o().object,config:o().object,onReady:o().func,onError:o().func};class l{constructor(t,e){this._releaseLock=null,this._value=null,this._afterMountCallbacks=[],this._state={destroyedBeforeInitialization:!1,mountingInProgress:null},this.release=function(t){let e=null;return function(){return e||(e={current:t(...arguments)}),e.current}}((()=>{const{_releaseLock:t,_state:e,_element:r,_lifecycle:o}=this;e.mountingInProgress?e.mountingInProgress.then((()=>o.unmount({element:r,mountResult:this.value}))).catch((t=>{console.error("Semaphore unmounting error:",t)})).then(t.resolve).then((()=>{this._value=null})):(e.destroyedBeforeInitialization=!0,t.resolve())})),this._element=t,this._lifecycle=e,this._lock()}get value(){return this._value}unsafeSetValue(t){this._value=t,this._afterMountCallbacks.forEach((e=>e(t))),this._afterMountCallbacks=[]}runAfterMount(t){const{_value:e,_afterMountCallbacks:r}=this;e?t(e):r.push(t)}_lock(){const{_semaphores:t}=l,{_state:e,_element:r,_lifecycle:o}=this,n=t.get(r)||Promise.resolve(null),i=function(){const t={resolve:null,promise:null};return t.promise=new Promise((e=>{t.resolve=e})),t}();this._releaseLock=i;const s=n.then((()=>e.destroyedBeforeInitialization?Promise.resolve(void 0):(e.mountingInProgress=o.mount().then((t=>(t&&this.unsafeSetValue(t),t))),e.mountingInProgress))).then((async t=>{t&&o.afterMount&&await o.afterMount({element:r,mountResult:t})})).then((()=>i.promise)).catch((t=>{console.error("Semaphore mounting error:",t)})).then((()=>{t.get(r)===s&&t.delete(r)}));t.set(r,s)}}l._semaphores=new Map;const h="Lock from React integration (@ckeditor/ckeditor5-react)";class d extends e().Component{constructor(t){super(t),this.domContainer=e().createRef(),this.editorSemaphore=null;const{CKEDITOR_VERSION:r}=window;if(r){const[t]=r.split(".").map(Number);t<37&&console.warn("The <CKEditor> component requires using CKEditor 5 in version 37 or higher.")}else console.warn('Cannot find the "CKEDITOR_VERSION" in the "window" scope.')}get _semaphoreValue(){const{editorSemaphore:t}=this;return t?t.value:null}get watchdog(){const{_semaphoreValue:t}=this;return t?t.watchdog:null}get editor(){const{_semaphoreValue:t}=this;return t?t.instance:null}shouldComponentUpdate(t){const{props:e,editorSemaphore:r}=this;return t.id!==e.id||t.disableWatchdog!==e.disableWatchdog||(r&&(r.runAfterMount((r=>{let{instance:o}=r;this._shouldUpdateEditorData(e,t,o)&&o.data.set(t.data)})),"disabled"in t&&r.runAfterMount((e=>{let{instance:r}=e;t.disabled?r.enableReadOnlyMode(h):r.disableReadOnlyMode(h)}))),!1)}componentDidMount(){this._initLifeCycleSemaphore()}componentDidUpdate(){this._initLifeCycleSemaphore()}componentWillUnmount(){this._unlockLifeCycleSemaphore()}_unlockLifeCycleSemaphore(){this.editorSemaphore&&(this.editorSemaphore.release(),this.editorSemaphore=null)}_initLifeCycleSemaphore(){this._unlockLifeCycleSemaphore(),this.editorSemaphore=new l(this.domContainer.current,{mount:async()=>this._initializeEditor(),afterMount:t=>{let{mountResult:e}=t;const{onReady:r}=this.props;r&&null!==this.domContainer.current&&r(e.instance)},unmount:async t=>{let{element:e,mountResult:r}=t;const{onAfterDestroy:o}=this.props;try{await this._destroyEditor(r),e.innerHTML=""}finally{o&&o(r.instance)}}})}render(){return e().createElement("div",{ref:this.domContainer})}async _initializeEditor(){if(this.props.disableWatchdog)return{instance:await this._createEditor(this.domContainer.current,this._getConfig()),watchdog:null};const t=(()=>this.context instanceof a.ContextWatchdog?new f(this.context):new d._EditorWatchdog(this.props.editor,this.props.watchdogConfig))(),e={current:0};return t.setCreator((async(r,o)=>{const{editorSemaphore:n}=this,{onAfterDestroy:i}=this.props;e.current>0&&i&&n&&n.value&&n.value.instance&&i(n.value.instance);const s=await this._createEditor(r,o);return e.current>0&&(n.unsafeSetValue({instance:s,watchdog:t}),setTimeout((()=>{this.props.onReady&&this.props.onReady(t.editor)}))),e.current++,s})),t.on("error",((t,e)=>{let{error:r,causesRestart:o}=e;(this.props.onError||console.error)(r,{phase:"runtime",willEditorRestart:o})})),await t.create(this.domContainer.current,this._getConfig()).catch((t=>{(this.props.onError||console.error)(t,{phase:"initialization",willEditorRestart:!1})})),{watchdog:t,instance:t.editor}}_createEditor(t,e){return this.props.editor.create(t,e).then((t=>{"disabled"in this.props&&this.props.disabled&&t.enableReadOnlyMode(h);const e=t.model.document,r=t.editing.view.document;return e.on("change:data",(e=>{this.props.onChange&&this.props.onChange(e,t)})),r.on("focus",(e=>{this.props.onFocus&&this.props.onFocus(e,t)})),r.on("blur",(e=>{this.props.onBlur&&this.props.onBlur(e,t)})),t}))}async _destroyEditor(t){const{watchdog:e,instance:r}=t;return new Promise(((t,o)=>{setTimeout((async()=>{try{if(e)return await e.destroy(),t();if(r)return await r.destroy(),t();t()}catch(t){console.error(t),o(t)}}))}))}_shouldUpdateEditorData(t,e,r){return t.data!==e.data&&r.data.get()!==e.data}_getConfig(){const t=this.props.config||{};return this.props.data&&t.initialData&&console.warn("Editor data should be provided either using `config.initialData` or `content` property. The config value takes precedence over `content` property and will be used when both are specified."),{...t,initialData:t.initialData||this.props.data||""}}}d.contextType=c,d.propTypes={editor:o().func.isRequired,data:o().string,config:o().object,disableWatchdog:o().bool,watchdogConfig:o().object,onChange:o().func,onReady:o().func,onFocus:o().func,onBlur:o().func,onError:o().func,disabled:o().bool,id:o().any},d._EditorWatchdog=a.EditorWatchdog;class f{constructor(t){this._contextWatchdog=t,this._id=function(){const t=4294967296*Math.random()>>>0,e=4294967296*Math.random()>>>0,r=4294967296*Math.random()>>>0,o=4294967296*Math.random()>>>0;return"e"+n[255&t]+n[t>>8&255]+n[t>>16&255]+n[t>>24&255]+n[255&e]+n[e>>8&255]+n[e>>16&255]+n[e>>24&255]+n[255&r]+n[r>>8&255]+n[r>>16&255]+n[r>>24&255]+n[255&o]+n[o>>8&255]+n[o>>16&255]+n[o>>24&255]}()}setCreator(t){this._creator=t}create(t,e){return this._contextWatchdog.add({sourceElementOrData:t,config:e,creator:this._creator,id:this._id,type:"editor"})}on(t,e){this._contextWatchdog.on("itemError",((t,r)=>{let{itemId:o,error:n}=r;o===this._id&&e(null,{error:n,causesRestart:void 0})}))}destroy(){return"ready"===this._contextWatchdog.state?this._contextWatchdog.remove(this._id):Promise.resolve()}get editor(){return this._contextWatchdog.getItem(this._id)}}function p(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return t=>{e.forEach((e=>{"function"==typeof e?e(t):null!=e&&(e.current=t)}))}}function g(t,e){for(const r of Object.getOwnPropertyNames(e))delete e[r];for(const[r,o]of Object.entries(t))o!==e&&"prototype"!==r&&"__proto__"!==r&&(e[r]=o);return e}const m=e=>{const r=(0,t.useRef)();return r.current=e,(0,t.useCallback)((function(){return r.current(...arguments)}),[])};function _(t,e){return e.length=0,e.push(...t),e}const y=(e,r,o)=>{((e,r)=>{const o=(0,t.useRef)(null);((t,e)=>{if(t===e)return!0;if(!t||!e)return!1;for(let r=0;r<t.length;++r)if(t[r]!==e[r])return!1;return!0})(o.current,r)||(o.current=[...r],e())})((()=>{e&&e.runAfterMount(r)}),[e,...o])},b="Lock from React integration (@ckeditor/ckeditor5-react)",v=(0,t.memo)((0,t.forwardRef)(((r,o)=>{let{id:n,semaphore:i,rootName:s}=r;const a=(0,t.useRef)(null);return(0,t.useEffect)((()=>{let t,e;return i.runAfterMount((r=>{let{instance:o}=r;a.current&&(e=o,t=o.ui.view.createEditable(s,a.current),o.ui.addEditable(t),o.editing.view.forceRender())})),()=>{t&&a.current&&e&&"destroyed"!==e.state&&e.ui.removeEditable(t)}}),[i.revision]),e().createElement("div",{key:i.revision,id:n,ref:p(o,a)})})));v.displayName="EditorEditable";const w=(0,t.forwardRef)(((r,o)=>{let{editor:n}=r;const i=(0,t.useRef)(null);return(0,t.useEffect)((()=>{const t=i.current;if(!n||!t)return;const e=n.ui.view.toolbar.element;return t&&t.appendChild(e),()=>{t&&t.removeChild(e)}}),[n&&n.id]),e().createElement("div",{ref:p(i,o)})}));w.displayName="EditorToolbarWrapper";const j=r=>{const o=(0,t.useRef)(r.semaphoreElement||null),n=(()=>{const e=(0,t.useRef)(null),[r,o]=(0,t.useState)((()=>Date.now())),n=()=>{o(Date.now())},i=function(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e.current&&(e.current.release(),e.current=null),t&&o(Date.now())},s=t=>{e.current&&e.current.runAfterMount(t)};return{get current(){return e.current},revision:r,createAttributeRef:t=>({get current(){return e.current&&e.current.value?e.current.value[t]:null}}),unsafeSetValue:t=>{var r;null===(r=e.current)||void 0===r||r.unsafeSetValue(t),n()},release:i,replace:t=>{i(!1),e.current=t(),n(),s(n)},runAfterMount:s}})(),i={watchdog:n.createAttributeRef("watchdog"),instance:n.createAttributeRef("instance")},s=(0,t.useContext)(c),[u,h]=(0,t.useState)((()=>Object.keys(r.data))),[d,p]=(0,t.useState)({...r.data}),[j,E]=(0,t.useState)({...r.rootsAttributes}),x=(0,t.useRef)(!0);(0,t.useEffect)((()=>{const t=o.current;if(t&&!1!==r.isLayoutReady)return n.replace((()=>new l(t,{mount:D,afterMount:t=>{let{mountResult:e}=t;const{onReady:n}=r;n&&null!==o.current&&n(e.instance)},unmount:async t=>{let{element:e,mountResult:o}=t;const{onAfterDestroy:n}=r;try{await P(o),e.innerHTML=""}finally{n&&n(o.instance)}}}))),()=>{n.release(!1)}}),[r.id,r.isLayoutReady]);const A=()=>{const t=r.config||{};return r.data&&t.initialData&&console.warn("Editor data should be provided either using `config.initialData` or `data` property. The config value takes precedence over `data` property and will be used when both are specified."),{...t,rootsAttributes:j}},C=m(((t,e)=>{const o=t.model.document;if(!r.disableTwoWayDataBinding){const e={},r={};o.differ.getChanges().forEach((r=>{let o;if(o="insert"==r.type||"remove"==r.type?r.position.root:r.range.root,!o.isAttached())return;const{rootName:n}=o;e[n]=t.getData({rootName:n})})),o.differ.getChangedRoots().forEach((o=>{if(o.state)return void(void 0!==e[o.name]&&delete e[o.name]);const n=o.name;r[n]=t.getRootAttributes(n)})),Object.keys(e).length&&p((t=>({...t,...e}))),Object.keys(r).length&&E((t=>({...t,...r})))}r.onChange&&r.onChange(e,t)})),O=m(((t,e,o)=>{const n=o.rootName;r.disableTwoWayDataBinding||(p((e=>({...e,[n]:t.getData({rootName:n})}))),E((e=>({...e,[n]:t.getRootAttributes(n)})))),h((t=>{return e=[...t,o.rootName],Array.from(new Set(e));var e}))})),S=m(((t,e,o)=>{const n=o.rootName;r.disableTwoWayDataBinding||(p((t=>{const{[n]:e,...r}=t;return{...r}})),E((t=>{const{[n]:e,...r}=t;return{...r}}))),h((t=>t.filter((t=>t!==n))))})),R=m(((t,e)=>(g({...r.rootsAttributes},j),g({...r.data},d),_(Object.keys(r.data),u),r.editor.create(t,e).then((t=>{const e=t.getFullData();g({...e},d),g({...t.getRootsAttributes()},j),_(Object.keys(e),u),r.disabled&&t.enableReadOnlyMode(b);const o=t.model.document,n=t.editing.view.document;return o.on("change:data",(e=>C(t,e))),t.on("addRoot",((e,r)=>O(t,e,r))),t.on("detachRoot",((e,r)=>S(t,e,r))),n.on("focus",(e=>{r.onFocus&&r.onFocus(e,t)})),n.on("blur",(e=>{r.onBlur&&r.onBlur(e,t)})),t}))))),P=t=>{const{watchdog:e,instance:r}=t;return new Promise(((t,o)=>{setTimeout((async()=>{try{if(e)return await e.destroy(),t();if(r)return await r.destroy(),t();t()}catch(t){console.error(t),o(t)}}))}))},D=async()=>{if(r.disableWatchdog)return{instance:await R(r.data,A()),watchdog:null};const t=s instanceof a.ContextWatchdog?new f(s):new a.EditorWatchdog(r.editor,r.watchdogConfig),e={current:0};return t.setCreator((async(o,s)=>{const{onAfterDestroy:a}=r;e.current>0&&a&&i.instance.current&&a(i.instance.current);const c=await R(o,s);return e.current>0&&(n.unsafeSetValue({instance:c,watchdog:t}),setTimeout((()=>{r.onReady&&r.onReady(t.editor)}))),e.current++,c})),t.on("error",((t,e)=>{let{error:o,causesRestart:n}=e;(r.onError||console.error)(o,{phase:"runtime",willEditorRestart:n})})),await t.create(d,A()).catch((t=>{throw(r.onError||console.error)(t,{phase:"initialization",willEditorRestart:!1}),t})),{watchdog:t,instance:t.editor}},k=(0,t.useCallback)((t=>{n.runAfterMount((()=>{x.current=!0,p(t)}))}),[p]),W=(0,t.useCallback)((t=>{n.runAfterMount((()=>{x.current=!0,E(t)}))}),[E]),T=e().createElement(w,{ref:o,editor:i.instance.current});y(n.current,(t=>{let{instance:e}=t;r.disabled?e.enableReadOnlyMode(b):e.disableReadOnlyMode(b)}),[r.disabled]),y(n.current,(t=>{let{instance:e}=t;if(x.current){x.current=!1;const t=Object.keys(d),r=Object.keys(j);if(!t.every((t=>r.includes(t))))throw console.error("`data` and `attributes` objects must have the same keys (roots)."),new Error("`data` and `attributes` objects must have the same keys (roots).");const o=e.getFullData(),n=e.getRootsAttributes(),{addedKeys:i,removedKeys:s}=((t,e)=>{const r=Object.keys(t),o=Object.keys(e);return{addedKeys:o.filter((t=>!r.includes(t))),removedKeys:r.filter((t=>!o.includes(t)))}})(o,d||{}),a=t.some((t=>void 0!==o[t]&&JSON.stringify(o[t])!==JSON.stringify(d[t]))),c=r.filter((t=>JSON.stringify(n[t])!==JSON.stringify(j[t]))),u=t=>{t.forEach((t=>{e.addRoot(t,{data:d[t]||"",attributes:(null==j?void 0:j[t])||{},isUndoable:!0})}))},l=t=>{t.forEach((t=>{e.detachRoot(t,!0)}))},h=()=>{e.data.set(d,{suppressErrorInCollaboration:!0})},f=(t,r)=>{r.forEach((r=>{Object.keys(j[r]).forEach((t=>{e.registerRootAttribute(t)})),t.clearAttributes(e.model.document.getRoot(r)),t.setAttributes(j[r],e.model.document.getRoot(r))}))};setTimeout((()=>{e.model.change((t=>{u(i),l(s),a&&h(),c.length&&f(t,c)}))}))}}),[d,j]);const N=u.map((t=>e().createElement(v,{key:t,id:t,rootName:t,semaphore:n})));return{editor:i.instance.current,editableElements:N,toolbarElement:T,data:d,setData:k,attributes:j,setAttributes:W}}})(),s})(),t.exports=o(r(5043),r(5173),r(9935))},4977:(t,e,r)=>{"use strict";var o=r(4994);e.A=void 0;var n=o(r(39)),i=r(579);e.A=(0,n.default)((0,i.jsx)("path",{fillRule:"evenodd",d:"M16 9V4h1c.55 0 1-.45 1-1s-.45-1-1-1H7c-.55 0-1 .45-1 1s.45 1 1 1h1v5c0 1.66-1.34 3-3 3v2h5.97v7l1 1 1-1v-7H19v-2c-1.66 0-3-1.34-3-3"}),"PushPin")},9336:(t,e,r)=>{"use strict";r.d(e,{A:()=>_});var o=r(8587),n=r(8168),i=r(5043),s=r(8387),a=r(8606),c=r(7266),u=r(4535),l=r(2876),h=r(5658),d=r(579);const f=["absolute","children","className","component","flexItem","light","orientation","role","textAlign","variant"],p=(0,u.Ay)("div",{name:"MuiDivider",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:r}=t;return[e.root,r.absolute&&e.absolute,e[r.variant],r.light&&e.light,"vertical"===r.orientation&&e.vertical,r.flexItem&&e.flexItem,r.children&&e.withChildren,r.children&&"vertical"===r.orientation&&e.withChildrenVertical,"right"===r.textAlign&&"vertical"!==r.orientation&&e.textAlignRight,"left"===r.textAlign&&"vertical"!==r.orientation&&e.textAlignLeft]}})((t=>{let{theme:e,ownerState:r}=t;return(0,n.A)({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(e.vars||e).palette.divider,borderBottomWidth:"thin"},r.absolute&&{position:"absolute",bottom:0,left:0,width:"100%"},r.light&&{borderColor:e.vars?"rgba(".concat(e.vars.palette.dividerChannel," / 0.08)"):(0,c.X4)(e.palette.divider,.08)},"inset"===r.variant&&{marginLeft:72},"middle"===r.variant&&"horizontal"===r.orientation&&{marginLeft:e.spacing(2),marginRight:e.spacing(2)},"middle"===r.variant&&"vertical"===r.orientation&&{marginTop:e.spacing(1),marginBottom:e.spacing(1)},"vertical"===r.orientation&&{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"},r.flexItem&&{alignSelf:"stretch",height:"auto"})}),(t=>{let{ownerState:e}=t;return(0,n.A)({},e.children&&{display:"flex",whiteSpace:"nowrap",textAlign:"center",border:0,"&::before, &::after":{content:'""',alignSelf:"center"}})}),(t=>{let{theme:e,ownerState:r}=t;return(0,n.A)({},r.children&&"vertical"!==r.orientation&&{"&::before, &::after":{width:"100%",borderTop:"thin solid ".concat((e.vars||e).palette.divider)}})}),(t=>{let{theme:e,ownerState:r}=t;return(0,n.A)({},r.children&&"vertical"===r.orientation&&{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:"thin solid ".concat((e.vars||e).palette.divider)}})}),(t=>{let{ownerState:e}=t;return(0,n.A)({},"right"===e.textAlign&&"vertical"!==e.orientation&&{"&::before":{width:"90%"},"&::after":{width:"10%"}},"left"===e.textAlign&&"vertical"!==e.orientation&&{"&::before":{width:"10%"},"&::after":{width:"90%"}})})),g=(0,u.Ay)("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(t,e)=>{const{ownerState:r}=t;return[e.wrapper,"vertical"===r.orientation&&e.wrapperVertical]}})((t=>{let{theme:e,ownerState:r}=t;return(0,n.A)({display:"inline-block",paddingLeft:"calc(".concat(e.spacing(1)," * 1.2)"),paddingRight:"calc(".concat(e.spacing(1)," * 1.2)")},"vertical"===r.orientation&&{paddingTop:"calc(".concat(e.spacing(1)," * 1.2)"),paddingBottom:"calc(".concat(e.spacing(1)," * 1.2)")})})),m=i.forwardRef((function(t,e){const r=(0,l.A)({props:t,name:"MuiDivider"}),{absolute:i=!1,children:c,className:u,component:m=(c?"div":"hr"),flexItem:_=!1,light:y=!1,orientation:b="horizontal",role:v=("hr"!==m?"separator":void 0),textAlign:w="center",variant:j="fullWidth"}=r,E=(0,o.A)(r,f),x=(0,n.A)({},r,{absolute:i,component:m,flexItem:_,light:y,orientation:b,role:v,textAlign:w,variant:j}),A=(t=>{const{absolute:e,children:r,classes:o,flexItem:n,light:i,orientation:s,textAlign:c,variant:u}=t,l={root:["root",e&&"absolute",u,i&&"light","vertical"===s&&"vertical",n&&"flexItem",r&&"withChildren",r&&"vertical"===s&&"withChildrenVertical","right"===c&&"vertical"!==s&&"textAlignRight","left"===c&&"vertical"!==s&&"textAlignLeft"],wrapper:["wrapper","vertical"===s&&"wrapperVertical"]};return(0,a.A)(l,h.K,o)})(x);return(0,d.jsx)(p,(0,n.A)({as:m,className:(0,s.A)(A.root,u),role:v,ref:e,ownerState:x},E,{children:c?(0,d.jsx)(g,{className:A.wrapper,ownerState:x,children:c}):null}))}));m.muiSkipListHighlight=!0;const _=m},9935:(t,e,r)=>{"use strict";r.r(e),r.d(e,{ContextWatchdog:()=>Jr,EditorWatchdog:()=>Br,Watchdog:()=>o});class o{constructor(t){if(this.crashes=[],this.state="initializing",this._now=Date.now,this.crashes=[],this._crashNumberLimit="number"===typeof t.crashNumberLimit?t.crashNumberLimit:3,this._minimumNonErrorTimePeriod="number"===typeof t.minimumNonErrorTimePeriod?t.minimumNonErrorTimePeriod:5e3,this._boundErrorHandler=t=>{const e="error"in t?t.error:t.reason;e instanceof Error&&this._handleError(e,t)},this._listeners={},!this._restart)throw new Error("The Watchdog class was split into the abstract `Watchdog` class and the `EditorWatchdog` class. Please, use `EditorWatchdog` if you have used the `Watchdog` class previously.")}destroy(){this._stopErrorHandling(),this._listeners={}}on(t,e){this._listeners[t]||(this._listeners[t]=[]),this._listeners[t].push(e)}off(t,e){this._listeners[t]=this._listeners[t].filter((t=>t!==e))}_fire(t){const e=this._listeners[t]||[];for(var r=arguments.length,o=new Array(r>1?r-1:0),n=1;n<r;n++)o[n-1]=arguments[n];for(const i of e)i.apply(this,[null,...o])}_startErrorHandling(){window.addEventListener("error",this._boundErrorHandler),window.addEventListener("unhandledrejection",this._boundErrorHandler)}_stopErrorHandling(){window.removeEventListener("error",this._boundErrorHandler),window.removeEventListener("unhandledrejection",this._boundErrorHandler)}_handleError(t,e){if(this._shouldReactToError(t)){this.crashes.push({message:t.message,stack:t.stack,filename:e instanceof ErrorEvent?e.filename:void 0,lineno:e instanceof ErrorEvent?e.lineno:void 0,colno:e instanceof ErrorEvent?e.colno:void 0,date:this._now()});const r=this._shouldRestart();this.state="crashed",this._fire("stateChange"),this._fire("error",{error:t,causesRestart:r}),r?this._restart():(this.state="crashedPermanently",this._fire("stateChange"))}}_shouldReactToError(t){return t.is&&t.is("CKEditorError")&&void 0!==t.context&&null!==t.context&&"ready"===this.state&&this._isErrorComingFromThisItem(t)}_shouldRestart(){if(this.crashes.length<=this._crashNumberLimit)return!0;return(this.crashes[this.crashes.length-1].date-this.crashes[this.crashes.length-1-this._crashNumberLimit].date)/this._crashNumberLimit>this._minimumNonErrorTimePeriod}}function n(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set;const r=[t],o=new Set;let n=0;for(;r.length>n;){const t=r[n++];if(!o.has(t)&&i(t)&&!e.has(t))if(o.add(t),Symbol.iterator in t)try{for(const e of t)r.push(e)}catch(s){}else for(const e in t)"defaultValue"!==e&&r.push(t[e])}return o}function i(t){const e=Object.prototype.toString.call(t),r=typeof t;return!("number"===r||"boolean"===r||"string"===r||"symbol"===r||"function"===r||"[object Date]"===e||"[object RegExp]"===e||"[object Module]"===e||void 0===t||null===t||t._watchdogExcluded||t instanceof EventTarget||t instanceof Event)}function s(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set;if(t===e&&("object"===typeof(o=t)&&null!==o))return!0;var o;const i=n(t,r),s=n(e,r);for(const n of i)if(s.has(n))return!0;return!1}const a=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)};const c="object"==typeof global&&global&&global.Object===Object&&global;var u="object"==typeof self&&self&&self.Object===Object&&self;const l=c||u||Function("return this")();const h=function(){return l.Date.now()};var d=/\s/;const f=function(t){for(var e=t.length;e--&&d.test(t.charAt(e)););return e};var p=/^\s+/;const g=function(t){return t?t.slice(0,f(t)+1).replace(p,""):t};const m=l.Symbol;var _=Object.prototype,y=_.hasOwnProperty,b=_.toString,v=m?m.toStringTag:void 0;const w=function(t){var e=y.call(t,v),r=t[v];try{t[v]=void 0;var o=!0}catch(i){}var n=b.call(t);return o&&(e?t[v]=r:delete t[v]),n};var j=Object.prototype.toString;const E=function(t){return j.call(t)};var x=m?m.toStringTag:void 0;const A=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":x&&x in Object(t)?w(t):E(t)};const C=function(t){return null!=t&&"object"==typeof t};const O=function(t){return"symbol"==typeof t||C(t)&&"[object Symbol]"==A(t)};var S=/^[-+]0x[0-9a-f]+$/i,R=/^0b[01]+$/i,P=/^0o[0-7]+$/i,D=parseInt;const k=function(t){if("number"==typeof t)return t;if(O(t))return NaN;if(a(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=a(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=g(t);var r=R.test(t);return r||P.test(t)?D(t.slice(2),r?2:8):S.test(t)?NaN:+t};var W=Math.max,T=Math.min;const N=function(t,e,r){var o,n,i,s,c,u,l=0,d=!1,f=!1,p=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function g(e){var r=o,i=n;return o=n=void 0,l=e,s=t.apply(i,r)}function m(t){var r=t-u;return void 0===u||r>=e||r<0||f&&t-l>=i}function _(){var t=h();if(m(t))return y(t);c=setTimeout(_,function(t){var r=e-(t-u);return f?T(r,i-(t-l)):r}(t))}function y(t){return c=void 0,p&&o?g(t):(o=n=void 0,s)}function b(){var t=h(),r=m(t);if(o=arguments,n=this,u=t,r){if(void 0===c)return function(t){return l=t,c=setTimeout(_,e),d?g(t):s}(u);if(f)return clearTimeout(c),c=setTimeout(_,e),g(u)}return void 0===c&&(c=setTimeout(_,e)),s}return e=k(e)||0,a(r)&&(d=!!r.leading,i=(f="maxWait"in r)?W(k(r.maxWait)||0,e):i,p="trailing"in r?!!r.trailing:p),b.cancel=function(){void 0!==c&&clearTimeout(c),l=0,o=u=n=c=void 0},b.flush=function(){return void 0===c?s:y(h())},b};const I=function(t,e,r){var o=!0,n=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return a(r)&&(o="leading"in r?!!r.leading:o,n="trailing"in r?!!r.trailing:n),N(t,e,{leading:o,maxWait:e,trailing:n})};const M=function(t,e){return function(r){return t(e(r))}};const L=M(Object.getPrototypeOf,Object);var z=Function.prototype,U=Object.prototype,F=z.toString,B=U.hasOwnProperty,V=F.call(Object);const q=function(t){if(!C(t)||"[object Object]"!=A(t))return!1;var e=L(t);if(null===e)return!0;var r=B.call(e,"constructor")&&e.constructor;return"function"==typeof r&&r instanceof r&&F.call(r)==V};const J=function(t){return C(t)&&1===t.nodeType&&!q(t)};const H=function(){this.__data__=[],this.size=0};const K=function(t,e){return t===e||t!==t&&e!==e};const $=function(t,e){for(var r=t.length;r--;)if(K(t[r][0],e))return r;return-1};var Q=Array.prototype.splice;const G=function(t){var e=this.__data__,r=$(e,t);return!(r<0)&&(r==e.length-1?e.pop():Q.call(e,r,1),--this.size,!0)};const X=function(t){var e=this.__data__,r=$(e,t);return r<0?void 0:e[r][1]};const Y=function(t){return $(this.__data__,t)>-1};const Z=function(t,e){var r=this.__data__,o=$(r,t);return o<0?(++this.size,r.push([t,e])):r[o][1]=e,this};function tt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var o=t[e];this.set(o[0],o[1])}}tt.prototype.clear=H,tt.prototype.delete=G,tt.prototype.get=X,tt.prototype.has=Y,tt.prototype.set=Z;const et=tt;const rt=function(){this.__data__=new et,this.size=0};const ot=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r};const nt=function(t){return this.__data__.get(t)};const it=function(t){return this.__data__.has(t)};const st=function(t){if(!a(t))return!1;var e=A(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e};const at=l["__core-js_shared__"];var ct=function(){var t=/[^.]+$/.exec(at&&at.keys&&at.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();const ut=function(t){return!!ct&&ct in t};var lt=Function.prototype.toString;const ht=function(t){if(null!=t){try{return lt.call(t)}catch(e){}try{return t+""}catch(e){}}return""};var dt=/^\[object .+?Constructor\]$/,ft=Function.prototype,pt=Object.prototype,gt=ft.toString,mt=pt.hasOwnProperty,_t=RegExp("^"+gt.call(mt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const yt=function(t){return!(!a(t)||ut(t))&&(st(t)?_t:dt).test(ht(t))};const bt=function(t,e){return null==t?void 0:t[e]};const vt=function(t,e){var r=bt(t,e);return yt(r)?r:void 0};const wt=vt(l,"Map");const jt=vt(Object,"create");const Et=function(){this.__data__=jt?jt(null):{},this.size=0};const xt=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e};var At=Object.prototype.hasOwnProperty;const Ct=function(t){var e=this.__data__;if(jt){var r=e[t];return"__lodash_hash_undefined__"===r?void 0:r}return At.call(e,t)?e[t]:void 0};var Ot=Object.prototype.hasOwnProperty;const St=function(t){var e=this.__data__;return jt?void 0!==e[t]:Ot.call(e,t)};const Rt=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=jt&&void 0===e?"__lodash_hash_undefined__":e,this};function Pt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var o=t[e];this.set(o[0],o[1])}}Pt.prototype.clear=Et,Pt.prototype.delete=xt,Pt.prototype.get=Ct,Pt.prototype.has=St,Pt.prototype.set=Rt;const Dt=Pt;const kt=function(){this.size=0,this.__data__={hash:new Dt,map:new(wt||et),string:new Dt}};const Wt=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};const Tt=function(t,e){var r=t.__data__;return Wt(e)?r["string"==typeof e?"string":"hash"]:r.map};const Nt=function(t){var e=Tt(this,t).delete(t);return this.size-=e?1:0,e};const It=function(t){return Tt(this,t).get(t)};const Mt=function(t){return Tt(this,t).has(t)};const Lt=function(t,e){var r=Tt(this,t),o=r.size;return r.set(t,e),this.size+=r.size==o?0:1,this};function zt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var o=t[e];this.set(o[0],o[1])}}zt.prototype.clear=kt,zt.prototype.delete=Nt,zt.prototype.get=It,zt.prototype.has=Mt,zt.prototype.set=Lt;const Ut=zt;const Ft=function(t,e){var r=this.__data__;if(r instanceof et){var o=r.__data__;if(!wt||o.length<199)return o.push([t,e]),this.size=++r.size,this;r=this.__data__=new Ut(o)}return r.set(t,e),this.size=r.size,this};function Bt(t){var e=this.__data__=new et(t);this.size=e.size}Bt.prototype.clear=rt,Bt.prototype.delete=ot,Bt.prototype.get=nt,Bt.prototype.has=it,Bt.prototype.set=Ft;const Vt=Bt;const qt=function(t,e){for(var r=-1,o=null==t?0:t.length;++r<o&&!1!==e(t[r],r,t););return t};const Jt=function(){try{var t=vt(Object,"defineProperty");return t({},"",{}),t}catch(e){}}();const Ht=function(t,e,r){"__proto__"==e&&Jt?Jt(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r};var Kt=Object.prototype.hasOwnProperty;const $t=function(t,e,r){var o=t[e];Kt.call(t,e)&&K(o,r)&&(void 0!==r||e in t)||Ht(t,e,r)};const Qt=function(t,e,r,o){var n=!r;r||(r={});for(var i=-1,s=e.length;++i<s;){var a=e[i],c=o?o(r[a],t[a],a,r,t):void 0;void 0===c&&(c=t[a]),n?Ht(r,a,c):$t(r,a,c)}return r};const Gt=function(t,e){for(var r=-1,o=Array(t);++r<t;)o[r]=e(r);return o};const Xt=function(t){return C(t)&&"[object Arguments]"==A(t)};var Yt=Object.prototype,Zt=Yt.hasOwnProperty,te=Yt.propertyIsEnumerable;const ee=Xt(function(){return arguments}())?Xt:function(t){return C(t)&&Zt.call(t,"callee")&&!te.call(t,"callee")};const re=Array.isArray;const oe=function(){return!1};var ne="object"==typeof exports&&exports&&!exports.nodeType&&exports,ie=ne&&"object"==typeof module&&module&&!module.nodeType&&module,se=ie&&ie.exports===ne?l.Buffer:void 0;const ae=(se?se.isBuffer:void 0)||oe;var ce=/^(?:0|[1-9]\d*)$/;const ue=function(t,e){var r=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==r||"symbol"!=r&&ce.test(t))&&t>-1&&t%1==0&&t<e};const le=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991};var he={};he["[object Float32Array]"]=he["[object Float64Array]"]=he["[object Int8Array]"]=he["[object Int16Array]"]=he["[object Int32Array]"]=he["[object Uint8Array]"]=he["[object Uint8ClampedArray]"]=he["[object Uint16Array]"]=he["[object Uint32Array]"]=!0,he["[object Arguments]"]=he["[object Array]"]=he["[object ArrayBuffer]"]=he["[object Boolean]"]=he["[object DataView]"]=he["[object Date]"]=he["[object Error]"]=he["[object Function]"]=he["[object Map]"]=he["[object Number]"]=he["[object Object]"]=he["[object RegExp]"]=he["[object Set]"]=he["[object String]"]=he["[object WeakMap]"]=!1;const de=function(t){return C(t)&&le(t.length)&&!!he[A(t)]};const fe=function(t){return function(e){return t(e)}};var pe="object"==typeof exports&&exports&&!exports.nodeType&&exports,ge=pe&&"object"==typeof module&&module&&!module.nodeType&&module,me=ge&&ge.exports===pe&&c.process;const _e=function(){try{var t=ge&&ge.require&&ge.require("util").types;return t||me&&me.binding&&me.binding("util")}catch(e){}}();var ye=_e&&_e.isTypedArray;const be=ye?fe(ye):de;var ve=Object.prototype.hasOwnProperty;const we=function(t,e){var r=re(t),o=!r&&ee(t),n=!r&&!o&&ae(t),i=!r&&!o&&!n&&be(t),s=r||o||n||i,a=s?Gt(t.length,String):[],c=a.length;for(var u in t)!e&&!ve.call(t,u)||s&&("length"==u||n&&("offset"==u||"parent"==u)||i&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||ue(u,c))||a.push(u);return a};var je=Object.prototype;const Ee=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||je)};const xe=M(Object.keys,Object);var Ae=Object.prototype.hasOwnProperty;const Ce=function(t){if(!Ee(t))return xe(t);var e=[];for(var r in Object(t))Ae.call(t,r)&&"constructor"!=r&&e.push(r);return e};const Oe=function(t){return null!=t&&le(t.length)&&!st(t)};const Se=function(t){return Oe(t)?we(t):Ce(t)};const Re=function(t,e){return t&&Qt(e,Se(e),t)};const Pe=function(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e};var De=Object.prototype.hasOwnProperty;const ke=function(t){if(!a(t))return Pe(t);var e=Ee(t),r=[];for(var o in t)("constructor"!=o||!e&&De.call(t,o))&&r.push(o);return r};const We=function(t){return Oe(t)?we(t,!0):ke(t)};const Te=function(t,e){return t&&Qt(e,We(e),t)};var Ne="object"==typeof exports&&exports&&!exports.nodeType&&exports,Ie=Ne&&"object"==typeof module&&module&&!module.nodeType&&module,Me=Ie&&Ie.exports===Ne?l.Buffer:void 0,Le=Me?Me.allocUnsafe:void 0;const ze=function(t,e){if(e)return t.slice();var r=t.length,o=Le?Le(r):new t.constructor(r);return t.copy(o),o};const Ue=function(t,e){var r=-1,o=t.length;for(e||(e=Array(o));++r<o;)e[r]=t[r];return e};const Fe=function(t,e){for(var r=-1,o=null==t?0:t.length,n=0,i=[];++r<o;){var s=t[r];e(s,r,t)&&(i[n++]=s)}return i};const Be=function(){return[]};var Ve=Object.prototype.propertyIsEnumerable,qe=Object.getOwnPropertySymbols;const Je=qe?function(t){return null==t?[]:(t=Object(t),Fe(qe(t),(function(e){return Ve.call(t,e)})))}:Be;const He=function(t,e){return Qt(t,Je(t),e)};const Ke=function(t,e){for(var r=-1,o=e.length,n=t.length;++r<o;)t[n+r]=e[r];return t};const $e=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)Ke(e,Je(t)),t=L(t);return e}:Be;const Qe=function(t,e){return Qt(t,$e(t),e)};const Ge=function(t,e,r){var o=e(t);return re(t)?o:Ke(o,r(t))};const Xe=function(t){return Ge(t,Se,Je)};const Ye=function(t){return Ge(t,We,$e)};const Ze=vt(l,"DataView");const tr=vt(l,"Promise");const er=vt(l,"Set");const rr=vt(l,"WeakMap");var or="[object Map]",nr="[object Promise]",ir="[object Set]",sr="[object WeakMap]",ar="[object DataView]",cr=ht(Ze),ur=ht(wt),lr=ht(tr),hr=ht(er),dr=ht(rr),fr=A;(Ze&&fr(new Ze(new ArrayBuffer(1)))!=ar||wt&&fr(new wt)!=or||tr&&fr(tr.resolve())!=nr||er&&fr(new er)!=ir||rr&&fr(new rr)!=sr)&&(fr=function(t){var e=A(t),r="[object Object]"==e?t.constructor:void 0,o=r?ht(r):"";if(o)switch(o){case cr:return ar;case ur:return or;case lr:return nr;case hr:return ir;case dr:return sr}return e});const pr=fr;var gr=Object.prototype.hasOwnProperty;const mr=function(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&gr.call(t,"index")&&(r.index=t.index,r.input=t.input),r};const _r=l.Uint8Array;const yr=function(t){var e=new t.constructor(t.byteLength);return new _r(e).set(new _r(t)),e};const br=function(t,e){var r=e?yr(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)};var vr=/\w*$/;const wr=function(t){var e=new t.constructor(t.source,vr.exec(t));return e.lastIndex=t.lastIndex,e};var jr=m?m.prototype:void 0,Er=jr?jr.valueOf:void 0;const xr=function(t){return Er?Object(Er.call(t)):{}};const Ar=function(t,e){var r=e?yr(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)};const Cr=function(t,e,r){var o=t.constructor;switch(e){case"[object ArrayBuffer]":return yr(t);case"[object Boolean]":case"[object Date]":return new o(+t);case"[object DataView]":return br(t,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Ar(t,r);case"[object Map]":case"[object Set]":return new o;case"[object Number]":case"[object String]":return new o(t);case"[object RegExp]":return wr(t);case"[object Symbol]":return xr(t)}};var Or=Object.create;const Sr=function(){function t(){}return function(e){if(!a(e))return{};if(Or)return Or(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();const Rr=function(t){return"function"!=typeof t.constructor||Ee(t)?{}:Sr(L(t))};const Pr=function(t){return C(t)&&"[object Map]"==pr(t)};var Dr=_e&&_e.isMap;const kr=Dr?fe(Dr):Pr;const Wr=function(t){return C(t)&&"[object Set]"==pr(t)};var Tr=_e&&_e.isSet;const Nr=Tr?fe(Tr):Wr;var Ir="[object Arguments]",Mr="[object Function]",Lr="[object Object]",zr={};zr[Ir]=zr["[object Array]"]=zr["[object ArrayBuffer]"]=zr["[object DataView]"]=zr["[object Boolean]"]=zr["[object Date]"]=zr["[object Float32Array]"]=zr["[object Float64Array]"]=zr["[object Int8Array]"]=zr["[object Int16Array]"]=zr["[object Int32Array]"]=zr["[object Map]"]=zr["[object Number]"]=zr[Lr]=zr["[object RegExp]"]=zr["[object Set]"]=zr["[object String]"]=zr["[object Symbol]"]=zr["[object Uint8Array]"]=zr["[object Uint8ClampedArray]"]=zr["[object Uint16Array]"]=zr["[object Uint32Array]"]=!0,zr["[object Error]"]=zr[Mr]=zr["[object WeakMap]"]=!1;const Ur=function t(e,r,o,n,i,s){var c,u=1&r,l=2&r,h=4&r;if(o&&(c=i?o(e,n,i,s):o(e)),void 0!==c)return c;if(!a(e))return e;var d=re(e);if(d){if(c=mr(e),!u)return Ue(e,c)}else{var f=pr(e),p=f==Mr||"[object GeneratorFunction]"==f;if(ae(e))return ze(e,u);if(f==Lr||f==Ir||p&&!i){if(c=l||p?{}:Rr(e),!u)return l?Qe(e,Te(c,e)):He(e,Re(c,e))}else{if(!zr[f])return i?e:{};c=Cr(e,f,u)}}s||(s=new Vt);var g=s.get(e);if(g)return g;s.set(e,c),Nr(e)?e.forEach((function(n){c.add(t(n,r,o,n,e,s))})):kr(e)&&e.forEach((function(n,i){c.set(i,t(n,r,o,i,e,s))}));var m=d?void 0:(h?l?Ye:Xe:l?We:Se)(e);return qt(m||e,(function(n,i){m&&(n=e[i=n]),$t(c,i,t(n,r,o,i,e,s))})),c};const Fr=function(t,e){return Ur(t,5,e="function"==typeof e?e:void 0)};class Br extends o{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e),this._editor=null,this._lifecyclePromise=null,this._initUsingData=!0,this._editables={},this._throttledSave=I(this._save.bind(this),"number"===typeof e.saveInterval?e.saveInterval:5e3),t&&(this._creator=(e,r)=>t.create(e,r)),this._destructor=t=>t.destroy()}get editor(){return this._editor}get _item(){return this._editor}setCreator(t){this._creator=t}setDestructor(t){this._destructor=t}_restart(){return Promise.resolve().then((()=>(this.state="initializing",this._fire("stateChange"),this._destroy()))).catch((t=>{console.error("An error happened during the editor destroying.",t)})).then((()=>{const t={},e=[],r=this._config.rootsAttributes||{},o={};for(const[i,s]of Object.entries(this._data.roots))s.isLoaded?(t[i]="",o[i]=r[i]||{}):e.push(i);const n={...this._config,extraPlugins:this._config.extraPlugins||[],lazyRoots:e,rootsAttributes:o,_watchdogInitialData:this._data};return delete n.initialData,n.extraPlugins.push(Vr),this._initUsingData?this.create(t,n,n.context):J(this._elementOrData)?this.create(this._elementOrData,n,n.context):this.create(this._editables,n,n.context)})).then((()=>{this._fire("restart")}))}create(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._elementOrData,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._config,r=arguments.length>2?arguments[2]:void 0;return this._lifecyclePromise=Promise.resolve(this._lifecyclePromise).then((()=>(super._startErrorHandling(),this._elementOrData=t,this._initUsingData="string"==typeof t||Object.keys(t).length>0&&"string"==typeof Object.values(t)[0],this._config=this._cloneEditorConfiguration(e)||{},this._config.context=r,this._creator(t,this._config)))).then((t=>{this._editor=t,t.model.document.on("change:data",this._throttledSave),this._lastDocumentVersion=t.model.document.version,this._data=this._getData(),this._initUsingData||(this._editables=this._getEditables()),this.state="ready",this._fire("stateChange")})).finally((()=>{this._lifecyclePromise=null})),this._lifecyclePromise}destroy(){return this._lifecyclePromise=Promise.resolve(this._lifecyclePromise).then((()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy()))).finally((()=>{this._lifecyclePromise=null})),this._lifecyclePromise}_destroy(){return Promise.resolve().then((()=>{this._stopErrorHandling(),this._throttledSave.cancel();const t=this._editor;return this._editor=null,t.model.document.off("change:data",this._throttledSave),this._destructor(t)}))}_save(){const t=this._editor.model.document.version;try{this._data=this._getData(),this._initUsingData||(this._editables=this._getEditables()),this._lastDocumentVersion=t}catch(e){console.error(e,"An error happened during restoring editor data. Editor will be restored from the previously saved data.")}}_setExcludedProperties(t){this._excludedProps=t}_getData(){const t=this._editor,e=t.model.document.roots.filter((t=>t.isAttached()&&"$graveyard"!=t.rootName)),{plugins:r}=t,o=r.has("CommentsRepository")&&r.get("CommentsRepository"),n=r.has("TrackChanges")&&r.get("TrackChanges"),i={roots:{},markers:{},commentThreads:JSON.stringify([]),suggestions:JSON.stringify([])};e.forEach((t=>{i.roots[t.rootName]={content:JSON.stringify(Array.from(t.getChildren())),attributes:JSON.stringify(Array.from(t.getAttributes())),isLoaded:t._isLoaded}}));for(const s of t.model.markers)s._affectsData&&(i.markers[s.name]={rangeJSON:s.getRange().toJSON(),usingOperation:s._managedUsingOperations,affectsData:s._affectsData});return o&&(i.commentThreads=JSON.stringify(o.getCommentThreads({toJSON:!0,skipNotAttached:!0}))),n&&(i.suggestions=JSON.stringify(n.getSuggestions({toJSON:!0,skipNotAttached:!0}))),i}_getEditables(){const t={};for(const e of this.editor.model.document.getRootNames()){const r=this.editor.ui.getEditableElement(e);r&&(t[e]=r)}return t}_isErrorComingFromThisItem(t){return s(this._editor,t.context,this._excludedProps)}_cloneEditorConfiguration(t){return Fr(t,((t,e)=>J(t)||"context"===e?t:void 0))}}class Vr{constructor(t){this.editor=t,this._data=t.config.get("_watchdogInitialData")}init(){this.editor.data.on("init",(t=>{t.stop(),this.editor.model.enqueueChange({isUndoable:!1},(t=>{this._restoreCollaborationData(),this._restoreEditorData(t)})),this.editor.data.fire("ready")}),{priority:999})}_createNode(t,e){if("name"in e){const r=t.createElement(e.name,e.attributes);if(e.children)for(const o of e.children)r._appendChild(this._createNode(t,o));return r}return t.createText(e.data,e.attributes)}_restoreEditorData(t){const e=this.editor;Object.entries(this._data.roots).forEach((r=>{let[o,{content:n,attributes:i}]=r;const s=JSON.parse(n),a=JSON.parse(i),c=e.model.document.getRoot(o);for(const[e,u]of a)t.setAttribute(e,u,c);for(const e of s){const r=this._createNode(t,e);t.insert(r,c,"end")}})),Object.entries(this._data.markers).forEach((r=>{let[o,n]=r;const{document:i}=e.model,{rangeJSON:{start:s,end:a},...c}=n,u=i.getRoot(s.root),l=t.createPositionFromPath(u,s.path,s.stickiness),h=t.createPositionFromPath(u,a.path,a.stickiness),d=t.createRange(l,h);t.addMarker(o,{range:d,...c})}))}_restoreCollaborationData(){const t=JSON.parse(this._data.commentThreads),e=JSON.parse(this._data.suggestions);t.forEach((t=>{const e=this.editor.config.get("collaboration.channelId"),r=this.editor.plugins.get("CommentsRepository");if(r.hasCommentThread(t.threadId)){r.getCommentThread(t.threadId).remove()}r.addCommentThread({channelId:e,...t})})),e.forEach((t=>{const e=this.editor.plugins.get("TrackChangesEditing");if(e.hasSuggestion(t.id)){e.getSuggestion(t.id).attributes=t.attributes}else e.addSuggestionData(t)}))}}const qr=Symbol("MainQueueId");class Jr extends o{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e),this._watchdogs=new Map,this._context=null,this._contextProps=new Set,this._actionQueues=new Hr,this._watchdogConfig=e,this._creator=e=>t.create(e),this._destructor=t=>t.destroy(),this._actionQueues.onEmpty((()=>{"initializing"===this.state&&(this.state="ready",this._fire("stateChange"))}))}setCreator(t){this._creator=t}setDestructor(t){this._destructor=t}get context(){return this._context}create(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._actionQueues.enqueue(qr,(()=>(this._contextConfig=t,this._create())))}getItem(t){return this._getWatchdog(t)._item}getItemState(t){return this._getWatchdog(t).state}add(t){const e=Kr(t);return Promise.all(e.map((t=>this._actionQueues.enqueue(t.id,(()=>{if("destroyed"===this.state)throw new Error("Cannot add items to destroyed watchdog.");if(!this._context)throw new Error("Context was not created yet. You should call the `ContextWatchdog#create()` method first.");let e;if(this._watchdogs.has(t.id))throw new Error("Item with the given id is already added: '".concat(t.id,"'."));if("editor"===t.type)return e=new Br(null,this._watchdogConfig),e.setCreator(t.creator),e._setExcludedProperties(this._contextProps),t.destructor&&e.setDestructor(t.destructor),this._watchdogs.set(t.id,e),e.on("error",((r,o)=>{let{error:n,causesRestart:i}=o;this._fire("itemError",{itemId:t.id,error:n}),i&&this._actionQueues.enqueue(t.id,(()=>new Promise((r=>{const o=()=>{e.off("restart",o),this._fire("itemRestart",{itemId:t.id}),r()};e.on("restart",o)}))))})),e.create(t.sourceElementOrData,t.config,this._context);throw new Error("Not supported item type: '".concat(t.type,"'."))})))))}remove(t){const e=Kr(t);return Promise.all(e.map((t=>this._actionQueues.enqueue(t,(()=>{const e=this._getWatchdog(t);return this._watchdogs.delete(t),e.destroy()})))))}destroy(){return this._actionQueues.enqueue(qr,(()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy())))}_restart(){return this._actionQueues.enqueue(qr,(()=>(this.state="initializing",this._fire("stateChange"),this._destroy().catch((t=>{console.error("An error happened during destroying the context or items.",t)})).then((()=>this._create())).then((()=>this._fire("restart"))))))}_create(){return Promise.resolve().then((()=>(this._startErrorHandling(),this._creator(this._contextConfig)))).then((t=>(this._context=t,this._contextProps=n(this._context),Promise.all(Array.from(this._watchdogs.values()).map((t=>(t._setExcludedProperties(this._contextProps),t.create(void 0,void 0,this._context))))))))}_destroy(){return Promise.resolve().then((()=>{this._stopErrorHandling();const t=this._context;return this._context=null,this._contextProps=new Set,Promise.all(Array.from(this._watchdogs.values()).map((t=>t.destroy()))).then((()=>this._destructor(t)))}))}_getWatchdog(t){const e=this._watchdogs.get(t);if(!e)throw new Error("Item with the given id was not registered: ".concat(t,"."));return e}_isErrorComingFromThisItem(t){for(const e of this._watchdogs.values())if(e._isErrorComingFromThisItem(t))return!1;return s(this._context,t.context)}}class Hr{constructor(){this._onEmptyCallbacks=[],this._queues=new Map,this._activeActions=0}onEmpty(t){this._onEmptyCallbacks.push(t)}enqueue(t,e){const r=t===qr;this._activeActions++,this._queues.get(t)||this._queues.set(t,Promise.resolve());const o=(r?Promise.all(this._queues.values()):Promise.all([this._queues.get(qr),this._queues.get(t)])).then(e),n=o.catch((()=>{}));return this._queues.set(t,n),o.finally((()=>{this._activeActions--,this._queues.get(t)===n&&0===this._activeActions&&this._onEmptyCallbacks.forEach((t=>t()))}))}}function Kr(t){return Array.isArray(t)?t:[t]}}}]);
//# sourceMappingURL=656.aa3d8ffe.chunk.js.map