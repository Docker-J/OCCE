"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[400],{9448:(e,t,o)=>{o.d(t,{A:()=>n});var i=o(3003);const n=e=>(0,i.d4)((e=>e.authToken.admin))&&e.children},9596:(e,t,o)=>{o.d(t,{A:()=>p});var i=o(5043),n=o(2518),s=o(8390),r=o(2776),a=o(8627),l=o(7537),c=o(579);const d=e=>{const{setIsDatePickerOpen:t,id:o,disabled:i,value:s,InputProps:{ref:r}={},inputProps:{"aria-label":a}={}}=e;return(0,c.jsx)(n.A,{variant:"outlined",size:"large",id:o,disabled:i,ref:r,"aria-label":a,onClick:()=>null===t||void 0===t?void 0:t((e=>!e)),children:(0,l.GP)(s,"yyyy/MM/dd")})},p=e=>{const[t,o]=(0,i.useState)(!1),{disableDate:n,...l}=e;return(0,c.jsx)(s.$,{dateAdapter:a.h,children:(0,c.jsx)(r.l,{slots:{field:d},slotProps:{field:{setIsDatePickerOpen:o},popper:{placement:"bottom"}},...l,open:t,onClose:()=>o(!1),shouldDisableDate:e=>n&&n(e),disableHighlightToday:!0})})}},5214:(e,t,o)=>{o.d(t,{A:()=>a});var i=o(5865),n=o(4783),s=o(9337),r=o(579);const a=e=>{let{accept:t,handleChangeFile:o,multiple:a}=e;const{getRootProps:l,getInputProps:c}=(0,s.VB)({accept:t,onDrop:e=>{o(e)},multiple:a});return(0,r.jsxs)("div",{style:{width:"100%",height:"100%",border:"1pt dotted #f57c00",borderRadius:"1em",overflowY:"auto"},...l(),children:[(0,r.jsx)("input",{...c()}),(0,r.jsxs)("div",{style:{height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[(0,r.jsx)(n.A,{fontSize:"large",color:"primary"}),(0,r.jsx)(i.A,{children:"Click or Drag File to here"})]})]})}},2460:(e,t,o)=>{o.d(t,{A:()=>m});var i=o(5043),n=o(4223),s=o(9918),r=o(6805),a=o.n(r),l=o(1045),c=o(155),d=o(2734),p=o(5964),u=o(579);const h=e=>{let{id:t,image:o,index:n,cover:s,setCoverImage:r,movePhoto:a,removeImage:h}=e;const m=(0,i.useRef)(null),[{isDragging:g},x]=(0,d.i)({type:"previewcard",item:()=>({id:t,index:n}),collect:e=>({isDragging:e.isDragging()})}),f=g?.7:1,[{handlerId:v},b]=(0,p.H)({accept:"previewcard",collect:e=>({handlerId:e.getHandlerId()}),hover(e,t){var o;if(!m.current)return;const i=e.index,s=n;if(i===s)return;const r=null===(o=m.current)||void 0===o?void 0:o.getBoundingClientRect(),l=(r.left-r.right)/2,c=t.getClientOffset().x-r.left;i<s&&c<l||i>s&&c<l||(a(i,s),e.index=s)}});return x(b(m)),(0,u.jsxs)("div",{ref:m,style:{position:"relative",borderRadius:2,border:s?"5px solid #4bb543":"1px solid #eaeaea",marginBottom:8,marginRight:n%3!==2?"calc(2%/2)":0,width:"calc(97%/3)",aspectRatio:"1/1",boxSizing:"border-box",cursor:"move",opacity:f,overflow:"hidden"},onClick:()=>{"function"===typeof r&&r(n)},children:[(0,u.jsx)("img",{src:o,alt:"preview",style:{width:"auto",height:"100%",objectFit:"cover"}}),(0,u.jsx)(l.A,{sx:{position:"absolute",zIndex:99,top:4,right:4,backgroundColor:"#f57c00",cursor:"pointer",width:30,height:30},onClick:()=>h(n),children:(0,u.jsx)(c.A,{sx:{color:"white"}})})]})},m=e=>{let{imagesPreview:t,cover:o,setCoverImage:r,setImagesPreview:l,setFilesToUpload:c}=e;const d=(0,i.useCallback)(((e,t)=>{c((o=>a()(o,{$splice:[[e,1],[t,0,o[e]]]}))),l((o=>a()(o,{$splice:[[e,1],[t,0,o[e]]]})))}),[c,l]),p=(0,i.useCallback)((e=>{URL.revokeObjectURL(t[e]),c((t=>a()(t,{$splice:[[e,1]]}))),l((t=>a()(t,{$splice:[[e,1]]})))}),[t,c,l]),m=(0,i.useCallback)(((e,t)=>(0,u.jsx)(h,{index:t,image:e,cover:t===o,setCoverImage:r,movePhoto:d,removeImage:p},t)),[o,d,p,r]);return(0,u.jsx)(n.Q,{backend:s.t2,children:(0,u.jsx)("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",alignContent:"flex-start",justifyContent:"space-between",margin:"10pt",width:"100%",height:"68vh",overflowX:"auto"},children:t.map(((e,t)=>m(e,t)))})})}},3400:(e,t,o)=>{o.r(t),o.d(t,{default:()=>ae});var i=o(5043),n=o(344),s=o(5865),r=o(6446),a=o(8911),l=o(1637),c=o(4161),d=o(4010),p=o(2505),u=o(4997),h=o(6453),m=o(9448),g=o(2326),x=(o(1843),o(383)),f=o(2037),v=o(2518),b=o(6805),y=o.n(b),A=o(8081),w=o(9596),j=o(2460),I=o(5214),S=o(2660),k=o(579);const P=e=>{let{isOpen:t,onClose:o}=e;const{openSnackbar:n}=(0,A.A)(),s=()=>{C(),o()},r=new Date,[a,c]=(0,i.useState)(""),[d,p]=(0,i.useState)(r),[u,h]=(0,i.useState)([]),[m,g]=(0,i.useState)(0),[b,P]=(0,i.useState)([]),C=()=>{b.forEach((e=>URL.revokeObjectURL(e))),h([]),P([])},[R,D]=(0,i.useState)(!1);return(0,k.jsx)(S.A,{isOpen:t,onClose:s,height:"85vh",maxWidth:"1300px",loading:R,children:R?(0,k.jsx)(l.A,{}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("div",{style:{display:"flex",width:"95%"},children:[(0,k.jsx)(w.A,{value:d,minDate:new Date("2022/04/03"),maxDate:r,onChange:p}),(0,k.jsx)(f.A,{id:"filled-basic",label:"Album Title",variant:"outlined",sx:{flexGrow:1,ml:4},onChange:e=>c(e.target.value)})]}),(0,k.jsx)(j.A,{imagesPreview:b,setImagesPreview:P,setFilesToUpload:h,cover:m,setCoverImage:g}),(0,k.jsx)("div",{style:{width:"100%",height:"12.75svh"},children:(0,k.jsx)(I.A,{accept:{"image/*":[]},handleChangeFile:e=>{h((t=>[...t,...e])),e.forEach((e=>{P((t=>y()(t,{$push:[URL.createObjectURL(e)]})))}))},multiple:!0})}),(0,k.jsxs)("div",{style:{display:"flex",marginTop:"1.5em",width:"100%"},children:[(0,k.jsx)(v.A,{variant:"outlined",disabled:""===a.trim()||u.length<=0,onClick:async()=>{const e=new FormData;e.append("title",a),e.append("date",d.toISOString()),u.forEach((t=>{e.append("images",t)})),e.append("cover",m);try{D(!0),await(0,x.Br)(e),n("success","Uploaded Succesfully!"),s()}catch(t){console.log(t),n("error","Error Occured. Please contact to the administrator.")}finally{D(!1)}},fullWidth:!0,children:"Submit"}),(0,k.jsx)(v.A,{variant:"outlined",onClick:C,disabled:u.length<=0,fullWidth:!0,children:"Clear All"})]})]})})};var C=o(8669),R=o(8587),D=o(8168),L=o(8387),W=o(8606),M=o(4535),O=o(2876),B=o(6803),N=o(7056),T=o(2400);function F(e){return(0,T.Ay)("MuiListSubheader",e)}(0,N.A)("MuiListSubheader",["root","colorPrimary","colorInherit","gutters","inset","sticky"]);const z=["className","color","component","disableGutters","disableSticky","inset"],E=(0,M.Ay)("li",{name:"MuiListSubheader",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,"default"!==o.color&&t["color".concat((0,B.A)(o.color))],!o.disableGutters&&t.gutters,o.inset&&t.inset,!o.disableSticky&&t.sticky]}})((e=>{let{theme:t,ownerState:o}=e;return(0,D.A)({boxSizing:"border-box",lineHeight:"48px",listStyle:"none",color:(t.vars||t).palette.text.secondary,fontFamily:t.typography.fontFamily,fontWeight:t.typography.fontWeightMedium,fontSize:t.typography.pxToRem(14)},"primary"===o.color&&{color:(t.vars||t).palette.primary.main},"inherit"===o.color&&{color:"inherit"},!o.disableGutters&&{paddingLeft:16,paddingRight:16},o.inset&&{paddingLeft:72},!o.disableSticky&&{position:"sticky",top:0,zIndex:1,backgroundColor:(t.vars||t).palette.background.paper})})),G=i.forwardRef((function(e,t){const o=(0,O.A)({props:e,name:"MuiListSubheader"}),{className:i,color:n="default",component:s="li",disableGutters:r=!1,disableSticky:a=!1,inset:l=!1}=o,c=(0,R.A)(o,z),d=(0,D.A)({},o,{color:n,component:s,disableGutters:r,disableSticky:a,inset:l}),p=(e=>{const{classes:t,color:o,disableGutters:i,inset:n,disableSticky:s}=e,r={root:["root","default"!==o&&"color".concat((0,B.A)(o)),!i&&"gutters",n&&"inset",!s&&"sticky"]};return(0,W.A)(r,F,t)})(d);return(0,k.jsx)(E,(0,D.A)({as:s,className:(0,L.A)(p.root,i),ref:t,ownerState:d},c))}));G.muiSkipListHighlight=!0;const H=G;function U(e){return(0,T.Ay)("MuiImageListItemBar",e)}(0,N.A)("MuiImageListItemBar",["root","positionBottom","positionTop","positionBelow","titleWrap","titleWrapBottom","titleWrapTop","titleWrapBelow","titleWrapActionPosLeft","titleWrapActionPosRight","title","subtitle","actionIcon","actionIconActionPosLeft","actionIconActionPosRight"]);const $=["actionIcon","actionPosition","className","subtitle","title","position"],Y=(0,M.Ay)("div",{name:"MuiImageListItemBar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,t["position".concat((0,B.A)(o.position))]]}})((e=>{let{theme:t,ownerState:o}=e;return(0,D.A)({position:"absolute",left:0,right:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",fontFamily:t.typography.fontFamily},"bottom"===o.position&&{bottom:0},"top"===o.position&&{top:0},"below"===o.position&&{position:"relative",background:"transparent",alignItems:"normal"})})),J=(0,M.Ay)("div",{name:"MuiImageListItemBar",slot:"TitleWrap",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.titleWrap,t["titleWrap".concat((0,B.A)(o.position))],o.actionIcon&&t["titleWrapActionPos".concat((0,B.A)(o.actionPosition))]]}})((e=>{let{theme:t,ownerState:o}=e;return(0,D.A)({flexGrow:1,padding:"12px 16px",color:(t.vars||t).palette.common.white,overflow:"hidden"},"below"===o.position&&{padding:"6px 0 12px",color:"inherit"},o.actionIcon&&"left"===o.actionPosition&&{paddingLeft:0},o.actionIcon&&"right"===o.actionPosition&&{paddingRight:0})})),V=(0,M.Ay)("div",{name:"MuiImageListItemBar",slot:"Title",overridesResolver:(e,t)=>t.title})((e=>{let{theme:t}=e;return{fontSize:t.typography.pxToRem(16),lineHeight:"24px",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}})),X=(0,M.Ay)("div",{name:"MuiImageListItemBar",slot:"Subtitle",overridesResolver:(e,t)=>t.subtitle})((e=>{let{theme:t}=e;return{fontSize:t.typography.pxToRem(12),lineHeight:1,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}})),_=(0,M.Ay)("div",{name:"MuiImageListItemBar",slot:"ActionIcon",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.actionIcon,t["actionIconActionPos".concat((0,B.A)(o.actionPosition))]]}})((e=>{let{ownerState:t}=e;return(0,D.A)({},"left"===t.actionPosition&&{order:-1})})),Q=i.forwardRef((function(e,t){const o=(0,O.A)({props:e,name:"MuiImageListItemBar"}),{actionIcon:i,actionPosition:n="right",className:s,subtitle:r,title:a,position:l="bottom"}=o,c=(0,R.A)(o,$),d=(0,D.A)({},o,{position:l,actionPosition:n}),p=(e=>{const{classes:t,position:o,actionIcon:i,actionPosition:n}=e,s={root:["root","position".concat((0,B.A)(o))],titleWrap:["titleWrap","titleWrap".concat((0,B.A)(o)),i&&"titleWrapActionPos".concat((0,B.A)(n))],title:["title"],subtitle:["subtitle"],actionIcon:["actionIcon","actionIconActionPos".concat((0,B.A)(n))]};return(0,W.A)(s,U,t)})(d);return(0,k.jsxs)(Y,(0,D.A)({ownerState:d,className:(0,L.A)(p.root,s),ref:t},c,{children:[(0,k.jsxs)(J,{ownerState:d,className:p.titleWrap,children:[(0,k.jsx)(V,{className:p.title,children:a}),r?(0,k.jsx)(X,{className:p.subtitle,children:r}):null]}),i?(0,k.jsx)(_,{ownerState:d,className:p.actionIcon,children:i}):null]}))}));var Z=o(5475),q=o(7537);const K=e=>{let{posts:t,cols:o}=e;const i={};let n=null;for(let s of t){const e=new Date(s.Timestamp).getFullYear();e!==n&&(n=e,i[e]=[]),i[e].push(s)}return Object.keys(i).reverse().map((e=>(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(C.A,{cols:o,children:(0,k.jsx)(H,{component:"div",children:e})},e),i[e].map((e=>(0,k.jsxs)(C.A,{component:Z.N_,to:e.ID,sx:{textDecoration:"none"},children:[(0,k.jsx)("img",{src:"https://imagedelivery.net/ICo2WI8PXO_BVRlWfwzOww/".concat(e.Cover,"/thumbnail"),alt:"thumbnail",loading:"lazy"}),(0,k.jsx)(Q,{title:(0,k.jsx)(s.A,{color:"black",children:e.Title}),subtitle:(0,k.jsx)(s.A,{fontSize:"small",color:"black",children:(0,q.GP)(e.Timestamp,"MMdd")}),position:"below"})]},e.ID)))]})))},ee=(0,i.memo)(K);var te=o(8390),oe=o(2776),ie=o(8627);const ne=e=>{const{setIsDatePickerOpen:t,id:o,disabled:i,value:n,sx:s,InputProps:{ref:r}={},inputProps:{"aria-label":a}={}}=e;return(0,k.jsx)(v.A,{variant:"outlined",size:"large",id:o,disabled:i,ref:r,"aria-label":a,sx:{color:"white",borderColor:"white",...s},onClick:()=>null===t||void 0===t?void 0:t((e=>!e)),children:n?(0,q.GP)(n,"yyyy"):"All Year"})},se=e=>{const[t,o]=(0,i.useState)(!1),{disableDate:n,...s}=e;return(0,k.jsx)(te.$,{dateAdapter:ie.h,children:(0,k.jsx)(oe.l,{views:["year"],slots:{field:ne},slotProps:{field:{setIsDatePickerOpen:o},popper:{placement:"bottom"},actionBar:{actions:["clear"]}},...s,open:t,onClose:()=>o(!1)})})},re={backgroundImage:'linear-gradient(rgba(0, 0, 0, 0.40), rgba(0, 0, 0, 0.40)), url("/img/News/Albums/Albums.webp")'},ae=()=>{const e=(0,n.A)("(min-width:1200px)");let[t,o]=(0,Z.ok)();const{openModal:f}=(0,h.A)(),[v,b]=(0,i.useState)(!1),[y,A]=(0,i.useState)(t.has("year")?new Date(t.get("year"),0,1):null),[w,j]=(0,i.useState)([]),[I,S]=(0,i.useState)(!1),[C,R]=(0,i.useState)(null);(0,i.useEffect)((()=>{j([]),S(!1),console.log(y),o(y?{year:y.getFullYear()}:e=>e.delete("year"))}),[y,o]),(0,i.useEffect)((()=>{null!==C&&D()}),[t.get("year")]);const D=async()=>{if(!v){b(!0);try{const e=await(0,x.Zt)(w,null===y||void 0===y?void 0:y.getFullYear());e.data.length>0?j((t=>[...t,...e.data])):S(!0)}finally{b(!1)}}};(0,i.useEffect)((()=>{w.length%12!==0&&S(!0)}),[w]),(0,i.useEffect)((()=>(window.onpopstate=()=>{R(!0),console.log("test restore"),j(JSON.parse(sessionStorage.getItem("albums")))},R(!1),()=>{window.onpopstate=()=>{}})),[]),(0,i.useEffect)((()=>{null===C||C||D()}),[C]),(0,i.useEffect)((()=>()=>{sessionStorage.setItem("albums",JSON.stringify(w))}));const L=(0,i.useRef)();return(0,i.useEffect)((()=>{L.current&&!I&&w.length>=12&&setTimeout((()=>{try{const e=L.current.clientHeight,t=window.innerHeight-500;console.log("test content",e),console.log("test screen",t),e>100&&e<t&&D()}catch(e){}}),500)}),[w]),(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("div",{className:"title-wrapper",style:re,children:(0,k.jsxs)("div",{className:"title",children:[(0,k.jsx)(s.A,{variant:"h4",fontWeight:830,sx:{letterSpacing:"0.4em",pl:"0.4em",color:"white"},children:"\uad50\ud68c\uc0ac\uc9c4"}),(0,k.jsx)(se,{sx:{mt:2},value:y,minDate:new Date("2022/04/03"),maxDate:new Date,onChange:A})]})}),(0,k.jsx)("div",{className:"container-wrapper",children:(0,k.jsx)(r.A,{className:"container",sx:{px:{xs:"0 !important",md:"1.5em !important"},py:"0 !important"},children:w.length<=0?(0,k.jsx)(a.A,{alignItems:"center",sx:{py:8},children:v?(0,k.jsx)(l.A,{}):"\uc0ac\uc9c4\uc774 \uc874\uc7ac\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4"}):(0,k.jsx)(u.A,{dataLength:w.length,next:D,hasMore:!I,loader:(0,k.jsx)(a.A,{alignItems:"center",children:(0,k.jsx)(l.A,{})}),scrollThreshold:1,style:{overflowY:"hidden"},children:(0,k.jsx)(c.A,{ref:L,cols:e?4:3,gap:3,children:(0,k.jsx)(ee,{posts:w,cols:e?4:3})})})})}),(0,k.jsx)(m.A,{children:(0,k.jsx)(d.A,{variant:"primary",style:{position:"fixed",right:"2vw",bottom:"3vh"},onClick:()=>f(P,{}),children:(0,k.jsx)(p.A,{})})}),I&&(0,k.jsx)(g.A,{})]})}},1843:()=>{}}]);
//# sourceMappingURL=400.21048c85.chunk.js.map