{"version":3,"file":"static/js/429.2f9129ba.chunk.js","mappings":"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","sources":["components/WeeklyUpdate/ButtonDatePicker.js","components/WeeklyUpdate/PDFReader.js","components/WeeklyUpdate/BulletinUploadModal.js","pages/WeeklyUpdate/WeeklyUpdate.js","util/AdminComponent.js"],"sourcesContent":["import PropTypes from \"prop-types\";\r\nimport { useState } from \"react\";\r\nimport { Button } from \"@mui/material\";\r\nimport { DatePicker, LocalizationProvider } from \"@mui/x-date-pickers\";\r\nimport { AdapterDateFns } from \"@mui/x-date-pickers/AdapterDateFns\";\r\nimport { format } from \"date-fns\";\r\n\r\nfunction ButtonField(props) {\r\n  const {\r\n    setIsDatePickerOpen,\r\n    id,\r\n    disabled,\r\n    value,\r\n    InputProps: { ref } = {},\r\n    inputProps: { \"aria-label\": ariaLabel } = {},\r\n  } = props;\r\n\r\n  return (\r\n    <Button\r\n      variant=\"outlined\"\r\n      size=\"large\"\r\n      id={id}\r\n      disabled={disabled}\r\n      ref={ref}\r\n      aria-label={ariaLabel}\r\n      onClick={() => setIsDatePickerOpen?.((prev) => !prev)}\r\n    >\r\n      {format(value, \"MM/dd/yyyy\")}\r\n    </Button>\r\n  );\r\n}\r\n\r\nButtonField.propTypes = {\r\n  disabled: PropTypes.bool,\r\n  id: PropTypes.string,\r\n  inputProps: PropTypes.shape({\r\n    \"aria-label\": PropTypes.string,\r\n  }),\r\n  InputProps: PropTypes.shape({\r\n    endAdornment: PropTypes.node,\r\n    startAdornment: PropTypes.node,\r\n  }),\r\n  setIsDatePickerOpen: PropTypes.func,\r\n  label: PropTypes.node,\r\n};\r\n\r\nfunction ButtonDatePicker(props) {\r\n  const [isDatePickerOpen, setIsDatePickerOpen] = useState(false);\r\n\r\n  const notSunday = (date) => {\r\n    const day = date.getDay();\r\n    return day !== 0;\r\n  };\r\n\r\n  return (\r\n    <LocalizationProvider dateAdapter={AdapterDateFns}>\r\n      <DatePicker\r\n        slots={{ field: ButtonField, ...props.slots }}\r\n        slotProps={{\r\n          field: { setIsDatePickerOpen },\r\n          popper: { placement: \"bottom\" },\r\n        }}\r\n        {...props}\r\n        open={isDatePickerOpen}\r\n        onClose={() => setIsDatePickerOpen(false)}\r\n        shouldDisableDate={notSunday}\r\n        disableHighlightToday\r\n        // renderInput={(props) => (\r\n        //   <Button\r\n        //     ref={props.inputRef}\r\n        //     variant=\"outlined\"\r\n        //     size=\"large\"\r\n        //     onClick={() =>\r\n        //       setIsDatePickerOpen((isDatePickerOpen) => !isDatePickerOpen)\r\n        //     }\r\n        //   >\r\n        //     {props.inputProps.value}\r\n        //   </Button>\r\n        // )}\r\n      />\r\n    </LocalizationProvider>\r\n  );\r\n}\r\n\r\nexport default ButtonDatePicker;\r\n","import { Button, ButtonGroup, CircularProgress } from \"@mui/material\";\r\nimport { isMobile } from \"react-device-detect\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { pdfjs, Page, Document } from \"react-pdf\";\r\n\r\nimport \"react-pdf/dist/esm/Page/AnnotationLayer.css\";\r\nimport \"./PDFReader.css\";\r\n\r\n// pdfjs.GlobalWorkerOptions.workerSrc = new URL(\r\n//   \"npm:pdfjs-dist/build/pdf.worker.min.js\",\r\n//   import.meta.url\r\n// ).toString();\r\n\r\npdfjs.GlobalWorkerOptions.workerSrc = `//cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjs.version}/pdf.worker.min.js`;\r\n\r\nfunction PDFReader(props) {\r\n  const [numPages, setNumPages] = useState(null);\r\n  const [pageNumber, setPageNumber] = useState(1);\r\n  const [scale, setScale] = useState(1);\r\n\r\n  const add = () => {\r\n    setScale((prev) => {\r\n      return prev + 0.2;\r\n    });\r\n  };\r\n\r\n  const minus = () => {\r\n    if (scale !== 1) {\r\n      setScale((prev) => {\r\n        return prev - 0.2;\r\n      });\r\n    }\r\n  };\r\n\r\n  function onDocumentLoadSuccess({ numPages }) {\r\n    setNumPages(numPages);\r\n  }\r\n\r\n  function changePage(offset) {\r\n    setPageNumber((prevPageNumber) => prevPageNumber + offset);\r\n  }\r\n\r\n  function previousPage() {\r\n    changePage(-1);\r\n  }\r\n\r\n  function nextPage() {\r\n    changePage(1);\r\n  }\r\n\r\n  useEffect(() => {\r\n    setPageNumber(1);\r\n  }, [props.file]);\r\n\r\n  const width = isMobile\r\n    ? document.documentElement.clientWidth\r\n    : window.innerWidth;\r\n  const height = isMobile\r\n    ? document.documentElement.clientHeight\r\n    : window.innerHeight;\r\n\r\n  const [windowDimension, detectHW] = useState({\r\n    width: height / width >= 16 / 10 ? width - 30 : null,\r\n    height: height / width < 16 / 10 ? height : null,\r\n  });\r\n\r\n  const detectSize = () => {\r\n    const width = isMobile\r\n      ? document.documentElement.clientWidth\r\n      : window.innerWidth;\r\n    const height = isMobile\r\n      ? document.documentElement.clientHeight\r\n      : window.innerHeight;\r\n\r\n    detectHW({\r\n      width: height / width >= 16 / 10 ? width - 30 : null,\r\n      height: height / width < 16 / 10 ? height : null,\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    window.addEventListener(\"resize\", detectSize);\r\n\r\n    return () => {\r\n      window.removeEventListener(\"resize\", detectSize);\r\n    };\r\n  }, [windowDimension]);\r\n\r\n  return (\r\n    <>\r\n      <div style={{ marginTop: \"1em\", marginBottom: \"1em\" }}>\r\n        <ButtonGroup id=\"scaleButton\">\r\n          <Button onClick={add} variant={\"outlined\"}>\r\n            +\r\n          </Button>\r\n          <Button onClick={minus} variant={\"outlined\"} disabled={scale <= 1}>\r\n            -\r\n          </Button>\r\n        </ButtonGroup>\r\n      </div>\r\n\r\n      <Document\r\n        file={props.file}\r\n        onLoadSuccess={onDocumentLoadSuccess}\r\n        loading={<CircularProgress />}\r\n      >\r\n        <Page\r\n          renderTextLayer={false}\r\n          className=\"page\"\r\n          scale={scale}\r\n          height={windowDimension.height}\r\n          width={windowDimension.width}\r\n          pageNumber={pageNumber}\r\n        />\r\n      </Document>\r\n\r\n      <p style={{ color: \"black\" }}>\r\n        Page {pageNumber || (numPages ? 1 : \"--\")} of {numPages || \"--\"}\r\n      </p>\r\n      <ButtonGroup id=\"pageButton\">\r\n        <Button\r\n          type=\"button\"\r\n          variant={\"outlined\"}\r\n          disabled={pageNumber <= 1}\r\n          onClick={previousPage}\r\n        >\r\n          Previous\r\n        </Button>\r\n        <Button\r\n          type=\"button\"\r\n          variant={\"outlined\"}\r\n          disabled={pageNumber >= numPages}\r\n          onClick={nextPage}\r\n        >\r\n          Next\r\n        </Button>\r\n      </ButtonGroup>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default PDFReader;\r\n","import React, { useEffect, useRef, useState } from \"react\";\r\nimport { Box, Button, Modal } from \"@mui/material\";\r\nimport ButtonDatePicker from \"./ButtonDatePicker\";\r\n\r\nconst style = {\r\n  position: \"absolute\",\r\n  top: \"50%\",\r\n  left: \"50%\",\r\n  transform: \"translate(-50%, -50%)\",\r\n  width: \"50vw\",\r\n  maxWidth: \"1500px\",\r\n  height: \"50vh\",\r\n  bgcolor: \"#ffffff\",\r\n  border: \"0.1px solid #f57c00\",\r\n  boxShadow: 24,\r\n  p: 2,\r\n};\r\n\r\nconst BulletinUploadModal = (props) => {\r\n  const [selectedDate, setSelectedDate] = useState();\r\n  const [fileToUpload, setFileToUpload] = useState(null);\r\n\r\n  const nextSunday = () => {\r\n    const today = new Date();\r\n    today.setDate(today.getDate() + ((-1 - today.getDay() + 7) % 7) + 1);\r\n    setSelectedDate(today);\r\n  };\r\n\r\n  const inputRef = useRef(null);\r\n\r\n  const handleChangeFile = ({ target }) => {\r\n    setFileToUpload(target.files[0]);\r\n  };\r\n\r\n  useEffect(() => {\r\n    nextSunday();\r\n  }, []);\r\n\r\n  return (\r\n    <Modal open={props.open} onClose={props.onClose}>\r\n      <Box sx={style} bgcolor=\"white\">\r\n        <h2>Choose Date</h2>\r\n\r\n        <ButtonDatePicker\r\n          value={selectedDate}\r\n          minDate={new Date(\"2022/04/03\")}\r\n          onChange={setSelectedDate}\r\n        />\r\n\r\n        <h2>Choose File</h2>\r\n        <input\r\n          type=\"file\"\r\n          ref={inputRef}\r\n          id=\"bulletin\"\r\n          name=\"theFile\"\r\n          onChange={handleChangeFile}\r\n          accept=\"application/pdf\"\r\n        />\r\n\r\n        <p>\r\n          <Button\r\n            onClick={() => props.onModalUpload(fileToUpload, selectedDate)}\r\n          >\r\n            Upload\r\n          </Button>\r\n          <Button onClick={props.onClose}>Close</Button>\r\n        </p>\r\n      </Box>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default BulletinUploadModal;\r\n","import React, { useState, useEffect, useCallback } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nimport {\r\n  Alert,\r\n  CircularProgress,\r\n  Fab,\r\n  IconButton,\r\n  Snackbar,\r\n} from \"@mui/material\";\r\nimport ArrowBackIosIcon from \"@mui/icons-material/ArrowBackIos\";\r\nimport ArrowForwardIosIcon from \"@mui/icons-material/ArrowForwardIos\";\r\nimport UploadIcon from \"@mui/icons-material/Upload\";\r\n\r\nimport ButtonDatePicker from \"../../components/WeeklyUpdate/ButtonDatePicker\";\r\nimport PDFReader from \"../../components/WeeklyUpdate/PDFReader\";\r\nimport BulletinUploadModal from \"../../components/WeeklyUpdate/BulletinUploadModal\";\r\n\r\nimport \"./WeeklyUpdate.css\";\r\nimport { useLoaderData, useNavigate, useRevalidator } from \"react-router-dom\";\r\nimport AdminComponent from \"../../util/AdminComponent\";\r\n\r\nconst WeeklyUpdate = () => {\r\n  const navigate = useNavigate();\r\n  let revalidator = useRevalidator();\r\n\r\n  const { maxDate, queryDate } = useLoaderData();\r\n  const minDate = new Date(\"2022/04/03\");\r\n\r\n  const [bulletin, setBulletin] = useState(null);\r\n  const [selectedDate, setSelectedDate] = useState(queryDate);\r\n  const [modalState, setModalState] = useState(false);\r\n  const [isSuccessSnackBarOpen, setIsSuccessSnackBarOpen] = useState(false);\r\n\r\n  const handleClose = (event, reason) => {\r\n    if (reason === \"clickaway\") {\r\n      return;\r\n    }\r\n\r\n    setIsSuccessSnackBarOpen(false);\r\n  };\r\n\r\n  // Get Bulletin from Firestore\r\n  const loadFile = useCallback(async () => {\r\n    try {\r\n      const result = await axios.get(\"/api/WeeklyUpdate/GetBulletin\", {\r\n        params: { date: selectedDate.toLocaleDateString(\"sv\") },\r\n      });\r\n      setBulletin(result.data);\r\n    } catch (err) {}\r\n  }, [selectedDate]);\r\n\r\n  const closeModal = () => {\r\n    setModalState(false);\r\n  };\r\n\r\n  const uploadBulletin = async (file, date) => {\r\n    fileToBase64(file, (err, result) => {\r\n      axios\r\n        .put(\"/api/WeeklyUpdate/PostBulletin/\", {\r\n          file: result,\r\n          date: date.toLocaleDateString(\"sv\"),\r\n        })\r\n        .then((res) => {\r\n          console.log(res.data);\r\n          // setMaxDate(new Date(res.data.replace(/-/g, \"/\")));\r\n          setSelectedDate(date);\r\n          revalidator.revalidate(); //get new maxdate\r\n          closeModal();\r\n          setIsSuccessSnackBarOpen(true);\r\n        });\r\n    });\r\n  };\r\n\r\n  const fileToBase64 = (file, cb) => {\r\n    const reader = new FileReader();\r\n    reader.readAsDataURL(file);\r\n    reader.onload = function() {\r\n      cb(null, reader.result);\r\n    };\r\n    reader.onerror = function(error) {\r\n      cb(error, null);\r\n    };\r\n  };\r\n\r\n  const previousBulletin = () => {\r\n    setSelectedDate(\r\n      new Date(\r\n        selectedDate.getFullYear(),\r\n        selectedDate.getMonth(),\r\n        selectedDate.getDate() - 7\r\n      )\r\n    );\r\n  };\r\n\r\n  const nextBulletin = () => {\r\n    setSelectedDate(\r\n      new Date(\r\n        selectedDate.getFullYear(),\r\n        selectedDate.getMonth(),\r\n        selectedDate.getDate() + 7\r\n      )\r\n    );\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (selectedDate != null) {\r\n      loadFile();\r\n      navigate(\r\n        \"/weeklyupdate/\" +\r\n          selectedDate.toLocaleDateString(\"sv\").replace(/-/g, \"\")\r\n      );\r\n    }\r\n  }, [selectedDate, loadFile, navigate]);\r\n\r\n  function compareDate(date1, date2) {\r\n    return (\r\n      date1.getFullYear() === date2.getFullYear() &&\r\n      date1.getMonth() === date2.getMonth() &&\r\n      date1.getDate() === date2.getDate()\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <h1>주보</h1>\r\n\r\n      {bulletin ? (\r\n        <>\r\n          <IconButton\r\n            id=\"previousBulletin\"\r\n            onClick={previousBulletin}\r\n            disabled={compareDate(selectedDate, minDate)}\r\n          >\r\n            <ArrowBackIosIcon />\r\n          </IconButton>\r\n\r\n          <ButtonDatePicker\r\n            value={selectedDate}\r\n            minDate={minDate}\r\n            maxDate={maxDate}\r\n            onChange={setSelectedDate}\r\n          />\r\n\r\n          <IconButton\r\n            id=\"nextBulletin\"\r\n            onClick={nextBulletin}\r\n            disabled={compareDate(selectedDate, maxDate)}\r\n          >\r\n            <ArrowForwardIosIcon />\r\n          </IconButton>\r\n\r\n          <PDFReader file={bulletin} />\r\n        </>\r\n      ) : (\r\n        <CircularProgress />\r\n      )}\r\n\r\n      <AdminComponent>\r\n        <Fab\r\n          id=\"uploadBulletinButton\"\r\n          variant=\"extended\"\r\n          onClick={() => setModalState(true)}\r\n        >\r\n          <UploadIcon sx={{ mr: 1 }} />\r\n          Upload\r\n        </Fab>\r\n\r\n        <BulletinUploadModal\r\n          open={modalState}\r\n          onModalUpload={uploadBulletin}\r\n          onClose={closeModal}\r\n        />\r\n\r\n        <Snackbar\r\n          open={isSuccessSnackBarOpen}\r\n          autoHideDuration={8000}\r\n          onClose={handleClose}\r\n        >\r\n          <Alert severity=\"success\" onClose={handleClose}>\r\n            Uploaded Succesfully!\r\n          </Alert>\r\n        </Snackbar>\r\n      </AdminComponent>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default WeeklyUpdate;\r\n","import { useSelector } from \"react-redux\";\r\n\r\nconst AdminComponent = (props) => {\r\n  const user = useSelector((state) => state.authToken.admin);\r\n\r\n  return user && props.children;\r\n};\r\n\r\nexport default AdminComponent;\r\n"],"names":["ButtonField","props","setIsDatePickerOpen","id","disabled","value","InputProps","ref","inputProps","ariaLabel","_jsx","Button","variant","size","onClick","prev","children","format","isDatePickerOpen","useState","LocalizationProvider","dateAdapter","AdapterDateFns","DatePicker","slots","field","slotProps","popper","placement","open","onClose","shouldDisableDate","date","getDay","disableHighlightToday","pdfjs","concat","numPages","setNumPages","pageNumber","setPageNumber","scale","setScale","changePage","offset","prevPageNumber","useEffect","file","width","isMobile","document","documentElement","clientWidth","window","innerWidth","height","clientHeight","innerHeight","windowDimension","detectHW","detectSize","addEventListener","removeEventListener","_jsxs","_Fragment","style","marginTop","marginBottom","ButtonGroup","add","minus","Document","onLoadSuccess","_ref","loading","CircularProgress","Page","renderTextLayer","className","color","type","position","top","left","transform","maxWidth","bgcolor","border","boxShadow","p","selectedDate","setSelectedDate","fileToUpload","setFileToUpload","inputRef","useRef","nextSunday","today","Date","setDate","getDate","Modal","Box","sx","ButtonDatePicker","minDate","onChange","name","target","files","accept","onModalUpload","WeeklyUpdate","navigate","useNavigate","revalidator","useRevalidator","maxDate","queryDate","useLoaderData","bulletin","setBulletin","modalState","setModalState","isSuccessSnackBarOpen","setIsSuccessSnackBarOpen","handleClose","event","reason","loadFile","useCallback","async","result","axios","params","toLocaleDateString","data","err","closeModal","fileToBase64","cb","reader","FileReader","readAsDataURL","onload","onerror","error","compareDate","date1","date2","getFullYear","getMonth","replace","IconButton","previousBulletin","ArrowBackIosIcon","nextBulletin","ArrowForwardIosIcon","PDFReader","AdminComponent","Fab","UploadIcon","mr","BulletinUploadModal","then","res","console","log","revalidate","Snackbar","autoHideDuration","Alert","severity","useSelector","state","authToken","admin"],"sourceRoot":""}