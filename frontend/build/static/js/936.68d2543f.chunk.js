"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[936],{2612:(e,t,i)=>{i.d(t,{c:()=>s});var n=i(624);const s=e=>(0,n.w1)((e=>e.authToken.admin))&&e.children},5604:(e,t,i)=>{i.d(t,{c:()=>l});var n=i(7960),s=i(7132),o=i(9060),r=i(4864),c=i(1595),a=i(2496);const l=e=>{let{id:t,image:i,index:l,cover:d,setCoverImage:h,movePhoto:g,removeImage:p}=e;const u=(0,o.useRef)(null),[{isDragging:x},m]=(0,r.I)({type:"previewcard",item:()=>({id:t,index:l}),collect:e=>({isDragging:e.isDragging()})}),f=x?.7:1,[{handlerId:v},j]=(0,c.W)({accept:"previewcard",collect:e=>({handlerId:e.getHandlerId()}),hover(e,t){var i;if(!u.current)return;const n=e.index,s=l;if(n===s)return;const o=null===(i=u.current)||void 0===i?void 0:i.getBoundingClientRect(),r=(o.left-o.right)/2,c=t.getClientOffset().x-o.left;n<s&&c<r||n>s&&c<r||(g(n,s),h(s),e.index=s)}});return m(j(u)),(0,a.jsxs)("div",{ref:u,style:{position:"relative",borderRadius:2,border:d?"5px solid #4bb543":"1px solid #eaeaea",marginBottom:8,marginRight:l%3!==2?"calc(2%/2)":0,width:"calc(97%/3)",aspectRatio:"1/1",boxSizing:"border-box",cursor:"move",opacity:f,overflow:"hidden"},onClick:()=>h(l),children:[(0,a.jsx)("img",{src:i,alt:"preview",style:{width:"auto",height:"100%",objectFit:"cover"}}),(0,a.jsx)(n.c,{sx:{position:"absolute",zIndex:99,top:4,right:4,backgroundColor:"#f57c00",cursor:"pointer",width:30,height:30},onClick:()=>p(l),children:(0,a.jsx)(s.c,{sx:{color:"white"}})})]})}},5936:(e,t,i)=>{i.r(t),i.d(t,{default:()=>W});var n=i(9060),s=i(1640),o=i(6880),r=i(8960),c=i(1088),a=i(1192),l=i(2904),d=i(8420),h=i(6200),g=i(12),p=i(2496);const u=e=>{let{posts:t}=e;return t.map((e=>(0,p.jsx)(h.c,{component:g.cH,to:e.ID,children:(0,p.jsx)("img",{src:"https://imagedelivery.net/ICo2WI8PXO_BVRlWfwzOww/".concat(e.Cover,"/thumbnail"),alt:"thumbnail",loading:"lazy"})},e.ID)))},x=(0,n.memo)(u);var m=i(2456),f=i(7256),v=i(2160),j=i(771),w=i(1552),b=i.n(w),y=i(3556),C=i(5816),I=i(4192),k=i(5604),S=i(7856);const R={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"90vw",height:"80vh",maxWidth:"1300px",bgcolor:"#ffffff",boxShadow:24,borderRadius:"0.5em",p:1,py:5,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},O=e=>{let{isOpen:t,onClose:i}=e;const{openSnackbar:s}=(0,S.c)(),r=()=>{x(),i()},[a,l]=(0,n.useState)([]),[d,h]=(0,n.useState)([]),g=async()=>{const e=new FormData;a.forEach((t=>{e.append("images",t)}));try{P(!0),await g(e),s("success","Uploaded Succesfully!"),r()}catch(t){console.log(t),s("error","Error Occured. Please contact to the administrator.")}finally{P(!1)}},u=e=>{URL.revokeObjectURL(d[e]),l((t=>b()(t,{$splice:[[e,1]]}))),h((t=>b()(t,{$splice:[[e,1]]})))},x=()=>{d.forEach((e=>URL.revokeObjectURL(e))),l([]),h([])},w=(0,n.useCallback)(((e,t)=>{l((i=>b()(i,{$splice:[[e,1],[t,0,i[e]]]}))),h((i=>b()(i,{$splice:[[e,1],[t,0,i[e]]]})))}),[]),{getRootProps:O,getInputProps:D}=(0,j.IX)({accept:{"image/*":[]},onDrop:e=>{var t;t=e,l((e=>[...e,...t])),t.forEach((e=>{h((t=>b()(t,{$push:[URL.createObjectURL(e)]})))}))},noDragEventsBubbling:!0}),E=(0,n.useCallback)(((e,t)=>(0,p.jsx)(k.c,{index:t,image:e,movePhoto:w,removeImage:u},t)),[]),[N,P]=(0,n.useState)(!1);return(0,p.jsx)(m.c,{open:t,onClose:r,children:(0,p.jsx)(f.c,{sx:R,children:N?(0,p.jsx)(c.c,{}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(C.q,{backend:I.i6,children:(0,p.jsx)("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",alignContent:"flex-start",justifyContent:"space-between",margin:"10pt",width:"95%",height:"75%",overflowX:"auto"},children:d.map(((e,t)=>E(e,t)))})}),(0,p.jsxs)("div",{style:{width:"95%",height:"20%",border:"1pt dotted #f57c00",borderRadius:"1em",overflowY:"auto"},...O(),children:[(0,p.jsx)("input",{...D()}),(0,p.jsx)(f.c,{sx:{position:"relative",height:"100%",widht:"100%"},children:(0,p.jsxs)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},children:[(0,p.jsx)(y.c,{fontSize:"large",color:"primary"}),(0,p.jsx)(o.c,{children:"Click or Drag Files to here"})]})})]}),(0,p.jsxs)("div",{style:{display:"flex",marginTop:"2em"},children:[(0,p.jsx)(v.c,{variant:"outlined",disabled:a.length<=0,onClick:g,children:"Submit"}),(0,p.jsx)(v.c,{variant:"outlined",onClick:x,disabled:a.length<=0,children:"Clear All"}),(0,p.jsx)(v.c,{variant:"outlined",onClick:r,children:"Close"})]})]})})})};var D=i(9672),E=(i(3243),i(2612)),N=i(1060),P=i(2532),L=i(8372);const U={backgroundImage:'linear-gradient(rgba(0, 0, 0, 0.45), rgba(0, 0, 0, 0.45)), url("/img/Online/MeditationON.webp")'},W=()=>{const e=(0,s.c)("(min-width:1200px)"),{openModal:t}=(0,P.c)(),[i,h]=(0,n.useState)([]),[g,u]=(0,n.useState)(!1),[m,f]=(0,n.useState)(null),v=async()=>{console.log("test getPosts");const e=await(async e=>{try{return await L.c.get("/api/MeditationON/getPosts".concat(0===e.length?"":"?lastVisible=".concat(e.at(-1).ID,"&timeStamp=").concat(e.at(-1).Timestamp)))}catch{throw new Error}})(i);e.data.length>0?h((t=>[...t,...e.data])):u(!0)};(0,n.useEffect)((()=>{i.length%12!==0&&u(!0)}),[i]),(0,n.useEffect)((()=>(window.onpopstate=()=>{f(!0),console.log("test restore"),h(JSON.parse(sessionStorage.getItem("posts")))},f(!1),()=>{window.onpopstate=()=>{}})),[]),(0,n.useEffect)((()=>{null===m||m||v()}),[m]),(0,n.useEffect)((()=>()=>{sessionStorage.setItem("posts",JSON.stringify(i))}));const j=(0,n.useRef)();return(0,n.useEffect)((()=>{j.current&&!g&&i.length>=12&&setTimeout((()=>{try{const e=j.current.clientHeight,t=window.innerHeight-500;console.log("test content",e),console.log("test screen",t),e>100&&e<t&&v()}catch(e){}}),500)}),[i]),(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("div",{className:"title-wrapper",style:U,children:(0,p.jsx)("div",{className:"title",children:(0,p.jsx)(o.c,{variant:"h4",fontWeight:830,sx:{letterSpacing:"0.4em",pl:"0.4em",color:"white"},children:"\ubb35\uc0c1 ON"})})}),(0,p.jsx)("div",{className:"container-wrapper",children:(0,p.jsx)("div",{className:"container",style:{padding:"0em 0.2em"},children:i.length<=0?(0,p.jsx)(r.c,{alignItems:"center",children:(0,p.jsx)(c.c,{})}):(0,p.jsx)(D.c,{dataLength:i.length,next:v,hasMore:!g,loader:(0,p.jsx)(r.c,{alignItems:"center",children:(0,p.jsx)(c.c,{})}),scrollThreshold:1,style:{overflowY:"hidden"},children:(0,p.jsx)(a.c,{ref:j,cols:e?4:3,gap:2.5,children:(0,p.jsx)(x,{posts:i})})})})}),(0,p.jsx)(E.c,{children:(0,p.jsx)(l.c,{variant:"primary",style:{position:"fixed",right:"2vw",bottom:"3vh"},onClick:()=>t(O,{}),children:(0,p.jsx)(d.c,{})})}),g&&(0,p.jsx)(N.c,{})]})}},3243:()=>{}}]);
//# sourceMappingURL=936.68d2543f.chunk.js.map